(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["suppliermanage"],{"0137":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-notification"},[a("div",{staticClass:"flex-v-center tool-bar"},[t._v("费用报表统计图")]),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("el-date-picker",{attrs:{clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getTwo},model:{value:t.twoYearDate,callback:function(e){t.twoYearDate=e},expression:"twoYearDate"}})],1),a("div",{staticStyle:{width:"95%",display:"flex",margin:"30px auto"}},[a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartTwo"}}),t.showFlag?a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartTwoDetail"}}):t._e()]),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("el-date-picker",{attrs:{clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getThree},model:{value:t.threeYearDate,callback:function(e){t.threeYearDate=e},expression:"threeYearDate"}})],1),t._m(0),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("el-date-picker",{attrs:{clearable:!1,type:"year","value-format":"yyyy",editable:!1,placeholder:"选择年月"},on:{change:t.getFour},model:{value:t.fourYearDate,callback:function(e){t.fourYearDate=e},expression:"fourYearDate"}})],1),t._m(1),t.layer?a("layer",{attrs:{title:"详情",width:"80%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwor-info"},[a("table",{staticClass:"f-14 order-info"},[a("tr",[a("td",{staticStyle:{width:"5%"}}),a("td",{staticStyle:{width:"6%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"17%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"9%"}})]),a("tr",[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("报销人")]),a("th",[t._v("报销部门")]),a("th",[t._v("报销摘要")]),a("th",[t._v("费用类别")]),a("th",[t._v("凭证号")]),a("th",[t._v("费用类别明细")]),a("th",[t._v("总费用")]),a("th",[t._v("费用产生年份")]),a("th",[t._v("费用产生月份")]),a("th",[t._v("备注")])]),t._l(t.departData,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.commitUser))]),a("td",[t._v(t._s(e.department))]),a("td",[t._v(t._s(e.summary))]),a("td",[t._v(t._s(e.expensesClassify))]),a("td",[t._v(t._s(e.voucherNo))]),a("td",[t._v(t._s(e.secondClassify))]),a("td",[t._v("￥ "+t._s(e.totalAmount))]),a("td",[t._v(t._s(e.dataYear))]),a("td",[t._v(t._s(e.dataMonth))]),a("td",[t._v(t._s(e.remark))])])}))],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"310px",width:"90%",display:"flex",margin:"60px auto"}},[a("div",{staticStyle:{width:"80%",height:"300px","margin-top":"20px"},attrs:{id:"chartThree"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"0 auto"}},[a("div",{staticStyle:{width:"80%",height:"500px",margin:"0 auto"},attrs:{id:"chartFour"}})])}],r=(a("a450"),a("566e"),a("1cab")),n=a.n(r);function o(t){if(n()(t))return t}var l=a("1a7d"),c=a.n(l),p=a("48e8"),u=a.n(p),d=a("32db"),m=a.n(d);function f(t,e){if("undefined"!==typeof m.a&&u()(Object(t))){var a=[],s=!0,i=!1,r=void 0;try{for(var n,o=c()(t);!(s=(n=o.next()).done);s=!0)if(a.push(n.value),e&&a.length===e)break}catch(l){i=!0,r=l}finally{try{s||null==o["return"]||o["return"]()}finally{if(i)throw r}}return a}}var h=a("9822");function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(t,e){return o(t)||f(t,e)||Object(h["a"])(t,e)||v()}a("fc02");var g={name:"report-form",data:function(){return{twoYearDate:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),threeYearDate:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),chartOneList:[],yearDate:(new Date).getFullYear()+"",fourYearDate:(new Date).getFullYear()+"",totalNum:"",totalPrice:"",layer:!1,departData:[],showFlag:!0}},mounted:function(){this.getDepart(this.twoYearDate.split("-")[0],this.twoYearDate.split("-")[1]),this.getType(this.threeYearDate.split("-")[0],this.threeYearDate.split("-")[1]),this.getFour()},methods:{addRezo:function(t){return t>9?t:"0"+t},getTwo:function(){var t=this.twoYearDate.split("-"),e=_(t,2),a=e[0],s=e[1];this.getDepart(a,s)},getThree:function(){var t=this.threeYearDate.split("-"),e=_(t,2),a=e[0],s=e[1];this.getType(a,s)},getDepart:function(t,e){var a=this,s=this;this.$http.get("/haolifa/report/expense/classifyByDepartmentAll?year=".concat(t,"&month=").concat(e)).then((function(i){i.length?a.showFlag=!0:a.showFlag=!1;var r=[],n=[];i.map((function(t){r.push(t.department),n.push({name:t.department,value:t.totalAmount})}));var o=a.$echarts.init(document.getElementById("chartTwo")),l={title:{text:"部门费用分配",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:r},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:n,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};o.on("click",(function(a){s.getDepartDetail(a.data.name,t,e)})),o.setOption(l),s.getDepartDetail(r[0],t,e)})).catch((function(t){a.$toast(t.msg||t.message)}))},getDepartDetail:function(t,e,a){var s=this,i=this;this.$http.get("/haolifa/report/expense/getAllClassifyWithDepartment?department=".concat(t,"&year=").concat(e,"&month=").concat(a)).then((function(r){var n=[],o=[];r.map((function(t){n.push(t.expensesClassify),o.push({name:t.expensesClassify,value:t.totalAmount})}));var l=s.$echarts.init(document.getElementById("chartTwoDetail")),c={title:{text:"部门明细:"+t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:n},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:o,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};l.on("click",(function(s){i.getDepartDetailSecond(t,s.data.name,e,a)})),l.setOption(c)})).catch((function(t){s.$toast(t.msg||t.message)}))},getDepartDetailSecond:function(t,e,a,s){var i=this;this.$http.get("/haolifa/expenses/list?pageNum=1&pageSize=999&department=".concat(t,"&classifyName=").concat(e,"&year=").concat(a,"&month=").concat(s)).then((function(t){i.layer=!0,i.departData=t.list})).catch((function(t){i.$toast(t.msg||t.message)}))},getType:function(t,e){var a=this,s=this;this.$http.get("/haolifa/report/expense/getAllClassify?year=".concat(t,"&month=").concat(e)).then((function(i){var r=[],n=[];i.map((function(t){r.push(t.expensesClassify),n.push({name:t.expensesClassify,value:t.totalAmount})}));var o=a.$echarts.init(document.getElementById("chartThree")),l={title:{text:"费用分配",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:r},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:n,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};o.on("click",(function(a){s.getDepartDetailSecond("",a.data.name,t,e)})),o.setOption(l)})).catch((function(t){a.$toast(t.msg||t.message)}))},getTypeDetail:function(t){var e=this;this.$http.get("/haolifa/report/expense/getAllClassifyWithFirstClassify?classify="+t).then((function(a){var s=[],i=[];a.map((function(t){s.push(t.department),i.push({name:t.secondClassify,value:t.totalAmount})}));var r=e.$echarts.init(document.getElementById("chartThreeDetail")),n={title:{text:"费用明细:"+t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.setOption(n)})).catch((function(t){e.$toast(t.msg||t.message)}))},getFour:function(){var t=this;this.$http.get("/haolifa/report/expense/total-by-month?year="+this.fourYearDate).then((function(e){var a=[],s=[];e.map((function(t){a.push(t.dataMonth+"月"),s.push(t.totalAmount)}));var i=t.$echarts.init(document.getElementById("chartFour")),r={color:["#3398DB"],title:{text:"年度费用按月统计",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}元"},xAxis:{type:"category",data:a},yAxis:{type:"value"},series:[{name:"费用",barWidth:"30%",data:s,type:"bar"}]};i.setOption(r)}))}}},y=g,b=(a("dc62"),a("5d22")),x=Object(b["a"])(y,s,i,!1,null,null,null);e["default"]=x.exports},"0324":function(t,e,a){"use strict";a("c1c7")},"0c13":function(t,e,a){"use strict";a("d6cf")},"0d14":function(t,e,a){"use strict";a("5d0a")},"12b1":function(t,e,a){"use strict";a("1d8e")},"1a7d":function(t,e,a){t.exports=a("1d13")},"1d13":function(t,e,a){a("383f"),a("87a4"),t.exports=a("5e01")},"1d8e":function(t,e,a){},"34f5":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var s=a("7aae"),i=a.n(s);function r(t,e,a){return e in t?i()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},3907:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchaseadd flex-col"},[a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"机加工合同号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供方单位"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:"0"}},[t._v("合同状态")]),t._l(t.statusList,(function(e){return a("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])}))],2),a("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),a("div",{staticClass:"flex-item"}),a("router-link",{attrs:{to:"/purchsemanage-entrust/add"}},[a("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"}},[t._v("新增机加工订单")])],1)],1),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{method:"get","page-size":20,param:t.filter,url:"/haolifa/purchase-order/list/1"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",[t._v(t._s(i))]),a("td",[t._v(t._s(s.purchaseOrderNo))]),a("td",[t._v(t._s(s.supplierName))]),a("td",[t._v(t._s(s.deliveryTime))]),a("td",[t._v(t._s(s.totalCount))]),a("td",[t._v(t._s(t.statusList[s.status-1].name))]),a("td",[t._v(t._s(s.createUserId))]),a("td",[t._v(t._s(s.createTime))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("查看")]),1==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approve(s.purchaseOrderNo)}}},[t._v("发起审批")]):t._e(),3==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.createInspect(s.id)}}},[t._v("生成报检单")]):t._e(),1==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.updatePurchase(s.id)}}},[t._v("编辑")]):t._e(),2==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approveProgress(s)}}},[t._v("审批进度")]):t._e(),1==s.status||4==s.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.deletePurchase(s.purchaseOrderNo)}}},[t._v("删除")]):t._e(),3==s.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.completePurchase(s.purchaseOrderNo)}}},[t._v("采购完成")]):t._e()])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("机加工合同号")]),a("th",[t._v("供方单位")]),a("th",[t._v("加工完成日期")]),a("th",[t._v("订单总数量")]),a("th",[t._v("订单状态")]),a("th",[t._v("创建人")]),a("th",[t._v("创建日期")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?a("layer",{attrs:{title:"订单折损",width:"450px"}},[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损金额"},model:{value:t.wreck.wreckAmount,callback:function(e){t.$set(t.wreck,"wreckAmount",e)},expression:"wreck.wreckAmount"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损原因"},model:{value:t.wreck.wreckReason,callback:function(e){t.$set(t.wreck,"wreckReason",e)},expression:"wreck.wreckReason"}})],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14"},[a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("机加工订单")]),a("td",{staticClass:"b",attrs:{colspan:"6"}},[a("a",{staticClass:"a",staticStyle:{color:"#008eff"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),a("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),a("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),a("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),a("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),a("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(e,s){return a("tr",{key:e.id},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitPrice))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalAmount))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])})),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("总计")]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),a("td",{attrs:{colspan:"1"}})]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),a("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),a("td",{attrs:{colspan:"3"}},[t._v("批准：")]),a("td",{attrs:{colspan:"3"}},[t._v("审核：")]),a("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(a("4890"),a("9b68")),n={name:"purchsemanage-entrust",components:{DataList:r["a"]},data:function(){return{natureList:["国有","三资","集体","联营","私营"],statusList:[{status:1,name:"待审批"},{status:2,name:"审批中"},{status:3,name:"采购中"},{status:4,name:"审批不通过"},{status:5,name:"采购完成"}],filter:{orderNo:"",supplierName:"",status:0,createUserId:0},wreck:{orderNo:"",wreckAmount:0,wreckReason:""},completeLayer:!1,confirmLayer:!1,loading:!1,info:{},itemList:[],orderUrl:"",layer:!1}},created:function(){this.filter.createUserId=0},methods:{getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/purchase-order/info/".concat(t)).then((function(t){e.info=t.order,e.orderUrl=t.order.fileUrl,e.itemList=t.items,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10),console.log("info",e.info),console.log("itemList",e.itemList)})).catch((function(t){e.$toast(t.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))},createInspect:function(t){var e=this;this.$http.get("/haolifa/purchase-order/createInspect/".concat(t)).then((function(t){console.log("报检单号",t),e.$confirm({title:"完善报检单",text:"现在去完善报检单？",color:"blue",btns:["稍后再说","现在完善"],yes:function(){e.$router.push("/applyBuy-material/edit?id=".concat(t))}})}))},approveProgress:function(t){this.$router.push("/purchsemanage-entrust/approveProgress?formNo=".concat(t.purchaseOrderNo,"&formId=0"))},approve:function(t){var e=this;this.$confirm({title:"发起审批",text:"确定发起审批？",color:"blue",btns:["取消","确认"],yes:function(){e.$http.get("/haolifa/purchase-order/approve/".concat(t,"/1")).then((function(t){e.$toast("发起成功"),e.$refs.list.update()})).catch((function(t){e.$toast(t.msg||t.message)}))}})},updatePurchase:function(t){this.$router.push("/purchsemanage-entrust/add?formId=".concat(t))},completePurchase:function(t){this.completeLayer=!0,this.wreck.orderNo=t},complete:function(){var t=this;this.$http.post("/haolifa/purchase-order/complete",this.wreck).then((function(e){t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},deletePurchase:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除该订单么？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/purchase-order/delete/".concat(t)).then((function(t){e.$toast("删除成功"),e.$refs.list.update()})).catch((function(t){e.$toast(t.msg)}))}})}}},o=n,l=(a("aed2"),a("5d22")),c=Object(l["a"])(o,s,i,!1,null,null,null);e["default"]=c.exports},"394af":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"abs scroll-y"},[a("div",{staticClass:"metalwork-info",staticStyle:{width:"100%",margin:"0 auto"}},[a("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[a("icon-btn",{staticClass:"mr-15",on:{click:function(e){return t.$router.back()}}},[t._v("arrow_back")]),a("div",{staticClass:"flex-item"},[t._v("审批进度")])],1),a("div",{staticStyle:{"min-width":"1200px"}},t._l(t.list,(function(e,s){return a("div",{key:s,staticClass:"approve"},[a("p",[t._v(t._s(e.roleName))]),a("p",{class:4==e.auditResult?"button ccc":"button"},[t._v(t._s(e.stepName))]),s<t.list.length-1?a("span",[t._v("-----\x3e")]):t._e(),a("p",[t._v(t._s(t.status[e.auditResult])+t._s(e.auditTime))]),e.child.length>0?a("div",{staticClass:"approve",staticStyle:{position:"absolute",top:"123px"}},[a("div",{staticClass:"height-line"}),a("div",{staticClass:"bottom-arrows"}),a("p",[t._v(t._s(e.child[0].roleName))]),a("p",{class:4==e.child[0].auditResult?"button ccc":"button"},[t._v(t._s(e.child[0].stepName))]),a("p",[t._v(t._s(t.status[e.child[0].auditResult])+t._s(e.auditTime))]),a("div",{staticClass:"right-height-line"}),a("div",{staticClass:"top-arrows"})]):t._e()])})),0)])])},i=[],r={name:"purchsemanage-purchaseapproveProgress",data:function(){return{list:[],status:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},created:function(){this.getInfo(this.$route.query.formNo,this.$route.query.formId)},methods:{getInfo:function(t,e){var a=this;console.log(t,e),this.$http.get("/haolifa/flowInstance/flow/progress?formNo=".concat(t,"&formId=").concat(e)).then((function(t){console.log(t),a.list=t})).catch((function(t){a.$toast(t.msg||t.message)}))}}},n=r,o=(a("0c13"),a("5d22")),l=Object(o["a"])(n,s,i,!1,null,null,null);e["default"]=l.exports},3986:function(t,e,a){},4517:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apply-buy-add"},[a("div",{staticClass:"content"},[a("div",{staticClass:"title b f-18 mb-10"},[t._v(t._s(t.isAdd?"新增":"编辑")+"采购订单")]),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方"},model:{value:t.form.demander,callback:function(e){t.$set(t.form,"demander",e)},expression:"form.demander"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方地址"},model:{value:t.form.demanderAddr,callback:function(e){t.$set(t.form,"demanderAddr",e)},expression:"form.demanderAddr"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系人"},model:{value:t.form.demanderLinkman,callback:function(e){t.$set(t.form,"demanderLinkman",e)},expression:"form.demanderLinkman"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系电话"},model:{value:t.form.demanderPhone,callback:function(e){t.$set(t.form,"demanderPhone",e)},expression:"form.demanderPhone"}})],1),a("div",{staticClass:"flex"},[a("select-box",{staticStyle:{"margin-right":"20px",width:"240px"},attrs:{list:t.supplierList,label:"供应商"},on:{change:function(e){return t.changeSupplier()}},model:{value:t.form.supplierNo,callback:function(e){t.$set(t.form,"supplierNo",e)},expression:"form.supplierNo"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方地址"},model:{value:t.form.supplierAddr,callback:function(e){t.$set(t.form,"supplierAddr",e)},expression:"form.supplierAddr"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系人"},model:{value:t.form.supplierLinkman,callback:function(e){t.$set(t.form,"supplierLinkman",e)},expression:"form.supplierLinkman"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系电话"},model:{value:t.form.suppilerPhone,callback:function(e){t.$set(t.form,"suppilerPhone",e)},expression:"form.suppilerPhone"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方确认人"},model:{value:t.form.supplierConfirmer,callback:function(e){t.$set(t.form,"supplierConfirmer",e)},expression:"form.supplierConfirmer"}})],1),a("div",{staticClass:"flex"},[a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"确认时间"},model:{value:t.form.confirmTime,callback:function(e){t.$set(t.form,"confirmTime",e)},expression:"form.confirmTime"}}),a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"交货时间"},model:{value:t.form.deliveryTime,callback:function(e){t.$set(t.form,"deliveryTime",e)},expression:"form.deliveryTime"}}),a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办时间"},model:{value:t.form.operateTime,callback:function(e){t.$set(t.form,"operateTime",e)},expression:"form.operateTime"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办人"},model:{value:t.form.operatorUserName,callback:function(e){t.$set(t.form,"operatorUserName",e)},expression:"form.operatorUserName"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",attrs:{label:"采购合同编号"},model:{value:t.form.orderNo,callback:function(e){t.$set(t.form,"orderNo",e)},expression:"form.orderNo"}}),a("select-box",{staticClass:"flex-item",attrs:{list:t.payTypeList,label:"付款方式"},model:{value:t.form.payType,callback:function(e){t.$set(t.form,"payType",e)},expression:"form.payType"}})],1),a("div",{staticClass:"b",staticStyle:{margin:"20px 0 10px"}},[t._v("采购物料项")]),t._l(t.form.itemList,(function(e,s){return a("div",{key:s,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[a("div",{staticClass:"flex-item"},[a("div",{staticClass:"flex"},[a("select-box",{staticClass:"flex-item mr-10",attrs:{list:t.nameList,label:"物料名称"},model:{value:e.materialName,callback:function(a){t.$set(e,"materialName",a)},expression:"item.materialName"}}),a("select-box",{staticClass:"flex-item mr-10",attrs:{list:t.tuhaoList,onchange:t.materialInfo(e),label:"物料图号"},model:{value:e.materialGraphNo,callback:function(a){t.$set(e,"materialGraphNo",a)},expression:"item.materialGraphNo"}}),a("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"数量"},model:{value:e.number,callback:function(a){t.$set(e,"number",a)},expression:"item.number"}}),a("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单位"},model:{value:e.unit,callback:function(a){t.$set(e,"unit",a)},expression:"item.unit"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-10",attrs:{label:"材质"},model:{value:e.material,callback:function(a){t.$set(e,"material",a)},expression:"item.material"}}),a("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格"},model:{value:e.specification,callback:function(a){t.$set(e,"specification",a)},expression:"item.specification"}}),a("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单价"},model:{value:e.unitPrice,callback:function(a){t.$set(e,"unitPrice",a)},expression:"item.unitPrice"}}),a("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单重"},model:{value:e.unitWeight,callback:function(a){t.$set(e,"unitWeight",a)},expression:"item.unitWeight"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",attrs:{label:"备注"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}})],1)]),t.form.itemList.length>1?a("div",[a("icon-btn",{attrs:{small:""},on:{click:function(e){return t.form.itemList.splice(s,1)}}},[t._v("close")])],1):t._e()])})),a("div",{staticClass:"card a flex-center",on:{click:function(e){return t.addItem()}}},[t._m(0)]),a("div",{staticClass:"flex"},[a("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(e){return t.submit()}}},[t._v("提交")]),a("btn",{attrs:{big:"",flat:""},on:{click:function(e){return t.$router.back()}}},[t._v("取消")])],1)],2)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-v-center"},[a("i",{staticClass:"icon mr-10"},[t._v("add")]),a("span",[t._v("添加采购物料项")])])}],r=(a("1bc78"),a("246f"),a("566e"),{name:"purchsemanage-purchaseadd",data:function(){return{supplierInfoList:[],supplierList:[],form:{id:null,confirmTime:"",deliveryTime:"",demander:"山西好利阀机械制造有限公司",demanderAddr:"山西省侯马经济开发区旺旺北支路东侧",demanderLinkman:"",demanderPhone:"",operateTime:"",operatorUserName:"",orderNo:"",suppilerPhone:"",supplierAddr:"",supplierConfirmer:"",supplierLinkman:"",supplierName:"",supplierNo:"",payType:"",itemList:[{id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}]},isAdd:!0,nameList:[],tuhaoList:[],payTypeList:[{value:"款到发货",text:"款到发货"},{value:"月结",text:"月结"},{value:"先预付30%，发货前付清剩余货款",text:"先预付30%，发货前付清剩余货款"},{value:"收到发票后60天内付清货款",text:"收到发票后60天内付清货款"}]}},mounted:function(){var t=this,e=this.$route.query.formId;this.form.id=e,this.$http.get("/haolifa/supplier/list-all").then((function(e){t.supplierList=e.map((function(t){return{value:t.suppilerNo,text:t.suppilerName}})),t.supplierInfoList=e})),e&&(this.isAdd=!1,this.$http.get("/haolifa/purchase-order/info/"+e).then((function(e){t.form.id=e.order.id,t.form.demander=e.order.demander,t.form.demanderAddr=e.order.demanderAddr,t.form.demanderLinkman=e.order.demanderLinkman,t.form.demanderPhone=e.order.demanderPhone,t.form.operatorUserName=e.order.operatorUserName,t.form.suppilerPhone=e.order.suppilerPhone,t.form.supplierAddr=e.order.supplierAddr,t.form.supplierConfirmer=e.order.supplierConfirmer,t.form.supplierLinkman=e.order.supplierLinkman,t.form.supplierName=e.order.supplierName,t.form.supplierNo=e.order.supplierNo,t.form.payType=e.order.payType,t.form.orderNo=e.order.purchaseOrderNo,t.form.confirmTime=e.order.confirmTime.substring(0,10),t.form.deliveryTime=e.order.deliveryTime.substring(0,10),t.form.operateTime=e.order.operateTime.substring(0,10),t.form.itemList=e.items.map((function(t){return{id:t.id,material:t.material,materialGraphNo:t.materialGraphNo,materialName:t.materialName,number:t.number,remark:t.remark,specification:t.specification,unit:t.unit,unitPrice:t.unitPrice,unitWeight:t.unitWeight}}))})))},methods:{materialInfo:function(t){},changeSupplier:function(){var t=this;if(this.supplierInfoList.forEach((function(e,a){e.suppilerNo==t.form.supplierNo&&(t.form.suppilerPhone=e.phone,t.form.supplierAddr=e.address,t.form.supplierLinkman=e.responsiblePerson,t.form.supplierName=e.suppilerName)})),this.nameList=this.tuhaoList=[],this.form.supplierNo){var e={pageNum:1,pageSize:500,supplierNo:this.form.supplierNo};this.$http.post("/haolifa/supplier-pro/list",e).then((function(e){var a=e.list;t.nameList=a.map((function(t){return{value:t.materialName,text:t.materialName}})),t.tuhaoList=a.map((function(t){return{value:t.materialGraphNo,text:t.materialGraphNo}}))})).catch((function(e){t.$toast(e.msg||e.message)}))}},addItem:function(){this.form.itemList.push({id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}),this.$forceUpdate()},submit:function(){var t=this,e={materialName:"物料名称",materialGraphNo:"物料图号",number:"数量",material:"材质",specification:"规格",unit:"单位",unitPrice:"单价",unitWeight:"单重"},a=!0;this.form.itemList.forEach((function(s,i){for(var r in s)e[r]&&!s[r]&&(t.$toast("请填写第 ".concat(i+1," 项 ").concat(e[r])),a=!1)})),a&&this.$http.post(this.isAdd?"/haolifa/purchase-order/save/0":"/haolifa/purchase-order/update",this.form).then((function(e){t.$toast(t.isAdd?"创建成功":"更新成功"),t.$router.push("/purchsemanage-purchase/addList")})).catch((function(e){t.$toast(e.message||e.msg)}))}}}),n=r,o=(a("0324"),a("5d22")),l=Object(o["a"])(n,s,i,!1,null,null,null);e["default"]=l.exports},"4a2e":function(t,e,a){"use strict";a("8a7b7")},"4f0e":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-supplier-info abs scroll-y"},[a("div",{staticClass:"form-content"},[a("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[a("icon-btn",{staticClass:"mr-15",on:{click:function(e){return t.$router.back()}}},[t._v("arrow_back")]),a("div",{staticClass:"flex-item"},[t._v("订单详情")]),a("div",{staticClass:"flex-item ml-20"},[a("a",{staticClass:"a",staticStyle:{color:"#008eff"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])],1),a("table",{staticClass:"f-14"},[t._m(0),t._m(1),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),a("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),a("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),a("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),a("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),a("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),t._m(2),t._m(3),t._l(t.itemList,(function(e,s){return a("tr",{key:e.id},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitPrice))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalAmount))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])})),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("总计")]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),a("td",{attrs:{colspan:"1"}})]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v(t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。")])]),t._m(4),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v(t._s(t.info.payType))])]),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11)],2)])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"b",attrs:{colspan:"12"}},[t._v("机加工订单")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，"),a("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),a("td",{attrs:{colspan:"3"}},[t._v("批准：")]),a("td",{attrs:{colspan:"3"}},[t._v("审核：")]),a("td",{attrs:{colspan:"3"}},[t._v("经办：")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])}],r={name:"purchsemanage-purchaseinfo",data:function(){return{loading:!1,info:{},itemList:[],orderUrl:""}},created:function(){this.getInfo()},methods:{getInfo:function(){var t=this,e=this.$route.query.formId;console.log(e),this.info.id=e,this.$http.get("/haolifa/purchase-order/info/".concat(e)).then((function(e){t.info=e.order,t.orderUrl=e.order.fileUrl,t.itemList=e.items,t.info.operateTime=e.order.operateTime.substring(0,10),t.info.confirmTime=e.order.confirmTime.substring(0,10),t.info.createTime=e.order.createTime.substring(0,10),t.info.deliveryTime=e.order.deliveryTime.substring(0,10),t.info.updateTime=e.order.updateTime.substring(0,10),console.log("info",t.info),console.log("itemList",t.itemList)})).catch((function(e){t.$toast(e.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))}}},n=r,o=(a("0d14"),a("5d22")),l=Object(o["a"])(n,s,i,!1,null,null,null);e["default"]=l.exports},"576b":function(t,e,a){"use strict";a("582d")},"582d":function(t,e,a){},"5d0a":function(t,e,a){},"5e01":function(t,e,a){var s=a("970b"),i=a("acc0");t.exports=a("ce99").getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return s(e.call(t))}},6371:function(t,e,a){},"74c6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-notification"},[a("div",{staticClass:"flex-v-center tool-bar"},[t._v("采购报表统计图")]),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("el-date-picker",{attrs:{clearable:!1,type:"year","value-format":"yyyy",editable:!1,placeholder:"选择年月"},on:{change:t.getBuyOne},model:{value:t.yearDate,callback:function(e){t.yearDate=e},expression:"yearDate"}}),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff"}},[t._v("累计采购合同总金额:"+t._s(Math.round(100*t.totalNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff"}},[t._v("累计挂账总金额:"+t._s(Math.round(100*t.registeredNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff"}},[t._v("累计未付款总金额:"+t._s(Math.round(100*t.unpayNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff"}},[t._v("累计已付款总金额:"+t._s(Math.round(100*t.payTotalNum)/100)+"元")])],1),t._m(0),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("p",{staticStyle:{"margin-left":"20px",color:"#008eff"}},[t._v("合计合同金额:"+t._s(Math.round(100*t.ctotalNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff"}},[t._v("合计挂账金额:"+t._s(Math.round(100*t.cregisteredNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff"}},[t._v("合计未付款金额:"+t._s(Math.round(100*t.cunpayNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff"}},[t._v("合计已付款金额:"+t._s(Math.round(100*t.cpayTotalNum)/100)+"元")])]),t._m(1),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("el-date-picker",{attrs:{clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getByMonth},model:{value:t.yearMonthDate,callback:function(e){t.yearMonthDate=e},expression:"yearMonthDate"}}),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff"}},[t._v("累计采购合同总金额:"+t._s(Math.round(100*t.mtotalNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff"}},[t._v("累计挂账总金额:"+t._s(Math.round(100*t.mregisteredNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff"}},[t._v("累计未付款总金额:"+t._s(Math.round(100*t.munpayNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff"}},[t._v("累计已付款总金额:"+t._s(Math.round(100*t.mpayTotalNum)/100)+"元")])],1),t._m(2),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("el-date-picker",{staticStyle:{"margin-top":"50px"},attrs:{clearable:!1,type:"year","value-format":"yyyy",editable:!1,placeholder:"选择年月"},on:{change:t.getBuyThree},model:{value:t.threeYearDate,callback:function(e){t.threeYearDate=e},expression:"threeYearDate"}})],1),t._m(3)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"20px auto"}},[a("div",{staticStyle:{width:"100%",height:"600px",margin:"0 auto"},attrs:{id:"buyOne"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"30px auto"}},[a("div",{staticStyle:{width:"100%",height:"500px",margin:"0 auto"},attrs:{id:"buyTwo"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"20px auto"}},[a("div",{staticStyle:{width:"100%",height:"600px",margin:"0 auto"},attrs:{id:"byMonth"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"20px auto"}},[a("div",{staticStyle:{width:"100%",height:"600px",margin:"0 auto"},attrs:{id:"buyThree"}})])}],r=(a("fc02"),a("a450"),a("566e"),a("34f5")),n={name:"cgreport-form",data:function(){var t;return t={yearDate:(new Date).getFullYear()+"",threeYearDate:(new Date).getFullYear()+"",yearMonthDate:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),totalNum:"",totalPrice:"",payTotalNum:0,unpayNum:0},Object(r["a"])(t,"totalNum",0),Object(r["a"])(t,"registeredNum",0),Object(r["a"])(t,"mpayTotalNum",0),Object(r["a"])(t,"munpayNum",0),Object(r["a"])(t,"mtotalNum",0),Object(r["a"])(t,"mregisteredNum",0),Object(r["a"])(t,"cpayTotalNum",0),Object(r["a"])(t,"cunpayNum",0),Object(r["a"])(t,"ctotalNum",0),Object(r["a"])(t,"cregisteredNum",0),t},mounted:function(){this.getBuyOne(),this.getBuyThree(),this.getByMonth()},methods:{addRezo:function(t){return t>9?t:"0"+t},getBuyOne:function(){var t=this;this.payTotalNum=this.unpayNum=this.registeredNum=this.totalNum=0,this.$http.get("/haolifa/report/purchase/getPurchases?year=".concat(this.yearDate)).then((function(e){var a=[],s=[],i=[],r=[],n=[];e.map((function(e){a.push(e.supplierName),s.push(e.payTotal),i.push(e.unpay),r.push(e.total),n.push(e.registered),e.payTotal&&(t.payTotalNum=t.payTotalNum+ +e.payTotal),t.unpayNum=t.unpayNum+(e.unpay?+e.unpay:0),t.totalNum=t.totalNum+(e.total?+e.total:0),t.registeredNum=t.registeredNum+(e.registered?+e.registered:0)})),t.getBuyTwo(a[0]);var o=t,l=t.$echarts.init(document.getElementById("buyOne")),c={title:{text:"采购按年份统计",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["已付款","未付款","挂账金额","合同金额"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a,axisLabel:{rotate:60}}],yAxis:[{type:"value"}],series:[{name:"已付款",type:"bar",barWidth:"10%",data:s},{name:"未付款",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"挂账金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:n},{name:"合同金额",type:"bar",color:"#67c23a",barWidth:"10%",data:r}]};l.on("click",(function(t){o.getBuyTwo(t.name)})),l.setOption(c),o.getBuyTwo(a[0])}))},getBuyTwo:function(t){var e=this;this.cayTotalNum=this.cunpayNum=this.cregisteredNum=this.ctotalNum=0,this.$http.get("/haolifa/report/purchase/selectBySupplierName?purchase=".concat(t,"&year=").concat(this.yearDate)).then((function(a){var s=[],i=[],r=[],n=[],o=[];a.map((function(t){s.push(t.createTime),i.push(t.payTotal),o.push(t.unpay),r.push(t.total),n.push(t.registered),t.payTotal&&(e.cpayTotalNum=e.cpayTotalNum+ +t.payTotal),e.cunpayNum=e.cunpayNum+(t.unpay?+t.unpay:0),e.ctotalNum=e.ctotalNum+(t.total?+t.total:0),e.cregisteredNum=e.cregisteredNum+(t.registered?+t.registered:0)}));var l=e.$echarts.init(document.getElementById("buyTwo")),c={title:{text:t+"按月统计",x:"left"},legend:{data:["已付款","未付款","挂账金额","合同金额"]},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:s}],yAxis:[{type:"value"}],series:[{name:"已付款",type:"bar",barWidth:"10%",data:i},{name:"未付款",type:"bar",barWidth:"10%",color:"#3398DB",data:o},{name:"挂账金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:n},{name:"合同金额",type:"bar",color:"#67c23a",barWidth:"10%",data:r}]};l.setOption(c)}))},getByMonth:function(){var t=this;this.mpayTotalNum=this.munpayNum=this.mregisteredNum=this.mtotalNum=0;var e=this.yearMonthDate.split("-"),a=e[0],s=e[1];this.$http.get("/haolifa/report/purchase/getPurchases?year=".concat(a,"&month=").concat(s)).then((function(e){var a=[],s=[],i=[],r=[],n=[];e.map((function(e){a.push(e.supplierName),s.push(e.payTotal),i.push(e.unpay),r.push(e.total),n.push(e.registered),e.payTotal&&(t.mpayTotalNum=t.mpayTotalNum+ +e.payTotal),t.munpayNum=t.munpayNum+(e.unpay?+e.unpay:0),t.mtotalNum=t.mtotalNum+(e.total?+e.total:0),t.mregisteredNum=t.mregisteredNum+(e.registered?+e.registered:0)}));var o=t.$echarts.init(document.getElementById("byMonth")),l={title:{text:"采购按月份统计",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["已付款","未付款","挂账金额","合同金额"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a,axisLabel:{rotate:60}}],yAxis:[{type:"value"}],series:[{name:"已付款",type:"bar",barWidth:"10%",data:s},{name:"未付款",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"挂账金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:n},{name:"合同金额",type:"bar",color:"#67c23a",barWidth:"10%",data:r}]};o.setOption(l)}))},getBuyThree:function(){var t=this;this.$http.get("/haolifa/report/purchase/getAllPurchase?year=".concat(this.threeYearDate)).then((function(e){var a=[],s=[],i=[],r=[],n=[];e.map((function(t){a.push(t.createTime),s.push(t.payTotal),i.push(t.collected),r.push(t.total),n.push(t.registered)}));var o=t.$echarts.init(document.getElementById("buyThree")),l={title:{text:"采购报表--按月查询采购物资",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["付款金额","回票金额","挂账金额","合同金额"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a,axisLabel:{rotate:60}}],yAxis:[{type:"value"}],series:[{name:"付款金额",type:"bar",barWidth:"10%",data:s},{name:"回票金额",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"挂账金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:n},{name:"合同金额",type:"bar",color:"#67c23a",barWidth:"10%",data:r}]};o.setOption(l)}))}}},o=n,l=a("5d22"),c=Object(l["a"])(o,s,i,!1,null,null,null);e["default"]=c.exports},7746:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apply-buy-add"},[a("div",{staticClass:"content"},[a("div",{staticClass:"title b f-18 mb-10"},[t._v(t._s(t.isAdd?"新增":"编辑")+"机加工订单")]),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方"},model:{value:t.form.demander,callback:function(e){t.$set(t.form,"demander",e)},expression:"form.demander"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方地址"},model:{value:t.form.demanderAddr,callback:function(e){t.$set(t.form,"demanderAddr",e)},expression:"form.demanderAddr"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系人"},model:{value:t.form.demanderLinkman,callback:function(e){t.$set(t.form,"demanderLinkman",e)},expression:"form.demanderLinkman"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系电话"},model:{value:t.form.demanderPhone,callback:function(e){t.$set(t.form,"demanderPhone",e)},expression:"form.demanderPhone"}})],1),a("div",{staticClass:"flex"},[a("select-box",{staticStyle:{"margin-right":"20px",width:"240px"},attrs:{list:t.supplierList,label:"供应商"},on:{change:function(e){return t.changeSupplier()}},model:{value:t.form.supplierNo,callback:function(e){t.$set(t.form,"supplierNo",e)},expression:"form.supplierNo"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方地址"},model:{value:t.form.supplierAddr,callback:function(e){t.$set(t.form,"supplierAddr",e)},expression:"form.supplierAddr"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系人"},model:{value:t.form.supplierLinkman,callback:function(e){t.$set(t.form,"supplierLinkman",e)},expression:"form.supplierLinkman"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系电话"},model:{value:t.form.suppilerPhone,callback:function(e){t.$set(t.form,"suppilerPhone",e)},expression:"form.suppilerPhone"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方确认人"},model:{value:t.form.supplierConfirmer,callback:function(e){t.$set(t.form,"supplierConfirmer",e)},expression:"form.supplierConfirmer"}})],1),a("div",{staticClass:"flex"},[a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"确认时间"},model:{value:t.form.confirmTime,callback:function(e){t.$set(t.form,"confirmTime",e)},expression:"form.confirmTime"}}),a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"交货时间"},model:{value:t.form.deliveryTime,callback:function(e){t.$set(t.form,"deliveryTime",e)},expression:"form.deliveryTime"}}),a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办时间"},model:{value:t.form.operateTime,callback:function(e){t.$set(t.form,"operateTime",e)},expression:"form.operateTime"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办人"},model:{value:t.form.operatorUserName,callback:function(e){t.$set(t.form,"operatorUserName",e)},expression:"form.operatorUserName"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",attrs:{label:"加工合同编号"},model:{value:t.form.orderNo,callback:function(e){t.$set(t.form,"orderNo",e)},expression:"form.orderNo"}}),a("input-box",{staticClass:"flex-item",attrs:{label:"付款方式"},model:{value:t.form.payType,callback:function(e){t.$set(t.form,"payType",e)},expression:"form.payType"}})],1),a("div",{staticClass:"b",staticStyle:{margin:"20px 0 10px"}},[t._v("加工物料项")]),t._l(t.form.itemList,(function(e,s){return a("div",{key:s,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[a("div",{staticClass:"flex-item"},[a("div",{staticClass:"flex"},[a("select-box",{staticClass:"flex-item mr-10",attrs:{list:t.nameList,label:"物料名称"},model:{value:e.materialName,callback:function(a){t.$set(e,"materialName",a)},expression:"item.materialName"}}),a("select-box",{staticClass:"flex-item mr-10",attrs:{list:t.tuhaoList,label:"物料图号"},model:{value:e.materialGraphNo,callback:function(a){t.$set(e,"materialGraphNo",a)},expression:"item.materialGraphNo"}}),a("input-box",{staticClass:"flex-item mr-10",attrs:{type:"number",label:"数量"},model:{value:e.number,callback:function(a){t.$set(e,"number",a)},expression:"item.number"}}),a("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单位"},model:{value:e.unit,callback:function(a){t.$set(e,"unit",a)},expression:"item.unit"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-10",attrs:{label:"材质"},model:{value:e.material,callback:function(a){t.$set(e,"material",a)},expression:"item.material"}}),a("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格"},model:{value:e.specification,callback:function(a){t.$set(e,"specification",a)},expression:"item.specification"}}),a("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单价"},model:{value:e.unitPrice,callback:function(a){t.$set(e,"unitPrice",a)},expression:"item.unitPrice"}}),a("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单重"},model:{value:e.unitWeight,callback:function(a){t.$set(e,"unitWeight",a)},expression:"item.unitWeight"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",attrs:{label:"备注"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}})],1)]),t.form.itemList.length>1?a("div",[a("icon-btn",{attrs:{small:""},on:{click:function(e){return t.form.itemList.splice(s,1)}}},[t._v("close")])],1):t._e()])})),a("div",{staticClass:"card a flex-center",on:{click:function(e){return t.addItem()}}},[t._m(0)]),a("div",{staticClass:"flex"},[a("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(e){return t.submit()}}},[t._v("提交")]),a("btn",{attrs:{big:"",flat:""},on:{click:function(e){return t.$router.back()}}},[t._v("取消")])],1)],2)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-v-center"},[a("i",{staticClass:"icon mr-10"},[t._v("add")]),a("span",[t._v("添加机加工物料项")])])}],r=(a("1bc78"),a("246f"),a("566e"),{name:"purchsemanage-entrustadd",data:function(){return{supplierInfoList:[],supplierList:[],form:{id:null,confirmTime:"",deliveryTime:"",demander:"山西好利阀机械制造有限公司",demanderAddr:"山西省侯马经济开发区旺旺北支路东侧",demanderLinkman:"",demanderPhone:"",operateTime:"",operatorUserName:"",orderNo:"",suppilerPhone:"",supplierAddr:"",supplierConfirmer:"",supplierLinkman:"",supplierName:"",supplierNo:"",payType:"",itemList:[{id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}]},isAdd:!0,nameList:[],tuhaoList:[]}},mounted:function(){var t=this,e=this.$route.query.formId;this.form.id=e,this.$http.get("/haolifa/supplier/list-all/").then((function(e){t.supplierList=e.map((function(t){return{value:t.suppilerNo,text:t.suppilerName}})),t.supplierInfoList=e})),e&&(this.isAdd=!1,this.$http.get("/haolifa/purchase-order/info/"+e).then((function(e){t.form.id=e.order.id,t.form.demander=e.order.demander,t.form.demanderAddr=e.order.demanderAddr,t.form.demanderLinkman=e.order.demanderLinkman,t.form.demanderPhone=e.order.demanderPhone,t.form.operatorUserName=e.order.operatorUserName,t.form.suppilerPhone=e.order.suppilerPhone,t.form.supplierAddr=e.order.supplierAddr,t.form.supplierConfirmer=e.order.supplierConfirmer,t.form.supplierLinkman=e.order.supplierLinkman,t.form.supplierName=e.order.supplierName,t.form.supplierNo=e.order.supplierNo,t.form.payType=e.order.payType,t.form.orderNo=e.order.purchaseOrderNo,t.form.confirmTime=e.order.confirmTime.substring(0,10),t.form.deliveryTime=e.order.deliveryTime.substring(0,10),t.form.operateTime=e.order.operateTime.substring(0,10),t.form.itemList=e.items.map((function(t){return{id:t.id,material:t.material,materialGraphNo:t.materialGraphNo,materialName:t.materialName,number:t.number,remark:t.remark,specification:t.specification,unit:t.unit,unitPrice:t.unitPrice,unitWeight:t.unitWeight}}))})))},methods:{changeSupplier:function(){var t=this;if(console.log(this.form.supplierNo),this.supplierInfoList.forEach((function(e,a){e.suppilerNo==t.form.supplierNo&&(t.form.suppilerPhone=e.phone,t.form.supplierAddr=e.address,t.form.supplierLinkman=e.responsiblePerson,t.form.supplierName=e.suppilerName)})),this.nameList=this.tuhaoList=[],this.form.supplierNo){var e={pageNum:1,pageSize:500,supplierNo:this.form.supplierNo};this.$http.post("/haolifa/supplier-pro/list",e).then((function(e){var a=e.list;t.nameList=a.map((function(t){return{value:t.materialName,text:t.materialName}})),t.tuhaoList=a.map((function(t){return{value:t.materialGraphNo,text:t.materialGraphNo}}))})).catch((function(e){t.$toast(e.msg||e.message)}))}},addItem:function(){this.form.itemList.push({id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}),this.$forceUpdate()},submit:function(){var t=this,e={materialName:"物料名称",materialGraphNo:"物料图号",number:"数量",material:"材质",specification:"规格",unit:"单位",unitPrice:"单价",unitWeight:"单重"},a=!0;this.form.itemList.forEach((function(s,i){for(var r in s)e[r]&&!s[r]&&(t.$toast("请填写第 ".concat(i+1," 项 ").concat(e[r])),a=!1)})),a&&this.$http.post(this.isAdd?"/haolifa/purchase-order/save/1":"/haolifa/purchase-order/update",this.form).then((function(e){t.$toast(t.isAdd?"创建成功":"更新成功"),t.$router.push("/purchsemanage-entrust/addList")})).catch((function(e){t.$toast(e.message||e.msg)}))}}}),n=r,o=(a("576b"),a("5d22")),l=Object(o["a"])(n,s,i,!1,null,null,null);e["default"]=l.exports},"7aae":function(t,e,a){t.exports=a("f263")},"893f":function(t,e,a){},"8a77":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchaseadd flex-col"},[a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"机加工合同号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供方单位"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:"0"}},[t._v("合同状态")]),t._l(t.statusList,(function(e){return a("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])}))],2),a("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),a("div",{staticClass:"flex-item"})]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{method:"get","page-size":20,param:t.filter,url:"/haolifa/purchase-order/list/1"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",[t._v(t._s(i))]),a("td",[t._v(t._s(s.purchaseOrderNo))]),a("td",[t._v(t._s(s.supplierName))]),a("td",[t._v(t._s(s.deliveryTime))]),a("td",[t._v(t._s(s.totalCount))]),a("td",[t._v(t._s(t.statusList[s.status-1].name))]),a("td",[t._v(t._s(s.createUserId))]),a("td",[t._v(t._s(s.createTime))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("查看")])])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("机加工合同号")]),a("th",[t._v("供方单位")]),a("th",[t._v("加工完成日期")]),a("th",[t._v("订单总数量")]),a("th",[t._v("订单状态")]),a("th",[t._v("创建人")]),a("th",[t._v("创建日期")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?a("layer",{attrs:{title:"订单折损",width:"450px"}},[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损金额"},model:{value:t.wreck.wreckAmount,callback:function(e){t.$set(t.wreck,"wreckAmount",e)},expression:"wreck.wreckAmount"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损原因"},model:{value:t.wreck.wreckReason,callback:function(e){t.$set(t.wreck,"wreckReason",e)},expression:"wreck.wreckReason"}})],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14"},[a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("机加工订单")]),a("td",{staticClass:"b",attrs:{colspan:"6"}},[a("a",{staticClass:"a",staticStyle:{color:"#008eff"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),a("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),a("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),a("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),a("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),a("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(e,s){return a("tr",{key:e.id},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitPrice))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalAmount))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])})),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("总计")]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),a("td",{attrs:{colspan:"1"}})]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),a("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),a("td",{attrs:{colspan:"3"}},[t._v("批准：")]),a("td",{attrs:{colspan:"3"}},[t._v("审核：")]),a("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(a("4890"),a("9b68")),n={name:"purchsemanage-entrust",components:{DataList:r["a"]},data:function(){return{natureList:["国有","三资","集体","联营","私营"],statusList:[{status:1,name:"待审批"},{status:2,name:"审批中"},{status:3,name:"采购中"},{status:4,name:"审批不通过"},{status:5,name:"采购完成"}],filter:{orderNo:"",supplierName:"",status:0,createUserId:0},wreck:{orderNo:"",wreckAmount:0,wreckReason:""},completeLayer:!1,confirmLayer:!1,loading:!1,info:{},itemList:[],orderUrl:"",layer:!1}},created:function(){this.filter.createUserId=0},methods:{getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/purchase-order/info/".concat(t)).then((function(t){e.info=t.order,e.orderUrl=t.order.fileUrl,e.itemList=t.items,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10),console.log("info",e.info),console.log("itemList",e.itemList)})).catch((function(t){e.$toast(t.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))},createInspect:function(t){var e=this;this.$http.get("/haolifa/purchase-order/createInspect/".concat(t)).then((function(t){console.log("报检单号",t),e.$confirm({title:"完善报检单",text:"现在去完善报检单？",color:"blue",btns:["稍后再说","现在完善"],yes:function(){e.$router.push("/applyBuy-material/edit?id=".concat(t))}})}))},approveProgress:function(t){this.$router.push("/purchsemanage-entrust/approveProgress?formNo=".concat(t.purchaseOrderNo,"&formId=0"))},approve:function(t){var e=this;this.$confirm({title:"发起审批",text:"确定发起审批？",color:"blue",btns:["取消","确认"],yes:function(){e.$http.get("/haolifa/purchase-order/approve/".concat(t,"/1")).then((function(t){e.$toast("发起成功"),e.$refs.list.update()})).catch((function(t){e.$toast(t.msg||t.message)}))}})},updatePurchase:function(t){this.$router.push("/purchsemanage-entrust/add?formId=".concat(t))},completePurchase:function(t){this.completeLayer=!0,this.wreck.orderNo=t},complete:function(){var t=this;this.$http.post("/haolifa/purchase-order/complete",this.wreck).then((function(e){t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},deletePurchase:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除该订单么？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/purchase-order/delete/".concat(t)).then((function(t){e.$toast("删除成功"),e.$refs.list.update()})).catch((function(t){e.$toast(t.msg)}))}})}}},o=n,l=(a("a05c"),a("5d22")),c=Object(l["a"])(o,s,i,!1,null,null,null);e["default"]=c.exports},"8a7b7":function(t,e,a){},9086:function(t,e,a){"use strict";a("ab2c")},"9b68":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-list relative f-12"},[a("transition",{attrs:{name:"slide-y"}},[t.list.length?a("table",{staticClass:"data-table"},[t._t("header",[a("tr",[a("th",[t._v("表头1")]),a("th",[t._v("表头2")])])]),t._l(t.list,(function(e,s){return a("tr",{key:e.id},[t._t("item",[a("td",[t._v("数据1")]),a("td",[t._v("数据2")])],{i:s,item:e,index:(t.pageNum-1)*t.pageSize+s+1})],2)}))],2):t._e()]),a("div",{staticClass:"flex-v-center",staticStyle:{"margin-top":"10px"}},[t.list.length?a("pagination",{staticClass:"mr-20",attrs:{page:t.pageNum,size:t.pageSize,total:t.total},on:{change:t.getList}}):t._e(),t.total?a("span",{staticClass:"f-12 c-6"},[t._v("共 "+t._s(t.total)+" 条数据")]):t._e()],1),t.list.length||t.loading?t._e():a("div",{staticStyle:{"margin-top":"100px"}},[a("no-data")],1)],1)},i=[];a("e680"),a("1bc78"),a("32ea"),a("566e");function r(t){return"?"+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}var n={name:"data-list",props:{method:{type:String,default:"get"},url:{type:String,default:""},pageSize:{type:Number,default:20},param:{type:Object,default:function(){}},pageNumStr:{type:String,default:"pageNum"}},data:function(){return{pageNum:1,total:0,loading:!1,list:[]}},watch:{url:function(){this.update()},mehtod:function(){this.update()},pageSize:function(){this.update()},param:function(){this.update()}},created:function(){this.pageNum=this.$route.query.page||1,this.getList(this.pageNum)},methods:{getList:function(t){var e=this,a=this.method,s=this.url,i=this.pageSize,n=this.param;if(s){this.loading=!0;var o={pageSize:i};o[this.pageNumStr]=t;var l=Object.assign(o,n),c="get"===a?s+r(l):s;this.$http[a](c,l).then((function(t){e.list=t.list||[],e.pageNum=t.pageNum;var a=e.$route.query;a.page=t.pageNum,e.$router.push({path:e.$route.path,query:a}),e.total=t.total,e.loading=!1})).catch((function(t){e.loading=!1,e.$toast(t.message||t.msg||t)}))}},update:function(t){this.getList(t?1:this.pageNum)}}},o=n,l=(a("c8ea"),a("5d22")),c=Object(l["a"])(o,s,i,!1,null,null,null);e["a"]=c.exports},a05c:function(t,e,a){"use strict";a("6371")},a7bda:function(t,e,a){},a9df:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-notification"},[a("div",{staticClass:"flex-v-center tool-bar"},[t._v("销售报表统计图")]),a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"12px"}},[a("el-date-picker",{attrs:{clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.oneYearChange},model:{value:t.oneYearDate,callback:function(e){t.oneYearDate=e},expression:"oneYearDate"}})],1),a("div",{staticStyle:{width:"98%",margin:"0 auto",display:"flex"}},[a("div",{staticStyle:{display:"flex","padding-left":"20px","margin-left":"12px",color:"#008eff","font-size":"22px"}},[a("p",[t._v("生产总数量："+t._s(t.totalNum)+"台")]),a("p",{staticStyle:{"margin-left":"20px"}},[t._v("产值总额："+t._s(t.totalPrice)+"元")]),a("p",{staticStyle:{"margin-left":"20px"}},[t._v("合同订货总数量："+t._s(t.contractTotalNum)+"台")]),a("p",{staticStyle:{"margin-left":"20px"}},[t._v("当年累计订货额："+t._s(t.contractTotalPrice)+"元")])])]),a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("el-date-picker",{attrs:{clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.getSaleFive},model:{value:t.fiveYearDate,callback:function(e){t.fiveYearDate=e},expression:"fiveYearDate"}}),a("p",{staticStyle:{color:"#008eff"}},[t._v("当年累计订货额:"+t._s(t.saleFiveNum)+"元")]),a("el-date-picker",{staticStyle:{left:"20%"},attrs:{clearable:!1,"value-format":"yyyy-MM",type:"month",placeholder:"选择年月"},on:{change:t.getSale2Five},model:{value:t.fiveYear2Date,callback:function(e){t.fiveYear2Date=e},expression:"fiveYear2Date"}}),a("p",{staticStyle:{position:"relative",left:"23%",color:"#008eff"}},[t._v("当月累计订货额:"+t._s(t.saleFive2Num)+"元")])],1),t._m(0),a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("el-date-picker",{attrs:{clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.getSaleSix},model:{value:t.sixYearDate,callback:function(e){t.sixYearDate=e},expression:"sixYearDate"}}),a("p",{staticStyle:{color:"#008eff"}},[t._v("当年累计回款总额:"+t._s(t.salSixNum)+"元")]),a("el-date-picker",{staticStyle:{left:"20%"},attrs:{clearable:!1,"value-format":"yyyy-MM",type:"month",placeholder:"选择年月"},on:{change:t.getSale2Six},model:{value:t.sixYear2Date,callback:function(e){t.sixYear2Date=e},expression:"sixYear2Date"}}),a("p",{staticStyle:{position:"relative",left:"23%",color:"#008eff"}},[t._v("当月累计回款总额:"+t._s(t.salSix2Num)+"元")])],1),t._m(1),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("el-date-picker",{attrs:{clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.getBuyOne},model:{value:t.sevenYearDate,callback:function(e){t.sevenYearDate=e},expression:"sevenYearDate"}})],1),t._m(2),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("el-date-picker",{attrs:{clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.getYearTotal},model:{value:t.yearDate,callback:function(e){t.yearDate=e},expression:"yearDate"}})],1),t._m(3),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("el-date-picker",{attrs:{clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.getSaleTwo},model:{value:t.twoYear,callback:function(e){t.twoYear=e},expression:"twoYear"}})],1),t._m(4)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"saleFive"}}),a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"sale2Five"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"saleSix"}}),a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"sale2Six"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("div",{staticStyle:{width:"90%",height:"800px","margin-top":"20px"},attrs:{id:"saleSeven"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"0 auto"}},[a("div",{staticStyle:{width:"80%",height:"500px",margin:"0 auto"},attrs:{id:"saleOne"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"0 auto"}},[a("div",{staticStyle:{width:"80%",height:"500px",margin:"0 auto"},attrs:{id:"saleTwo"}})])}],r=(a("32ea"),a("1bc78"),a("246f"),a("fc02"),a("566e"),{name:"xsreport-form",data:function(){return{chartOneList:[],yearDate:(new Date).getFullYear()+"",oneYearDate:(new Date).getFullYear()+"",cYearDate:(new Date).getFullYear()+"",fiveYearDate:(new Date).getFullYear()+"",sixYearDate:(new Date).getFullYear()+"",twoYear:(new Date).getFullYear()+"",sevenYearDate:(new Date).getFullYear()+"",fiveYear2Date:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),sixYear2Date:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),totalNum:"",totalPrice:"",contractTotalNum:"",contractTotalPrice:"",saleFiveNum:0,saleFive2Num:0,salSixNum:0,salSix2Num:0}},created:function(){this.getTotal(),this.getSaleFive(),this.getSale2Five(),this.getSaleSix(),this.getSale2Six(),this.getContractTotal(),this.getSaleTwo(this.twoYear),this.getSaleOne(this.yearDate),this.getBuyOne()},methods:{oneYearChange:function(){this.getTotal(),this.getContractTotal()},addRezo:function(t){return t>9?t:"0"+t},getTotal:function(){var t=this;this.$http.get("/haolifa/report/sale/getSaleAll?year=".concat(this.oneYearDate)).then((function(e){t.totalNum=e[0].totalNum,t.totalPrice=e[0].totalPrice}))},getSaleFive:function(){var t=this;this.saleFiveNum=0,this.$http.get("/haolifa/report/sale/selectContractByDemandName?year=".concat(this.fiveYearDate)).then((function(e){var a=[],s=[];e.map((function(e){a.push(e.demandName),s.push({name:e.demandName,value:e.totalPrice}),t.saleFiveNum=t.saleFiveNum+ +e.totalPrice}));var i=t.$echarts.init(document.getElementById("saleFive")),r={title:{text:"年度订货总额分类统计图",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:a},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],label:{show:!1,position:"center"},data:s,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getSale2Five:function(){var t=this,e=this.fiveYear2Date.split("-");console.log(this.fiveYear2Date,e);var a=e[0],s=e[1];this.saleFive2Num=0,this.$http.get("/haolifa/report/sale/selectContractByDemandName?year=".concat(a,"&month=").concat(s)).then((function(e){var a=[],s=[];e.map((function(e){a.push(e.demandName),s.push({name:e.demandName,value:e.totalPrice}),t.saleFive2Num=t.saleFive2Num+ +e.totalPrice}));var i=t.$echarts.init(document.getElementById("sale2Five")),r={title:{text:"月份客户订货额统计图",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:a},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],label:{show:!1,position:"center"},data:s,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getSaleSix:function(){var t=this;this.salSixNum=0,this.$http.get("/haolifa/report/sale/selectshouhuiContractByDemandName?year=".concat(this.sixYearDate)).then((function(e){var a=[],s=[];e.map((function(e){a.push(e.demandName),s.push({name:e.demandName,value:e.totalPrice}),t.salSixNum=t.salSixNum+ +e.totalPrice}));var i=t.$echarts.init(document.getElementById("saleSix")),r={title:{text:"年度回款总额分类统计图",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:a},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:s,label:{show:!1,position:"center"},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getSale2Six:function(){var t=this;this.salSix2Num=0;var e=this.sixYear2Date.split("-"),a=e[0],s=e[1];this.$http.get("/haolifa/report/sale/selectshouhuiContractByDemandName?year=".concat(a,"&month=").concat(s)).then((function(e){var a=[],s=[];e.map((function(e){a.push(e.demandName),s.push({name:e.demandName,value:e.totalPrice}),t.salSix2Num=t.salSix2Num+ +e.totalPrice}));var i=t.$echarts.init(document.getElementById("sale2Six")),r={title:{text:"月份回款额统计图",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:a},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:s,label:{show:!1,position:"center"},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getContractTotal:function(){var t=this;this.$http.get("/haolifa/report/sale/getSaleAllContract?year=".concat(this.oneYearDate)).then((function(e){t.contractTotalNum=e[0].totalNum,t.contractTotalPrice=e[0].totalPrice}))},getYearTotal:function(){this.getSaleOne(this.yearDate)},getCYearTotal:function(){this.getCSaleOne(this.cYearDate)},getSaleOne:function(t){var e=this;this.$http.get("/haolifa/report/sale/getSaleAllByMonth?year="+t).then((function(a){var s=[],i=[];Object.keys(a).forEach((function(t){s.push(t+"月"),i.push(a[t])}));var r=e.$echarts.init(document.getElementById("saleOne")),n={color:["#3398DB"],title:{text:t+"年每月产值总额统计",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}元"},xAxis:{type:"category",data:s},yAxis:{type:"value"},series:[{name:"产值额",barWidth:"30%",data:i,type:"bar"}]};r.setOption(n)}))},getCSaleOne:function(t){var e=this;this.$http.get("/haolifa/report/sale/getSaleAllByMonthContract?year="+t).then((function(a){var s=[],i=[];Object.keys(a).forEach((function(t){s.push(t+"月"),i.push(a[t][0].totalPrice)}));var r=e.$echarts.init(document.getElementById("saleThree")),n={color:["#3398DB"],title:{text:t+"年每月合同总额统计",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}元"},xAxis:{type:"category",data:s},yAxis:{type:"value"},series:[{name:"合同额",barWidth:"30%",data:i,type:"bar"}]};r.setOption(n)}))},getSaleTwo:function(t){var e=this;this.$http.get("/haolifa/report/sale/getSaleByModel?year=".concat(t)).then((function(t){var a=[],s=[];t.map((function(t){a.push(t.productModel),s.push(t.totalPrice)}));var i=e.$echarts.init(document.getElementById("saleTwo")),r={color:["#3398DB"],title:{text:"产品型号产值总额统计",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}元"},xAxis:{type:"category",data:a},yAxis:{type:"value"},series:[{name:"生产金额",barWidth:"30%",data:s,type:"bar"}]};i.setOption(r)}))},getSaleFour:function(){var t=this;this.$http.get("/haolifa/report/sale/getSaleByModelContract").then((function(e){var a=[],s=[];e.map((function(t){a.push(t.productModel),s.push(t.totalPrice)}));var i=t.$echarts.init(document.getElementById("saleFour")),r={color:["#3398DB"],title:{text:"产品型号合同金额统计",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}元"},xAxis:{type:"category",data:a},yAxis:{type:"value"},series:[{name:"合同金额",barWidth:"30%",data:s,type:"bar"}]};i.setOption(r)}))},getBuyOne:function(){var t=this;this.$http.get("/haolifa/report/sale/selectAllAmountByDemandName?year=".concat(this.sevenYearDate)).then((function(e){var a=[],s=[],i=[],r=[],n=[];e.map((function(t){a.push(t.demandName),s.push(t.saleAmount),i.push(t.invoiceAmount),r.push(t.deliveryAmount),n.push(t.refundAmount)}));var o=t.$echarts.init(document.getElementById("saleSeven")),l={title:{text:"销售报表-按需方统计",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["订货总金额","开票总金额","发货总金额","回款总金额"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a,axisLabel:{rotate:60}}],yAxis:[{type:"value"}],series:[{name:"订货总金额",type:"bar",barWidth:"10%",data:s},{name:"开票总金额",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"发货总金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:r},{name:"回款总金额",type:"bar",color:"#67c23a",barWidth:"10%",data:n}]};o.setOption(l)}))}}}),n=r,o=a("5d22"),l=Object(o["a"])(n,s,i,!1,null,null,null);e["default"]=l.exports},ab2c:function(t,e,a){},aed2:function(t,e,a){"use strict";a("3986")},b3ad:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"abs scroll-y"},[a("div",{staticClass:"metalwork-info",staticStyle:{width:"100%",margin:"0 auto"}},[a("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[a("icon-btn",{staticClass:"mr-15",on:{click:function(e){return t.$router.back()}}},[t._v("arrow_back")]),a("div",{staticClass:"flex-item"},[t._v("审批进度")])],1),a("div",{staticStyle:{"min-width":"1200px"}},t._l(t.list,(function(e,s){return a("div",{key:s,staticClass:"approve"},[a("p",[t._v(t._s(e.roleName))]),a("p",{class:4==e.auditResult?"button ccc":"button"},[t._v(t._s(e.stepName))]),s<t.list.length-1?a("span",[t._v("-----\x3e")]):t._e(),a("p",[t._v(t._s(t.status[e.auditResult]))]),e.child.length>0?a("div",{staticClass:"approve",staticStyle:{position:"absolute",top:"123px"}},[a("div",{staticClass:"height-line"}),a("div",{staticClass:"bottom-arrows"}),a("p",[t._v(t._s(e.child[0].roleName))]),a("p",{class:4==e.child[0].auditResult?"button ccc":"button"},[t._v(t._s(e.child[0].stepName))]),a("p",[t._v(t._s(t.status[e.child[0].auditResult]))]),a("div",{staticClass:"right-height-line"}),a("div",{staticClass:"top-arrows"})]):t._e()])})),0)])])},i=[],r={name:"purchsemanage-entrustapproveProgress",data:function(){return{list:[],status:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},created:function(){this.getInfo(this.$route.query.formNo,this.$route.query.formId)},methods:{getInfo:function(t,e){var a=this;console.log(t,e),this.$http.get("/haolifa/flowInstance/flow/progress?formNo=".concat(t,"&formId=").concat(e)).then((function(t){console.log(t),a.list=t})).catch((function(t){a.$toast(t.msg||t.message)}))}}},n=r,o=(a("4a2e"),a("5d22")),l=Object(o["a"])(n,s,i,!1,null,null,null);e["default"]=l.exports},bc4a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-supplier-manage flex-col"},[a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供应商名称"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}})]),a("div",{staticClass:"flex-item"})]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{method:"post",pageSize:20,param:t.filter,url:"/haolifa/supplier/list"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",[t._v(t._s(i))]),a("td",[a("router-link",{staticClass:"c-4",attrs:{to:"/supplier/"+s.id}},[t._v(t._s(s.suppilerName))])],1),a("td",[t._v(t._s(s.suppilerNo))]),a("td",[t._v(t._s(s.website))]),a("td",[t._v(t._s(t.natureList[s.nature]))]),a("td",[t._v(t._s(s.legalPerson))]),a("td",[t._v(t._s(s.phone))]),a("td",[t._v(t._s(t.isQualifiedStatusList[s.isQualified].text))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.infoDetail(s)}}},[t._v("详情")]),1==s.isQualified||2==s.isQualified?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.auditAccessoryInfo(s.suppilerNo)}}},[t._v("| 审批附件")]):t._e(),3==s.isQualified?a("a",{staticClass:"red",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approving(s.suppilerNo)}}},[t._v("| 审批进度")]):t._e()])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("企业名称")]),a("th",[t._v("编号")]),a("th",[t._v("网址")]),a("th",[t._v("企业性质")]),a("th",[t._v("法人")]),a("th",[t._v("电话")]),a("th",[t._v("是否合格")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1)])},i=[],r=a("9b68"),n={name:"page-supplier-manage",components:{DataList:r["a"]},data:function(){return{filter:{supplierName:"",supplierNo:""},natureList:["国有","三资","集体","联营","私营"],isQualifiedStatusList:[{value:0,text:"待评定"},{value:1,text:"合格"},{value:2,text:"不合格"},{value:3,text:"评定中"}]}},methods:{auditAccessoryInfo:function(t){console.log("accessory-info",t),this.$router.push("/supplier/accessory-info?formNo=".concat(t))},approving:function(t){this.$router.push("/supplier/approveProgress?formNo=".concat(t,"&formId=0"))},approveSupplier:function(t){var e=this;this.$http.post("/haolifa/supplier/approve/".concat(t)).then((function(t){e.$refs.list.update(),e.$toast("成功发起")})).catch((function(t){e.$toast(t.msg||t.message)}))},infoDetail:function(t){this.$router.push("/supplier/".concat(t.id))},edit:function(t){this.$router.push("/supplier/edit?id=".concat(t.id))},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下供应商吗？<br><b>".concat(t.suppilerName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/supplier/delete?id=".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update()})).catch((function(t){e.$toast(t.msg||t.message)}))}})}}},o=n,l=(a("c8b8"),a("5d22")),c=Object(l["a"])(o,s,i,!1,null,null,null);e["default"]=c.exports},c1c7:function(t,e,a){},c8b8:function(t,e,a){"use strict";a("a7bda")},c8ea:function(t,e,a){"use strict";a("893f")},cc47:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-notification"},[a("div",{staticClass:"flex-v-center tool-bar"},[t._v("质量报表统计图")]),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("el-date-picker",{attrs:{clearable:!1,type:"year","value-format":"yyyy",placeholder:"选择年月"},on:{change:t.getBuyOne},model:{value:t.oneYearDate,callback:function(e){t.oneYearDate=e},expression:"oneYearDate"}})],1),t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"20px auto"}},[a("div",{staticStyle:{width:"100%",height:"600px",margin:"0 auto"},attrs:{id:"buyOnee"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"90%",display:"flex",margin:"30px auto"}},[a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartOne"}}),a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartTwo"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"310px",width:"90%",display:"flex",margin:"30px auto"}},[a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartThree"}}),a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartNine"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"310px",width:"90%",display:"flex",margin:"30px auto"}},[a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartEight"}}),a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartFour"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"310px",width:"90%",display:"flex",margin:"30px auto"}},[a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartSeven"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"700px",width:"90%",margin:"100px auto"}},[a("div",{staticStyle:{width:"80%",height:"700px",margin:"0 auto"},attrs:{id:"chartFive"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"700px",width:"90%",margin:"100px auto"}},[a("div",{staticStyle:{width:"80%",height:"700px",margin:"0 auto"},attrs:{id:"chartSix"}})])}],r=(a("a450"),a("566e"),{name:"report-form",data:function(){return{yearDate:(new Date).getFullYear()+"",oneYearDate:(new Date).getFullYear()+""}},mounted:function(){this.getChartOne(),this.getChartTwo(),this.getChartThree(),this.getChartFour(),this.getChartSeven(),this.getSupplier(),this.getChartSix(),this.getBuyOne(),this.getChartEight(),this.getChartNine()},methods:{getChartOne:function(){var t=this;this.$http.get("/haolifa/report/quality/getAudit").then((function(e){var a=[],s=[];e.map((function(t){a.push(t.materialName),s.push({name:t.materialName,value:t.totalNum})}));var i=t.$echarts.init(document.getElementById("chartOne")),r=t.getOption("更换料质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartTwo:function(){var t=this;this.$http.get("/haolifa/report/quality/getInspect").then((function(e){var a=["合格数","不合格数"],s=[];s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber});var i=t.$echarts.init(document.getElementById("chartTwo")),r=t.getOption("采购质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartThree:function(){var t=this;this.$http.get("/haolifa/report/quality/getPressure").then((function(e){var a=["合格数","不合格数"],s=[];e?(s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber})):(s.push({name:"合格数",value:0}),s.push({name:"不合格数",value:0}));var i=t.$echarts.init(document.getElementById("chartThree")),r=t.getOption("压力质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartFour:function(){var t=this;this.$http.get("/haolifa/report/quality/getSpray").then((function(e){var a=["合格数","不合格数"],s=[];s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber});var i=t.$echarts.init(document.getElementById("chartFour")),r=t.getOption("喷涂质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartEight:function(){var t=this;this.$http.get("/haolifa/report/quality/getInspectByType?type=1").then((function(e){var a=["合格数","不合格数"],s=[];s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber});var i=t.$echarts.init(document.getElementById("chartEight")),r=t.getOption("机加工质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartNine:function(){var t=this;this.$http.get("/haolifa/report/quality/getProduct").then((function(e){var a=["合格数","不合格数"],s=[];s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber});var i=t.$echarts.init(document.getElementById("chartNine")),r=t.getOption("成品检验质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartSeven:function(){var t=this;this.$http.get("/haolifa/report/quality/assemblingReason").then((function(e){var a=[],s=[];e.map((function(t){a.push(t.reason),s.push({name:t.reason,value:t.qty})}));var i=t.$echarts.init(document.getElementById("chartSeven")),r=t.getOption("阀门装配质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getOption:function(t,e,a){return{title:{text:t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:e},series:[{label:{show:!1,position:"center"},name:"",type:"pie",radius:"55%",center:["50%","60%"],data:a,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},getDepart:function(){var t=this,e=this;this.$http.get("/haolifa/report/expense/classifyByDepartmentAll").then((function(a){var s=[],i=[];a.map((function(t){s.push(t.department),i.push({name:t.department,value:t.totalAmount})}));var r=t.$echarts.init(document.getElementById("chartTwo")),n={title:{text:"部门费用分配",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.on("click",(function(t){e.getDepartDetail(t.data.name)})),r.setOption(n),e.getDepartDetail(s[0])})).catch((function(e){t.$toast(e.msg||e.message)}))},getDepartDetail:function(t){var e=this;this.$http.get("/haolifa/report/expense/getAllClassifyWithDepartment?department="+t).then((function(a){var s=[],i=[];a.map((function(t){s.push(t.expensesClassify),i.push({name:t.expensesClassify,value:t.totalAmount})}));var r=e.$echarts.init(document.getElementById("chartTwoDetail")),n={title:{text:"部门明细:"+t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.setOption(n)})).catch((function(t){e.$toast(t.msg||t.message)}))},getType:function(){var t=this,e=this;this.$http.get("/haolifa/report/expense/getAllClassify").then((function(a){var s=[],i=[];a.map((function(t){s.push(t.expensesClassify),i.push({name:t.expensesClassify,value:t.totalAmount})}));var r=t.$echarts.init(document.getElementById("chartThree")),n={title:{text:"费用分配",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.on("click",(function(t){e.getTypeDetail(t.data.name)})),r.setOption(n),t.getTypeDetail(s[0])})).catch((function(e){t.$toast(e.msg||e.message)}))},getTypeDetail:function(t){var e=this;this.$http.get("/haolifa/report/expense/getAllClassifyWithFirstClassify?classify="+t).then((function(a){var s=[],i=[];a.map((function(t){s.push(t.department),i.push({name:t.secondClassify,value:t.totalAmount})}));var r=e.$echarts.init(document.getElementById("chartThreeDetail")),n={title:{text:"费用明细:"+t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.setOption(n)})).catch((function(t){e.$toast(t.msg||t.message)}))},getSupplier:function(){var t=this;this.$http.get("/haolifa/report/quality/getInspectBysupplierName").then((function(e){var a=0,s=[],i=[],r=[],n=[];e.map((function(t){s.push(t.supplierName),i.push(t.qualifiedNumber),n.push(t.unqualifiedNumber),a=a>t.totalNum?a:t.totalNum;var e=(t.qualifiedNumber/t.totalNum*100).toFixed(2);r.push(e)}));var o=t.$echarts.init(document.getElementById("chartFive")),l={color:["#3398DB","#FF6666","#66CCCC"],title:{text:"供应商产品质量统计图",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["合格数","不合格数","合格率"]},grid:{left:"18%",bottom:"30%"},xAxis:[{type:"category",data:s,axisPointer:{type:"shadow"},axisLabel:{rotate:60}}],yAxis:[{type:"value",name:"数量",min:0,max:a+2e3,axisLabel:{formatter:"{value} "}},{type:"value",name:"合格率",min:0,max:120,axisLabel:{formatter:"{value} %"}}],series:[{name:"合格数",type:"bar",data:i},{name:"不合格数",type:"bar",data:n},{name:"合格率",type:"line",yAxisIndex:1,data:r}]};o.setOption(l)}))},getChartSix:function(){var t=this;this.$http.get("/haolifa/report/quality/selectInspectByMaterialName").then((function(e){var a=0,s=[],i=[],r=[],n=[];e.map((function(t){s.push(t.materialGraphName),i.push(t.qualifiedNumber),n.push(t.unqualifiedNumber),a=a>t.totalNum?a:t.totalNum;var e=(t.qualifiedNumber/t.totalNum*100).toFixed(2);r.push(e)}));var o=t.$echarts.init(document.getElementById("chartSix")),l={color:["#3398DB","#FF6666","#66CCCC"],title:{text:"产品类型质量统计图",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["合格数","不合格数","合格率"]},grid:{left:"18%",bottom:"30%"},xAxis:[{type:"category",data:s,axisPointer:{type:"shadow"},axisLabel:{rotate:60}}],yAxis:[{type:"value",name:"数量",min:0,max:a+2e3,axisLabel:{formatter:"{value} "}},{type:"value",name:"合格率",min:0,max:120,axisLabel:{formatter:"{value} %"}}],series:[{name:"合格数",type:"bar",data:i},{name:"不合格数",type:"bar",data:n},{name:"合格率",type:"line",yAxisIndex:1,data:r}]};o.setOption(l)}))},getBuyOne:function(){var t=this;this.$http.get("/haolifa/report/quality/getAllQuality?year=".concat(this.oneYearDate)).then((function(e){var a=[],s=[],i=[],r=[],n=[];e.map((function(t){a.push(t.createTime),t.purchasePass?s.push(t.purchasePass.qualifiedNumber?Math.round(t.purchasePass.qualifiedNumber/t.purchasePass.totalNum*1e4)/100:0):s.push(0),t.inspectPass?i.push(t.inspectPass.qualifiedNumber?Math.round(t.inspectPass.qualifiedNumber/t.inspectPass.totalNum*1e4)/100:0):s.push(0),t.sprayPass?r.push(t.sprayPass.qualifiedNumber?Math.round(t.sprayPass.qualifiedNumber/t.sprayPass.totalNum*1e4)/100:0):s.push(0),t.proInspectPass?n.push(t.proInspectPass.qualifiedNumber?Math.round(t.proInspectPass.qualifiedNumber/t.proInspectPass.totalNum*1e4)/100:0):s.push(0)}));var o=t.$echarts.init(document.getElementById("buyOnee")),l={title:{text:"质量合格率统计总图（百分比）",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["零件采购合格率","零件加工合格率","喷涂加工合格率","阀门装配合格率"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a}],yAxis:[{type:"value",min:30}],series:[{name:"零件采购合格率",type:"bar",barWidth:"10%",data:s},{name:"零件加工合格率",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"喷涂加工合格率",type:"bar",color:"#e6a23c",barWidth:"10%",data:r},{name:"阀门装配合格率",type:"bar",color:"#67c23a",barWidth:"10%",data:n}]};o.setOption(l)}))}}}),n=r,o=a("5d22"),l=Object(o["a"])(n,s,i,!1,null,null,null);e["default"]=l.exports},d651:function(t,e,a){"use strict";a("efab")},d6cf:function(t,e,a){},dc62:function(t,e,a){"use strict";a("fbb9")},ee68:function(t,e,a){var s=a("7c2b");s(s.S+s.F*!a("5e9e"),"Object",{defineProperty:a("597a").f})},ef03:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchaseadd flex-col"},[a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"采购合同号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供方单位"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:"0"}},[t._v("合同状态")]),t._l(t.statusList,(function(e){return a("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])}))],2),a("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),a("div",{staticClass:"flex-item"})]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{method:"get","page-size":20,param:t.filter,url:"/haolifa/purchase-order/list/0"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",[t._v(t._s(i))]),a("td",[t._v(t._s(s.purchaseOrderNo))]),a("td",[t._v(t._s(s.supplierName))]),a("td",[t._v(t._s(s.deliveryTime))]),a("td",[t._v(t._s(s.totalCount))]),a("td",[a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.numClick(s.purchaseOrderNo)}}},[t._v(t._s(s.qualifiedNumber))])]),a("td",[t._v(t._s(t.statusList[s.status-1].name))]),a("td",[t._v(t._s(s.createUserId))]),a("td",[t._v(t._s(s.createTime))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("查看")]),2==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approveProgress(s)}}},[t._v("审批进度")]):t._e()])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("采购合同号")]),a("th",[t._v("供方单位")]),a("th",[t._v("采购完成日期")]),a("td",[t._v("采购总数量")]),a("td",[t._v("检验合格数量")]),a("th",[t._v("订单状态")]),a("th",[t._v("创建人")]),a("th",[t._v("创建日期")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?a("layer",{attrs:{title:"订单折损",width:"450px"}},[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损金额"},model:{value:t.wreck.wreckAmount,callback:function(e){t.$set(t.wreck,"wreckAmount",e)},expression:"wreck.wreckAmount"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损原因"},model:{value:t.wreck.wreckReason,callback:function(e){t.$set(t.wreck,"wreckReason",e)},expression:"wreck.wreckReason"}})],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14"},[a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("采购订单")]),a("td",{staticClass:"b",attrs:{colspan:"6"}},[a("a",{staticClass:"a",staticStyle:{color:"#008eff","margin-right":"10px"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),a("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),a("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),a("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),a("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),a("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(e,s){return a("tr",{key:e.id},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitPrice))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalAmount))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])})),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("总计")]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),a("td",{attrs:{colspan:"1"}})]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),a("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),a("td",{attrs:{colspan:"3"}},[t._v("批准：")]),a("td",{attrs:{colspan:"3"}},[t._v("审核：")]),a("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e(),t.numLayer?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14"},[a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"20%"}}),a("td",{staticStyle:{width:"20%"}}),a("td",{staticStyle:{width:"15%"}}),a("td",{staticStyle:{width:"15%"}}),a("td",{staticStyle:{width:"15%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("零件名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购总数")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("报检总数")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("合格总数")])]),t._l(t.numList,(function(e,s){return a("tr",{key:s},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s+1))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNumber))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.deliveryNumber))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.qualifiedNumber))])])})),0===t.numList.length?a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v("无数据")])]):t._e()],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.numLayer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(a("4890"),a("9b68")),n={name:"purchsemanage-purchase",components:{DataList:r["a"]},data:function(){return{natureList:["国有","三资","集体","联营","私营"],statusList:[{status:1,name:"待审批"},{status:2,name:"审批中"},{status:3,name:"采购中"},{status:4,name:"审批不通过"},{status:5,name:"采购完成"}],filter:{orderNo:"",supplierName:"",status:0,createUserId:0},wreck:{orderNo:"",wreckAmount:0,wreckReason:""},completeLayer:!1,confirmLayer:!1,loading:!1,info:{},itemList:[],orderUrl:"",layer:!1,numLayer:!1,numList:[]}},created:function(){this.filter.createUserId=0},methods:{getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/purchase-order/info/".concat(t)).then((function(t){e.info=t.order,e.itemList=t.items,e.orderUrl=t.order.fileUrl,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10),console.log("info",e.info),console.log("itemList",e.itemList)})).catch((function(t){e.$toast(t.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))},createInspect:function(t){var e=this;this.$http.get("/haolifa/purchase-order/createInspect/".concat(t)).then((function(t){console.log("报检单号",t),e.$confirm({title:"完善报检单",text:"现在去完善报检单？",color:"blue",btns:["稍后再说","现在完善"],yes:function(){e.$router.push("/applyBuy-material/edit?id=".concat(t))}})}))},approveProgress:function(t){this.$router.push({path:"/purchsemanage-purchase/approveProgress?",query:{formNo:t.purchaseOrderNo,formId:0}})},approve:function(t){var e=this;this.$confirm({title:"发起审批",text:"确定发起审批？",color:"blue",btns:["取消","确认"],yes:function(){e.$http.get("/haolifa/purchase-order/approve/".concat(t,"/0")).then((function(t){e.$toast("发起成功"),e.$refs.list.update()})).catch((function(t){e.$toast(t.msg||t.message)}))}})},updatePurchase:function(t){this.$router.push("/purchsemanage-purchase/add?formId=".concat(t))},completePurchase:function(t){this.completeLayer=!0,this.wreck.orderNo=t},complete:function(){var t=this;this.$http.post("/haolifa/purchase-order/complete",this.wreck).then((function(e){t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},deletePurchase:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除该订单么？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/purchase-order/delete/".concat(t)).then((function(t){e.$toast("删除成功"),e.$refs.list.update()})).catch((function(t){e.$toast(t.msg)}))}})},numClick:function(t){var e=this;this.numLayer=!0,this.numList=[],this.$http.get("/haolifa/material-inspect/purchase-all-qty?purchaseNo=".concat(t)).then((function(t){e.numList=t})).catch((function(t){e.$toast(t.msg)}))}}},o=n,l=(a("12b1"),a("5d22")),c=Object(l["a"])(o,s,i,!1,null,null,null);e["default"]=c.exports},efab:function(t,e,a){},f263:function(t,e,a){a("ee68");var s=a("ce99").Object;t.exports=function(t,e,a){return s.defineProperty(t,e,a)}},f2de:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchaseadd flex-col"},[a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"采购合同号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供方单位"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:"0"}},[t._v("合同状态")]),t._l(t.statusList,(function(e){return a("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])}))],2),a("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),a("div",{staticClass:"flex-item"}),a("router-link",{attrs:{to:"/purchsemanage-purchase/add"}},[a("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"}},[t._v("新增采购")])],1)],1),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{method:"get","page-size":20,param:t.filter,url:"/haolifa/purchase-order/list/0"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",[t._v(t._s(i))]),a("td",[t._v(t._s(s.purchaseOrderNo))]),a("td",[t._v(t._s(s.supplierName))]),a("td",[t._v(t._s(s.deliveryTime))]),a("td",[t._v(t._s(s.totalCount))]),a("td",[a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.numClick(s.purchaseOrderNo)}}},[t._v(t._s(s.qualifiedNumber))])]),a("td",[t._v(t._s(t.statusList[s.status-1].name))]),a("td",[t._v(t._s(s.createUserId))]),a("td",[t._v(t._s(s.createTime))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("查看")]),1==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approve(s.purchaseOrderNo)}}},[t._v("发起审批")]):t._e(),4==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approve(s.purchaseOrderNo)}}},[t._v("重新发起审批")]):t._e(),3==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.createInspect(s.id)}}},[t._v("生成报检单")]):t._e(),1==s.status||4==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.updatePurchase(s.id)}}},[t._v("编辑")]):t._e(),2==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approveProgress(s)}}},[t._v("审批进度")]):t._e(),1==s.status||4==s.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.deletePurchase(s.purchaseOrderNo)}}},[t._v("删除")]):t._e()])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("采购合同号")]),a("th",[t._v("供方单位")]),a("th",[t._v("采购完成日期")]),a("th",[t._v("采购总数量")]),a("th",[t._v("检验合格数量")]),a("th",[t._v("订单状态")]),a("th",[t._v("创建人")]),a("th",[t._v("创建日期")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?a("layer",{attrs:{title:"订单折损",width:"450px"}},[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损金额"},model:{value:t.wreck.wreckAmount,callback:function(e){t.$set(t.wreck,"wreckAmount",e)},expression:"wreck.wreckAmount"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损原因"},model:{value:t.wreck.wreckReason,callback:function(e){t.$set(t.wreck,"wreckReason",e)},expression:"wreck.wreckReason"}})],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14"},[a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("采购订单")]),a("td",{staticClass:"b",attrs:{colspan:"6"}},[a("a",{staticClass:"a",staticStyle:{color:"#008eff","margin-right":"10px"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),a("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),a("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),a("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),a("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),a("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(e,s){return a("tr",{key:e.id},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitPrice))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalAmount))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])})),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("总计")]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),a("td",{attrs:{colspan:"1"}})]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),a("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),a("td",{attrs:{colspan:"3"}},[t._v("批准：")]),a("td",{attrs:{colspan:"3"}},[t._v("审核：")]),a("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e(),t.numLayer?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14"},[a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"20%"}}),a("td",{staticStyle:{width:"20%"}}),a("td",{staticStyle:{width:"15%"}}),a("td",{staticStyle:{width:"15%"}}),a("td",{staticStyle:{width:"15%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("零件名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购总数")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("报检总数")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("合格总数")])]),t._l(t.numList,(function(e,s){return a("tr",{key:s},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s+1))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNumber))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.deliveryNumber))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.qualifiedNumber))])])})),0===t.numList.length?a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v("无数据")])]):t._e()],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.numLayer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(a("4890"),a("9b68")),n={name:"purchsemanage-purchase",components:{DataList:r["a"]},data:function(){return{natureList:["国有","三资","集体","联营","私营"],statusList:[{status:1,name:"待审批"},{status:2,name:"审批中"},{status:3,name:"采购中"},{status:4,name:"审批不通过"},{status:5,name:"采购完成"}],filter:{orderNo:"",status:0,supplierName:"",createUserId:0},wreck:{orderNo:"",wreckAmount:0,wreckReason:""},completeLayer:!1,confirmLayer:!1,loading:!1,info:{},itemList:[],orderUrl:"",layer:!1,numLayer:!1,numList:[]}},created:function(){this.filter.createUserId=0},methods:{getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/purchase-order/info/".concat(t)).then((function(t){e.info=t.order,e.itemList=t.items,e.orderUrl=t.order.fileUrl,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10),console.log("info",e.info),console.log("itemList",e.itemList)})).catch((function(t){e.$toast(t.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))},createInspect:function(t){var e=this;this.$http.get("/haolifa/purchase-order/createInspect/".concat(t)).then((function(t){console.log("报检单号",t),e.$confirm({title:"完善报检单",text:"现在去完善报检单？",color:"blue",btns:["稍后再说","现在完善"],yes:function(){e.$router.push("/applyBuy-material/edit?id=".concat(t))},no:function(){e.$http.get("/haolifa/material-inspect/delete/".concat(t)).then((function(t){}))}})}))},approveProgress:function(t){this.$router.push({path:"/purchsemanage-purchase/approveProgress?",query:{formNo:t.purchaseOrderNo,formId:0}})},approve:function(t){var e=this;this.$confirm({title:"发起审批",text:"确定发起审批？",color:"blue",btns:["取消","确认"],yes:function(){e.$http.get("/haolifa/purchase-order/approve/".concat(t,"/0")).then((function(t){e.$toast("发起成功"),e.$refs.list.update()})).catch((function(t){e.$toast(t.msg||t.message)}))}})},updatePurchase:function(t){this.$router.push("/purchsemanage-purchase/add?formId=".concat(t))},completePurchase:function(t){this.completeLayer=!0,this.wreck.orderNo=t},complete:function(){var t=this;this.$http.post("/haolifa/purchase-order/complete",this.wreck).then((function(e){t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},deletePurchase:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除该订单么？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/purchase-order/delete/".concat(t)).then((function(t){e.$toast("删除成功"),e.$refs.list.update()})).catch((function(t){e.$toast(t.msg)}))}})},numClick:function(t){var e=this;this.numLayer=!0,this.numList=[],this.$http.get("/haolifa/material-inspect/purchase-all-qty?purchaseNo=".concat(t)).then((function(t){e.numList=t})).catch((function(t){e.$toast(t.msg)}))}}},o=n,l=(a("d651"),a("5d22")),c=Object(l["a"])(o,s,i,!1,null,null,null);e["default"]=c.exports},f48a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-supplier-info abs scroll-y"},[a("div",{staticClass:"form-content"},[a("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[a("icon-btn",{staticClass:"mr-15",on:{click:function(e){return t.$router.back()}}},[t._v("arrow_back")]),a("div",{staticClass:"flex-item"},[t._v("订单详情")]),a("div",{staticClass:"flex-item ml-20"},[a("a",{staticClass:"a",staticStyle:{color:"#008eff"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])],1),a("table",{staticClass:"f-14"},[t._m(0),t._m(1),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),a("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),a("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),a("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),a("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),a("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),t._m(2),t._m(3),t._l(t.itemList,(function(e,s){return a("tr",{key:e.id},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitPrice))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalAmount))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])})),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("总计")]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),a("td",{attrs:{colspan:"1"}})]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v(t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。")])]),t._m(4),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v(t._s(t.info.payType))])]),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11)],2)])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"b",attrs:{colspan:"12"}},[t._v("采购订单")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，"),a("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),a("td",{attrs:{colspan:"3"}},[t._v("批准：")]),a("td",{attrs:{colspan:"3"}},[t._v("审核：")]),a("td",{attrs:{colspan:"3"}},[t._v("经办：")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])}],r={name:"purchsemanage-purchaseinfo",data:function(){return{loading:!1,info:{},itemList:[],orderUrl:""}},created:function(){this.getInfo()},methods:{getInfo:function(){var t=this,e=this.$route.query.formId;console.log(e),this.info.id=e,this.$http.get("/haolifa/purchase-order/info/".concat(e)).then((function(e){t.info=e.order,t.itemList=e.items,t.orderUrl=e.order.fileUrl,t.info.operateTime=e.order.operateTime.substring(0,10),t.info.confirmTime=e.order.confirmTime.substring(0,10),t.info.createTime=e.order.createTime.substring(0,10),t.info.deliveryTime=e.order.deliveryTime.substring(0,10),t.info.updateTime=e.order.updateTime.substring(0,10),console.log("info",t.info),console.log("itemList",t.itemList)})).catch((function(e){t.$toast(e.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))}}},n=r,o=(a("9086"),a("5d22")),l=Object(o["a"])(n,s,i,!1,null,null,null);e["default"]=l.exports},fbb9:function(t,e,a){}}]);
//# sourceMappingURL=suppliermanage.9545916c.js.map