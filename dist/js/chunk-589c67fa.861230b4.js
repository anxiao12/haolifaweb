(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-589c67fa"],{"08f1":function(t,i,e){"use strict";e("f5ae")},"153b":function(t,i,e){"use strict";i["a"]=function(t){return new Promise((function(i,e){var a=new FileReader;a.readAsDataURL(t),a.onload=function(){i(a.result)},a.onerror=function(t){e(t)}}))}},d4fe:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"page-part-add abs scroll-y"},[e("div",{staticClass:"form-content"},[e("div",{staticClass:"title b f-18"},[t._v(t._s(t.form.id?"编辑":"新增")+"发货通知单")]),e("div",{staticClass:"flex-v-center"}),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"mr-10",staticStyle:{width:"50%"},attrs:{label:"订单号"},model:{value:t.form.contractOrderNo,callback:function(i){t.$set(t.form,"contractOrderNo",i)},expression:"form.contractOrderNo"}})],1),e("div",{staticClass:"flex-v-center"},[e("upload-box",{staticStyle:{width:"50%"},attrs:{btnText:"上传发货单",fileList:t.fileList,onchange:t.uploadFile}})],1),e("div",{staticClass:"flex-v-center",staticStyle:{margin:"20px 0"}},[e("btn",{staticClass:"mr-20",attrs:{big:"",disabled:!t.canSubmit},on:{click:t.submit}},[t._v("提交")]),e("btn",{staticClass:"mr-20",attrs:{big:"",flat:"",bg:""},on:{click:t.cancel}},[t._v("取消")])],1),t.loading?e("layer",[e("div",{staticClass:"abs t-center",staticStyle:{padding:"20px"}},[e("loading",{attrs:{size:"30"}}),e("div",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.loadingMsg))])],1)]):t._e()],1)])},s=[],n=(e("a450"),e("153b")),o={name:"page-part-add",data:function(){return{loading:!1,loadingMsg:"",fileList:[],form:{id:"",contractOrderNo:"",deliveryUrl:""}}},computed:{canSubmit:function(){var t=this.form;return t.contractOrderNo&&t.deliveryUrl}},activated:function(){this.form={id:"",contractOrderNo:"",deliveryUrl:""},this.fileList=[];var t=this.$route.query.id;void 0!==t&&"bills-edit"===this.$route.name&&this.getInfo(t)},created:function(){var t=this.$route.query.id;void 0!==t&&"bills-edit"===this.$route.name&&this.getInfo(t)},methods:{getInfo:function(t){var i=this;this.$http.get("/haolifa/delivery/noticeInfo/".concat(t)).then((function(t){i.form=t})).catch((function(t){i.$toast(t.msg||t.message)}))},uploadFile:function(t,i){var e=this;this.loading=!0,this.loadingMsg="正在上传",Object(n["a"])(t.source).then((function(i){e.$http.post("/haolifa/file/uploadFileBase64",{base64Source:i,fileName:t.name}).then((function(t){e.form.deliveryUrl=t,e.loading=!1})).catch((function(t){e.$toast(t.msg||t.message),e.loading=!1}))}))},cancel:function(){var t=this,i=this.form.id?"/delivery-bills/edit":"/delivery-bills/add";this.$confirm({title:"您确定要离开此页面吗？",text:"您的表单将不会保存",color:"red",btns:["取消","离开"],yes:function(){t.$store.commit("DELMENUTABS",i),t.$router.push("/delivery-bills/addList")}})},submit:function(){var t=this,i=this.form;this.loading=!0,this.loadingMsg="正在保存";var e=this.form.id?"/delivery-bills/edit":"/delivery-bills/add";this.$http.post("/haolifa/delivery/saveNotice",i).then((function(i){t.loading=!1,t.$store.commit("DELMENUTABS",e),t.$router.push("/delivery-bills/addList")})).catch((function(i){t.loading=!1,t.$toast(i.msg||i.message)}))}}},r=o,l=(e("08f1"),e("cba8")),c=Object(l["a"])(r,a,s,!1,null,null,null);i["default"]=c.exports},f5ae:function(t,i,e){}}]);
//# sourceMappingURL=chunk-589c67fa.861230b4.js.map