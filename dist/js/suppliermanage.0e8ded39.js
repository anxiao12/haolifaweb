(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["suppliermanage"],{"00c5":function(t,e,a){},"0137":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-notification"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[t._v("费用报表统计图")]),e("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex"}},[e("div",{staticStyle:{"line-height":"28px"}},[t._v("开始时间:")]),e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getTwo},model:{value:t.twoData.startDate,callback:function(e){t.$set(t.twoData,"startDate",e)},expression:"twoData.startDate"}}),e("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("结束时间:")]),e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getTwo},model:{value:t.twoData.endDate,callback:function(e){t.$set(t.twoData,"endDate",e)},expression:"twoData.endDate"}}),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDeptDetail(1)}}},[t._v("数据显示")])],1),e("div",{staticStyle:{width:"95%",display:"flex",margin:"30px auto"}},[e("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartTwonew"}}),t.showFlag?e("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartTwoDetail"}}):t._e()]),e("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex"}},[e("div",{staticStyle:{"line-height":"28px"}},[t._v("开始时间:")]),e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getThree},model:{value:t.threeData.startDate,callback:function(e){t.$set(t.threeData,"startDate",e)},expression:"threeData.startDate"}}),e("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("结束时间:")]),e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getThree},model:{value:t.threeData.endDate,callback:function(e){t.$set(t.threeData,"endDate",e)},expression:"threeData.endDate"}}),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDeptDetail(2)}}},[t._v("数据显示")])],1),t._m(0),e("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex"}},[e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"year","value-format":"yyyy",editable:!1,placeholder:"选择年月"},on:{change:t.getFour},model:{value:t.fourYearDate,callback:function(e){t.fourYearDate=e},expression:"fourYearDate"}}),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDeptDetail(3)}}},[t._v("数据显示")])],1),t._m(1),t.layer?e("layer",{attrs:{title:"详情",width:"80%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwor-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"5%"}}),e("td",{staticStyle:{width:"6%"}}),e("td",{staticStyle:{width:"9%"}}),e("td",{staticStyle:{width:"17%"}}),e("td",{staticStyle:{width:"9%"}}),e("td",{staticStyle:{width:"9%"}}),e("td",{staticStyle:{width:"9%"}}),e("td",{staticStyle:{width:"9%"}}),e("td",{staticStyle:{width:"9%"}}),e("td",{staticStyle:{width:"9%"}}),e("td",{staticStyle:{width:"9%"}})]),e("tr",[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("报销人")]),e("th",[t._v("报销部门")]),e("th",[t._v("报销摘要")]),e("th",[t._v("费用类别")]),e("th",[t._v("凭证号")]),e("th",[t._v("费用类别明细")]),e("th",[t._v("总费用")]),e("th",[t._v("费用产生年份")]),e("th",[t._v("费用产生月份")]),e("th",[t._v("备注")])]),t._l(t.departData,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(s+1))]),e("td",[t._v(t._s(a.commitUser))]),e("td",[t._v(t._s(a.department))]),e("td",[t._v(t._s(a.summary))]),e("td",[t._v(t._s(a.expensesClassify))]),e("td",[t._v(t._s(a.voucherNo))]),e("td",[t._v(t._s(a.secondClassify))]),e("td",[t._v("￥ "+t._s(a.totalAmount))]),e("td",[t._v(t._s(a.dataYear))]),e("td",[t._v(t._s(a.dataMonth))]),e("td",[t._v(t._s(a.remark))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e(),t.deptFlag?e("layer",{attrs:{title:"详情",width:"95%"}},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                报销人:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.commitUser,expression:"form.commitUser"}],staticClass:"flex-item",staticStyle:{width:"150px","border-bottom":"1px solid #ccc"},attrs:{type:"text",placeholder:""},domProps:{value:t.form.commitUser},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.form,"commitUser",e.target.value)}}}),t._v("\n                报销部门:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.department,expression:"form.department"}],staticClass:"flex-item",staticStyle:{width:"150px","border-bottom":"1px solid #ccc"},attrs:{type:"text",placeholder:""},domProps:{value:t.form.department},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.form,"department",e.target.value)}}}),t._v("\n                费用类别:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.classifyName,expression:"form.classifyName"}],staticClass:"flex-item",staticStyle:{width:"150px","border-bottom":"1px solid #ccc"},attrs:{type:"text"},domProps:{value:t.form.classifyName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.form,"classifyName",e.target.value)}}}),t._v("\n                费用类别明细:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.secondClassifyName,expression:"form.secondClassifyName"}],staticClass:"flex-item",staticStyle:{width:"150px","border-bottom":"1px solid #ccc"},attrs:{type:"text",placeholder:""},domProps:{value:t.form.secondClassifyName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.form,"secondClassifyName",e.target.value)}}}),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.getDeptDetail(4)}}},[t._v("查询")]),e("el-button",{staticStyle:{"margin-left":"20px"},attrs:{underline:!1,type:"text"}},[t._v("费用汇总金额: "+t._s(t.totalNum)+"元")])],1)]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{"page-size":50,param:t.form,url:"/haolifa/expenses/list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.commitUser))]),e("td",[t._v(t._s(s.department))]),e("td",[t._v(t._s(s.summary))]),e("td",[t._v(t._s(s.expensesClassify))]),e("td",[t._v(t._s(s.voucherNo))]),e("td",[t._v(t._s(s.secondClassify))]),e("td",[t._v("￥ "+t._s(s.totalAmount))]),e("td",[t._v(t._s(s.dataYear))]),e("td",[t._v(t._s(s.dataMonth))]),e("td",[t._v(t._s(s.remark))])]}}],null,!1,507770287)},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("报销人")]),e("th",[t._v("报销部门")]),e("th",[t._v("报销摘要")]),e("th",[t._v("费用类别")]),e("th",[t._v("凭证号")]),e("th",[t._v("费用类别明细")]),e("th",[t._v("总费用")]),e("th",[t._v("费用产生年份")]),e("th",[t._v("费用产生月份")]),e("th",[t._v("备注")])])])],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.deptFlag=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"310px",width:"90%",display:"flex",margin:"60px auto"}},[e("div",{staticStyle:{width:"80%",height:"300px","margin-top":"20px"},attrs:{id:"chartThreenew"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"500px",width:"90%",margin:"0 auto"}},[e("div",{staticStyle:{width:"80%",height:"500px",margin:"0 auto"},attrs:{id:"chartFour"}})])}],r=(a("7f7f"),a("a745")),n=a.n(r);function l(t){if(n()(t))return t}var o=a("67bb"),c=a.n(o),p=a("5d58"),d=a.n(p);function u(t,e){var a=null==t?null:"undefined"!==typeof c.a&&t[d.a]||t["@@iterator"];if(null!=a){var s,i,r=[],n=!0,l=!1;try{for(a=a.call(t);!(n=(s=a.next()).done);n=!0)if(r.push(s.value),e&&r.length===e)break}catch(o){l=!0,i=o}finally{try{n||null==a["return"]||a["return"]()}finally{if(l)throw i}}return r}}var m=a("e630");function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){return l(t)||u(t,e)||Object(m["a"])(t,e)||f()}a("28a5");var v=a("9b68"),_={name:"report-form",components:{DataList:v["a"]},data:function(){return{twoYearDate:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),threeYearDate:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),chartOneList:[],yearDate:(new Date).getFullYear()+"",fourYearDate:(new Date).getFullYear()+"",totalNum:"",totalPrice:"",layer:!1,departData:[],showFlag:!0,twoData:{classifyName:"",commitUser:"",department:"",endDate:"",month:"",secondClassifyName:"",startDate:"",voucherNo:"",year:""},threeData:{classifyName:"",commitUser:"",department:"",endDate:"",month:"",secondClassifyName:"",startDate:"",voucherNo:"",year:""},deptFlag:!1,form:{classifyName:"",commitUser:"",department:"",endDate:"",month:"",secondClassifyName:"",startDate:"",voucherNo:"",year:""},deptDetailData:[]}},mounted:function(){this.twoData.startDate=this.threeData.startDate=(new Date).getFullYear()+"-01",this.getDepart(),this.getType(this.threeYearDate.split("-")[0],this.threeYearDate.split("-")[1]),this.getFour()},methods:{flush:function(){this.twoData.startDate=this.threeData.startDate=(new Date).getFullYear()+"-01",this.twoYearDate=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.threeYearDate=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.yearDate=(new Date).getFullYear()+"",this.fourYearDate=(new Date).getFullYear()+"",this.getDepart(),this.getType(this.threeYearDate.split("-")[0],this.threeYearDate.split("-")[1]),this.getFour()},addRezo:function(t){return t>9?t:"0"+t},getTwo:function(){var t=this.twoYearDate.split("-"),e=h(t,2);e[0],e[1];this.getDepart()},getThree:function(){var t=this.threeYearDate.split("-"),e=h(t,2),a=e[0],s=e[1];this.getType(a,s)},getDepart:function(){var t=this,e=this;this.$http.post("/haolifa/report/expense/classifyByDepartmentAll",this.twoData).then((function(a){a.length?t.showFlag=!0:t.showFlag=!1;var s=[],i=[];a.map((function(t){s.push(t.department),i.push({name:t.department,value:t.totalAmount})}));var r=t.$echarts.init(document.getElementById("chartTwonew")),n={title:{text:"部门费用分配",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.on("click",(function(t){e.getDepartDetail(t.data.name)})),r.setOption(n),e.getDepartDetail(s[0])})).catch((function(e){t.$toast(e.msg||e.message)}))},getDepartDetail:function(t){var e=this,a=this;this.$http.post("/haolifa/report/expense/getAllClassifyWithDepartment",{classifyName:"",commitUser:"",department:t,endDate:this.twoData.endDate,month:"",secondClassifyName:"",startDate:this.twoData.startDate,voucherNo:"",year:""}).then((function(s){var i=[],r=[];s.map((function(t){i.push(t.expensesClassify),r.push({name:t.expensesClassify,value:t.totalAmount})}));var n=e.$echarts.init(document.getElementById("chartTwoDetail")),l={title:{text:"部门明细:"+t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:i},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:r,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};n.on("click",(function(e){a.getDepartDetailSecond(t,e.data.name,year,month)})),n.setOption(l)})).catch((function(t){e.$toast(t.msg||t.message)}))},getDepartDetailSecond:function(t,e,a,s){var i=this;this.$http.post("/haolifa/expenses/list",{classifyName:e,commitUser:"",department:t,endDate:this.threeData.endDate,month:"",secondClassifyName:"",startDate:this.threeData.startDate,voucherNo:"",year:""}).then((function(t){i.layer=!0,i.departData=t.list})).catch((function(t){i.$toast(t.msg||t.message)}))},getDeptDetail:function(t){1==t?(this.form.startDate=this.twoData.startDate,this.form.endDate=this.twoData.endDate):2==t?(this.form.startDate=this.threeData.startDate,this.form.endDate=this.threeData.endDate):3==t&&(this.form.startDate=this.fourYearDate+"-01",this.form.endDate=this.fourYearDate+"-12"),this.deptDetailData=[],this.deptFlag=!0,this.getTotalNum(),this.$refs.list.update(!0)},getTotalNum:function(){var t=this;this.totalNum="",this.$http.post("/haolifa/expenses/list-summary",this.form).then((function(e){t.totalNum=e})).catch((function(e){t.$toast(e.msg||e.message)}))},getType:function(t,e){var a=this,s=this;this.$http.post("/haolifa/report/expense/getAllClassify",this.threeData).then((function(i){var r=[],n=[];i.map((function(t){r.push(t.expensesClassify),n.push({name:t.expensesClassify,value:t.totalAmount})}));var l=a.$echarts.init(document.getElementById("chartThreenew")),o={title:{text:"费用分配",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:r},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:n,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};l.on("click",(function(a){s.getDepartDetailSecond("",a.data.name,t,e)})),l.setOption(o)})).catch((function(t){a.$toast(t.msg||t.message)}))},getTypeDetail:function(t){var e=this;this.$http.get("/haolifa/report/expense/getAllClassifyWithFirstClassify?classify="+t).then((function(a){var s=[],i=[];a.map((function(t){s.push(t.department),i.push({name:t.secondClassify,value:t.totalAmount})}));var r=e.$echarts.init(document.getElementById("chartThreeDetail")),n={title:{text:"费用明细:"+t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.setOption(n)})).catch((function(t){e.$toast(t.msg||t.message)}))},getFour:function(){var t=this;this.$http.get("/haolifa/report/expense/total-by-month?year="+this.fourYearDate).then((function(e){var a=[],s=[],i=[],r=e[0].value[0].year,n=e[0].value[1].year;e.map((function(t){a.push(t.companyName+"月"),s.push(t.value[0].amount),i.push(t.value[1].amount)}));var l=t.$echarts.init(document.getElementById("chartFour")),o={color:["#3398DB","#91CC75"],title:{text:"年度费用按月统计",x:"left"},legend:{},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:a},yAxis:{type:"value"},series:[{name:r,barWidth:"30%",data:s,type:"bar"},{name:n,barWidth:"30%",data:i,type:"bar"}]};l.setOption(o)}))}}},y=_,g=(a("2dc8"),a("2877")),b=Object(g["a"])(y,s,i,!1,null,null,null);e["default"]=b.exports},"01a9":function(t,e,a){"use strict";a("1a8a")},"07f4":function(t,e,a){"use strict";a("3e3f")},"08c5":function(t,e,a){"use strict";a.r(e);a("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-kemu-list"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.name,expression:"filter.name"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"费用明细"},domProps:{value:t.filter.name},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"name",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.deptName,expression:"filter.deptName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"部门名称"},domProps:{value:t.filter.deptName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"deptName",e.target.value)}}}),t._v("\n            费用类别:\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.subjectsTypeCode,expression:"filter.subjectsTypeCode"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"subjectsTypeCode",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.subjectList,(function(a,s){return e("option",{domProps:{value:a.value}},[t._v(t._s(a.text))])}))],2)]),e("div",{staticClass:"flex-item"}),e("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")])],1),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/costbudget/subjects/getSubjectsBudgetList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.subjectsName))]),e("td",[t._v(t._s(s.name))]),e("td",[t._v(t._s(s.deptName))]),e("td",[t._v(t._s(s.costRatioFormulaCN))]),e("td",[t._v(t._s(s.balanceAmount))]),e("td",[t._v(t._s(s.remark))]),e("td",[t._v(t._s(s.updateTime))]),e("td",[t._v(t._s(s.createTime))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(s)}}},[t._v("编辑 | ")]),e("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(s)}}},[t._v("删除")])])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("费用类别")]),e("th",[t._v("费用明细")]),e("th",[t._v("部门")]),e("th",[t._v("费用")]),e("th",[t._v("余额")]),e("th",[t._v("备注")]),e("th",[t._v("更新时间")]),e("th",[t._v("创建时间")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?e("layer",{attrs:{title:"添加",width:"50%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"flex"},[e("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.subjectList,label:"选择费用类别"},on:{change:t.subjectsTypeChange},model:{value:t.form.subjectsType,callback:function(e){t.$set(t.form,"subjectsType",e)},expression:"form.subjectsType"}})],1),e("div",{staticClass:"flex"},[e("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.subjectList2,label:"选择费用明细"},on:{change:t.subChange},model:{value:t.form.subjectsId,callback:function(e){t.$set(t.form,"subjectsId",e)},expression:"form.subjectsId"}})],1),e("div",{staticClass:"flex"},[e("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.deptList,label:"选择部门"},model:{value:t.form.deptId,callback:function(e){t.$set(t.form,"deptId",e)},expression:"form.deptId"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"比例（1-100）"},model:{value:t.form.costRatio,callback:function(e){t.$set(t.form,"costRatio",e)},expression:"form.costRatio"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.save}},[t._v("保存")]),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{deptId:"",deptName:"",name:"",subjectsId:"",subjectsTypeCode:""},statusList:[{text:"正常",value:"1"},{text:"禁用",value:"2"}],subjectList:[],subjectList2:[],layer:!1,form:{costRatio:"",deptId:"",name:"",remark:"",subjectsId:"",subjectsType:""},deptList:[]}},activated:function(){this.getSubjectList(),this.getDeptList()},methods:{flush:function(){this.filter={deptId:"",deptName:"",name:"",subjectsId:"",subjectsTypeCode:""},this.$refs.list.update(!0),this.getSubjectList(),this.getDeptList()},getSubjectList:function(){var t=this;this.$http.get("/haolifa/sys-dict/getDictListByType/SUBJECTS_TYPE").then((function(e){t.subjectList=[],e.map((function(e){t.subjectList.push({text:e.desc,value:e.code})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},subjectsTypeChange:function(t){var e=this;this.subjectList2=[],t||(this.form.subjectsId=""),this.$http.post("/haolifa/finance/subjects/getSubjectsListAllP",{pageNum:1,pageSize:1e3,subjectsType:this.form.subjectsType}).then((function(t){t.map((function(t){e.subjectList2.push({text:t.name,value:t.id})}))}))},subChange:function(){var t=this;this.form.subjectsId&&this.subjectList.map((function(e){t.form.subjectsId==e.value&&(t.form.name=e.text)}))},add:function(){this.layer=!0},edit:function(t){this.form={costRatio:t.costRatio,deptId:t.deptId,name:t.name,remark:t.remark,subjectsId:t.subjectsId,id:t.id,subjectsType:t.subjectsTypeCode},this.subjectsTypeChange(2),this.layer=!0},save:function(){var t=this;this.loading=!0;var e=this.form.id?"/haolifa/finance/costbudget/subjects/updateSubjectsBudget":"/haolifa/finance/costbudget/subjects/saveSubjectsBudget";this.$http.post(e,this.form).then((function(e){t.close(),t.$toast("保存成功"),t.loading=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},close:function(){this.form={costRatio:"",deptId:"",name:"",remark:"",subjectsType:"",subjectsId:""},this.layer=!1},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除吗？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/finance/costbudget/subjects/deleteSubjectsBudget/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},getDeptList:function(){var t=this;this.$http.get("/haolifa/dept/list").then((function(e){e.map((function(e){t.deptList.push({text:e.deptName,value:e.id})}))})).catch((function(e){t.$toast(e.msg||e.message)}))}}},l=n,o=(a("81c7"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"0abe":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-invoice-list"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.demander,expression:"filter.demander"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"需求方"},domProps:{value:t.filter.demander},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"demander",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供应方"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}})]),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/payplansummary/getPayPlanList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.demander))]),e("td",[t._v(t._s(s.supplierName))]),e("td",[t._v(t._s(s.arrearPrice))]),e("td",[t._v(t._s(s.totalPrice))]),e("td",[t._v(t._s(s.entryPrice))]),e("td",[t._v(t._s(s.paidAccount))]),e("td",[t._v(t._s(s.applyAmount))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.detail(s)}}},[t._v("详 情")])])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("需求方")]),e("th",[t._v("供应商")]),e("th",[t._v("累计欠款额")]),e("th",[t._v("累计订货额")]),e("th",[t._v("累计入账额")]),e("th",[t._v("已付货款")]),e("th",[t._v("计划付款额")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1)])},i=[],r=a("9b68"),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{supplierName:"",demander:""}}},mounted:function(){this.getAccount()},methods:{flush:function(){this.filter={supplierName:"",demander:""},this.$refs.list.update(!0)},detail:function(t){this.$router.push({name:"/pay-planList",query:{demander:t.demander,supplierName:t.supplierName}})}}},l=n,o=(a("be51"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"0b0f":function(t,e,a){},"0ef7":function(t,e,a){"use strict";a("17d7")},"13b9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-invoice-list"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"}),e("div",{staticClass:"flex-item scroll-y"},[e("el-tree",{ref:"tree",attrs:{data:t.data,"default-expand-all":!0,"node-click":t.nodeClick,"node-key":"id",props:t.defaultProps},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.node,i=a.data;return e("span",{staticClass:"custom-tree-node"},[e("span",[t._v(t._s(s.label))]),e("span",{staticClass:"tree-span ml-20"},[e("el-link",{staticStyle:{"margin-left":"50px"}},[t._v(t._s(i.costRatioFormulaCN))]),e("el-link",{staticStyle:{"margin-left":"50px"}},[t._v(t._s(i.description))]),e("el-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"text",size:"mini"},on:{click:function(){return t.edit(i)}}},[t._v("编辑")]),e("el-button",{staticClass:"ml-20",attrs:{type:"text",size:"mini"},on:{click:function(){return t.remove(i)}}},[t._v("删除")])],1)])}}])})],1),t.layer?e("layer",{attrs:{title:"编辑",width:"50%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"flex"},[e("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.deptList,disabled:!0,label:"选择部门"},model:{value:t.form.deptId,callback:function(e){t.$set(t.form,"deptId",e)},expression:"form.deptId"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"比例（1-100）"},model:{value:t.form.costRatio,callback:function(e){t.$set(t.form,"costRatio",e)},expression:"form.costRatio"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.save}},[t._v("保存")]),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{deptId:"",deptPid:"",name:"",pageNum:1,pageSize:9999},statusList:[{text:"正常",value:"1"},{text:"禁用",value:"2"}],subjectList:[],layer:!1,form:{costRatio:0,deptId:"",remark:""},deptList:[],data:[],defaultProps:{label:"name",children:"childList"}}},activated:function(){this.getDeptList(),this.getList()},methods:{flush:function(){this.filter={deptId:"",deptPid:"",name:"",pageNum:1,pageSize:9999},this.getList(),this.getDeptList()},subChange:function(){var t=this;this.form.subjectsId&&this.subjectList.map((function(e){t.form.subjectsId==e.value&&(t.form.name=e.text)}))},getList:function(){var t=this;this.$http.post("/haolifa/finance/costbudget/dept/getDeptBudgetList",this.filter).then((function(e){t.data=e})).catch((function(e){t.$toast(e.message||e.msg)}))},nodeClick:function(){},add:function(){this.layer=!0},edit:function(t){this.form={costRatio:t.costRatio,deptId:t.id+"",remark:t.description},this.layer=!0},save:function(){var t=this;this.loading=!0,this.$http.post("/haolifa/finance/costbudget/dept/saveOrUp",this.form).then((function(e){t.close(),t.$toast("保存成功"),t.loading=!1,t.getList()})).catch((function(e){t.$toast(e.msg||e.message)}))},close:function(){this.form={costRatio:0,deptId:"",remark:""},this.layer=!1},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除吗？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/finance/costbudget/dept/delete/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.getList()})).catch((function(t){e.$toast(t.msg||t.message)}))}})},getDeptList:function(){var t=this;this.$http.get("/haolifa/dept/list").then((function(e){e.map((function(e){t.deptList.push({text:e.deptName,value:e.id+""})}))})).catch((function(e){t.$toast(e.msg||e.message)}))}}},l=n,o=(a("2c2a"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"153b":function(t,e,a){"use strict";e["a"]=function(t){return new Promise((function(e,a){var s=new FileReader;s.readAsDataURL(t),s.onload=function(){e(s.result)},s.onerror=function(t){a(t)}}))}},"17d7":function(t,e,a){},"197a":function(t,e,a){"use strict";a("bc0a")},"1a8a":function(t,e,a){},"1bb7":function(t,e,a){},2584:function(t,e,a){"use strict";a("fe99")},"2c2a":function(t,e,a){"use strict";a("45af")},"2dc8":function(t,e,a){"use strict";a("ae10")},"2fbe":function(t,e,a){"use strict";a.r(e);a("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"process-prod flex-col"},[e("div",{staticClass:"flex-item scroll-y"},[e("div",{staticClass:"content"},[t.data?e("div",{staticClass:"p-p-base"},[e("div",{staticClass:"node"},[t._m(0),e("div",{staticClass:"node"},[e("div",{staticClass:"node-title mb-10"},[e("span",{staticClass:"b"},[t._v("流程描述：")]),e("span",{staticClass:"mr-15"},[t._v(t._s(t.data.summary))])]),e("div",{staticClass:"node-title mb-10"},[e("span",{staticClass:"b"},[t._v("发 起 人：")]),e("span",{staticClass:"mr-15"},[t._v(t._s(t.data.initUserName))])]),e("div",{staticClass:"node-title mb-10"},[e("span",{staticClass:"b"},[t._v("发起时间：")]),e("span",[t._v(t._s(t.data.createTime))])]),t._m(1),e("div",{staticClass:"layer-text",staticStyle:{padding:"0"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[t._m(2),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("借款人 :")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.loanUserName))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("借款金额 :")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.amount))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("部门 :")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.deptName))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("资金性质 :")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.amountTypeCN))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("户名 :")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.accountName))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("开户行 :")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.bankOfDeposit))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("卡号 :")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.cardNumber))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("借款日期 :")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.loanDate))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("预计还款日期 :")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.expectRepaymentDate))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("用途 :")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.purpose))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("备注摘要 :")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.remark))])])])])])]),t.data.dealStep?e("div",[e("div",{staticClass:"flex-item mt-10 mb-10"},[e("span",{staticClass:"f-20"},[t._v("审批栏")]),e("span",{staticClass:"f-10 ml-20"},[t._v("当前节点:"+t._s(t.data.dealStep.stepName))])]),e("div",{staticClass:"node"},[e("div",[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{"multi-line":!0,label:"审批意见"},model:{value:t.handleStep.auditInfo,callback:function(e){t.$set(t.handleStep,"auditInfo",e)},expression:"handleStep.auditInfo"}})],1),e("div",{staticClass:"flex"},[e("upload-box",{staticStyle:{width:"50%"},attrs:{btnText:"附件上传",fileList:t.fileList,multiple:t.multiple,onchange:t.uploadFile,onremove:t.removeFile}})],1),e("div",{staticClass:"flex",staticStyle:{"margin-top":"10px"}},[e("btn",{on:{click:function(e){return t.handleStepM(1)}}},[t._v("同意")]),e("btn",{staticClass:"ml-10",on:{click:function(e){return t.handleStepM(0)}}},[t._v("不同意")]),e("btn",{staticClass:"ml-10",on:{click:function(e){return t.backStepM()}}},[t._v("退回")])],1)])])]):t._e(),t.data.historyInfos?e("div",[t._m(3),e("div",{staticClass:"flex-item scroll-y"},[e("table",{staticClass:"data-table"},[t._m(4),t._l(t.data.historyInfos,(function(a,s){return e("tr",[e("td",[t._v(t._s(a.historyId))]),e("td",[t._v(t._s(a.instanceId))]),e("td",[t._v(t._s(3==a.auditResult?"发起":"审批"))]),e("td",[t._v(t._s(a.stepName))]),e("td",[t._v(t._s(a.auditUserName))]),e("td",[t._v(t._s(t.auditResults[a.auditResult].name))]),e("td",[t._v(t._s(a.auditInfo))]),null!=a.accessories?e("td",t._l(a.accessories,(function(a,s){return e("a",{key:s,attrs:{href:a.fileUrl}},[t._v(t._s(a.fileName))])})),0):e("td",[t._v("无")])])}))],2)])]):t._e(),t.data.accessories?e("div",[t._m(5),e("div",{staticClass:"flex-item"},t._l(t.data.accessories,(function(a,s){return e("div",{key:s,staticStyle:{"margin-left":"20px","margin-top":"5px"}},[e("div",{staticClass:"flex"},[e("a",{staticStyle:{"text-decoration":"none","out-line":"none",color:"blue"},attrs:{href:a.fileUrl,target:"_blank"}},[t._v(t._s(a.fileName))])])])})),0)]):t._e()]),t.backStepLayer?e("layer",{attrs:{title:"退回节点",width:"450px"}},[e("div",{staticClass:"node"},t._l(t.backSteps,(function(a){return e("div",{staticClass:"node-item"},[e("radio-box",{attrs:{label:a.stepId},model:{value:t.handleStep.backStepId,callback:function(e){t.$set(t.handleStep,"backStepId",e)},expression:"handleStep.backStepId"}}),t._v("\n                            "+t._s(a.stepName)+"\n                        ")],1)})),0),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:function(e){return t.cancel()}}},[t._v("取消")]),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("提交")])],1)]):t._e()],1):t._e()])])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-item mt-10 mb-10"},[e("span",{staticClass:"f-20"},[t._v("基本信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"node-title"},[e("span",{staticClass:"b"},[t._v("借款申请详情：")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticStyle:{width:"20%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"25%"}}),e("td",{staticStyle:{width:"25%"}}),e("td",{staticStyle:{width:"20%"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-item mt-10 mb-10"},[e("span",{staticClass:"f-20"},[t._v("审批历史")])])},function(){var t=this,e=t._self._c;return e("tr",[e("th",{staticStyle:{width:"60px"}},[t._v("ID")]),e("th",[t._v("实例ID")]),e("th",[t._v("节点类型")]),e("th",[t._v("节点名称")]),e("th",[t._v("审核人")]),e("th",[t._v("审核结果")]),e("th",[t._v("意见")]),e("th",[t._v("审核附件")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-item mt-10 mb-10"},[e("span",{staticClass:"f-20"},[t._v("审批附件")])])}],n=(a("a481"),a("c1df")),l=a.n(n),o=a("153b"),c={name:"process-prod",data:function(){return{data:null,orderUrl:"/haolifa/export/purchaseOrder/",backStepLayer:!1,auditResults:[{status:0,name:"审核不通过"},{status:1,name:"审核通过"},{status:2,name:"退回"},{status:3,name:"流程初始化"}],handleStep:{id:0,stepId:0,auditInfo:"",allotUserId:null,auditResult:1,formId:0,formType:0,backStepId:null,condition:!0,accessorys:[]},backSteps:[],fileList:[],fileName:"",multiple:!0,info:{}}},activated:function(){this.getData()},created:function(){},methods:{switchTab:function(t){this.$router.replace({path:t,query:this.$route.query})},getData:function(){var t=this;this.$http.get("/haolifa/flowInstance/flow-history/".concat(this.$route.query.instanceId)).then((function(e){e.createTime=l()(e.createTime).format("YYYY-MM-DD HH:mm"),t.data=e,t.handleStep.id=e.instanceId,e.dealStep&&(t.handleStep.stepId=e.dealStep.stepId),t.$http.get("/haolifa/finance/loanapply/info/".concat(e.formId)).then((function(e){t.info=e,console.log(t.info)}))})).catch((function(e){t.$toast(e.message||e.msg)}))},handleStepM:function(t){var e=this;this.handleStep.auditResult=t,this.$http.post("/haolifa/flowInstance/handleStep",this.handleStep).then((function(t){e.$toast("处理成功"),e.handleStep.backStepId=null,e.backStepLayer=!1,e.getData(),e.$store.commit("DELMENUTABS","/jkfkEntrust"),e.$router.push("/")})).catch((function(t){e.$toast(t.msg||t.message)}))},uploadFile:function(t,e){var a=this;this.loading=!0,this.loadingMsg="正在上传",Object(o["a"])(t.source).then((function(e){a.$http.post("/haolifa/file/uploadFileBase64",{base64Source:e,fileName:t.name}).then((function(e){a.handleStep.accessorys.push({fileName:t.name,fileUrl:e}),a.loading=!1})).catch((function(t){a.$toast(t.msg||t.message),a.loading=!1}))}))},removeFile:function(){var t=this;return new Promise((function(e,a){t.handleStep.accessorys.splice(i,1),e()}))},backStepM:function(){var t=this;this.$http.get("/haolifa/flowInstance/backSteps/".concat(this.handleStep.id)).then((function(e){e.length>0?(t.backSteps=e,t.backStepLayer=!0):t.$toast("无可退回节点")})).catch((function(e){t.$toast(e.msg||e.message)}))},complete:function(){this.handleStepM(2)},cancel:function(){this.backStepLayer=!1,this.handleStep.backStepId=null}}},p=c,d=(a("7112"),a("2877")),u=Object(d["a"])(p,s,r,!1,null,null,null);e["default"]=u.exports},"34c3":function(t,e,a){"use strict";a("00c5")},3907:function(t,e,a){"use strict";a.r(e);a("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"purchaseadd flex-col"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"机加工合同号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供方单位"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:"0"}},[t._v("合同状态")]),t._l(t.statusList,(function(a){return e("option",{key:a.id,domProps:{value:a.status}},[t._v(t._s(a.name))])}))],2),e("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),e("div",{staticClass:"flex-item"}),e("router-link",{attrs:{to:"/purchsemanage-entrust/add"}},[e("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"}},[t._v("新增机加工订单")])],1)],1),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{method:"get","page-size":15,param:t.filter,url:"/haolifa/purchase-order/list/1"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",[t._v(t._s(i))]),e("td",[t._v(t._s(s.purchaseOrderNo))]),e("td",[t._v(t._s(s.supplierName))]),e("td",[t._v(t._s(s.deliveryTime))]),e("td",[t._v(t._s(s.totalCount))]),e("td",[t._v(t._s(t.statusList[s.status-1].name))]),e("td",[t._v(t._s(s.createUserId))]),e("td",[t._v(t._s(s.createTime))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("查看")]),1==s.status?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approve(s.purchaseOrderNo)}}},[t._v("发起审批")]):t._e(),3==s.status?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.createInspect(s.id)}}},[t._v("生成报检单")]):t._e(),1==s.status?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.updatePurchase(s.id)}}},[t._v("编辑")]):t._e(),2==s.status?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approveProgress(s)}}},[t._v("审批进度")]):t._e(),1==s.status||4==s.status?e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.deletePurchase(s.purchaseOrderNo)}}},[t._v("删除")]):t._e(),3==s.status?e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.completePurchase(s.purchaseOrderNo)}}},[t._v("采购完成")]):t._e()])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("机加工合同号")]),e("th",[t._v("供方单位")]),e("th",[t._v("加工完成日期")]),e("th",[t._v("订单总数量")]),e("th",[t._v("订单状态")]),e("th",[t._v("创建人")]),e("th",[t._v("创建日期")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?e("layer",{attrs:{title:"订单折损",width:"450px"}},[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损金额"},model:{value:t.wreck.wreckAmount,callback:function(e){t.$set(t.wreck,"wreckAmount",e)},expression:"wreck.wreckAmount"}}),e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损原因"},model:{value:t.wreck.wreckReason,callback:function(e){t.$set(t.wreck,"wreckReason",e)},expression:"wreck.wreckReason"}})],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?e("layer",{attrs:{title:"详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14"},[e("tr",[e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("机加工订单")]),e("td",{staticClass:"b",attrs:{colspan:"6"}},[e("a",{staticClass:"a",staticStyle:{color:"#008eff"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),e("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),e("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),e("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),e("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),e("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),e("tr",[e("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(a,s){return e("tr",{key:a.id},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.specification))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.material))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unit))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.number))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitPrice))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalAmount))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.remark))])])})),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("总计")]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),e("td",{attrs:{colspan:"1"}})]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),e("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),e("td",{attrs:{colspan:"3"}},[t._v("批准：")]),e("td",{attrs:{colspan:"3"}},[t._v("审核：")]),e("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"purchsemanage-entrust",components:{DataList:r["a"]},data:function(){return{natureList:["国有","三资","集体","联营","私营"],statusList:[{status:1,name:"待审批"},{status:2,name:"审批中"},{status:3,name:"采购中"},{status:4,name:"审批不通过"},{status:5,name:"采购完成"}],filter:{orderNo:"",supplierName:"",status:0,createUserId:0},wreck:{orderNo:"",wreckAmount:0,wreckReason:""},completeLayer:!1,confirmLayer:!1,loading:!1,info:{},itemList:[],orderUrl:"",layer:!1}},created:function(){this.filter.createUserId=0},methods:{flush:function(){this.filter={orderNo:"",supplierName:"",status:0,createUserId:0},this.$refs.list.update(!0)},getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/purchase-order/info/".concat(t)).then((function(t){e.info=t.order,e.orderUrl=t.order.fileUrl,e.itemList=t.items,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10),console.log("info",e.info),console.log("itemList",e.itemList)})).catch((function(t){e.$toast(t.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))},createInspect:function(t){var e=this;this.$http.get("/haolifa/purchase-order/createInspect/".concat(t)).then((function(t){console.log("报检单号",t),e.$confirm({title:"完善报检单",text:"现在去完善报检单？",color:"blue",btns:["稍后再说","现在完善"],yes:function(){e.$router.push("/applyBuy-material/edit?id=".concat(t))}})}))},approveProgress:function(t){this.$router.push("/purchsemanage-entrust/approveProgress?formNo=".concat(t.purchaseOrderNo,"&formId=0"))},approve:function(t){var e=this;this.$confirm({title:"发起审批",text:"确定发起审批？",color:"blue",btns:["取消","确认"],yes:function(){e.$http.get("/haolifa/purchase-order/approve/".concat(t,"/1")).then((function(t){e.$toast("发起成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},updatePurchase:function(t){this.$router.push("/purchsemanage-entrust/add?formId=".concat(t))},completePurchase:function(t){this.completeLayer=!0,this.wreck.orderNo=t},complete:function(){var t=this;this.$http.post("/haolifa/purchase-order/complete",this.wreck).then((function(e){t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},deletePurchase:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除该订单么？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/purchase-order/delete/".concat(t)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg)}))}})}}},l=n,o=(a("50c4"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"394a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"abs scroll-y"},[e("div",{staticClass:"metalwork-info",staticStyle:{width:"100%",margin:"0 auto"}},[e("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[e("icon-btn",{staticClass:"mr-15",on:{click:function(e){t.$store.commit("DELMENUTABS","/purchsemanage-purchase/approveProgress"),t.$router.back()}}},[t._v("arrow_back")]),e("div",{staticClass:"flex-item"},[t._v("审批进度")])],1),e("div",{staticStyle:{"min-width":"1200px"}},t._l(t.list,(function(a,s){return e("div",{key:s,staticClass:"approve"},[e("p",[t._v(t._s(a.roleName))]),e("p",{class:4==a.auditResult?"button ccc":"button"},[t._v(t._s(a.stepName))]),s<t.list.length-1?e("span",[t._v("-----\x3e")]):t._e(),e("p",[t._v(t._s(t.status[a.auditResult])+t._s(a.auditTime))]),a.child.length>0?e("div",{staticClass:"approve",staticStyle:{position:"absolute",top:"123px"}},[e("div",{staticClass:"height-line"}),e("div",{staticClass:"bottom-arrows"}),e("p",[t._v(t._s(a.child[0].roleName))]),e("p",{class:4==a.child[0].auditResult?"button ccc":"button"},[t._v(t._s(a.child[0].stepName))]),e("p",[t._v(t._s(t.status[a.child[0].auditResult])+t._s(a.auditTime))]),e("div",{staticClass:"right-height-line"}),e("div",{staticClass:"top-arrows"})]):t._e()])})),0)])])},i=[],r={name:"purchsemanage-purchaseapproveProgress",data:function(){return{list:[],status:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},activated:function(){this.getInfo(this.$route.query.formNo,this.$route.query.formId)},methods:{getInfo:function(t,e){var a=this;this.$http.get("/haolifa/flowInstance/flow/progress?formNo=".concat(t,"&formId=").concat(e)).then((function(t){console.log(t),a.list=t})).catch((function(t){a.$toast(t.msg||t.message)}))}}},n=r,l=(a("9396"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},"3c35":function(t,e,a){},"3c8e":function(t,e,a){},"3e3f":function(t,e,a){},4176:function(t,e,a){},4517:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"apply-buy-add"},[e("div",{staticClass:"content"},[e("div",{staticClass:"title b f-18 mb-10"},[t._v(t._s(t.isAdd?"新增":"编辑")+"采购订单")]),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方"},model:{value:t.form.demander,callback:function(e){t.$set(t.form,"demander",e)},expression:"form.demander"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方地址"},model:{value:t.form.demanderAddr,callback:function(e){t.$set(t.form,"demanderAddr",e)},expression:"form.demanderAddr"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系人"},model:{value:t.form.demanderLinkman,callback:function(e){t.$set(t.form,"demanderLinkman",e)},expression:"form.demanderLinkman"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系电话"},model:{value:t.form.demanderPhone,callback:function(e){t.$set(t.form,"demanderPhone",e)},expression:"form.demanderPhone"}})],1),e("div",{staticClass:"flex"},[e("select-box",{staticStyle:{"margin-right":"20px",width:"240px"},attrs:{list:t.supplierList,label:"供应商"},on:{change:function(e){return t.changeSupplier()}},model:{value:t.form.supplierNo,callback:function(e){t.$set(t.form,"supplierNo",e)},expression:"form.supplierNo"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方地址"},model:{value:t.form.supplierAddr,callback:function(e){t.$set(t.form,"supplierAddr",e)},expression:"form.supplierAddr"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系人"},model:{value:t.form.supplierLinkman,callback:function(e){t.$set(t.form,"supplierLinkman",e)},expression:"form.supplierLinkman"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系电话"},model:{value:t.form.suppilerPhone,callback:function(e){t.$set(t.form,"suppilerPhone",e)},expression:"form.suppilerPhone"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方确认人"},model:{value:t.form.supplierConfirmer,callback:function(e){t.$set(t.form,"supplierConfirmer",e)},expression:"form.supplierConfirmer"}})],1),e("div",{staticClass:"flex"},[e("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"确认时间"},model:{value:t.form.confirmTime,callback:function(e){t.$set(t.form,"confirmTime",e)},expression:"form.confirmTime"}}),e("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"交货时间"},model:{value:t.form.deliveryTime,callback:function(e){t.$set(t.form,"deliveryTime",e)},expression:"form.deliveryTime"}}),e("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办时间"},model:{value:t.form.operateTime,callback:function(e){t.$set(t.form,"operateTime",e)},expression:"form.operateTime"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办人"},model:{value:t.form.operatorUserName,callback:function(e){t.$set(t.form,"operatorUserName",e)},expression:"form.operatorUserName"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",attrs:{label:"采购合同编号"},model:{value:t.form.orderNo,callback:function(e){t.$set(t.form,"orderNo",e)},expression:"form.orderNo"}}),e("select-box",{staticClass:"flex-item",attrs:{list:t.payTypeList,label:"付款方式"},model:{value:t.form.payType,callback:function(e){t.$set(t.form,"payType",e)},expression:"form.payType"}})],1),e("div",{staticClass:"b",staticStyle:{margin:"20px 0 10px"}},[t._v("采购物料项")]),t._l(t.form.itemList,(function(a,s){return e("div",{key:s,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[e("div",{staticClass:"flex-item"},[e("div",{staticClass:"flex"},[e("select-box",{staticClass:"flex-item mr-10",attrs:{list:t.nameList,label:"物料名称"},model:{value:a.materialName,callback:function(e){t.$set(a,"materialName",e)},expression:"item.materialName"}}),e("el-select",{staticClass:"flex-item mr-10 mycs",attrs:{filterable:"",placeholder:"物料图号选择"},on:{change:function(e){return t.materialInfo(a)}},model:{value:a.materialGraphNo,callback:function(e){t.$set(a,"materialGraphNo",e)},expression:"item.materialGraphNo"}},t._l(t.tuhaoList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.text,value:t.value}})})),1),e("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"数量"},model:{value:a.number,callback:function(e){t.$set(a,"number",e)},expression:"item.number"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单位"},model:{value:a.unit,callback:function(e){t.$set(a,"unit",e)},expression:"item.unit"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"材质"},model:{value:a.material,callback:function(e){t.$set(a,"material",e)},expression:"item.material"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格"},model:{value:a.specification,callback:function(e){t.$set(a,"specification",e)},expression:"item.specification"}}),e("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单价"},model:{value:a.unitPrice,callback:function(e){t.$set(a,"unitPrice",e)},expression:"item.unitPrice"}}),e("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单重"},model:{value:a.unitWeight,callback:function(e){t.$set(a,"unitWeight",e)},expression:"item.unitWeight"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",attrs:{label:"备注"},model:{value:a.remark,callback:function(e){t.$set(a,"remark",e)},expression:"item.remark"}})],1)]),t.form.itemList.length>1?e("div",[e("icon-btn",{attrs:{small:""},on:{click:function(e){return t.form.itemList.splice(s,1)}}},[t._v("close")])],1):t._e()])})),e("div",{staticClass:"card a flex-center",on:{click:function(e){return t.addItem()}}},[t._m(0)]),e("div",{staticClass:"flex"},[e("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(e){return t.submit()}}},[t._v("提交")]),e("btn",{attrs:{big:"",flat:""},on:{click:function(e){t.$store.commit("DELMENUTABS","/purchsemanage-purchase/add"),t.$router.back()}}},[t._v("取消")])],1)],2)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-v-center"},[e("i",{staticClass:"icon mr-10"},[t._v("add")]),e("span",[t._v("添加采购物料项")])])}],r=(a("ac6a"),{name:"purchsemanage-purchaseadd",data:function(){return{supplierInfoList:[],supplierList:[],form:{id:null,confirmTime:"",deliveryTime:"",demander:"山西好利阀机械制造有限公司",demanderAddr:"山西省侯马经济开发区旺旺北支路东侧",demanderLinkman:"",demanderPhone:"",operateTime:"",operatorUserName:"",orderNo:"",suppilerPhone:"",supplierAddr:"",supplierConfirmer:"",supplierLinkman:"",supplierName:"",supplierNo:"",payType:"",itemList:[{id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}]},isAdd:!0,nameList:[],tuhaoList:[],payTypeList:[{value:"款到发货",text:"款到发货"},{value:"月结",text:"月结"},{value:"先预付30%，发货前付清剩余货款",text:"先预付30%，发货前付清剩余货款"},{value:"收到发票后60天内付清货款",text:"收到发票后60天内付清货款"}]}},activated:function(){var t=this;this.form={id:null,confirmTime:"",deliveryTime:"",demander:"山西好利阀机械制造有限公司",demanderAddr:"山西省侯马经济开发区旺旺北支路东侧",demanderLinkman:"",demanderPhone:"",operateTime:"",operatorUserName:"",orderNo:"",suppilerPhone:"",supplierAddr:"",supplierConfirmer:"",supplierLinkman:"",supplierName:"",supplierNo:"",payType:"",itemList:[{id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}]};var e=this.$route.query.formId;this.form.id=e,this.$http.get("/haolifa/supplier/list-all").then((function(e){t.supplierList=e.map((function(t){return{value:t.suppilerNo,text:t.suppilerName}})),t.supplierInfoList=e})),e&&(this.isAdd=!1,this.$http.get("/haolifa/purchase-order/info/"+e).then((function(e){t.form.id=e.order.id,t.form.demander=e.order.demander,t.form.demanderAddr=e.order.demanderAddr,t.form.demanderLinkman=e.order.demanderLinkman,t.form.demanderPhone=e.order.demanderPhone,t.form.operatorUserName=e.order.operatorUserName,t.form.suppilerPhone=e.order.suppilerPhone,t.form.supplierAddr=e.order.supplierAddr,t.form.supplierConfirmer=e.order.supplierConfirmer,t.form.supplierLinkman=e.order.supplierLinkman,t.form.supplierName=e.order.supplierName,t.form.supplierNo=e.order.supplierNo,t.form.payType=e.order.payType,t.form.orderNo=e.order.purchaseOrderNo,t.form.confirmTime=e.order.confirmTime.substring(0,10),t.form.deliveryTime=e.order.deliveryTime.substring(0,10),t.form.operateTime=e.order.operateTime.substring(0,10),t.form.itemList=e.items.map((function(t){return{id:t.id,material:t.material,materialGraphNo:t.materialGraphNo,materialName:t.materialName,number:t.number,remark:t.remark,specification:t.specification,unit:t.unit,unitPrice:t.unitPrice,unitWeight:t.unitWeight}}))})))},mounted:function(){var t=this,e=this.$route.query.formId;this.form.id=e,this.$http.get("/haolifa/supplier/list-all").then((function(e){t.supplierList=e.map((function(t){return{value:t.suppilerNo,text:t.suppilerName}})),t.supplierInfoList=e})),e&&(this.isAdd=!1,this.$http.get("/haolifa/purchase-order/info/"+e).then((function(e){t.form.id=e.order.id,t.form.demander=e.order.demander,t.form.demanderAddr=e.order.demanderAddr,t.form.demanderLinkman=e.order.demanderLinkman,t.form.demanderPhone=e.order.demanderPhone,t.form.operatorUserName=e.order.operatorUserName,t.form.suppilerPhone=e.order.suppilerPhone,t.form.supplierAddr=e.order.supplierAddr,t.form.supplierConfirmer=e.order.supplierConfirmer,t.form.supplierLinkman=e.order.supplierLinkman,t.form.supplierName=e.order.supplierName,t.form.supplierNo=e.order.supplierNo,t.form.payType=e.order.payType,t.form.orderNo=e.order.purchaseOrderNo,t.form.confirmTime=e.order.confirmTime.substring(0,10),t.form.deliveryTime=e.order.deliveryTime.substring(0,10),t.form.operateTime=e.order.operateTime.substring(0,10),t.form.itemList=e.items.map((function(t){return{id:t.id,material:t.material,materialGraphNo:t.materialGraphNo,materialName:t.materialName,number:t.number,remark:t.remark,specification:t.specification,unit:t.unit,unitPrice:t.unitPrice,unitWeight:t.unitWeight}}))})))},methods:{materialInfo:function(t){},changeSupplier:function(){var t=this;if(this.supplierInfoList.forEach((function(e,a){e.suppilerNo==t.form.supplierNo&&(t.form.suppilerPhone=e.phone,t.form.supplierAddr=e.address,t.form.supplierLinkman=e.responsiblePerson,t.form.supplierName=e.suppilerName)})),this.nameList=this.tuhaoList=[],this.form.supplierNo){var e={pageNum:1,pageSize:500,supplierNo:this.form.supplierNo};this.$http.post("/haolifa/supplier-pro/list",e).then((function(e){var a=e.list;t.nameList=a.map((function(t){return{value:t.materialName,text:t.materialName}})),t.tuhaoList=a.map((function(t){return{value:t.materialGraphNo,text:t.materialGraphNo}}))})).catch((function(e){t.$toast(e.msg||e.message)}))}},addItem:function(){this.form.itemList.push({id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}),this.$forceUpdate()},submit:function(){var t=this,e={materialName:"物料名称",materialGraphNo:"物料图号",number:"数量",material:"材质",specification:"规格",unit:"单位",unitPrice:"单价",unitWeight:"单重"},a=!0;this.form.itemList.forEach((function(s,i){for(var r in s)e[r]&&!s[r]&&(t.$toast("请填写第 ".concat(i+1," 项 ").concat(e[r])),a=!1)})),a&&this.$http.post(this.isAdd?"/haolifa/purchase-order/save/0":"/haolifa/purchase-order/update",this.form).then((function(e){t.$toast(t.isAdd?"创建成功":"更新成功"),t.$store.commit("DELMENUTABS","/purchsemanage-purchase/add"),t.$router.push("/purchsemanage-purchase/addList")})).catch((function(e){t.$toast(e.message||e.msg)}))}}}),n=r,l=(a("e863"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},"454f":function(t,e,a){a("46a7");var s=a("584a").Object;t.exports=function(t,e,a){return s.defineProperty(t,e,a)}},"45af":function(t,e,a){},"46a7":function(t,e,a){var s=a("63b6");s(s.S+s.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"47c4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-notification"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex"}},[e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"year","value-format":"yyyy",editable:!1,placeholder:"选择年"},on:{change:t.getCbOne},model:{value:t.yearDate,callback:function(e){t.yearDate=e},expression:"yearDate"}})],1),t._m(0),e("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex"}},[e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"year","value-format":"yyyy",editable:!1,placeholder:"选择年"},on:{change:t.getCbTwo},model:{value:t.yearDate2,callback:function(e){t.yearDate2=e},expression:"yearDate2"}})],1),t._m(1),e("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex"}},[e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"year","value-format":"yyyy",editable:!1,placeholder:"选择年"},on:{change:t.getCbThree},model:{value:t.yearDate3,callback:function(e){t.yearDate3=e},expression:"yearDate3"}})],1),t._m(2)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"300px",width:"96%",margin:"0 auto"}},[e("div",{staticStyle:{width:"100%",height:"300px",margin:"0 auto"},attrs:{id:"cbOne"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"300px",width:"96%",margin:"0 auto"}},[e("div",{staticStyle:{width:"100%",height:"300px",margin:"0 auto"},attrs:{id:"cbTwo"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"300px",width:"96%",margin:"0 auto"}},[e("div",{staticStyle:{width:"100%",height:"300px",margin:"0 auto"},attrs:{id:"cbThree"}})])}],r=a("9b68"),n={name:"report-form",components:{DataList:r["a"]},data:function(){return{yearDate:(new Date).getFullYear()+"",yearDate2:(new Date).getFullYear()+"",yearDate3:(new Date).getFullYear()+""}},mounted:function(){this.getCbOne(),this.getCbTwo(),this.getCbThree()},methods:{flush:function(){this.yearDate=(new Date).getFullYear()+"",this.getCbOne(),this.yearDate2=(new Date).getFullYear()+"",this.getCbTwo(),this.yearDate3=(new Date).getFullYear()+"",this.getCbThree()},addRezo:function(t){return t>9?t:"0"+t},getCbOne:function(){var t=this;this.$http.post("/haolifa/report/cost/finance",{endDate:"",startDate:"",year:this.yearDate}).then((function(e){var a=[],s=[];e.map((function(t){a.push(t.dataMonth),s.push(t.totalAmount)}));var i=t.$echarts.init(document.getElementById("cbOne")),r={title:{text:"财务成本趋势图",x:"center"},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{data:s,type:"line",areaStyle:{},itemStyle:{normal:{label:{show:!0}}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getCbTwo:function(){var t=this;this.$http.post("/haolifa/report/cost/material",{endDate:"",startDate:"",year:this.yearDate2}).then((function(e){var a=[],s=[];e.map((function(t){a.push(t.dataMonth),s.push(t.totalAmount)}));var i=t.$echarts.init(document.getElementById("cbTwo")),r={title:{text:"材料成本趋势图",x:"center"},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{data:s,type:"line",areaStyle:{},itemStyle:{normal:{label:{show:!0}}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getCbThree:function(){var t=this;this.$http.post("/haolifa/report/cost/quality",{endDate:"",startDate:"",year:this.yearDate3}).then((function(e){var a=[],s=[];e.map((function(t){a.push(t.dataMonth),s.push(t.totalAmount)}));var i=t.$echarts.init(document.getElementById("cbThree")),r={title:{text:"质量成本趋势图",x:"center"},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{data:s,type:"line",areaStyle:{},itemStyle:{normal:{label:{show:!0}}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))}}},l=n,o=(a("9ac1"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"4f0e":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-supplier-info abs scroll-y"},[e("div",{staticClass:"form-content"},[e("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[e("icon-btn",{staticClass:"mr-15",on:{click:function(e){return t.$router.back()}}},[t._v("arrow_back")]),e("div",{staticClass:"flex-item"},[t._v("订单详情")]),e("div",{staticClass:"flex-item ml-20"},[e("a",{staticClass:"a",staticStyle:{color:"#008eff"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])],1),e("table",{staticClass:"f-14"},[t._m(0),t._m(1),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),e("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),e("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),e("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),e("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),e("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),t._m(2),t._m(3),t._l(t.itemList,(function(a,s){return e("tr",{key:a.id},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.specification))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.material))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unit))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.number))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitPrice))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalAmount))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.remark))])])})),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("总计")]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),e("td",{attrs:{colspan:"1"}})]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                    "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                ")])]),t._m(4),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                    "+t._s(t.info.payType)+"\n                ")])]),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11)],2)])])},i=[function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}})])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"b",attrs:{colspan:"12"}},[t._v("机加工订单")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                ")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                    "),e("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                ")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                ")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29\n                ")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                ")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                ")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),e("td",{attrs:{colspan:"3"}},[t._v("批准：")]),e("td",{attrs:{colspan:"3"}},[t._v("审核：")]),e("td",{attrs:{colspan:"3"}},[t._v("经办：")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])}],r={name:"purchsemanage-purchaseinfo",data:function(){return{loading:!1,info:{},itemList:[],orderUrl:""}},activated:function(){this.getInfo()},created:function(){this.getInfo()},methods:{getInfo:function(){var t=this,e=this.$route.query.formId;console.log(e),this.info.id=e,this.$http.get("/haolifa/purchase-order/info/".concat(e)).then((function(e){t.info=e.order,t.orderUrl=e.order.fileUrl,t.itemList=e.items,t.info.operateTime=e.order.operateTime.substring(0,10),t.info.confirmTime=e.order.confirmTime.substring(0,10),t.info.createTime=e.order.createTime.substring(0,10),t.info.deliveryTime=e.order.deliveryTime.substring(0,10),t.info.updateTime=e.order.updateTime.substring(0,10),console.log("info",t.info),console.log("itemList",t.itemList)})).catch((function(e){t.$toast(e.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))}}},n=r,l=(a("34c3"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},"50c4":function(t,e,a){"use strict";a("5e1c")},"58a9":function(t,e,a){"use strict";a("9efa")},"58ed":function(t,e,a){},"5e1c":function(t,e,a){},6097:function(t,e,a){"use strict";a.r(e);a("6b54");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-invoice-list"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.applyNo,expression:"filter.applyNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"申请编号"},domProps:{value:t.filter.applyNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"applyNo",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.contractNo,expression:"filter.contractNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"合同号"},domProps:{value:t.filter.contractNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"contractNo",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.payCompany,expression:"filter.payCompany"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"付款单位"},domProps:{value:t.filter.payCompany},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"payCompany",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.applyCollectionCompany,expression:"filter.applyCollectionCompany"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"收款单位"},domProps:{value:t.filter.applyCollectionCompany},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"applyCollectionCompany",e.target.value)}}}),t._v("\n            付款状态:\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:""}},[t._v("全部")]),e("option",{attrs:{value:"0"}},[t._v("未付")]),e("option",{attrs:{value:"1"}},[t._v("付款中")]),e("option",{attrs:{value:"2"}},[t._v("已付款")])]),t._v("\n            数据状态:\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.dataStatus,expression:"filter.dataStatus"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"dataStatus",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:""}},[t._v("全部")]),e("option",{attrs:{value:"0"}},[t._v("待主管会计确认")]),e("option",{attrs:{value:"1"}},[t._v("出纳付款")])])]),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/payplan/getPayPlanList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.applyNo))]),e("td",[t._v(t._s(s.applyDate))]),e("td",[t._v(t._s(s.contractNo))]),e("td",[t._v(t._s(s.contractPayWay))]),e("td",[t._v(t._s(s.payCompany))]),e("td",[t._v(t._s(s.applyCollectionCompany))]),e("td",[t._v(t._s(s.applyAmount))]),e("td",[t._v(t._s(s.remark))]),e("td",[t._v(t._s(t.payWayCn(s.payWayList)))]),e("td",[t._v(t._s(t.statusArr[s.status]))]),e("td",[t._v(t._s(s.payDate))]),e("td",[t._v(t._s(s.bookingTypeList.toString()))]),e("td",[t._v(t._s(t.dataStatusArr[s.dataStatus]))]),e("td",{staticClass:"t-right"},[s.isCN&&0==s.status?e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.payClick(s)}}},[t._v("付 款")]):t._e(),s.canConfirm?e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.confirmClick(s.id)}}},[t._v("确 认")]):t._e()])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("申请编号")]),e("th",[t._v("申请日期")]),e("th",[t._v("合同号")]),e("th",[t._v("合同付款方式")]),e("th",[t._v("付款单位")]),e("th",[t._v("收款单位")]),e("th",[t._v("付款金额")]),e("th",[t._v("付款备注")]),e("th",[t._v("付款方式")]),e("th",[t._v("付款状态")]),e("th",[t._v("付款日期")]),e("th",[t._v("记账方式")]),e("th",[t._v("数据状态")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?e("layer",{attrs:{title:"付款",width:"50%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"申请付款单位"},model:{value:t.form.applyPayCompany,callback:function(e){t.$set(t.form,"applyPayCompany",e)},expression:"form.applyPayCompany"}}),e("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"总付款金额"},model:{value:t.form.applyAmount,callback:function(e){t.$set(t.form,"applyAmount",e)},expression:"form.applyAmount"}}),e("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"余额"},model:{value:t.balance,callback:function(e){t.balance=e},expression:"balance"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"付款备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"付款单位"},model:{value:t.form.payCompany,callback:function(e){t.$set(t.form,"payCompany",e)},expression:"form.payCompany"}}),e("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.accountList,label:"付款账号"},model:{value:t.form.payAccount,callback:function(e){t.$set(t.form,"payAccount",e)},expression:"form.payAccount"}})],1),e("div",{staticClass:"flex mt-20 mb-20",staticStyle:{color:"#2b7bcd"}},[t._v("付款方式：")]),t._l(t.form.payWayList,(function(a,s){return e("div",{key:s,staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"金额",type:"number"},on:{blur:function(e){return t.changeBalance(s)}},model:{value:a.amount,callback:function(e){t.$set(a,"amount",e)},expression:"item.amount"}}),e("select-box",{staticClass:"flex-item mr-20",attrs:{list:a.bookingTypeList,label:"记账方式"},on:{change:function(e){return t.getCodeList(s)}},model:{value:a.bookingType,callback:function(e){t.$set(a,"bookingType",e)},expression:"item.bookingType"}}),e("select-box",{staticClass:"flex-item mr-20",attrs:{list:a.codeList,label:"付款方式"},model:{value:a.code,callback:function(e){t.$set(a,"code",e)},expression:"item.code"}}),e("el-button",{staticStyle:{height:"30px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.addAmount(t.index)}}},[t._v("添加")]),t.form.payWayList.length>1?e("el-button",{staticStyle:{height:"30px"},attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.delAmount(t.index)}}},[t._v("删除")]):t._e()],1)})),e("div",{staticClass:"flex"},[e("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"付款日期"},model:{value:t.form.payDate,callback:function(e){t.$set(t.form,"payDate",e)},expression:"form.payDate"}}),e("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.statusList,label:"付款状态"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],2),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.save}},[t._v("保存")]),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{applyAmount:"",applyCollectionCompany:"",applyDate:"",applyDateEnd:"",applyDateStart:"",applyNo:"",applyPayCompany:"",bookingType:"",contractId:"",contractNo:"",contractPayWay:"",createTime:"",createUser:"",dataStatus:"",delFlag:"",id:"",payAccount:"",payCompany:"",payDataId:"",payDate:"",payWay:"",paymentType:"",remark:"",status:"",updateTime:"",updateUser:""},statusArr:["未付","付款中","已付款"],statusList:[{text:"未付款",value:"0"},{text:"已付款",value:"2"}],dataStatusArr:["待主管会计确认","出纳付款"],layer:!1,form:{applyAmount:0,applyPayCompany:"",id:"",payAccount:"",payCompany:"",payDate:"",payWayList:[{amount:0,bookingType:"",bookingTypeList:[{text:"现金日记账",value:"cash_bill"},{text:"银行日记账",value:"bank_bill"},{text:"其他货币日记账",value:"other_bill"}],code:"",codeList:[]}],remark:"",status:""},accountList:[],account1:0,account2:0,account3:0,payTypeList:[{}],balance:0}},activated:function(){this.$route.query.demander&&(this.filter.payCompany=this.$route.query.demander),this.$route.query.supplierName&&(this.filter.applyCollectionCompany=this.$route.query.supplierName),this.$refs.list.update(!0),this.getAccount()},methods:{flush:function(){this.filter={applyAmount:"",applyCollectionCompany:"",applyDate:"",applyDateEnd:"",applyDateStart:"",applyNo:"",applyPayCompany:"",bookingType:"",contractId:"",contractNo:"",contractPayWay:"",createTime:"",createUser:"",dataStatus:"",delFlag:"",id:"",payAccount:"",payCompany:"",payDataId:"",payDate:"",payWay:"",paymentType:"",remark:"",status:"",updateTime:"",updateUser:""},this.$refs.list.update(!0),this.getAccount()},payWayCn:function(t){var e="";return t.length&&t.map((function(t){e+=t.payWay+":"+t.applyAmount+";"})),e},payClick:function(t){this.layer=!0,this.form.id=t.id,this.form.applyPayCompany=t.applyPayCompany,this.form.applyAmount=t.applyAmount,this.form.remark=t.remark,this.balance=t.applyAmount},confirmClick:function(t){var e=this;this.$confirm({title:"确认该操作吗",text:"",color:"red",btns:["取消","确认"],yes:function(){var a=[];a.push(t),e.$http.post("/haolifa/finance/payplan/confirm",{ids:a}).then((function(t){e.$toast("确认成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},getAccount:function(){var t=this;this.accountList=[],this.$http.get("/haolifa/sys-dict/getDictListByType/PAY_ACCOUNT").then((function(e){e.map((function(e){t.accountList.push({text:e.desc,value:e.desc})}))}))},changeBalance:function(t){var e=this;this.balance=this.form.applyAmount,this.form.payWayList.map((function(t){e.balance=e.balance-t.amount})),this.balance=Math.floor(100*this.balance)/100},save:function(){var t=this;if(this.balance<0)this.$toast("付款金额已超出总付款金额");else{var e=JSON.parse(JSON.stringify(this.form));e.payWayList.map((function(t){delete t.codeList,delete t.bookingTypeList})),this.$http.post("/haolifa/finance/payplan/updatePayPlan",e).then((function(e){t.layer=!1,t.$toast("付款成功"),t.close(),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))}},close:function(){this.layer=!1,this.form={applyAmount:0,applyPayCompany:"",id:"",payAccount:"",payCompany:"",payDate:"",payWayList:[{amount:0,bookingType:"",bookingTypeList:[{text:"现金日记账",value:"cash_bill"},{text:"银行日记账",value:"bank_bill"},{text:"其他货币日记账",value:"other_bill"}],code:"",codeList:[]}],remark:"",status:""}},addAmount:function(t){this.form.payWayList.push({amount:0,bookingType:"",bookingTypeList:[{text:"现金日记账",value:"cash_bill"},{text:"银行日记账",value:"bank_bill"},{text:"其他货币日记账",value:"other_bill"}],code:"",codeList:[]})},delAmount:function(t){this.form.payWayList.splice(t,1)},getCodeList:function(t){this.form.payWayList[t].code="","cash_bill"==this.form.payWayList[t].bookingType?this.form.payWayList[t].codeList=[{text:"现金",value:"cash_pay"}]:"bank_bill"==this.form.payWayList[t].bookingType?this.form.payWayList[t].codeList=[{text:"支票",value:"check_pay"},{text:"电汇",value:"remittance_pay"}]:"other_bill"==this.form.payWayList[t].bookingType&&(this.form.payWayList[t].codeList=[{text:"承兑",value:"acceptance_pay"},{text:"汇票",value:"money_oder_pay"}])}}},l=n,o=(a("a20a"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"60b2":function(t,e,a){},"684c":function(t,e,a){"use strict";a("c6d4")},"6a68":function(t,e,a){"use strict";a.r(e);a("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"process-prod flex-col"},[e("div",{staticClass:"flex-item scroll-y"},[e("div",{staticClass:"content"},[t.data?e("div",{staticClass:"p-p-base"},[e("div",{staticClass:"node"},[t._m(0),e("div",{staticClass:"node"},[e("div",{staticClass:"node-title mb-10"},[e("span",{staticClass:"b"},[t._v("流程描述：")]),e("span",{staticClass:"mr-15"},[t._v(t._s(t.data.summary))])]),e("div",{staticClass:"node-title mb-10"},[e("span",{staticClass:"b"},[t._v("发 起 人：")]),e("span",{staticClass:"mr-15"},[t._v(t._s(t.data.initUserName))])]),e("div",{staticClass:"node-title mb-10"},[e("span",{staticClass:"b"},[t._v("发起时间：")]),e("span",[t._v(t._s(t.data.createTime))])]),t._m(1),e("div",{staticClass:"layer-text",staticStyle:{padding:"0"}},[e("el-descriptions",{staticClass:"margin-top",attrs:{column:2,size:"mini",border:""}},[e("el-descriptions-item",[e("template",{slot:"label"},[t._v("报销金额")]),t._v("\n                                    "+t._s(t.form.amount)+"\n                                ")],2),e("el-descriptions-item",[e("template",{slot:"label"},[t._v("户名")]),t._v("\n                                    "+t._s(t.form.accountName)+"\n                                ")],2),e("el-descriptions-item",[e("template",{slot:"label"},[t._v("开户行")]),t._v("\n                                    "+t._s(t.form.bankOfDeposit)+"\n                                ")],2),e("el-descriptions-item",[e("template",{slot:"label"},[t._v("卡号")]),t._v("\n                                    "+t._s(t.form.cardNumber)+"\n                                ")],2),e("el-descriptions-item",[e("template",{slot:"label"},[t._v("报销日期")]),t._v("\n                                    "+t._s(t.form.reimburseDate)+"\n                                ")],2),e("el-descriptions-item",[e("template",{slot:"label"},[t._v("备注摘要")]),t._v("\n                                    "+t._s(t.form.remark)+"\n                                ")],2),e("el-descriptions-item",[e("template",{slot:"label"},[t._v("报销方式")]),t._v("\n                                    "+t._s("1"==t.form.reimburseType?"普通报销":"借款冲抵")+"\n                                ")],2),e("el-descriptions-item",[e("template",{slot:"label"},[t._v("报销类别")]),t._v("\n                                    "+t._s("1"==t.form.type?"差旅报销":"费用报销")+"\n                                ")],2),2==t.form.reimburseType?e("el-descriptions-item",[e("template",{slot:"label"},[t._v("冲抵金额")]),t._v("\n                                    "+t._s(t.form.offsetAmount)+"\n                                ")],2):t._e(),2==t.form.reimburseType?e("el-descriptions-item",[e("template",{slot:"label"},[t._v("借款")]),t._v("\n                                    "+t._s(t.form.loanAmount)+"\n                                ")],2):t._e()],1),2==t.form.type?e("div",[e("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",border:"",data:t.form.reimburseCostDetailRSDTOList}},[e("el-table-column",{attrs:{label:"金额",prop:"amount"}}),e("el-table-column",{attrs:{label:"单据张数",prop:"docNum"}}),e("el-table-column",{attrs:{label:"费用类别",prop:"subjectsTypeName"}}),e("el-table-column",{attrs:{label:"费用明细",prop:"subjectCN"}}),e("el-table-column",{attrs:{label:"日期",prop:"time"}}),e("el-table-column",{attrs:{label:"备注",prop:"remark"}})],1)],1):t._e(),1==t.form.type?e("div",[e("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",border:"",data:t.form.reimburseTravelDetailRSDTOList}},[e("el-table-column",{attrs:{label:"金额",prop:"projectAmount"}}),e("el-table-column",{attrs:{label:"单据张数",prop:"projectDocNum"}}),e("el-table-column",{attrs:{label:"项目",prop:"projectType"}}),e("el-table-column",{attrs:{label:"出发地",prop:"depAddress"}}),e("el-table-column",{attrs:{label:"出发日期",prop:"depTime"}}),e("el-table-column",{attrs:{label:"到达地",prop:"arrAddress"}}),e("el-table-column",{attrs:{label:"到达日期",prop:"arrTime"}}),e("el-table-column",{attrs:{label:"出差天数",prop:"travelDays"}}),e("el-table-column",{attrs:{label:"出差补贴金额",prop:"travelSubsidyAmount"}}),e("el-table-column",{attrs:{label:"交通工具",prop:"vehicleCN"}}),e("el-table-column",{attrs:{label:"交通金额",prop:"vehicleAmount"}}),e("el-table-column",{attrs:{label:"交通单据张数",prop:"vehicleDocNum"}}),e("el-table-column",{attrs:{label:"备注",prop:"remark"}})],1)],1):t._e()],1)]),t.data.dealStep?e("div",[e("div",{staticClass:"flex-item mt-10 mb-10"},[e("span",{staticClass:"f-20"},[t._v("审批栏")]),e("span",{staticClass:"f-10 ml-20"},[t._v("当前节点:"+t._s(t.data.dealStep.stepName))])]),e("div",{staticClass:"node"},[e("div",[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{"multi-line":!0,label:"审批意见"},model:{value:t.handleStep.auditInfo,callback:function(e){t.$set(t.handleStep,"auditInfo",e)},expression:"handleStep.auditInfo"}})],1),e("div",{staticClass:"flex"},[e("upload-box",{staticStyle:{width:"50%"},attrs:{btnText:"附件上传",fileList:t.fileList,multiple:t.multiple,onchange:t.uploadFile,onremove:t.removeFile}})],1),e("div",{staticClass:"flex",staticStyle:{"margin-top":"10px"}},[e("btn",{on:{click:function(e){return t.handleStepM(1)}}},[t._v("同意")]),e("btn",{staticClass:"ml-10",on:{click:function(e){return t.handleStepM(0)}}},[t._v("不同意")]),e("btn",{staticClass:"ml-10",on:{click:function(e){return t.backStepM()}}},[t._v("退回")])],1)])])]):t._e(),t.data.historyInfos?e("div",[t._m(2),e("div",{staticClass:"flex-item scroll-y"},[e("table",{staticClass:"data-table"},[t._m(3),t._l(t.data.historyInfos,(function(a,s){return e("tr",[e("td",[t._v(t._s(a.historyId))]),e("td",[t._v(t._s(a.instanceId))]),e("td",[t._v(t._s(3==a.auditResult?"发起":"审批"))]),e("td",[t._v(t._s(a.stepName))]),e("td",[t._v(t._s(a.auditUserName))]),e("td",[t._v(t._s(t.auditResults[a.auditResult].name))]),e("td",[t._v(t._s(a.auditInfo))]),null!=a.accessories?e("td",t._l(a.accessories,(function(a,s){return e("a",{key:s,attrs:{href:a.fileUrl}},[t._v(t._s(a.fileName))])})),0):e("td",[t._v("无")])])}))],2)])]):t._e(),t.data.accessories?e("div",[t._m(4),e("div",{staticClass:"flex-item"},t._l(t.data.accessories,(function(a,s){return e("div",{key:s,staticStyle:{"margin-left":"20px","margin-top":"5px"}},[e("div",{staticClass:"flex"},[e("a",{staticStyle:{"text-decoration":"none","out-line":"none",color:"blue"},attrs:{href:a.fileUrl,target:"_blank"}},[t._v(t._s(a.fileName))])])])})),0)]):t._e()]),t.backStepLayer?e("layer",{attrs:{title:"退回节点",width:"450px"}},[e("div",{staticClass:"node"},t._l(t.backSteps,(function(a){return e("div",{staticClass:"node-item"},[e("radio-box",{attrs:{label:a.stepId},model:{value:t.handleStep.backStepId,callback:function(e){t.$set(t.handleStep,"backStepId",e)},expression:"handleStep.backStepId"}}),t._v("\n                            "+t._s(a.stepName)+"\n                        ")],1)})),0),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:function(e){return t.cancel()}}},[t._v("取消")]),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("提交")])],1)]):t._e()],1):t._e()])])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-item mt-10 mb-10"},[e("span",{staticClass:"f-20"},[t._v("基本信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"node-title"},[e("span",{staticClass:"b"},[t._v("报销申请详情：")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-item mt-10 mb-10"},[e("span",{staticClass:"f-20"},[t._v("审批历史")])])},function(){var t=this,e=t._self._c;return e("tr",[e("th",{staticStyle:{width:"60px"}},[t._v("ID")]),e("th",[t._v("实例ID")]),e("th",[t._v("节点类型")]),e("th",[t._v("节点名称")]),e("th",[t._v("审核人")]),e("th",[t._v("审核结果")]),e("th",[t._v("意见")]),e("th",[t._v("审核附件")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-item mt-10 mb-10"},[e("span",{staticClass:"f-20"},[t._v("审批附件")])])}],n=(a("a481"),a("c1df")),l=a.n(n),o=a("153b"),c={name:"process-prod",data:function(){return{data:null,orderUrl:"/haolifa/export/purchaseOrder/",backStepLayer:!1,auditResults:[{status:0,name:"审核不通过"},{status:1,name:"审核通过"},{status:2,name:"退回"},{status:3,name:"流程初始化"}],handleStep:{id:0,stepId:0,auditInfo:"",allotUserId:null,auditResult:1,formId:0,formType:0,backStepId:null,condition:!0,accessorys:[]},backSteps:[],fileList:[],fileName:"",multiple:!0,info:{},form:{}}},activated:function(){this.getData()},created:function(){},methods:{switchTab:function(t){this.$router.replace({path:t,query:this.$route.query})},getData:function(){var t=this;this.$http.get("/haolifa/flowInstance/flow-history/".concat(this.$route.query.instanceId)).then((function(e){e.createTime=l()(e.createTime).format("YYYY-MM-DD HH:mm"),t.data=e,t.handleStep.id=e.instanceId,e.dealStep&&(t.handleStep.stepId=e.dealStep.stepId),t.$http.get("/haolifa/finance/reimburseapply/info/".concat(e.formId)).then((function(e){t.form=e}))})).catch((function(e){t.$toast(e.message||e.msg)}))},handleStepM:function(t){var e=this;this.handleStep.auditResult=t,this.$http.post("/haolifa/flowInstance/handleStep",this.handleStep).then((function(t){e.$toast("处理成功"),e.handleStep.backStepId=null,e.backStepLayer=!1,e.getData(),e.$store.commit("DELMENUTABS","/jkfkEntrust"),e.$router.push("/")})).catch((function(t){e.$toast(t.msg||t.message)}))},uploadFile:function(t,e){var a=this;this.loading=!0,this.loadingMsg="正在上传",Object(o["a"])(t.source).then((function(e){a.$http.post("/haolifa/file/uploadFileBase64",{base64Source:e,fileName:t.name}).then((function(e){a.handleStep.accessorys.push({fileName:t.name,fileUrl:e}),a.loading=!1})).catch((function(t){a.$toast(t.msg||t.message),a.loading=!1}))}))},removeFile:function(){var t=this;return new Promise((function(e,a){t.handleStep.accessorys.splice(i,1),e()}))},backStepM:function(){var t=this;this.$http.get("/haolifa/flowInstance/backSteps/".concat(this.handleStep.id)).then((function(e){e.length>0?(t.backSteps=e,t.backStepLayer=!0):t.$toast("无可退回节点")})).catch((function(e){t.$toast(e.msg||e.message)}))},complete:function(){this.handleStepM(2)},cancel:function(){this.backStepLayer=!1,this.handleStep.backStepId=null}}},p=c,d=(a("a140"),a("2877")),u=Object(d["a"])(p,s,r,!1,null,null,null);e["default"]=u.exports},"6a7d":function(t,e,a){"use strict";a("767d")},"6ba4":function(t,e,a){"use strict";a("1bb7")},7112:function(t,e,a){"use strict";a("58ed")},"74c6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-notification"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[t._v("采购报表统计图")]),e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("div",{staticStyle:{"line-height":"28px"}},[t._v("开始时间:")]),e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getBuyOne},model:{value:t.yearDate,callback:function(e){t.yearDate=e},expression:"yearDate"}}),e("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("结束时间:")]),e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getBuyOne},model:{value:t.yearDate2,callback:function(e){t.yearDate2=e},expression:"yearDate2"}}),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDetail()}}},[t._v("数据显示")])],1),e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("累计采购合同总金额:"+t._s(Math.round(100*t.totalNum)/100)+"元")]),e("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("累计挂账总金额:"+t._s(Math.round(100*t.registeredNum)/100)+"元")]),e("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("累计未付款总金额:"+t._s(Math.round(100*t.unpayNum)/100)+"元")]),e("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("累计已付款总金额:"+t._s(Math.round(100*t.payTotalNum)/100)+"元")])]),t._m(0),e("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[e("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("合计合同金额:"+t._s(Math.round(100*t.ctotalNum)/100)+"元")]),e("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("合计挂账金额:"+t._s(Math.round(100*t.cregisteredNum)/100)+"元")]),e("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("合计未付款金额:"+t._s(Math.round(100*t.cunpayNum)/100)+"元")]),e("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("合计已付款金额:"+t._s(Math.round(100*t.cpayTotalNum)/100)+"元")])]),t._m(1),e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getByMonth},model:{value:t.yearMonthDate,callback:function(e){t.yearMonthDate=e},expression:"yearMonthDate"}})],1),e("div",{staticStyle:{width:"98%",margin:"0 auto",display:"flex"}},[e("div",{staticStyle:{display:"flex","padding-left":"20px","margin-left":"12px",color:"#008eff","font-size":"22px"}},[e("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("累计采购合同总金额:"+t._s(Math.round(100*t.mtotalNum)/100)+"元")]),e("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("累计挂账总金额:"+t._s(Math.round(100*t.mregisteredNum)/100)+"元")]),e("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("累计未付款总金额:"+t._s(Math.round(100*t.munpayNum)/100)+"元")]),e("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("累计已付款总金额:"+t._s(Math.round(100*t.mpayTotalNum)/100)+"元")])])]),t._m(2),e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("el-date-picker",{staticStyle:{"margin-top":"50px"},attrs:{size:"mini",clearable:!1,type:"year","value-format":"yyyy",editable:!1,placeholder:"选择年月"},on:{change:t.getBuyThree},model:{value:t.threeYearDate,callback:function(e){t.threeYearDate=e},expression:"threeYearDate"}})],1),t._m(3),t.flag?e("layer",{attrs:{title:"数据列表",width:"95%"}},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                供应商名称:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.supplierName,expression:"form.supplierName"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form.supplierName},on:{change:function(e){t.$refs.list.update(!0),t.getFourTj()},input:function(e){e.target.composing||t.$set(t.form,"supplierName",e.target.value)}}}),t._v("\n                合同编号:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.purchaseOrderNo,expression:"form.purchaseOrderNo"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form.purchaseOrderNo},on:{change:function(e){t.$refs.list.update(!0),t.getFourTj()},input:function(e){e.target.composing||t.$set(t.form,"purchaseOrderNo",e.target.value)}}}),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.$refs.list.update(!0),t.getFourTj()}}},[t._v("查询")])],1)]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("合同金额: "+t._s(t.formObj.total)+"元")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("入账金额: "+t._s(t.formObj.registered)+"元")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("付款金额: "+t._s(t.formObj.payTotal)+"元")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("欠款金额: "+t._s(t.formObj.unpay)+"元")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("回票金额: "+t._s(t.formObj.returnTicketAmount)+"元")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("上账未开票: "+t._s(t.formObj.unTicketAmount)+"元")])],1)]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{"page-size":50,param:t.form,url:"/haolifa/report-extend/report-purchase-list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.supplierName))]),e("td",[t._v(t._s(s.createTime))]),e("td",[t._v(t._s(s.purchaseOrderNo))]),e("td",[t._v(t._s(s.totalCount))]),e("td",[t._v(t._s(s.total))]),e("td",[t._v(t._s(s.registered))]),e("td"),e("td",[t._v(t._s(s.payTotal))]),e("td",[t._v(t._s(s.unpay))]),e("td",[t._v(t._s(s.returnTicketAmount))]),e("td"),e("td",[t._v(t._s(s.unTicketAmount))])]}}],null,!1,4132287773)},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("供应商名称")]),e("th",[t._v("日期")]),e("th",[t._v("合同编号")]),e("th",[t._v("数量")]),e("th",[t._v("合同金额（元）")]),e("th",[t._v("入账金额（元）")]),e("th",[t._v("付款日期")]),e("th",[t._v("付款金额（元）")]),e("th",[t._v("欠款金额（元）")]),e("th",[t._v("回票金额（元）")]),e("th",[t._v("回票票号")]),e("th",[t._v("上账未开票（元）")])])])],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.flag=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"500px",width:"90%",margin:"20px auto"}},[e("div",{staticStyle:{width:"100%",height:"600px",margin:"0 auto"},attrs:{id:"buyOne"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"500px",width:"90%",margin:"30px auto"}},[e("div",{staticStyle:{width:"100%",height:"500px",margin:"0 auto"},attrs:{id:"buyTwo"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"500px",width:"90%",margin:"20px auto"}},[e("div",{staticStyle:{width:"100%",height:"600px",margin:"0 auto"},attrs:{id:"byMonth"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"500px",width:"90%",margin:"20px auto"}},[e("div",{staticStyle:{width:"100%",height:"600px",margin:"0 auto"},attrs:{id:"buyThree"}})])}],r=(a("28a5"),a("7f7f"),a("bd86")),n=a("9b68"),l={name:"cgreport-form",components:{DataList:n["a"]},data:function(){var t;return t={yearDate:(new Date).getFullYear()+"-01",yearDate2:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),threeYearDate:(new Date).getFullYear()+"",yearMonthDate:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),totalNum:0,totalPrice:0,payTotalNum:0,unpayNum:0},Object(r["a"])(t,"totalNum",0),Object(r["a"])(t,"registeredNum",0),Object(r["a"])(t,"mpayTotalNum",0),Object(r["a"])(t,"munpayNum",0),Object(r["a"])(t,"mtotalNum",0),Object(r["a"])(t,"mregisteredNum",0),Object(r["a"])(t,"cpayTotalNum",0),Object(r["a"])(t,"cunpayNum",0),Object(r["a"])(t,"ctotalNum",0),Object(r["a"])(t,"cregisteredNum",0),Object(r["a"])(t,"flag",!1),Object(r["a"])(t,"form",{endDate:this.yearDate2,purchaseOrderNo:"",startDate:this.yearDate,status:"",supplierName:"",year:""}),Object(r["a"])(t,"formObj",{total:0,payTotal:0,unpay:0,registered:0,collected:0,unTicketAmount:0,returnTicketAmount:0}),t},mounted:function(){this.getBuyOne(),this.getBuyThree(),this.getByMonth()},methods:{flush:function(){this.yearDate=(new Date).getFullYear()+"-01",this.yearDate2=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.threeYearDate=(new Date).getFullYear()+"",this.yearMonthDate=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.getBuyOne(),this.getBuyThree(),this.getByMonth()},addRezo:function(t){return t>9?t:"0"+t},getDetail:function(){this.flag=!0,this.getFourTj(),this.$refs.list.update(!0)},getFourTj:function(){var t=this;this.formObj={total:0,payTotal:0,unpay:0,registered:0,collected:0,unTicketAmount:0,returnTicketAmount:0},this.$http.post("/haolifa/report-extend/report-purchase-summary",this.form).then((function(e){t.formObj.total=e.total,t.formObj.payTotal=e.payTotal,t.formObj.registered=e.registered,t.formObj.unpay=e.unpay,t.formObj.collected=e.collected,t.formObj.unTicketAmount=e.unTicketAmount,t.formObj.returnTicketAmount=e.returnTicketAmount})).catch((function(e){t.$toast(e.msg||e.message)}))},getBuyOne:function(){var t=this;this.payTotalNum=this.unpayNum=this.registeredNum=this.totalNum=0,this.$http.post("/haolifa/report/purchase/getPurchases",{endDate:this.yearDate2,month:"",startDate:this.yearDate,supplierName:"",year:""}).then((function(e){var a=[],s=[],i=[],r=[],n=[],l=[],o=[];e.map((function(e){a.push(e.supplierName),s.push(e.payTotal),i.push(e.unpay),r.push(e.total),n.push(e.registered),l.push(e.returnTicketAmount),o.push(e.unTicketAmount),e.payTotal&&(t.payTotalNum=t.payTotalNum+ +e.payTotal),t.unpayNum=t.unpayNum+(e.unpay?+e.unpay:0),t.totalNum=t.totalNum+(e.total?+e.total:0),t.registeredNum=t.registeredNum+(e.registered?+e.registered:0)})),t.getBuyTwo(a[0]);var c=t,p=t.$echarts.init(document.getElementById("buyOne")),d={title:{text:"采购按年份统计",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["已付款","未付款","挂账金额","合同金额","累计回票金额","上账未开票金额"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a,axisLabel:{rotate:30}}],yAxis:[{type:"value"}],series:[{name:"已付款",type:"bar",barWidth:"10%",data:s},{name:"未付款",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"挂账金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:n},{name:"合同金额",type:"bar",color:"#67c23a",barWidth:"10%",data:r},{name:"累计回票金额",type:"bar",color:"#ffd702",barWidth:"10%",data:l},{name:"上账未开票金额",type:"bar",color:"#eb736a",barWidth:"10%",data:o}]};p.on("click",(function(t){c.getBuyTwo(t.name)})),p.setOption(d),c.getBuyTwo(a[0])}))},getBuyTwo:function(t){var e=this;this.cayTotalNum=this.cunpayNum=this.cregisteredNum=this.ctotalNum=0,this.$http.post("/haolifa/report/purchase/selectBySupplierName",{endDate:this.yearDate2,month:"",startDate:this.yearDate,supplierName:t,year:""}).then((function(a){var s=[],i=[],r=[],n=[],l=[],o=[],c=[];a.map((function(t){s.push(t.createTime),i.push(t.payTotal),l.push(t.unpay),r.push(t.total),n.push(t.registered),o.push(t.returnTicketAmount),c.push(t.unTicketAmount),t.payTotal&&(e.cpayTotalNum=e.cpayTotalNum+ +t.payTotal),e.cunpayNum=e.cunpayNum+(t.unpay?+t.unpay:0),e.ctotalNum=e.ctotalNum+(t.total?+t.total:0),e.cregisteredNum=e.cregisteredNum+(t.registered?+t.registered:0)}));var p=e.$echarts.init(document.getElementById("buyTwo")),d={title:{text:t+"按月统计",x:"left"},legend:{data:["已付款","未付款","挂账金额","合同金额","累计回票金额","上账未开票金额"]},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:s}],yAxis:[{type:"value"}],series:[{name:"已付款",type:"bar",barWidth:"10%",data:i},{name:"未付款",type:"bar",barWidth:"10%",color:"#3398DB",data:l},{name:"挂账金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:n},{name:"合同金额",type:"bar",color:"#67c23a",barWidth:"10%",data:r},{name:"累计回票金额",type:"bar",color:"#ffd702",barWidth:"10%",data:o},{name:"上账未开票金额",type:"bar",color:"#eb736a",barWidth:"10%",data:c}]};p.setOption(d)}))},getByMonth:function(){var t=this;this.mpayTotalNum=this.munpayNum=this.mregisteredNum=this.mtotalNum=0;var e=this.yearMonthDate.split("-"),a=e[0],s=e[1];this.$http.post("/haolifa/report/purchase/getPurchases?year=".concat(a,"&month=").concat(s),{endDate:"",month:s,startDate:"",supplierName:"",year:a}).then((function(e){var a=[],s=[],i=[],r=[],n=[];e.map((function(e){a.push(e.supplierName),s.push(e.payTotal),i.push(e.unpay),r.push(e.total),n.push(e.registered),e.payTotal&&(t.mpayTotalNum=t.mpayTotalNum+ +e.payTotal),t.munpayNum=t.munpayNum+(e.unpay?+e.unpay:0),t.mtotalNum=t.mtotalNum+(e.total?+e.total:0),t.mregisteredNum=t.mregisteredNum+(e.registered?+e.registered:0)}));var l=t.$echarts.init(document.getElementById("byMonth")),o={title:{text:"采购按月份统计",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["已付款","未付款","挂账金额","合同金额"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a,axisLabel:{rotate:60}}],yAxis:[{type:"value"}],series:[{name:"已付款",type:"bar",barWidth:"10%",data:s},{name:"未付款",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"挂账金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:n},{name:"合同金额",type:"bar",color:"#67c23a",barWidth:"10%",data:r}]};l.setOption(o)}))},getBuyThree:function(){var t=this;this.$http.get("/haolifa/report/purchase/getAllPurchase?year=".concat(this.threeYearDate)).then((function(e){var a=[],s=[],i=[],r=[],n=[];e.map((function(t){a.push(t.createTime),s.push(t.payTotal),i.push(t.collected),r.push(t.total),n.push(t.registered)}));var l=t.$echarts.init(document.getElementById("buyThree")),o={title:{text:"采购报表--按月查询采购物资",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["付款金额","回票金额","挂账金额","合同金额"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a,axisLabel:{rotate:60}}],yAxis:[{type:"value"}],series:[{name:"付款金额",type:"bar",barWidth:"10%",data:s},{name:"回票金额",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"挂账金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:n},{name:"合同金额",type:"bar",color:"#67c23a",barWidth:"10%",data:r}]};l.setOption(o)}))}}},o=l,c=a("2877"),p=Object(c["a"])(o,s,i,!1,null,null,null);e["default"]=p.exports},"767d":function(t,e,a){},7746:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"apply-buy-add"},[e("div",{staticClass:"content"},[e("div",{staticClass:"title b f-18 mb-10"},[t._v(t._s(t.isAdd?"新增":"编辑")+"机加工订单")]),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方"},model:{value:t.form.demander,callback:function(e){t.$set(t.form,"demander",e)},expression:"form.demander"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方地址"},model:{value:t.form.demanderAddr,callback:function(e){t.$set(t.form,"demanderAddr",e)},expression:"form.demanderAddr"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系人"},model:{value:t.form.demanderLinkman,callback:function(e){t.$set(t.form,"demanderLinkman",e)},expression:"form.demanderLinkman"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系电话"},model:{value:t.form.demanderPhone,callback:function(e){t.$set(t.form,"demanderPhone",e)},expression:"form.demanderPhone"}})],1),e("div",{staticClass:"flex"},[e("select-box",{staticStyle:{"margin-right":"20px",width:"240px"},attrs:{list:t.supplierList,label:"供应商"},on:{change:function(e){return t.changeSupplier()}},model:{value:t.form.supplierNo,callback:function(e){t.$set(t.form,"supplierNo",e)},expression:"form.supplierNo"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方地址"},model:{value:t.form.supplierAddr,callback:function(e){t.$set(t.form,"supplierAddr",e)},expression:"form.supplierAddr"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系人"},model:{value:t.form.supplierLinkman,callback:function(e){t.$set(t.form,"supplierLinkman",e)},expression:"form.supplierLinkman"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系电话"},model:{value:t.form.suppilerPhone,callback:function(e){t.$set(t.form,"suppilerPhone",e)},expression:"form.suppilerPhone"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方确认人"},model:{value:t.form.supplierConfirmer,callback:function(e){t.$set(t.form,"supplierConfirmer",e)},expression:"form.supplierConfirmer"}})],1),e("div",{staticClass:"flex"},[e("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"确认时间"},model:{value:t.form.confirmTime,callback:function(e){t.$set(t.form,"confirmTime",e)},expression:"form.confirmTime"}}),e("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"交货时间"},model:{value:t.form.deliveryTime,callback:function(e){t.$set(t.form,"deliveryTime",e)},expression:"form.deliveryTime"}}),e("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办时间"},model:{value:t.form.operateTime,callback:function(e){t.$set(t.form,"operateTime",e)},expression:"form.operateTime"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办人"},model:{value:t.form.operatorUserName,callback:function(e){t.$set(t.form,"operatorUserName",e)},expression:"form.operatorUserName"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",attrs:{label:"加工合同编号"},model:{value:t.form.orderNo,callback:function(e){t.$set(t.form,"orderNo",e)},expression:"form.orderNo"}}),e("input-box",{staticClass:"flex-item",attrs:{label:"付款方式"},model:{value:t.form.payType,callback:function(e){t.$set(t.form,"payType",e)},expression:"form.payType"}})],1),e("div",{staticClass:"b",staticStyle:{margin:"20px 0 10px"}},[t._v("加工物料项")]),t._l(t.form.itemList,(function(a,s){return e("div",{key:s,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[e("div",{staticClass:"flex-item"},[e("div",{staticClass:"flex"},[e("select-box",{staticClass:"flex-item mr-10",attrs:{list:t.nameList,label:"物料名称"},model:{value:a.materialName,callback:function(e){t.$set(a,"materialName",e)},expression:"item.materialName"}}),e("select-box",{staticClass:"flex-item mr-10",attrs:{list:t.tuhaoList,label:"物料图号"},model:{value:a.materialGraphNo,callback:function(e){t.$set(a,"materialGraphNo",e)},expression:"item.materialGraphNo"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{type:"number",label:"数量"},model:{value:a.number,callback:function(e){t.$set(a,"number",e)},expression:"item.number"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单位"},model:{value:a.unit,callback:function(e){t.$set(a,"unit",e)},expression:"item.unit"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"材质"},model:{value:a.material,callback:function(e){t.$set(a,"material",e)},expression:"item.material"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格"},model:{value:a.specification,callback:function(e){t.$set(a,"specification",e)},expression:"item.specification"}}),e("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单价"},model:{value:a.unitPrice,callback:function(e){t.$set(a,"unitPrice",e)},expression:"item.unitPrice"}}),e("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单重"},model:{value:a.unitWeight,callback:function(e){t.$set(a,"unitWeight",e)},expression:"item.unitWeight"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",attrs:{label:"备注"},model:{value:a.remark,callback:function(e){t.$set(a,"remark",e)},expression:"item.remark"}})],1)]),t.form.itemList.length>1?e("div",[e("icon-btn",{attrs:{small:""},on:{click:function(e){return t.form.itemList.splice(s,1)}}},[t._v("close")])],1):t._e()])})),e("div",{staticClass:"card a flex-center",on:{click:function(e){return t.addItem()}}},[t._m(0)]),e("div",{staticClass:"flex"},[e("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(e){return t.submit()}}},[t._v("提交")]),e("btn",{attrs:{big:"",flat:""},on:{click:function(e){t.$store.commit("DELMENUTABS","/purchsemanage-entrust/add"),t.$router.back()}}},[t._v("取消")])],1)],2)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-v-center"},[e("i",{staticClass:"icon mr-10"},[t._v("add")]),e("span",[t._v("添加机加工物料项")])])}],r=(a("ac6a"),{name:"purchsemanage-entrustadd",data:function(){return{supplierInfoList:[],supplierList:[],form:{id:null,confirmTime:"",deliveryTime:"",demander:"山西好利阀机械制造有限公司",demanderAddr:"山西省侯马经济开发区旺旺北支路东侧",demanderLinkman:"",demanderPhone:"",operateTime:"",operatorUserName:"",orderNo:"",suppilerPhone:"",supplierAddr:"",supplierConfirmer:"",supplierLinkman:"",supplierName:"",supplierNo:"",payType:"",itemList:[{id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}]},isAdd:!0,nameList:[],tuhaoList:[]}},activated:function(){var t=this;this.form={id:null,confirmTime:"",deliveryTime:"",demander:"山西好利阀机械制造有限公司",demanderAddr:"山西省侯马经济开发区旺旺北支路东侧",demanderLinkman:"",demanderPhone:"",operateTime:"",operatorUserName:"",orderNo:"",suppilerPhone:"",supplierAddr:"",supplierConfirmer:"",supplierLinkman:"",supplierName:"",supplierNo:"",payType:"",itemList:[{id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}]};var e=this.$route.query.formId;this.form.id=e,this.$http.get("/haolifa/supplier/list-all/").then((function(e){t.supplierList=e.map((function(t){return{value:t.suppilerNo,text:t.suppilerName}})),t.supplierInfoList=e})),e&&(this.isAdd=!1,this.$http.get("/haolifa/purchase-order/info/"+e).then((function(e){t.form.id=e.order.id,t.form.demander=e.order.demander,t.form.demanderAddr=e.order.demanderAddr,t.form.demanderLinkman=e.order.demanderLinkman,t.form.demanderPhone=e.order.demanderPhone,t.form.operatorUserName=e.order.operatorUserName,t.form.suppilerPhone=e.order.suppilerPhone,t.form.supplierAddr=e.order.supplierAddr,t.form.supplierConfirmer=e.order.supplierConfirmer,t.form.supplierLinkman=e.order.supplierLinkman,t.form.supplierName=e.order.supplierName,t.form.supplierNo=e.order.supplierNo,t.form.payType=e.order.payType,t.form.orderNo=e.order.purchaseOrderNo,t.form.confirmTime=e.order.confirmTime.substring(0,10),t.form.deliveryTime=e.order.deliveryTime.substring(0,10),t.form.operateTime=e.order.operateTime.substring(0,10),t.form.itemList=e.items.map((function(t){return{id:t.id,material:t.material,materialGraphNo:t.materialGraphNo,materialName:t.materialName,number:t.number,remark:t.remark,specification:t.specification,unit:t.unit,unitPrice:t.unitPrice,unitWeight:t.unitWeight}}))})))},mounted:function(){var t=this,e=this.$route.query.formId;this.form.id=e,this.$http.get("/haolifa/supplier/list-all/").then((function(e){t.supplierList=e.map((function(t){return{value:t.suppilerNo,text:t.suppilerName}})),t.supplierInfoList=e})),e&&(this.isAdd=!1,this.$http.get("/haolifa/purchase-order/info/"+e).then((function(e){t.form.id=e.order.id,t.form.demander=e.order.demander,t.form.demanderAddr=e.order.demanderAddr,t.form.demanderLinkman=e.order.demanderLinkman,t.form.demanderPhone=e.order.demanderPhone,t.form.operatorUserName=e.order.operatorUserName,t.form.suppilerPhone=e.order.suppilerPhone,t.form.supplierAddr=e.order.supplierAddr,t.form.supplierConfirmer=e.order.supplierConfirmer,t.form.supplierLinkman=e.order.supplierLinkman,t.form.supplierName=e.order.supplierName,t.form.supplierNo=e.order.supplierNo,t.form.payType=e.order.payType,t.form.orderNo=e.order.purchaseOrderNo,t.form.confirmTime=e.order.confirmTime.substring(0,10),t.form.deliveryTime=e.order.deliveryTime.substring(0,10),t.form.operateTime=e.order.operateTime.substring(0,10),t.form.itemList=e.items.map((function(t){return{id:t.id,material:t.material,materialGraphNo:t.materialGraphNo,materialName:t.materialName,number:t.number,remark:t.remark,specification:t.specification,unit:t.unit,unitPrice:t.unitPrice,unitWeight:t.unitWeight}}))})))},methods:{changeSupplier:function(){var t=this;if(console.log(this.form.supplierNo),this.supplierInfoList.forEach((function(e,a){e.suppilerNo==t.form.supplierNo&&(t.form.suppilerPhone=e.phone,t.form.supplierAddr=e.address,t.form.supplierLinkman=e.responsiblePerson,t.form.supplierName=e.suppilerName)})),this.nameList=this.tuhaoList=[],this.form.supplierNo){var e={pageNum:1,pageSize:500,supplierNo:this.form.supplierNo};this.$http.post("/haolifa/supplier-pro/list",e).then((function(e){var a=e.list;t.nameList=a.map((function(t){return{value:t.materialName,text:t.materialName}})),t.tuhaoList=a.map((function(t){return{value:t.materialGraphNo,text:t.materialGraphNo}}))})).catch((function(e){t.$toast(e.msg||e.message)}))}},addItem:function(){this.form.itemList.push({id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}),this.$forceUpdate()},submit:function(){var t=this,e={materialName:"物料名称",materialGraphNo:"物料图号",number:"数量",material:"材质",specification:"规格",unit:"单位",unitPrice:"单价",unitWeight:"单重"},a=!0;if(this.form.itemList.forEach((function(s,i){for(var r in s)e[r]&&!s[r]&&(t.$toast("请填写第 ".concat(i+1," 项 ").concat(e[r])),a=!1)})),a){var s=this.isAdd?"/purchsemanage-entrust/add":"/purchsemanage-entrust/edit";this.$http.post(this.isAdd?"/haolifa/purchase-order/save/1":"/haolifa/purchase-order/update",this.form).then((function(e){t.$toast(t.isAdd?"创建成功":"更新成功"),t.$store.commit("DELMENUTABS",s),t.$router.push("/purchsemanage-entrust/addList")})).catch((function(e){t.$toast(e.message||e.msg)}))}}}}),n=r,l=(a("b9c1"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},"7afb":function(t,e,a){},"81c7":function(t,e,a){"use strict";a("e17d")},"848b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-invoice-list"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),t._v("\n            状态:\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:"0"}},[t._v("全部")]),e("option",{attrs:{value:"1"}},[t._v("代办")]),e("option",{attrs:{value:"2"}},[t._v("已办")])])]),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/payapply/getPayAppList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.applyTime))]),e("td",[t._v(t._s(s.applyPayCompany))]),e("td",[t._v(t._s(s.totalPrice))]),e("td",[t._v(t._s(t.statusArr[s.status]))]),e("td",[t._v(t._s(s.remark))]),e("td",[t._v(t._s(s.createTime))]),e("td",[t._v(t._s(s.updateTime))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.detail(s)}}},[t._v("详情 | ")]),e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.approveProgress(s)}}},[t._v("审批进度")])])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("付款日期")]),e("th",[t._v("付款单位")]),e("th",[t._v("付款金额")]),e("th",[t._v("审批节点")]),e("th",[t._v("备注")]),e("th",[t._v("创建时间")]),e("th",[t._v("更新时间")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layerDetail?e("layer",{attrs:{title:"详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"20%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"25%"}}),e("td",{staticStyle:{width:"25%"}}),e("td",{staticStyle:{width:"20%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款单位 : "+t._s(t.info.applyPayCompany))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款金额 : "+t._s(t.info.totalPrice))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款日期 : "+t._s(t.info.applyTime))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("备注 : "+t._s(t.info.remark))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("创建日期 : "+t._s(t.info.createTime))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("更新日期 : "+t._s(t.info.updateTime))])]),e("tr",[e("th",[t._v("订单号")]),e("th",[t._v("金额(元)")]),e("th",[t._v("收款单位")]),e("th",[t._v("付款单位")]),e("th",[t._v("备注")])]),t._l(t.info.applyDetailRSDTOList,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.purchaseOrderNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.price))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.applyCollectionCompany))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.applyPayCompany))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.remark))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layerDetail=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{status:"0"},layer:!1,tableForm:{orderNo:"",supplierName:"",status:"5"},loading:!1,tableData:[],pageNum:1,total:0,statusList:[{status:"3",name:"采购中"},{status:"5",name:"采购完成"}],layerDetail:!1,info:{},statusArr:["","待审批","审批中","付款中","审批不能过","付款完成"]}},mounted:function(){},methods:{flush:function(){this.filter={status:"0"},this.$refs.list.update(!0)},detail:function(t){this.layerDetail=!0,this.info=t},approveProgress:function(t){this.$router.push({path:"/purchsemanage-purchase/approveProgress?",query:{formNo:t.id,formId:""}})}}},l=n,o=(a("07f4"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"85f2":function(t,e,a){t.exports=a("454f")},8623:function(t,e,a){"use strict";a("7afb")},"8a77":function(t,e,a){"use strict";a.r(e);a("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"purchaseadd flex-col"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"机加工合同号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供方单位"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:"0"}},[t._v("合同状态")]),t._l(t.statusList,(function(a){return e("option",{key:a.id,domProps:{value:a.status}},[t._v(t._s(a.name))])}))],2),e("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{method:"get","page-size":15,param:t.filter,url:"/haolifa/purchase-order/list/1"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",[t._v(t._s(i))]),e("td",[t._v(t._s(s.purchaseOrderNo))]),e("td",[t._v(t._s(s.supplierName))]),e("td",[t._v(t._s(s.deliveryTime))]),e("td",[t._v(t._s(s.totalCount))]),e("td",[t._v(t._s(t.statusList[s.status-1].name))]),e("td",[t._v(t._s(s.createUserId))]),e("td",[t._v(t._s(s.createTime))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("查看")])])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("机加工合同号")]),e("th",[t._v("供方单位")]),e("th",[t._v("加工完成日期")]),e("th",[t._v("订单总数量")]),e("th",[t._v("订单状态")]),e("th",[t._v("创建人")]),e("th",[t._v("创建日期")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?e("layer",{attrs:{title:"订单折损",width:"450px"}},[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损金额"},model:{value:t.wreck.wreckAmount,callback:function(e){t.$set(t.wreck,"wreckAmount",e)},expression:"wreck.wreckAmount"}}),e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损原因"},model:{value:t.wreck.wreckReason,callback:function(e){t.$set(t.wreck,"wreckReason",e)},expression:"wreck.wreckReason"}})],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?e("layer",{attrs:{title:"详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14"},[e("tr",[e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("机加工订单")]),e("td",{staticClass:"b",attrs:{colspan:"6"}},[e("a",{staticClass:"a",staticStyle:{color:"#008eff"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),e("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),e("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),e("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),e("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),e("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),e("tr",[e("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(a,s){return e("tr",{key:a.id},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.specification))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.material))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unit))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.number))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitPrice))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalAmount))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.remark))])])})),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("总计")]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),e("td",{attrs:{colspan:"1"}})]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),e("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),e("td",{attrs:{colspan:"3"}},[t._v("批准：")]),e("td",{attrs:{colspan:"3"}},[t._v("审核：")]),e("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"purchsemanage-entrust",components:{DataList:r["a"]},data:function(){return{natureList:["国有","三资","集体","联营","私营"],statusList:[{status:1,name:"待审批"},{status:2,name:"审批中"},{status:3,name:"采购中"},{status:4,name:"审批不通过"},{status:5,name:"采购完成"}],filter:{orderNo:"",supplierName:"",status:0,createUserId:0},wreck:{orderNo:"",wreckAmount:0,wreckReason:""},completeLayer:!1,confirmLayer:!1,loading:!1,info:{},itemList:[],orderUrl:"",layer:!1}},created:function(){this.filter.createUserId=0},methods:{flush:function(){this.filter={orderNo:"",supplierName:"",status:0,createUserId:0},this.$refs.list.update(!0)},getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/purchase-order/info/".concat(t)).then((function(t){e.info=t.order,e.orderUrl=t.order.fileUrl,e.itemList=t.items,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10),console.log("info",e.info),console.log("itemList",e.itemList)})).catch((function(t){e.$toast(t.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))},createInspect:function(t){var e=this;this.$http.get("/haolifa/purchase-order/createInspect/".concat(t)).then((function(t){console.log("报检单号",t),e.$confirm({title:"完善报检单",text:"现在去完善报检单？",color:"blue",btns:["稍后再说","现在完善"],yes:function(){e.$router.push("/applyBuy-material/edit?id=".concat(t))}})}))},approveProgress:function(t){this.$router.push("/purchsemanage-entrust/approveProgress?formNo=".concat(t.purchaseOrderNo,"&formId=0"))},approve:function(t){var e=this;this.$confirm({title:"发起审批",text:"确定发起审批？",color:"blue",btns:["取消","确认"],yes:function(){e.$http.get("/haolifa/purchase-order/approve/".concat(t,"/1")).then((function(t){e.$toast("发起成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},updatePurchase:function(t){this.$router.push("/purchsemanage-entrust/add?formId=".concat(t))},completePurchase:function(t){this.completeLayer=!0,this.wreck.orderNo=t},complete:function(){var t=this;this.$http.post("/haolifa/purchase-order/complete",this.wreck).then((function(e){t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},deletePurchase:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除该订单么？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/purchase-order/delete/".concat(t)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg)}))}})}}},l=n,o=(a("6a7d"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"90e6":function(t,e,a){},9235:function(t,e,a){"use strict";a.r(e);a("7f7f"),a("4917");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-invoice-list"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.demandName,expression:"filter.demandName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"需求方名称"},domProps:{value:t.filter.demandName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"demandName",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplyAgentName,expression:"filter.supplyAgentName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供应方责任人"},domProps:{value:t.filter.supplyAgentName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplyAgentName",e.target.value)}}}),t._v("\n            订单状态:\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderStatus,expression:"filter.orderStatus"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"orderStatus",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.orderStatusList,(function(a,s){return e("option",{key:s,domProps:{value:a.value}},[t._v(t._s(a.text))])}))],2)]),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/receivable/list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.orderNo))]),e("td",[t._v(t._s(s.demandName))]),e("td",[t._v(t._s(s.contractSignDate))]),e("td",[t._v(t._s(s.totalCount))]),e("td",[t._v(t._s(s.deliveredNumber))]),e("td",[t._v(t._s(s.signBoard))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.detail(s)}}},[t._v("详 情")])])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("订单编号")]),e("th",[t._v("客户名称")]),e("th",[t._v("签订日期")]),e("th",[t._v("销售总量")]),e("th",[t._v("已发货数")]),e("th",[t._v("已发货金额")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?e("layer",{attrs:{title:"详情",width:"80%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单编号 : "+t._s(t.info.orderNo))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("发货日期 : "+t._s(t.info.deliveryDate))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单状态 : "+t._s(t.getOrderStatus(t.info.orderStatus)))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("\n                            订单合同:\n                            "),e("a",{staticStyle:{"margin-right":"15px"},attrs:{href:t.info.orderContractUrl}},[t._v("下载")]),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:t.info.orderContractUrl}},[t._v("预览")]):t._e(),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+t.info.orderContractUrl}},[t._v("预览")]),e("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getPreCheckMater(t.info.orderNo)}}},[t._v("核料清单")])])]),e("tr",[t.fileDetailList.length?e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:")]):e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:无")])]),t._l(t.fileDetailList,(function(a,s){return e("tr",{key:s},[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v(t._s(a.fileName))]),e("td",{staticClass:"b",attrs:{colspan:"12"}},[a.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:a.fileUrl}},[t._v("预览")]):t._e(),a.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+a.fileUrl}},[t._v("预览")])])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配车间: "+t._s(t.info.assemblyShop))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配小组: "+t._s(t.info.assemblyGroup))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("采购反馈时间: "+t._s(t.info.purchaseFeedbackTime))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("生产反馈时间: "+t._s(t.info.productionFeedbackTime))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("技术清单:")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("产品名称")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("型号")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("规格")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("数量")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("上法兰标准")]),e("td",{attrs:{colspan:"3",rowspan:"1"}},[t._v("上法兰尺寸")]),e("td",{attrs:{colspan:"4",rowspan:"1"}},[t._v("出轴尺寸")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("静扭矩")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("执行器型号")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("连接孔")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("角度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("中心距")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴型式")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴长度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("轴图号")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("过渡盘")])]),t._l(JSON.parse(t.info.technicalRequire),(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.name))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.xinhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.guige))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.num))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.biaozhun))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.lianjiek))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jiaodu))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.zhongxinju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.xinshi))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.length))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.tuhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.guodupan))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jinniuju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jishuxinhao))])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单产品列表")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品编号")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("标签属性")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("颜色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总计价格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("材质说明")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品备注")])]),t._l(t.info.orderProductAssociates,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productNo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productModel))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.lable))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.specifications))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productColor))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalPrice))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.materialDescription))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productRemark))])])})),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批附件:")])]):t._e(),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件名称")]),e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件地址")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("——")])]):t._e(),t._l(t.accessoryList,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"6"}},[t._v(t._s(a.fileName))]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(a.fileUrl))]),e("td",{attrs:{colspan:"2"}},[a.fileUrl.match(".(doc|docx|xls|xlsx)$")?t._e():e("a",{attrs:{target:"_blank",href:a.fileUrl}},[t._v("预览")]),a.fileUrl.match(".(doc|docx|xls|xlsx)$")?e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+a.fileUrl}},[t._v("预览")]):t._e()])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审核信息")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v("流程节点")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("角色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("审核人")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核状态")]),e("td",{staticClass:"b",attrs:{colspan:"4"}},[t._v("审核意见")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核时间")])]),t._l(t.processList,(function(a){return e("tr",{key:a.stepName},[e("td",{attrs:{colspan:"3"}},[t._v(t._s(a.stepName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.roleName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.auditUserName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.statusList[a.auditResult]))]),e("td",{attrs:{colspan:"4"}},[t._v(t._s(a.auditInfo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.auditTime))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(a("ac6a"),a("9b68")),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{contractSignDate:"",demandName:"",orderNo:"",orderStatus:"",supplyAgentName:""},orderStatusList:[{value:0,text:"创建"},{value:1,text:"审批中"},{value:2,text:"核料中"},{value:3,text:"替换料审批中"},{value:4,text:"核料完成"},{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:8,text:"生产暂停"},{value:9,text:"生产完成"},{value:10,text:"质检中"},{value:11,text:"已入库"},{value:12,text:"申请发货"},{value:13,text:"发货完成"},{value:14,text:"审核不通过"}],processList:[],accessoryList:[],info:{},fileDetailList:[],layer:!1,statusList:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},mounted:function(){},methods:{flush:function(){this.filter={contractSignDate:"",demandName:"",orderNo:"",orderStatus:"",supplyAgentName:""},this.$refs.list.update(!0)},detail:function(t){var e=this;this.layer=!0,this.getInfo(t.orderNo),this.getAccessory(t.orderNo),this.getProcess(t),this.$http.get("/haolifa/order-product/accessory?orderNo=".concat(t.orderNo)).then((function(t){e.fileDetailList=t})).catch((function(t){e.$toast(t.msg||t.message)}))},getInfo:function(t){var e=this;this.$http.get("/haolifa/order-product/details?orderNo=".concat(t)).then((function(t){e.info=t})).catch((function(t){e.$toast(t.msg||t.message)}))},getAccessory:function(t){var e=this;this.$http.get("/haolifa/flowInstance/flow/accessoryInfo?formNo=".concat(t,"&formId=0")).then((function(t){t.forEach((function(t){""!=t.fileUrl&&e.accessoryList.push(t)}))})).catch((function(t){e.$toast(t.msg||t.message)}))},getProcess:function(t){var e=this;this.$http.get("/haolifa/flowInstance/flow/progress/?formNo=".concat(t.orderNo)).then((function(t){e.processList=[],t.map((function(t){e.processList.push(t),t.child.length>0&&t.child.map((function(t){e.processList.push(t)}))}))})).catch((function(t){e.$toast(t.msg||t.message)}))},close:function(){this.layer=!1,this.accessoryList=[]},getOrderStatus:function(t){var e="";return this.orderStatusList.map((function(a){t==a.value&&(e=a.text)})),e}}},l=n,o=(a("aa28"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},9396:function(t,e,a){"use strict";a("fe63")},"952f":function(t,e,a){"use strict";a("3c35")},"964a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-invoice-list"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.purchaseOrderNo,expression:"filter.purchaseOrderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"采购合同"},domProps:{value:t.filter.purchaseOrderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"purchaseOrderNo",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.demander,expression:"filter.demander"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"采购方"},domProps:{value:t.filter.demander},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"demander",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供应商"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}})]),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/standaccount/list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.purchaseOrderNo))]),e("td",[t._v(t._s(s.demander))]),e("td",[t._v(t._s(s.supplierName))]),e("td",[t._v(t._s(s.deliveryTime))]),e("td",[t._v(t._s(s.totalCount))]),e("td",[t._v(t._s(s.qualifiedNumber))]),e("td",[t._v(t._s(s.totalPrice))]),e("td",[t._v(t._s(s.paidAccount))]),e("td",[t._v(t._s(t.statusArr[s.status]))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("详 情")])])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("采购合同")]),e("th",[t._v("采购方")]),e("th",[t._v("供应商")]),e("th",[t._v("交货日期")]),e("th",[t._v("总数量")]),e("th",[t._v("检验合格数量")]),e("th",[t._v("合同总金额")]),e("th",[t._v("已付货款")]),e("th",[t._v("状态")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?e("layer",{attrs:{title:"详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14"},[e("tr",[e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("采购订单")]),e("td",{staticClass:"b",attrs:{colspan:"6"}},[e("a",{staticClass:"a",staticStyle:{color:"#008eff","margin-right":"10px"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),e("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),e("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),e("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),e("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),e("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),e("tr",[e("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(a,s){return e("tr",{key:a.id},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.specification))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.material))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unit))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.number))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitPrice))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalAmount))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.remark))])])})),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("总计")]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),e("td",{attrs:{colspan:"1"}})]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),e("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")])])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),e("td",{attrs:{colspan:"3"}},[t._v("批准：")]),e("td",{attrs:{colspan:"3"}},[t._v("审核：")]),e("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{demander:"",purchaseOrderNo:"",supplierName:""},statusArr:["","待审批","审批中","采购中","审批不通过","采购完成"],orderUrl:"",itemList:[],info:{},layer:!1}},mounted:function(){},methods:{flush:function(){this.filter={demander:"",purchaseOrderNo:"",supplierName:""},this.$refs.list.update(!0)},getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/finance/standaccount/info/".concat(t)).then((function(t){e.info=t.order,e.itemList=t.items,e.orderUrl=t.order.fileUrl,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10)})).catch((function(t){e.$toast(t.msg)}))},close:function(){this.layer=!1}}},l=n,o=(a("e9569"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},9751:function(t,e,a){},"9ac1":function(t,e,a){"use strict";a("9751")},"9b68":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"data-list relative f-12"},[e("transition",{attrs:{name:"slide-y"}},[t.list.length?e("table",{staticClass:"data-table"},[t._t("header",(function(){return[e("tr",[e("th",[t._v("表头1")]),e("th",[t._v("表头2")])])]})),t._l(t.list,(function(a,s){return e("tr",{key:a.id},[t._t("item",(function(){return[e("td",[t._v("数据1")]),e("td",[t._v("数据2")])]}),{i:s,item:a,index:(t.pageNum-1)*t.pageSize+s+1})],2)}))],2):t._e()]),e("div",{staticClass:"flex-v-center",staticStyle:{"margin-top":"10px"}},[t.list.length?e("pagination",{staticClass:"mr-20",attrs:{page:t.pageNum,size:t.pageSize,total:t.total},on:{change:t.getList}}):t._e(),t.total?e("span",{staticClass:"f-12 c-6"},[t._v("共 "+t._s(t.total)+" 条数据")]):t._e()],1),t.list.length||t.loading?t._e():e("div",{staticStyle:{"margin-top":"100px"}},[e("no-data")],1)],1)},i=[];a("c5f6"),a("ac6a"),a("456d");function r(t){return"?"+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}var n={name:"data-list",props:{method:{type:String,default:"get"},url:{type:String,default:""},pageSize:{type:Number,default:20},param:{type:Object,default:function(){}},pageNumStr:{type:String,default:"pageNum"}},data:function(){return{pageNum:1,total:0,loading:!1,list:[]}},watch:{url:function(){this.update()},mehtod:function(){this.update()},pageSize:function(){this.update()},param:function(){this.update()}},created:function(){this.pageNum=this.$route.query.page||1,this.getList(this.pageNum)},methods:{getList:function(t){var e=this,a=this.method,s=this.url,i=this.pageSize,n=this.param;if(s){this.loading=!0;var l={pageSize:i};l[this.pageNumStr]=t;var o=Object.assign(l,n),c="get"===a?s+r(o):s;this.$http[a](c,o).then((function(t){e.list=t.list||[],e.pageNum=t.pageNum;var a=e.$route.query;a.page=t.pageNum,e.$router.push({path:e.$route.path,query:a}),e.total=t.total,e.loading=!1})).catch((function(t){e.loading=!1,e.$toast(t.message||t.msg||t)}))}},update:function(t){this.getList(t?1:this.pageNum)}}},l=n,o=(a("952f"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["a"]=c.exports},"9efa":function(t,e,a){},a140:function(t,e,a){"use strict";a("3c8e")},a20a:function(t,e,a){"use strict";a("4176")},a4e2:function(t,e,a){"use strict";a.r(e);a("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"process-prod flex-col"},[e("div",{staticClass:"flex-item scroll-y"},[e("div",{staticClass:"content"},[t.data?e("div",{staticClass:"p-p-base"},[e("div",{staticClass:"node"},[t._m(0),e("div",{staticClass:"node"},[e("div",{staticClass:"node-title mb-10"},[e("span",{staticClass:"b"},[t._v("流程描述：")]),e("span",{staticClass:"mr-15"},[t._v(t._s(t.data.summary))])]),e("div",{staticClass:"node-title mb-10"},[e("span",{staticClass:"b"},[t._v("采购单号：")]),e("span",{staticClass:"mr-15"},[t._v(t._s(t.data.formNo))])]),e("div",{staticClass:"node-title mb-10"},[e("span",{staticClass:"b"},[t._v("发 起 人：")]),e("span",{staticClass:"mr-15"},[t._v(t._s(t.data.initUserName))])]),e("div",{staticClass:"node-title mb-10"},[e("span",{staticClass:"b"},[t._v("发起时间：")]),e("span",[t._v(t._s(t.data.createTime))])]),t._m(1),e("div",{staticClass:"layer-text",staticStyle:{padding:"0"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[t._m(2),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款单位 : "+t._s(t.info.applyPayCompany))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款金额 : "+t._s(t.info.totalPrice))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款日期 : "+t._s(t.info.applyTime))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("备注 : "+t._s(t.info.remark))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("创建日期 : "+t._s(t.info.createTime))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("更新日期 : "+t._s(t.info.updateTime))])]),t._m(3),t._l(t.info.applyDetailRSDTOList,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.purchaseOrderNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.price))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.applyCollectionCompany))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.applyPayCompany))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.remark))])])}))],2)])])]),t.data.dealStep?e("div",[e("div",{staticClass:"flex-item mt-10 mb-10"},[e("span",{staticClass:"f-20"},[t._v("审批栏")]),e("span",{staticClass:"f-10 ml-20"},[t._v("当前节点:"+t._s(t.data.dealStep.stepName))])]),e("div",{staticClass:"node"},[e("div",[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{"multi-line":!0,label:"审批意见"},model:{value:t.handleStep.auditInfo,callback:function(e){t.$set(t.handleStep,"auditInfo",e)},expression:"handleStep.auditInfo"}})],1),e("div",{staticClass:"flex"},[e("upload-box",{staticStyle:{width:"50%"},attrs:{btnText:"附件上传",fileList:t.fileList,multiple:t.multiple,onchange:t.uploadFile,onremove:t.removeFile}})],1),e("div",{staticClass:"flex",staticStyle:{"margin-top":"10px"}},[e("btn",{on:{click:function(e){return t.handleStepM(1)}}},[t._v("同意")]),e("btn",{staticClass:"ml-10",on:{click:function(e){return t.handleStepM(0)}}},[t._v("不同意")]),e("btn",{staticClass:"ml-10",on:{click:function(e){return t.backStepM()}}},[t._v("退回")])],1)])])]):t._e(),t.data.historyInfos?e("div",[t._m(4),e("div",{staticClass:"flex-item scroll-y"},[e("table",{staticClass:"data-table"},[t._m(5),t._l(t.data.historyInfos,(function(a,s){return e("tr",[e("td",[t._v(t._s(a.historyId))]),e("td",[t._v(t._s(a.instanceId))]),e("td",[t._v(t._s(3==a.auditResult?"发起":"审批"))]),e("td",[t._v(t._s(a.stepName))]),e("td",[t._v(t._s(a.auditUserName))]),e("td",[t._v(t._s(t.auditResults[a.auditResult].name))]),e("td",[t._v(t._s(a.auditInfo))]),null!=a.accessories?e("td",t._l(a.accessories,(function(a,s){return e("a",{key:s,attrs:{href:a.fileUrl}},[t._v(t._s(a.fileName))])})),0):e("td",[t._v("无")])])}))],2)])]):t._e(),t.data.accessories?e("div",[t._m(6),e("div",{staticClass:"flex-item"},t._l(t.data.accessories,(function(a,s){return e("div",{key:s,staticStyle:{"margin-left":"20px","margin-top":"5px"}},[e("div",{staticClass:"flex"},[e("a",{staticStyle:{"text-decoration":"none","out-line":"none",color:"blue"},attrs:{href:a.fileUrl,target:"_blank"}},[t._v(t._s(a.fileName))])])])})),0)]):t._e()]),t.backStepLayer?e("layer",{attrs:{title:"退回节点",width:"450px"}},[e("div",{staticClass:"node"},t._l(t.backSteps,(function(a){return e("div",{staticClass:"node-item"},[e("radio-box",{attrs:{label:a.stepId},model:{value:t.handleStep.backStepId,callback:function(e){t.$set(t.handleStep,"backStepId",e)},expression:"handleStep.backStepId"}}),t._v("\n                            "+t._s(a.stepName)+"\n                        ")],1)})),0),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:function(e){return t.cancel()}}},[t._v("取消")]),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("提交")])],1)]):t._e()],1):t._e()])])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-item mt-10 mb-10"},[e("span",{staticClass:"f-20"},[t._v("基本信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"node-title"},[e("span",{staticClass:"b"},[t._v("付款申请详情：")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticStyle:{width:"20%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"25%"}}),e("td",{staticStyle:{width:"25%"}}),e("td",{staticStyle:{width:"20%"}})])},function(){var t=this,e=t._self._c;return e("tr",[e("th",[t._v("订单号")]),e("th",[t._v("金额(元)")]),e("th",[t._v("收款单位")]),e("th",[t._v("付款单位")]),e("th",[t._v("备注")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-item mt-10 mb-10"},[e("span",{staticClass:"f-20"},[t._v("审批历史")])])},function(){var t=this,e=t._self._c;return e("tr",[e("th",{staticStyle:{width:"60px"}},[t._v("ID")]),e("th",[t._v("实例ID")]),e("th",[t._v("节点类型")]),e("th",[t._v("节点名称")]),e("th",[t._v("审核人")]),e("th",[t._v("审核结果")]),e("th",[t._v("意见")]),e("th",[t._v("审核附件")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-item mt-10 mb-10"},[e("span",{staticClass:"f-20"},[t._v("审批附件")])])}],n=(a("a481"),a("c1df")),l=a.n(n),o=a("153b"),c={name:"process-prod",data:function(){return{data:null,orderUrl:"/haolifa/export/purchaseOrder/",backStepLayer:!1,auditResults:[{status:0,name:"审核不通过"},{status:1,name:"审核通过"},{status:2,name:"退回"},{status:3,name:"流程初始化"}],handleStep:{id:0,stepId:0,auditInfo:"",allotUserId:null,auditResult:1,formId:0,formType:0,backStepId:null,condition:!0,accessorys:[]},backSteps:[],fileList:[],fileName:"",multiple:!0,info:{}}},activated:function(){this.getData()},created:function(){},methods:{switchTab:function(t){this.$router.replace({path:t,query:this.$route.query})},getData:function(){var t=this;this.$http.get("/haolifa/flowInstance/flow-history/".concat(this.$route.query.instanceId)).then((function(e){e.createTime=l()(e.createTime).format("YYYY-MM-DD HH:mm"),t.data=e,t.handleStep.id=e.instanceId,e.dealStep&&(t.handleStep.stepId=e.dealStep.stepId),t.$http.post("/haolifa/finance/payapply/getInfo/".concat(e.formId)).then((function(e){t.info=e,console.log(t.info)}))})).catch((function(e){t.$toast(e.message||e.msg)}))},handleStepM:function(t){var e=this;this.handleStep.auditResult=t,this.$http.post("/haolifa/flowInstance/handleStep",this.handleStep).then((function(t){e.$toast("处理成功"),e.handleStep.backStepId=null,e.backStepLayer=!1,e.getData()})).catch((function(t){e.$toast(t.msg||t.message)}))},uploadFile:function(t,e){var a=this;this.loading=!0,this.loadingMsg="正在上传",Object(o["a"])(t.source).then((function(e){a.$http.post("/haolifa/file/uploadFileBase64",{base64Source:e,fileName:t.name}).then((function(e){a.handleStep.accessorys.push({fileName:t.name,fileUrl:e}),a.loading=!1})).catch((function(t){a.$toast(t.msg||t.message),a.loading=!1}))}))},removeFile:function(){var t=this;return new Promise((function(e,a){t.handleStep.accessorys.splice(i,1),e()}))},backStepM:function(){var t=this;this.$http.get("/haolifa/flowInstance/backSteps/".concat(this.handleStep.id)).then((function(e){e.length>0?(t.backSteps=e,t.backStepLayer=!0):t.$toast("无可退回节点")})).catch((function(e){t.$toast(e.msg||e.message)}))},complete:function(){this.handleStepM(2)},cancel:function(){this.backStepLayer=!1,this.handleStep.backStepId=null}}},p=c,d=(a("8623"),a("2877")),u=Object(d["a"])(p,s,r,!1,null,null,null);e["default"]=u.exports},a6a3:function(t,e,a){"use strict";a.r(e);a("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-invoice-list"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),t._v("\n            状态:\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:"0"}},[t._v("全部")]),e("option",{attrs:{value:"1"}},[t._v("代办")]),e("option",{attrs:{value:"2"}},[t._v("已办")])])]),e("div",{staticClass:"flex-item"}),e("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")])],1),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/payapply/getPayAppList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.applyTime))]),e("td",[t._v(t._s(s.applyPayCompany))]),e("td",[t._v(t._s(s.totalPrice))]),e("td",[t._v(t._s(t.statusArr[s.status]))]),e("td",[t._v(t._s(s.remark))]),e("td",[t._v(t._s(s.createTime))]),e("td",[t._v(t._s(s.updateTime))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(s)}}},[t._v("编辑 | ")]),e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.detail(s)}}},[t._v("详情 | ")]),1==s.status||4==s.status?e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.startFinance(s.id)}}},[t._v("发起审批 | ")]):t._e(),e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.approveProgress(s)}}},[t._v("审批进度")]),1==s.status||4==s.status?e("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(s)}}},[t._v("| 删除")]):t._e()])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("付款日期")]),e("th",[t._v("付款单位")]),e("th",[t._v("付款金额")]),e("th",[t._v("审批节点")]),e("th",[t._v("备注")]),e("th",[t._v("创建时间")]),e("th",[t._v("更新时间")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?e("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"flex"},[e("el-button",{staticClass:"mr-20",attrs:{size:"mini",type:"primary"},on:{click:t.addItem}},[t._v("选择合同")])],1),t._l(t.form.applyDetailAddDTOList,(function(a,s){return e("div",{key:s,staticStyle:{margin:"0 30px"}},[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"订单号"},model:{value:a.purchaseOrderNo,callback:function(e){t.$set(a,"purchaseOrderNo",e)},expression:"item.purchaseOrderNo"}}),e("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"金额"},on:{blur:function(e){return t.amountChange(s)}},model:{value:a.price,callback:function(e){t.$set(a,"price",e)},expression:"item.price"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"收款单位"},model:{value:a.applyCollectionCompany,callback:function(e){t.$set(a,"applyCollectionCompany",e)},expression:"item.applyCollectionCompany"}}),e("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"付款单位"},model:{value:a.applyPayCompany,callback:function(e){t.$set(a,"applyPayCompany",e)},expression:"item.applyPayCompany"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"备注"},model:{value:a.remark,callback:function(e){t.$set(a,"remark",e)},expression:"item.remark"}}),e("el-button",{staticClass:"mr-20",attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(e){return t.delItem(s)}}},[t._v("删 除")])],1),e("hr",{staticStyle:{border:"1px dashed #409EFF"}})])})),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"总计"},model:{value:t.form.totalPrice,callback:function(e){t.$set(t.form,"totalPrice",e)},expression:"form.totalPrice"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],2),e("div",{staticClass:"layer-btns"},[e("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),e("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e(),t.layerTable?e("layer",{attrs:{title:"数据列表",width:"90%"}},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                采购合同号:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tableForm.orderNo,expression:"tableForm.orderNo"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.tableForm.orderNo},on:{change:function(e){t.$refs.listOne.update(!0),t.getDataOneNum()},input:function(e){e.target.composing||t.$set(t.tableForm,"orderNo",e.target.value)}}}),t._v("\n                供方单位:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tableForm.supplierName,expression:"tableForm.supplierName"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.tableForm.supplierName},on:{change:function(e){t.$refs.listOne.update(!0),t.getDataOneNum()},input:function(e){e.target.composing||t.$set(t.tableForm,"supplierName",e.target.value)}}}),t._v("\n                订单状态:\n                "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.tableForm.status,expression:"tableForm.status"}],staticClass:"f-14",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tableForm,"status",e.target.multiple?a:a[0])}}},t._l(t.statusList,(function(a){return e("option",{key:a.status,domProps:{value:a.status}},[t._v(t._s(a.name))])})),0),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.getTableData(1)}}},[t._v("查询")]),e("el-link",{staticClass:"ml-20"},[t._v("选择采购合同金额总计："+t._s(t.selectedAmount))]),e("el-link",{staticClass:"ml-20"},[t._v("材料费预算余额："+t._s(t.balanceNum))])],1)]),e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),e("el-table-column",{attrs:{prop:"purchaseOrderNo",label:"采购合同号"}}),e("el-table-column",{attrs:{prop:"supplierName",label:"供方单位"}}),e("el-table-column",{attrs:{prop:"demander",label:"采购单位"}}),e("el-table-column",{attrs:{prop:"paidAccount",label:"已付款金额"}}),e("el-table-column",{attrs:{prop:"invoiceAccount",label:"已开票金额"}}),e("el-table-column",{attrs:{prop:"totalPrice",label:"采购金额"}}),e("el-table-column",{attrs:{prop:"deliveryTime",width:"110",label:"采购完成日期"}}),e("el-table-column",{attrs:{prop:"totalCount",width:"100",label:"采购总数量"}}),e("el-table-column",{attrs:{prop:"qualifiedNumber",width:"110",label:"检验合格数量"}}),e("el-table-column",{attrs:{prop:"status",label:"订单状态",width:"80",formatter:t.statusFormatter}}),e("el-table-column",{attrs:{prop:"payType",label:"付款方式"}})],1)],1),e("el-pagination",{attrs:{"page-size":50,"pager-count":7,layout:"prev, pager, next,total",total:t.total},on:{"current-change":t.handleCurrentChange}}),e("div",{staticClass:"layer-btns"},[e("el-button",{staticClass:"mr-20",attrs:{size:"mini",type:"primary"},on:{click:t.saveSelect}},[t._v("保存")]),e("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:function(e){t.layerTable=!1}}},[t._v("关闭")])],1)],1):t._e(),t.layerDetail?e("layer",{attrs:{title:"详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"20%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"25%"}}),e("td",{staticStyle:{width:"25%"}}),e("td",{staticStyle:{width:"20%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款单位 : "+t._s(t.info.applyPayCompany))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款金额 : "+t._s(t.info.totalPrice))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款日期 : "+t._s(t.info.applyTime))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("备注 : "+t._s(t.info.remark))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("创建日期 : "+t._s(t.info.createTime))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("更新日期 : "+t._s(t.info.updateTime))])]),e("tr",[e("th",[t._v("订单号")]),e("th",[t._v("金额(元)")]),e("th",[t._v("收款单位")]),e("th",[t._v("付款单位")]),e("th",[t._v("备注")])]),t._l(t.info.applyDetailRSDTOList,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.purchaseOrderNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.price))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.applyCollectionCompany))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.applyPayCompany))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.remark))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layerDetail=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(a("ac6a"),a("9b68")),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{status:"0"},layer:!1,form:{applyDetailAddDTOList:[],remark:"",totalPrice:0},tableForm:{orderNo:"",supplierName:"",status:"5"},loading:!1,layerTable:!1,tableData:[],multipleSelection:[],pageNum:1,total:0,statusList:[{status:"3",name:"采购中"},{status:"5",name:"采购完成"}],layerDetail:!1,info:{},selectedAmount:0,statusArr:["","待审批","审批中","付款中","审批不通过","付款完成"],balanceNum:0}},mounted:function(){},methods:{flush:function(){this.filter={status:"0"},this.$refs.list.update(!0)},edit:function(t){this.layer=!0,this.form.id=t.id,this.form.applyDetailAddDTOList=JSON.parse(JSON.stringify(t.applyDetailRSDTOList)),this.form.remark=t.remark,this.form.totalPrice=t.totalPrice},detail:function(t){this.layerDetail=!0,this.info=t},approveProgress:function(t){this.$router.push({path:"/purchsemanage-purchase/approveProgress?",query:{formNo:t.id,formId:""}})},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除采购订单申请吗？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/finance/payapply/delete/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},addItem:function(){this.pageNum=1,this.tableData=[],this.layerTable=!0,this.selectedAmount=0,this.getTableData()},delItem:function(t){this.form.applyDetailAddDTOList.splice(t,1)},startFinance:function(t){var e=this;this.$http.get("/haolifa/finance/payapply/approve/".concat(t)).then((function(t){e.$toast("审批发起成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))},getBalanceNum:function(){var t=this;this.$http.get("/haolifa/finance/payapply/subjects/getCurUserClfSubjectsBudget").then((function(e){t.balanceNum=e.balanceAmount})).catch((function(e){t.$toast(e.msg||e.message)}))},statusFormatter:function(t,e,a,s){return 3==t.status?"采购中":4==t.status?"采购完成":t.status},handleCurrentChange:function(t){this.pageNum=t,this.getTableData(t)},handleSelectionChange:function(t){var e=this;this.selectedAmount=0,this.multipleSelection=t,t.map((function(t){e.selectedAmount+=t.totalPrice})),this.selectedAmount=Math.floor(100*this.selectedAmount)/100},saveSelect:function(){var t=this;0!=this.multipleSelection.length?(this.multipleSelection.map((function(e){t.form.applyDetailAddDTOList.push({applyCollectionCompany:e.supplierName,applyPayCompany:e.demander,payType:e.payType,price:e.totalPrice,purchaseOrderId:e.id,purchaseOrderNo:e.purchaseOrderNo,remark:""}),t.form.totalPrice+=e.totalPrice})),this.form.totalPrice=Math.floor(100*this.form.totalPrice)/100,this.layerTable=!1):this.$toast("请选择数据")},amountChange:function(t){var e=this;this.form.totalPrice=0,this.form.applyDetailAddDTOList.forEach((function(t){e.form.totalPrice+=+t.price})),this.form.totalPrice=Math.floor(100*this.form.totalPrice)/100},add:function(){this.layer=!0,this.getBalanceNum()},getTableData:function(t){var e=this;t&&(this.pageNum=t),this.tableData=[],this.loading=!0,this.$http.post("/haolifa/purchase-order/payPlanlist",{pageSize:50,pageNum:1,orderType:0,orderNo:this.tableForm.orderNo,supplierName:this.tableForm.supplierName,status:this.tableForm.status}).then((function(t){e.loading=!1,e.tableData=t.list,e.total=t.total})).catch((function(t){e.loading=!1,e.$toast(t.msg||t.message)}))},save:function(){var t=this;this.loading=!0;var e=this.form.id?"/haolifa/finance/payapply/updatePayApp":"/haolifa/finance/payapply/savePayApp";this.$http.post(e,this.form).then((function(e){t.layer=!1,t.$toast("保存成功"),t.close(),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))},close:function(){this.layer=!1,this.form={applyDetailAddDTOList:[],remark:"",totalPrice:0}}}},l=n,o=(a("197a"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},a9df:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-notification"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[t._v("销售报表统计图")]),e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"12px"}},[e("el-date-picker",{attrs:{size:"mini",clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.oneYearChange},model:{value:t.oneYearDate,callback:function(e){t.oneYearDate=e},expression:"oneYearDate"}})],1),e("div",{staticStyle:{width:"98%",margin:"0 auto",display:"flex"}},[e("div",{staticStyle:{display:"flex","padding-left":"20px","margin-left":"12px",color:"#008eff","font-size":"22px"}},[e("p",[t._v("生产总数量："+t._s(t.totalNum)+"台")]),e("p",{staticStyle:{"margin-left":"20px","font-size":"20px"}},[t._v("产值总额："+t._s(t.totalPrice.toFixed(2))+"元")]),e("p",{staticStyle:{"margin-left":"20px","font-size":"20px"}},[t._v("合同订货总数量："+t._s(t.contractTotalNum)+"台")]),e("p",{staticStyle:{"margin-left":"20px","font-size":"20px"}},[t._v("当年累计订货额："+t._s(t.contractTotalPrice.toFixed(2))+"元")])])]),e("div",{staticStyle:{width:"98%","margin-left":"20px",display:"flex","padding-left":"12px"}},[e("el-date-picker",{attrs:{size:"mini",clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.getSaleFive},model:{value:t.fiveYearDate,callback:function(e){t.fiveYearDate=e},expression:"fiveYearDate"}}),e("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("当年累计订货额:"+t._s(t.saleFiveNum.toFixed(2))+"元")]),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDataOne(1)}}},[t._v("数据显示")])],1),t._m(0),e("div",{staticStyle:{width:"98%","margin-left":"20px",display:"flex","padding-left":"1%"}},[e("div",{staticStyle:{"line-height":"28px"}},[t._v("开始时间:")]),e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getSale2Five},model:{value:t.fiveYear2Date,callback:function(e){t.fiveYear2Date=e},expression:"fiveYear2Date"}}),e("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("结束时间:")]),e("el-date-picker",{attrs:{size:"mini",clearable:!1,"value-format":"yyyy-MM",type:"month",placeholder:"选择年月"},on:{change:t.getSale2Five},model:{value:t.fiveYear2Date2,callback:function(e){t.fiveYear2Date2=e},expression:"fiveYear2Date2"}}),e("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("当月累计订货额:"+t._s(t.saleFive2Num.toFixed(2))+"元")]),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDataOne(2)}}},[t._v("数据显示")])],1),t._m(1),e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("el-date-picker",{attrs:{size:"mini",clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.getSaleSix},model:{value:t.sixYearDate,callback:function(e){t.sixYearDate=e},expression:"sixYearDate"}}),e("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("当年累计回款总额:"+t._s(t.salSixNum.toFixed(2))+"元")]),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getBackDetail(1)}}},[t._v("数据显示")])],1),t._m(2),e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("div",{staticStyle:{"line-height":"28px"}},[t._v("开始时间:")]),e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getSale2Six},model:{value:t.sixYear2Date,callback:function(e){t.sixYear2Date=e},expression:"sixYear2Date"}}),e("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("结束时间:")]),e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getSale2Six},model:{value:t.sixYear2Date2,callback:function(e){t.sixYear2Date2=e},expression:"sixYear2Date2"}}),e("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("当月累计回款总额:"+t._s(t.salSix2Num.toFixed(2))+"元")]),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getBackDetail(2)}}},[t._v("数据显示")])],1),t._m(3),e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("div",{staticStyle:{"line-height":"28px"}},[t._v("开始时间:")]),e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getBuyOne},model:{value:t.sevenYearDate,callback:function(e){t.sevenYearDate=e},expression:"sevenYearDate"}}),e("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("结束时间:")]),e("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getBuyOne},model:{value:t.sevenYearDate2,callback:function(e){t.sevenYearDate2=e},expression:"sevenYearDate2"}}),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getSaleDetail()}}},[t._v("数据显示")])],1),t._m(4),e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("el-date-picker",{attrs:{size:"mini",clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.getYearTotal},model:{value:t.yearDate,callback:function(e){t.yearDate=e},expression:"yearDate"}}),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getFourDetail()}}},[t._v("数据显示")])],1),t._m(5),e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("el-date-picker",{attrs:{size:"mini",clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.getSaleTwo},model:{value:t.twoYear,callback:function(e){t.twoYear=e},expression:"twoYear"}})],1),t._m(6),t.flag1?e("layer",{attrs:{title:"数据列表",width:"95%"}},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                客户名称:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form1.demandName,expression:"form1.demandName"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form1.demandName},on:{change:function(e){t.$refs.listOne.update(!0),t.getDataOneNum()},input:function(e){e.target.composing||t.$set(t.form1,"demandName",e.target.value)}}}),t._v("\n                订单号:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form1.orderNo,expression:"form1.orderNo"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form1.orderNo},on:{change:function(e){t.$refs.listOne.update(!0),t.getDataOneNum()},input:function(e){e.target.composing||t.$set(t.form1,"orderNo",e.target.value)}}}),t._v("\n                订单状态:\n                "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form1.orderStatus,expression:"form1.orderStatus"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form1,"orderStatus",e.target.multiple?a:a[0])},function(e){t.$refs.listOne.update(!0),t.getDataOneNum()}]}},[e("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.orderStatusList,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(t._s(a.text))])}))],2),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.$refs.listOne.update(!0),t.getDataOneNum()}}},[t._v("查询")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("累计订货总金额: "+t._s(t.totalAmountNum)+"元")])],1)]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"listOne",attrs:{"page-size":50,param:t.form1,url:"/haolifa/report-extend/report-order-list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.createTime))]),e("td",[t._v(t._s(s.demandName))]),e("td",[t._v(t._s(s.orderNo))]),e("td",[t._v(t._s(t.orderStatusArr[s.orderStatus]))]),e("td",[t._v(t._s(s.productName))]),e("td",[t._v(t._s(s.productModel))]),e("td",[t._v(t._s(s.specifications))]),e("td",[t._v(t._s(s.productNumber))]),e("td",[t._v(t._s(s.price))]),e("td",[t._v(t._s(s.totalPrice))]),e("td",[t._v(t._s(s.deliveryDate))])]}}],null,!1,947290064)},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("接单日期")]),e("th",[t._v("客户名称")]),e("th",[t._v("订单号")]),e("th",[t._v("订单状态")]),e("th",[t._v("产品名称")]),e("th",[t._v("系列")]),e("th",[t._v("规格")]),e("th",[t._v("数量")]),e("th",[t._v("单价（元）")]),e("th",[t._v("金额（元）")]),e("th",[t._v("交期")])])])],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.flag1=!1}}},[t._v("关闭")])],1)]):t._e(),t.flag2?e("layer",{attrs:{title:"数据列表",width:"95%"}},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                客户名称:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form2.demandName,expression:"form2.demandName"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form2.demandName},on:{change:function(e){t.$refs.listTwoTwo.update(!0),t.getDataBackNum()},input:function(e){e.target.composing||t.$set(t.form2,"demandName",e.target.value)}}}),t._v("\n                订单号:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form2.orderNo,expression:"form2.orderNo"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form2.orderNo},on:{change:function(e){t.$refs.listTwoTwo.update(!0),t.getDataBackNum()},input:function(e){e.target.composing||t.$set(t.form2,"orderNo",e.target.value)}}}),t._v("\n                订单状态:\n                "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form2.orderStatus,expression:"form2.orderStatus"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form2,"orderStatus",e.target.multiple?a:a[0])},function(e){t.$refs.listTwoTwo.update(!0),t.getDataBackNum()}]}},[e("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.orderStatusList,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(t._s(a.text))])}))],2),t._v("\n                发货状态:\n                "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form2.deliverStatus,expression:"form2.deliverStatus"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form2,"deliverStatus",e.target.multiple?a:a[0])},function(e){t.$refs.listTwoTwo.update(!0),t.getDataBackNum()}]}},[e("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.deliverStatusList,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(t._s(a.text))])}))],2),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.$refs.listTwoTwo.update(!0),t.getDataBackNum()}}},[t._v("查询")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"18px"},attrs:{underline:!1,type:"text"}},[t._v("合同金额: "+t._s(t.form2Obj.totalSaleAmount.toFixed(2))+"元")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"18px"},attrs:{underline:!1,type:"text"}},[t._v("回款金额: "+t._s(t.form2Obj.totalCollectAmount.toFixed(2))+"元")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"18px"},attrs:{underline:!1,type:"text"}},[t._v("欠款金额: "+t._s(t.form2Obj.totalOwedAmount.toFixed(2))+"元")])],1)]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"listTwoTwo",attrs:{"page-size":50,param:t.form2,url:"/haolifa/report-extend/report-collect-order-list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.demandName))]),e("td",[t._v(t._s(s.createTime))]),e("td",[t._v(t._s(s.orderNo))]),e("td",[t._v(t._s(t.orderStatusArr[s.orderStatus]))]),e("td",[t._v(t._s(t.deliverStatusArr[s.deliverStatus]))]),e("td",[t._v(t._s(s.totalPrice))]),e("td",[t._v(t._s(s.deliveryDate))]),e("td",[t._v(t._s(s.collectionAmount))]),e("td",[t._v(t._s(s.collectionDate))]),e("td",[t._v(t._s(s.owedAmount))])]}}],null,!1,296013484)},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("客户名称")]),e("th",[t._v("接单日期")]),e("th",[t._v("订单号")]),e("th",[t._v("订单状态")]),e("th",[t._v("发货状态")]),e("th",[t._v("合同金额（元）")]),e("th",[t._v("交货日期")]),e("th",[t._v("回款金额（元）")]),e("th",[t._v("回款日期")]),e("th",[t._v("欠款金额（元）")])])])],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.flag2=!1}}},[t._v("关闭")])],1)]):t._e(),t.flag3?e("layer",{attrs:{title:"数据列表",width:"95%"}},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                客户名称:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form3.demandName,expression:"form3.demandName"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form3.demandName},on:{change:function(e){t.$refs.listThree.update(!0),t.getSaleData()},input:function(e){e.target.composing||t.$set(t.form3,"demandName",e.target.value)}}}),t._v("\n                订单号:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form3.orderNo,expression:"form3.orderNo"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form3.orderNo},on:{change:function(e){t.$refs.listThree.update(!0),t.getSaleData()},input:function(e){e.target.composing||t.$set(t.form3,"orderNo",e.target.value)}}}),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.$refs.listThree.update(!0),t.getSaleData()}}},[t._v("查询")])],1)]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("订货金额: "+t._s(t.form3Obj.saleAmount.toFixed(2))+"元")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("发货金额: "+t._s(t.form3Obj.deliveryAmount.toFixed(2))+"元")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("开票金额: "+t._s(t.form3Obj.invoiceAmount.toFixed(2))+"元")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("回款金额: "+t._s(t.form3Obj.collectAmount.toFixed(2))+"元")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("欠票金额: "+t._s(t.form3Obj.oweTicketAmount.toFixed(2))+"元")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("欠款金额: "+t._s(t.form3Obj.oweMoneyAmount.toFixed(2))+"元")])],1)]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"listThree",attrs:{"page-size":50,param:t.form3,url:"/haolifa/report-extend/report-sale-demand-list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.demandName))]),e("td",[t._v(t._s(s.orderNo))]),e("td",[t._v(t._s(s.saleAmount))]),e("td",[t._v(t._s(s.deliveryAmount))]),e("td",[t._v(t._s(s.invoiceAmount))]),e("td",[t._v(t._s(s.collectAmount))]),e("td",[t._v(t._s(s.oweTicketAmount))]),e("td",[t._v(t._s(s.oweMoneyAmount))])]}}],null,!1,909989643)},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("客户名称")]),e("th",[t._v("订单号")]),e("th",[t._v("订货金额（元）")]),e("th",[t._v("发货金额（元）")]),e("th",[t._v("开票金额（元）")]),e("th",[t._v("回款金额（元）")]),e("th",[t._v("欠票金额（元）")]),e("th",[t._v("欠款金额（元）")])])])],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.flag3=!1}}},[t._v("关闭")])],1)]):t._e(),t.flag4?e("layer",{attrs:{title:"数据列表",width:"95%"}},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                客户名称:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form4.demandName,expression:"form4.demandName"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form4.demandName},on:{change:function(e){t.$refs.listFour.update(!0),t.getFourTj()},input:function(e){e.target.composing||t.$set(t.form4,"demandName",e.target.value)}}}),t._v("\n                订单号:\n                "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form4.orderNo,expression:"form4.orderNo"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form4.orderNo},on:{change:function(e){t.$refs.listFour.update(!0),t.getFourTj()},input:function(e){e.target.composing||t.$set(t.form4,"orderNo",e.target.value)}}}),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.$refs.listFour.update(!0),t.getFourTj()}}},[t._v("查询")]),e("el-button",{attrs:{type:"warning",size:"mini"},on:{click:t.exportExcel}},[t._v("导出")]),e("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("累计产值总额: "+t._s(t.form4Amount.toFixed(2))+"元")])],1)]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"listFour",attrs:{"page-size":50,param:t.form4,url:"/haolifa/report-extend/report-sale-output-list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.createTime))]),e("td",[t._v(t._s(s.demandName))]),e("td",[t._v(t._s(s.orderNo))]),e("td",[t._v(t._s(t.orderStatusArr[s.orderStatus]))]),e("td",[t._v(t._s(s.productNo))]),e("td",[t._v(t._s(s.productName))]),e("td",[t._v(t._s(s.productSpecifications))]),e("td",[t._v(t._s(s.productModel))]),e("td",[t._v(t._s(s.quantity))]),e("td",[t._v(t._s(s.price))]),e("td",[t._v(t._s(s.totalPrice))])]}}],null,!1,2274285802)},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("接单日期")]),e("th",[t._v("客户名称")]),e("th",[t._v("订单号")]),e("th",[t._v("订单状态")]),e("th",[t._v("产品ID")]),e("th",[t._v("产品名称")]),e("th",[t._v("系列")]),e("th",[t._v("规格")]),e("th",[t._v("数量")]),e("th",[t._v("单价（元）")]),e("th",[t._v("金额（元）")])])])],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.flag4=!1}}},[t._v("关闭")])],1)]):t._e(),t.exportLayer?e("layer",{attrs:{title:"导出",width:"30%"}},[e("div",{staticClass:"flex ml-20 mr-20"},[e("date-picker",{staticClass:"flex-item",attrs:{hint:"必填",label:"开始时间"},model:{value:t.exportForm.startDate,callback:function(e){t.$set(t.exportForm,"startDate",e)},expression:"exportForm.startDate"}})],1),e("div",{staticClass:"flex ml-20 mr-20"},[e("date-picker",{staticClass:"flex-item",attrs:{hint:"必填",label:"结束时间"},model:{value:t.exportForm.endDate,callback:function(e){t.$set(t.exportForm,"endDate",e)},expression:"exportForm.endDate"}})],1),e("div",{staticClass:"flex ml-20 mr-20"},[e("input-box",{staticClass:"flex-item",attrs:{label:"订单号"},model:{value:t.exportForm.orderNo,callback:function(e){t.$set(t.exportForm,"orderNo",e)},expression:"exportForm.orderNo"}})],1),e("div",{staticClass:"flex ml-20 mr-20"},[e("select-box",{staticClass:"flex-item",attrs:{list:t.entryStatusList,label:"状态"},model:{value:t.exportForm.entryStatus,callback:function(e){t.$set(t.exportForm,"entryStatus",e)},expression:"exportForm.entryStatus"}})],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:function(e){t.exportLayer=!1}}},[t._v("取消")]),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.download()}}},[t._v("确定")])],1)]):t._e()],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("div",{staticStyle:{width:"100%",height:"500px","margin-top":"20px"},attrs:{id:"saleFive"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("div",{staticStyle:{width:"100%",height:"500px","margin-top":"20px"},attrs:{id:"sale2Five"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("div",{staticStyle:{width:"100%",height:"500px","margin-top":"20px"},attrs:{id:"saleSix"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("div",{staticStyle:{width:"100%",height:"500px","margin-top":"20px"},attrs:{id:"sale2Six"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("div",{staticStyle:{width:"100%",height:"500px","margin-top":"20px"},attrs:{id:"saleSeven"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("div",{staticStyle:{width:"100%",height:"500px"},attrs:{id:"saleOne"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[e("div",{staticStyle:{width:"100%",height:"500px"},attrs:{id:"saleTwo"}})])}],r=(a("456d"),a("ac6a"),a("9b68")),n={name:"xsreport-form",components:{DataList:r["a"]},data:function(){return{chartOneList:[],yearDate:(new Date).getFullYear()+"",oneYearDate:(new Date).getFullYear()+"",cYearDate:(new Date).getFullYear()+"",fiveYearDate:(new Date).getFullYear()+"",sixYearDate:(new Date).getFullYear()+"",twoYear:(new Date).getFullYear()+"",sevenYearDate:(new Date).getFullYear()+"-01",sevenYearDate2:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),fiveYear2Date:(new Date).getFullYear()+"-01",fiveYear2Date2:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),sixYear2Date:(new Date).getFullYear()+"-01",sixYear2Date2:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),totalNum:0,totalPrice:0,contractTotalNum:0,contractTotalPrice:0,saleFiveNum:0,saleFive2Num:0,salSixNum:0,salSix2Num:0,flag1:!1,flag2:!1,flag3:!1,flag4:!1,form1:{deliverStatus:"",demandName:"",endDate:"",orderNo:"",orderStatus:"",productName:"",startDate:"",year:""},form2:{deliverStatus:"",demandName:"",endDate:"",orderNo:"",orderStatus:"",productName:"",startDate:"",year:""},form2Obj:{totalSaleAmount:0,totalCollectAmount:0,totalOwedAmount:0},form3:{deliverStatus:"",demandName:"",endDate:"",orderNo:"",orderStatus:"",productName:"",startDate:"",year:""},form4:{deliverStatus:"",demandName:"",endDate:"",orderNo:"",orderStatus:"",productName:"",startDate:"",year:""},form4Amount:0,form3Obj:{saleAmount:0,deliveryAmount:0,invoiceAmount:0,collectAmount:0,oweMoneyAmount:0,oweTicketAmount:0},orderStatusList:[{value:0,text:"创建"},{value:1,text:"审批中"},{value:2,text:"核料中"},{value:3,text:"替换料审批中"},{value:4,text:"核料完成"},{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:8,text:"生产暂停"},{value:9,text:"生产完成"},{value:10,text:"质检中"},{value:11,text:"已入库"},{value:12,text:"申请发货"},{value:13,text:"发货完成"},{value:14,text:"审核不通过"}],orderStatusArr:["创建","审批中","核料中","替换料审批中","核料完成","待生产","待领料","生产中","生产暂停","生产完成","质检中","已入库","申请发货","发货完成","审核不通过"],deliverStatusList:[{value:0,text:"待发货"},{value:1,text:"部分发货"},{value:2,text:"发货完成"}],deliverStatusArr:["待发货","部分发货","发货完成"],exportLayer:!1,exportForm:{entryStatus:0,startDate:"",orderNo:"",endDate:""},totalAmountNum:0}},created:function(){this.getTotal(),this.getSaleFive(),this.getSale2Five(),this.getSaleSix(),this.getSale2Six(),this.getContractTotal(),this.getSaleTwo(this.twoYear),this.getSaleOne(this.yearDate),this.getBuyOne()},methods:{flush:function(){this.yearDate=(new Date).getFullYear()+"",this.oneYearDate=(new Date).getFullYear()+"",this.cYearDate=(new Date).getFullYear()+"",this.fiveYearDate=(new Date).getFullYear()+"",this.sixYearDate=(new Date).getFullYear()+"",this.twoYear=(new Date).getFullYear()+"",this.sevenYearDate=(new Date).getFullYear()+"-01",this.sevenYearDate2=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.fiveYear2Date=(new Date).getFullYear()+"-01",this.fiveYear2Date2=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.sixYear2Date=(new Date).getFullYear()+"-01",this.sixYear2Date2=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.getTotal(),this.getSaleFive(),this.getSale2Five(),this.getSaleSix(),this.getSale2Six(),this.getContractTotal(),this.getSaleTwo(this.twoYear),this.getSaleOne(this.yearDate),this.getBuyOne()},getDataOne:function(t){this.form1.demandName="",this.form1.orderNo="",this.form1.orderStatus="",1==t?(this.form1.startDate=this.fiveYearDate+"-01",this.form1.endDate=this.fiveYearDate+"-12"):2==t&&(this.form1.startDate=this.fiveYear2Date,this.form1.endDate=this.fiveYear2Date2),this.flag1=!0,this.getDataOneNum(),this.$refs.listOne.update(!0)},getDataOneNum:function(){var t=this;this.totalAmountNum="",this.$http.post("/haolifa/report-extend/report-order-summary",this.form1).then((function(e){t.totalAmountNum=e})).catch((function(e){t.$toast(e.msg||e.message)}))},getBackDetail:function(t){this.form2.demandName="",this.form2.orderNo="",this.form2.orderStatus="",this.form2.deliverStatus="",1==t?(this.form2.startDate=this.sixYearDate+"-01",this.form2.endDate=this.sixYearDate+"-12"):2==t&&(this.form2.startDate=this.sixYear2Date,this.form2.endDate=this.sixYear2Date2),this.flag2=!0,this.$refs.listTwoTwo.update(!0),this.getDataBackNum()},getDataBackNum:function(){var t=this;this.form2Obj={totalSaleAmount:0,totalCollectAmount:0,totalOwedAmount:0},this.$http.post("/haolifa/report-extend/report-collect-order-summary",this.form2).then((function(e){t.form2Obj.totalSaleAmount=e.totalSaleAmount,t.form2Obj.totalCollectAmount=e.totalCollectAmount,t.form2Obj.totalOwedAmount=e.totalOwedAmount})).catch((function(e){t.$toast(e.msg||e.message)}))},getSaleDetail:function(t){this.form3.startDate=this.sevenYearDate,this.form3.endDate=this.sevenYearDate2,this.form3.demandName="",this.form3.orderNo="",this.flag3=!0,this.getSaleData(),this.$refs.listThree.update(!0)},getSaleData:function(){var t=this;this.form3Obj.saleAmount=0,this.form3Obj.deliveryAmount=0,this.form3Obj.invoiceAmount=0,this.form3Obj.collectAmount=0,this.form3Obj.oweTicketAmount=0,this.form3Obj.oweMoneyAmount=0,this.$http.post("/haolifa/report-extend/report-sale-demand-summary",this.form3).then((function(e){t.form3Obj.saleAmount=e.saleAmount,t.form3Obj.deliveryAmount=e.deliveryAmount,t.form3Obj.invoiceAmount=e.invoiceAmount,t.form3Obj.collectAmount=e.collectAmount,t.form3Obj.oweTicketAmount=e.oweTicketAmount,t.form3Obj.oweMoneyAmount=e.oweMoneyAmount})).catch((function(e){t.$toast(e.msg||e.message)}))},getFourDetail:function(){this.form4.demandName="",this.form4.orderNo="",this.form4.startDate=this.yearDate+"-01",this.form4.endDate=this.yearDate+"-12",this.flag4=!0,this.getFourTj(),this.$refs.listFour.update(!0)},getFourTj:function(){var t=this;this.form4Amount=0,this.$http.post("/haolifa/report-extend/report-sale-output-summary",this.form4).then((function(e){t.form4Amount=e})).catch((function(e){t.$toast(e.msg||e.message)}))},oneYearChange:function(){this.getTotal()},addRezo:function(t){return t>9?t:"0"+t},getTotal:function(){var t=this;this.$http.get("/haolifa/report/sale/getSaleAll?year=".concat(this.oneYearDate)).then((function(e){t.totalNum=e.outPutTotalNum,t.totalPrice=e.outPutTotalAmount,t.contractTotalNum=e.saleTotalNum,t.contractTotalPrice=e.saleTotalAmount}))},getSaleFive:function(){var t=this;this.saleFiveNum=0,this.$http.get("/haolifa/report/sale/selectContractByDemandName?year=".concat(this.fiveYearDate)).then((function(e){var a=[],s=[],i=[],r=e[0].value[0].year,n=e[0].value[1].year;e.map((function(e){a.push(e.companyName),s.push(e.value[0].amount),i.push(e.value[1].amount),t.saleFiveNum=t.saleFiveNum+ +e.value[0].amount}));var l=t.$echarts.init(document.getElementById("saleFive")),o={color:["#3398DB","#91CC75"],title:{text:"年度订货总额分类统计图",x:"left"},grid:{left:"3%",right:"4%",bottom:"2%",containLabel:!0},legend:{},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:a,axisLabel:{interval:0,rotate:30}},yAxis:{type:"value"},series:[{name:r,barWidth:"30%",data:s,type:"bar"},{name:n,barWidth:"30%",data:i,type:"bar"}]};l.setOption(o)})).catch((function(e){t.$toast(e.msg||e.message)}))},getSale2Five:function(){var t=this;this.saleFive2Num=0,this.$http.post("/haolifa/report/sale/selectContractByDemandNameByMonth",{endDate:this.fiveYear2Date2,month:"",startDate:this.fiveYear2Date,year:""}).then((function(e){var a=[],s=[];e.map((function(e){a.push(e.demandName),s.push({name:e.demandName,value:e.totalPrice}),t.saleFive2Num=t.saleFive2Num+ +e.totalPrice}));var i=t.$echarts.init(document.getElementById("sale2Five")),r={title:{text:"月份客户订货额统计图",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:a},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],label:{show:!1,position:"center"},data:s,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getSaleSix:function(){var t=this;this.salSixNum=0,this.$http.get("/haolifa/report/sale/selectshouhuiContractByDemandName?year=".concat(this.sixYearDate)).then((function(e){if(e&&0!=e.length){var a=[],s=[],i=[],r=e[0].value[0].year,n=e[0].value[1].year;e.map((function(e,r){a.push(e.companyName),s.push(e.value[0].amount),i.push(e.value[1].amount),t.salSixNum=t.salSixNum+ +e.value[0].amount}));var l=t.$echarts.init(document.getElementById("saleSix")),o={color:["#3398DB","#91CC75"],title:{text:"年度回款总额分类统计图",x:"left"},grid:{left:"3%",right:"4%",bottom:"2%",containLabel:!0},legend:{},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:a,axisLabel:{interval:0,rotate:30}},yAxis:{type:"value"},series:[{name:r,barWidth:"30%",data:s,type:"bar"},{name:n,barWidth:"30%",data:i,type:"bar"}]};l.setOption(o)}})).catch((function(e){t.$toast(e.msg||e.message)}))},getSale2Six:function(){var t=this;this.salSix2Num=0,this.$http.post("/haolifa/report/sale/selectshouhuiContractByDemandNameByMonth",{startDate:this.sixYear2Date,endDate:this.sixYear2Date2}).then((function(e){var a=[],s=[];e.map((function(e){a.push(e.demandName),s.push({name:e.demandName,value:e.totalPrice}),t.salSix2Num=t.salSix2Num+ +e.totalPrice}));var i=t.$echarts.init(document.getElementById("sale2Six")),r={title:{text:"月份回款额统计图",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:a},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:s,label:{show:!1,position:"center"},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getContractTotal:function(){var t=this;this.$http.get("/haolifa/report/sale/getSaleAllContract?year=".concat(this.oneYearDate)).then((function(e){t.contractTotalNum=e[0].totalNum,t.contractTotalPrice=e[0].totalPrice}))},getYearTotal:function(){this.getSaleOne(this.yearDate)},getCYearTotal:function(){this.getCSaleOne(this.cYearDate)},getSaleOne:function(t){var e=this;this.$http.get("/haolifa/report/sale/getSaleAllByMonth?year="+t).then((function(a){var s=[],i=[];Object.keys(a).forEach((function(t){s.push(t+"月"),i.push(a[t])}));var r=e.$echarts.init(document.getElementById("saleOne")),n={color:["#3398DB"],title:{text:t+"年每月产值总额统计",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}元"},xAxis:{type:"category",data:s},yAxis:{type:"value"},series:[{name:"产值额",barWidth:"30%",data:i,type:"bar"}]};r.setOption(n)}))},getCSaleOne:function(t){var e=this;this.$http.get("/haolifa/report/sale/getSaleAllByMonthContract?year="+t).then((function(a){var s=[],i=[];Object.keys(a).forEach((function(t){s.push(t+"月"),i.push(a[t][0].totalPrice)}));var r=e.$echarts.init(document.getElementById("saleThree")),n={color:["#3398DB"],title:{text:t+"年每月合同总额统计",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}元"},xAxis:{type:"category",data:s},yAxis:{type:"value"},series:[{name:"合同额",barWidth:"30%",data:i,type:"bar"}]};r.setOption(n)}))},getSaleTwo:function(t){var e=this;this.$http.get("/haolifa/report/sale/getSaleByModel?year=".concat(t)).then((function(t){var a=[],s=[];t.map((function(t){a.push(t.productModel),s.push(t.totalPrice)}));var i=e.$echarts.init(document.getElementById("saleTwo")),r={color:["#3398DB"],title:{text:"产品型号产值总额统计",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}元"},xAxis:{type:"category",data:a},yAxis:{type:"value"},series:[{name:"生产金额",barWidth:"30%",data:s,type:"bar"}]};i.setOption(r)}))},getSaleFour:function(){var t=this;this.$http.get("/haolifa/report/sale/getSaleByModelContract").then((function(e){var a=[],s=[];e.map((function(t){a.push(t.productModel),s.push(t.totalPrice)}));var i=t.$echarts.init(document.getElementById("saleFour")),r={color:["#3398DB"],title:{text:"产品型号合同金额统计",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}元"},xAxis:{type:"category",data:a},yAxis:{type:"value"},series:[{name:"合同金额",barWidth:"30%",data:s,type:"bar"}]};i.setOption(r)}))},getBuyOne:function(){var t=this;this.$http.post("/haolifa/report/sale/selectAllAmountByDemandName",{startDate:this.sevenYearDate,endDate:this.sevenYearDate2,month:"",year:""}).then((function(e){var a=[],s=[],i=[],r=[],n=[];e.map((function(t){a.push(t.demandName),s.push(t.saleAmount),i.push(t.invoiceAmount),r.push(t.deliveryAmount),n.push(t.refundAmount)}));var l=t.$echarts.init(document.getElementById("saleSeven")),o={title:{text:"销售报表-按需方统计",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["订货总金额","开票总金额","发货总金额","回款总金额"]},grid:{left:"3%",right:"4%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",data:a,axisLabel:{interval:0,rotate:30}}],yAxis:[{type:"value"}],series:[{name:"订货总金额",type:"bar",barWidth:"10%",data:s},{name:"开票总金额",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"发货总金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:r},{name:"回款总金额",type:"bar",color:"#67c23a",barWidth:"10%",data:n}]};l.setOption(o)}))},exportExcel:function(){this.exportLayer=!0,this.exportForm={entryStatus:0,startDate:"",orderNo:"",endDate:""}},download:function(){if(this.exportForm.startDate)if(this.exportForm.endDate){var t=document.createElement("a");t.setAttribute("download",""),t.setAttribute("href","/haolifa/export/product-entry?startDate=".concat(this.exportForm.startDate,"&endDate=").concat(this.exportForm.endDate,"&entryStatus=").concat(this.exportForm.entryStatus,"&orderNo=").concat(this.exportForm.orderNo)),t.click(),this.exportLayer=!1}else this.$toast("请选择结束时间");else this.$toast("请选择开始时间")}}},l=n,o=(a("684c"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},aa28:function(t,e,a){"use strict";a("90e6")},ae10:function(t,e,a){},b3ad:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"abs scroll-y"},[e("div",{staticClass:"metalwork-info",staticStyle:{width:"100%",margin:"0 auto"}},[e("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[e("icon-btn",{staticClass:"mr-15",on:{click:function(e){return t.$router.back()}}},[t._v("arrow_back")]),e("div",{staticClass:"flex-item"},[t._v("审批进度")])],1),e("div",{staticStyle:{"min-width":"1200px"}},t._l(t.list,(function(a,s){return e("div",{key:s,staticClass:"approve"},[e("p",[t._v(t._s(a.roleName))]),e("p",{class:4==a.auditResult?"button ccc":"button"},[t._v(t._s(a.stepName))]),s<t.list.length-1?e("span",[t._v("-----\x3e")]):t._e(),e("p",[t._v(t._s(t.status[a.auditResult]))]),a.child.length>0?e("div",{staticClass:"approve",staticStyle:{position:"absolute",top:"123px"}},[e("div",{staticClass:"height-line"}),e("div",{staticClass:"bottom-arrows"}),e("p",[t._v(t._s(a.child[0].roleName))]),e("p",{class:4==a.child[0].auditResult?"button ccc":"button"},[t._v(t._s(a.child[0].stepName))]),e("p",[t._v(t._s(t.status[a.child[0].auditResult]))]),e("div",{staticClass:"right-height-line"}),e("div",{staticClass:"top-arrows"})]):t._e()])})),0)])])},i=[],r={name:"purchsemanage-entrustapproveProgress",data:function(){return{list:[],status:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},created:function(){this.getInfo(this.$route.query.formNo,this.$route.query.formId)},activated:function(){this.getInfo(this.$route.query.formNo,this.$route.query.formId)},methods:{getInfo:function(t,e){var a=this;this.$http.get("/haolifa/flowInstance/flow/progress?formNo=".concat(t,"&formId=").concat(e)).then((function(t){console.log(t),a.list=t})).catch((function(t){a.$toast(t.msg||t.message)}))}}},n=r,l=(a("01a9"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},b9c1:function(t,e,a){"use strict";a("e73d")},bc0a:function(t,e,a){},bc4a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-supplier-manage flex-col"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供应商名称"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}})]),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{method:"post",pageSize:15,param:t.filter,url:"/haolifa/supplier/list"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",[t._v(t._s(i))]),e("td",[e("router-link",{staticClass:"c-4",attrs:{to:"/supplier/"+s.id}},[t._v(t._s(s.suppilerName))])],1),e("td",[t._v(t._s(s.suppilerNo))]),e("td",[t._v(t._s(s.website))]),e("td",[t._v(t._s(t.natureList[s.nature]))]),e("td",[t._v(t._s(s.legalPerson))]),e("td",[t._v(t._s(s.phone))]),e("td",[t._v(t._s(t.isQualifiedStatusList[s.isQualified].text))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.infoDetail(s)}}},[t._v("详情")]),1==s.isQualified||2==s.isQualified?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.auditAccessoryInfo(s.suppilerNo)}}},[t._v("| 审批附件")]):t._e(),3==s.isQualified?e("a",{staticClass:"red",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approving(s.suppilerNo)}}},[t._v("| 审批进度")]):t._e()])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("企业名称")]),e("th",[t._v("编号")]),e("th",[t._v("网址")]),e("th",[t._v("企业性质")]),e("th",[t._v("法人")]),e("th",[t._v("电话")]),e("th",[t._v("是否合格")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1)])},i=[],r=a("9b68"),n={name:"page-supplier-manage",components:{DataList:r["a"]},data:function(){return{filter:{supplierName:"",supplierNo:""},natureList:["国有","三资","集体","联营","私营"],isQualifiedStatusList:[{value:0,text:"待评定"},{value:1,text:"合格"},{value:2,text:"不合格"},{value:3,text:"评定中"}]}},methods:{flush:function(){this.filter={supplierName:"",supplierNo:""},this.$refs.list.update(!0)},auditAccessoryInfo:function(t){console.log("accessory-info",t),this.$router.push("/supplier/accessory-info?formNo=".concat(t))},approving:function(t){this.$router.push("/supplier/approveProgress?formNo=".concat(t,"&formId=0"))},approveSupplier:function(t){var e=this;this.$http.post("/haolifa/supplier/approve/".concat(t)).then((function(t){e.$refs.list.update(!0),e.$toast("成功发起")})).catch((function(t){e.$toast(t.msg||t.message)}))},infoDetail:function(t){this.$router.push("/supplier/".concat(t.id))},edit:function(t){this.$router.push("/supplier/edit?id=".concat(t.id))},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下供应商吗？<br><b>".concat(t.suppilerName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/supplier/delete?id=".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})}}},l=n,o=(a("2584"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},bd16:function(t,e,a){},bd86:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var s=a("85f2"),i=a.n(s);function r(t,e,a){return e in t?i()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},be51:function(t,e,a){"use strict";a("bd16")},c6d4:function(t,e,a){},c979:function(t,e,a){"use strict";a.r(e);a("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-invoice-list"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.name,expression:"filter.name"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"费用明细"},domProps:{value:t.filter.name},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"name",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.code,expression:"filter.code"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"编码"},domProps:{value:t.filter.code},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"code",e.target.value)}}}),t._v("\n            费用类别：\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.type,expression:"filter.type"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"type",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.subjectsList,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(t._s(a.text))])}))],2)]),e("div",{staticClass:"flex-item"}),e("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")])],1),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/subjects/getSubjectsList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(s.name))]),e("td",[t._v(t._s(s.typeCN))]),e("td",[t._v(t._s(s.code))]),e("td",[t._v(t._s(s.remark))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(s)}}},[t._v("编辑")]),e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(s)}}},[t._v("| 删除")])])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("费用明细")]),e("th",[t._v("费用类别")]),e("th",[t._v("编码")]),e("th",[t._v("科目描述")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?e("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"费用明细"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"编码"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),e("div",{staticClass:"flex"},[e("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.subjectsList,label:"费用类别"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}}),e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"科目描述"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)]),e("div",{staticClass:"layer-btns"},[e("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),e("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{code:"",id:"",level:"",name:"",parentId:"",percent:"",remark:"",type:""},subjectsList:[],form:{code:"",level:0,name:"",parentId:"",percent:"",remark:"",type:""},loading:!1,layer:!1}},mounted:function(){this.getDic()},methods:{flush:function(){this.filter={code:"",id:"",level:"",name:"",parentId:"",percent:"",remark:"",type:""},this.$refs.list.update(!0)},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除吗？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/finance/subjects/delete/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},getDic:function(){var t=this;this.$http.get("/haolifa/sys-dict/getDictListByType/SUBJECTS_TYPE").then((function(e){t.subjectsList=[],e.map((function(e){t.subjectsList.push({text:e.desc,value:e.code})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},add:function(){this.layer=!0},edit:function(t){this.form={code:t.code,level:t.level,id:t.id,name:t.name,parentId:t.parentId,percent:t.percent,remark:t.remark,type:t.type},this.layer=!0},save:function(){var t=this;this.loading=!0;var e=this.form.id?"/haolifa/finance/subjects/updateSubjects":"/haolifa/finance/subjects/save";this.$http.post(e,this.form).then((function(e){t.close(),t.$toast("保存成功"),t.loading=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},close:function(){this.form={code:"",level:0,name:"",parentId:"",percent:"",remark:"",type:""},this.layer=!1}}},l=n,o=(a("0ef7"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},cac0:function(t,e,a){},cc40:function(t,e,a){"use strict";a("cac0")},cc47:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-notification"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[t._v("质量报表统计图")]),e("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[e("el-date-picker",{attrs:{clearable:!1,type:"year","value-format":"yyyy",placeholder:"选择年月"},on:{change:t.getBuyOne},model:{value:t.oneYearDate,callback:function(e){t.oneYearDate=e},expression:"oneYearDate"}})],1),t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"500px",width:"90%",margin:"20px auto"}},[e("div",{staticStyle:{width:"100%",height:"600px",margin:"0 auto"},attrs:{id:"buyOnee"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"90%",display:"flex",margin:"30px auto"}},[e("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartOne"}}),e("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartTwo"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"310px",width:"90%",display:"flex",margin:"30px auto"}},[e("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartThree"}}),e("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartNine"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"310px",width:"90%",display:"flex",margin:"30px auto"}},[e("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartEight"}}),e("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartFour"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"310px",width:"90%",display:"flex",margin:"30px auto"}},[e("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartSeven"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"700px",width:"90%",margin:"100px auto"}},[e("div",{staticStyle:{width:"80%",height:"700px",margin:"0 auto"},attrs:{id:"chartFive"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"700px",width:"90%",margin:"100px auto"}},[e("div",{staticStyle:{width:"80%",height:"700px",margin:"0 auto"},attrs:{id:"chartSix"}})])}],r=(a("7f7f"),{name:"report-form",data:function(){return{yearDate:(new Date).getFullYear()+"",oneYearDate:(new Date).getFullYear()+""}},mounted:function(){this.getChartOne(),this.getChartTwo(),this.getChartThree(),this.getChartFour(),this.getChartSeven(),this.getSupplier(),this.getChartSix(),this.getBuyOne(),this.getChartEight(),this.getChartNine()},methods:{flush:function(){this.yearDate=(new Date).getFullYear()+"",this.oneYearDate=(new Date).getFullYear()+"",this.getChartOne(),this.getChartTwo(),this.getChartThree(),this.getChartFour(),this.getChartSeven(),this.getSupplier(),this.getChartSix(),this.getBuyOne(),this.getChartEight(),this.getChartNine()},getChartOne:function(){var t=this;this.$http.get("/haolifa/report/quality/getAudit").then((function(e){var a=[],s=[];e.map((function(t){a.push(t.materialName),s.push({name:t.materialName,value:t.totalNum})}));var i=t.$echarts.init(document.getElementById("chartOne")),r=t.getOption("更换料质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartTwo:function(){var t=this;this.$http.get("/haolifa/report/quality/getInspect").then((function(e){var a=["合格数","不合格数"],s=[];s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber});var i=t.$echarts.init(document.getElementById("chartTwo")),r=t.getOption("采购质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartThree:function(){var t=this;this.$http.get("/haolifa/report/quality/getPressure").then((function(e){var a=["合格数","不合格数"],s=[];e?(s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber})):(s.push({name:"合格数",value:0}),s.push({name:"不合格数",value:0}));var i=t.$echarts.init(document.getElementById("chartThree")),r=t.getOption("压力质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartFour:function(){var t=this;this.$http.get("/haolifa/report/quality/getSpray").then((function(e){var a=["合格数","不合格数"],s=[];s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber});var i=t.$echarts.init(document.getElementById("chartFour")),r=t.getOption("喷涂质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartEight:function(){var t=this;this.$http.get("/haolifa/report/quality/getInspectByType?type=1").then((function(e){var a=["合格数","不合格数"],s=[];s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber});var i=t.$echarts.init(document.getElementById("chartEight")),r=t.getOption("机加工质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartNine:function(){var t=this;this.$http.get("/haolifa/report/quality/getProduct").then((function(e){var a=["合格数","不合格数"],s=[];s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber});var i=t.$echarts.init(document.getElementById("chartNine")),r=t.getOption("成品检验质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartSeven:function(){var t=this;this.$http.get("/haolifa/report/quality/assemblingReason").then((function(e){var a=[],s=[];e.map((function(t){a.push(t.reason),s.push({name:t.reason,value:t.qty})}));var i=t.$echarts.init(document.getElementById("chartSeven")),r=t.getOption("阀门装配质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getOption:function(t,e,a){return{title:{text:t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:e},series:[{label:{show:!1,position:"center"},name:"",type:"pie",radius:"55%",center:["50%","60%"],data:a,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},getDepart:function(){var t=this,e=this;this.$http.get("/haolifa/report/expense/classifyByDepartmentAll").then((function(a){var s=[],i=[];a.map((function(t){s.push(t.department),i.push({name:t.department,value:t.totalAmount})}));var r=t.$echarts.init(document.getElementById("chartTwo")),n={title:{text:"部门费用分配",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.on("click",(function(t){e.getDepartDetail(t.data.name)})),r.setOption(n),e.getDepartDetail(s[0])})).catch((function(e){t.$toast(e.msg||e.message)}))},getDepartDetail:function(t){var e=this;this.$http.get("/haolifa/report/expense/getAllClassifyWithDepartment?department="+t).then((function(a){var s=[],i=[];a.map((function(t){s.push(t.expensesClassify),i.push({name:t.expensesClassify,value:t.totalAmount})}));var r=e.$echarts.init(document.getElementById("chartTwoDetail")),n={title:{text:"部门明细:"+t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.setOption(n)})).catch((function(t){e.$toast(t.msg||t.message)}))},getType:function(){var t=this,e=this;this.$http.get("/haolifa/report/expense/getAllClassify").then((function(a){var s=[],i=[];a.map((function(t){s.push(t.expensesClassify),i.push({name:t.expensesClassify,value:t.totalAmount})}));var r=t.$echarts.init(document.getElementById("chartThree")),n={title:{text:"费用分配",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.on("click",(function(t){e.getTypeDetail(t.data.name)})),r.setOption(n),t.getTypeDetail(s[0])})).catch((function(e){t.$toast(e.msg||e.message)}))},getTypeDetail:function(t){var e=this;this.$http.get("/haolifa/report/expense/getAllClassifyWithFirstClassify?classify="+t).then((function(a){var s=[],i=[];a.map((function(t){s.push(t.department),i.push({name:t.secondClassify,value:t.totalAmount})}));var r=e.$echarts.init(document.getElementById("chartThreeDetail")),n={title:{text:"费用明细:"+t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.setOption(n)})).catch((function(t){e.$toast(t.msg||t.message)}))},getSupplier:function(){var t=this;this.$http.get("/haolifa/report/quality/getInspectBysupplierName").then((function(e){var a=0,s=[],i=[],r=[],n=[];e.map((function(t){s.push(t.supplierName),i.push(t.qualifiedNumber),n.push(t.unqualifiedNumber),a=a>t.totalNum?a:t.totalNum;var e=(t.qualifiedNumber/t.totalNum*100).toFixed(2);r.push(e)}));var l=t.$echarts.init(document.getElementById("chartFive")),o={color:["#3398DB","#FF6666","#66CCCC"],title:{text:"供应商产品质量统计图",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["合格数","不合格数","合格率"]},grid:{left:"18%",bottom:"30%"},xAxis:[{type:"category",data:s,axisPointer:{type:"shadow"},axisLabel:{rotate:60}}],yAxis:[{type:"value",name:"数量",min:0,max:a+2e3,axisLabel:{formatter:"{value} "}},{type:"value",name:"合格率",min:0,max:120,axisLabel:{formatter:"{value} %"}}],series:[{name:"合格数",type:"bar",data:i},{name:"不合格数",type:"bar",data:n},{name:"合格率",type:"line",yAxisIndex:1,data:r}]};l.setOption(o)}))},getChartSix:function(){var t=this;this.$http.get("/haolifa/report/quality/selectInspectByMaterialName").then((function(e){var a=0,s=[],i=[],r=[],n=[];e.map((function(t){s.push(t.materialGraphName),i.push(t.qualifiedNumber),n.push(t.unqualifiedNumber),a=a>t.totalNum?a:t.totalNum;var e=(t.qualifiedNumber/t.totalNum*100).toFixed(2);r.push(e)}));var l=t.$echarts.init(document.getElementById("chartSix")),o={color:["#3398DB","#FF6666","#66CCCC"],title:{text:"产品类型质量统计图",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["合格数","不合格数","合格率"]},grid:{left:"18%",bottom:"30%"},xAxis:[{type:"category",data:s,axisPointer:{type:"shadow"},axisLabel:{rotate:60}}],yAxis:[{type:"value",name:"数量",min:0,max:a+2e3,axisLabel:{formatter:"{value} "}},{type:"value",name:"合格率",min:0,max:120,axisLabel:{formatter:"{value} %"}}],series:[{name:"合格数",type:"bar",data:i},{name:"不合格数",type:"bar",data:n},{name:"合格率",type:"line",yAxisIndex:1,data:r}]};l.setOption(o)}))},getBuyOne:function(){var t=this;this.$http.get("/haolifa/report/quality/getAllQuality?year=".concat(this.oneYearDate)).then((function(e){var a=[],s=[],i=[],r=[],n=[];e.map((function(t){a.push(t.createTime),t.purchasePass?s.push(t.purchasePass.qualifiedNumber?Math.round(t.purchasePass.qualifiedNumber/t.purchasePass.totalNum*1e4)/100:0):s.push(0),t.inspectPass?i.push(t.inspectPass.qualifiedNumber?Math.round(t.inspectPass.qualifiedNumber/t.inspectPass.totalNum*1e4)/100:0):s.push(0),t.sprayPass?r.push(t.sprayPass.qualifiedNumber?Math.round(t.sprayPass.qualifiedNumber/t.sprayPass.totalNum*1e4)/100:0):s.push(0),t.proInspectPass?n.push(t.proInspectPass.qualifiedNumber?Math.round(t.proInspectPass.qualifiedNumber/t.proInspectPass.totalNum*1e4)/100:0):s.push(0)}));var l=t.$echarts.init(document.getElementById("buyOnee")),o={title:{text:"质量合格率统计总图（百分比）",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["零件采购合格率","零件加工合格率","喷涂加工合格率","阀门装配合格率"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a}],yAxis:[{type:"value",min:30}],series:[{name:"零件采购合格率",type:"bar",barWidth:"10%",data:s},{name:"零件加工合格率",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"喷涂加工合格率",type:"bar",color:"#e6a23c",barWidth:"10%",data:r},{name:"阀门装配合格率",type:"bar",color:"#67c23a",barWidth:"10%",data:n}]};l.setOption(o)}))}}}),n=r,l=a("2877"),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},e17d:function(t,e,a){},e73d:function(t,e,a){},e863:function(t,e,a){"use strict";a("60b2")},e9569:function(t,e,a){"use strict";a("0b0f")},ef03:function(t,e,a){"use strict";a.r(e);a("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"purchaseadd flex-col"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"采购合同号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供方单位"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:"0"}},[t._v("合同状态")]),t._l(t.statusList,(function(a){return e("option",{key:a.id,domProps:{value:a.status}},[t._v(t._s(a.name))])}))],2),e("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{method:"get","page-size":15,param:t.filter,url:"/haolifa/purchase-order/list/0"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",[t._v(t._s(i))]),e("td",[t._v(t._s(s.purchaseOrderNo))]),e("td",[t._v(t._s(s.supplierName))]),e("td",[t._v(t._s(s.deliveryTime))]),e("td",[t._v(t._s(s.totalCount))]),e("td",[e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.numClick(s.purchaseOrderNo)}}},[t._v(t._s(s.qualifiedNumber))])]),e("td",[t._v(t._s(t.statusList[s.status-1].name))]),e("td",[t._v(t._s(s.createUserId))]),e("td",[t._v(t._s(s.createTime))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("查看")]),2==s.status?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approveProgress(s)}}},[t._v("审批进度")]):t._e()])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("采购合同号")]),e("th",[t._v("供方单位")]),e("th",[t._v("采购完成日期")]),e("td",[t._v("采购总数量")]),e("td",[t._v("检验合格数量")]),e("th",[t._v("订单状态")]),e("th",[t._v("创建人")]),e("th",[t._v("创建日期")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?e("layer",{attrs:{title:"订单折损",width:"450px"}},[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损金额"},model:{value:t.wreck.wreckAmount,callback:function(e){t.$set(t.wreck,"wreckAmount",e)},expression:"wreck.wreckAmount"}}),e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损原因"},model:{value:t.wreck.wreckReason,callback:function(e){t.$set(t.wreck,"wreckReason",e)},expression:"wreck.wreckReason"}})],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?e("layer",{attrs:{title:"详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14"},[e("tr",[e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("采购订单")]),e("td",{staticClass:"b",attrs:{colspan:"6"}},[e("a",{staticClass:"a",staticStyle:{color:"#008eff","margin-right":"10px"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),e("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),e("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),e("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),e("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),e("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),e("tr",[e("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(a,s){return e("tr",{key:a.id},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.specification))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.material))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unit))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.number))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitPrice))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalAmount))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.remark))])])})),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("总计")]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),e("td",{attrs:{colspan:"1"}})]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),e("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),e("td",{attrs:{colspan:"3"}},[t._v("批准：")]),e("td",{attrs:{colspan:"3"}},[t._v("审核：")]),e("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e(),t.numLayer?e("layer",{attrs:{title:"详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14"},[e("tr",[e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"20%"}}),e("td",{staticStyle:{width:"20%"}}),e("td",{staticStyle:{width:"15%"}}),e("td",{staticStyle:{width:"15%"}}),e("td",{staticStyle:{width:"15%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("零件名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购总数")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("报检总数")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("合格总数")])]),t._l(t.numList,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(s+1))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.purchaseNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.deliveryNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.qualifiedNumber))])])})),0===t.numList.length?e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v("无数据")])]):t._e()],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.numLayer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"purchsemanage-purchase",components:{DataList:r["a"]},data:function(){return{natureList:["国有","三资","集体","联营","私营"],statusList:[{status:1,name:"待审批"},{status:2,name:"审批中"},{status:3,name:"采购中"},{status:4,name:"审批不通过"},{status:5,name:"采购完成"}],filter:{orderNo:"",supplierName:"",status:0,createUserId:0},wreck:{orderNo:"",wreckAmount:0,wreckReason:""},completeLayer:!1,confirmLayer:!1,loading:!1,info:{},itemList:[],orderUrl:"",layer:!1,numLayer:!1,numList:[]}},created:function(){this.filter.createUserId=0},methods:{flush:function(){this.filter={orderNo:"",status:0,supplierName:"",createUserId:0},this.$refs.list.update(!0)},getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/purchase-order/info/".concat(t)).then((function(t){e.info=t.order,e.itemList=t.items,e.orderUrl=t.order.fileUrl,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10),console.log("info",e.info),console.log("itemList",e.itemList)})).catch((function(t){e.$toast(t.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))},createInspect:function(t){var e=this;this.$http.get("/haolifa/purchase-order/createInspect/".concat(t)).then((function(t){console.log("报检单号",t),e.$confirm({title:"完善报检单",text:"现在去完善报检单？",color:"blue",btns:["稍后再说","现在完善"],yes:function(){e.$router.push("/applyBuy-material/edit?id=".concat(t))}})}))},approveProgress:function(t){this.$router.push({path:"/purchsemanage-purchase/approveProgress?",query:{formNo:t.purchaseOrderNo,formId:0}})},approve:function(t){var e=this;this.$confirm({title:"发起审批",text:"确定发起审批？",color:"blue",btns:["取消","确认"],yes:function(){e.$http.get("/haolifa/purchase-order/approve/".concat(t,"/0")).then((function(t){e.$toast("发起成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},updatePurchase:function(t){this.$router.push("/purchsemanage-purchase/add?formId=".concat(t))},completePurchase:function(t){this.completeLayer=!0,this.wreck.orderNo=t},complete:function(){var t=this;this.$http.post("/haolifa/purchase-order/complete",this.wreck).then((function(e){t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},deletePurchase:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除该订单么？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/purchase-order/delete/".concat(t)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg)}))}})},numClick:function(t){var e=this;this.numLayer=!0,this.numList=[],this.$http.get("/haolifa/material-inspect/purchase-all-qty?purchaseNo=".concat(t)).then((function(t){e.numList=t})).catch((function(t){e.$toast(t.msg)}))}}},l=n,o=(a("58a9"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},f2de:function(t,e,a){"use strict";a.r(e);a("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"purchaseadd flex-col"},[e("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"采购合同号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供方单位"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:"0"}},[t._v("合同状态")]),t._l(t.statusList,(function(a){return e("option",{key:a.id,domProps:{value:a.status}},[t._v(t._s(a.name))])}))],2),e("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),e("div",{staticClass:"flex-item"}),e("router-link",{attrs:{to:"/purchsemanage-purchase/add"}},[e("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"}},[t._v("新增采购")])],1)],1),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{method:"get","page-size":15,param:t.filter,url:"/haolifa/purchase-order/list/0"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,i=a.index;return[e("td",[t._v(t._s(i))]),e("td",[t._v(t._s(s.purchaseOrderNo))]),e("td",[t._v(t._s(s.supplierName))]),e("td",[t._v(t._s(s.deliveryTime))]),e("td",[t._v(t._s(s.totalCount))]),e("td",[e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.numClick(s.purchaseOrderNo)}}},[t._v(t._s(s.qualifiedNumber))])]),e("td",[t._v(t._s(t.statusList[s.status-1].name))]),e("td",[t._v(t._s(s.createUserId))]),e("td",[t._v(t._s(s.createTime))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("查看")]),1==s.status?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approve(s.purchaseOrderNo)}}},[t._v("发起审批")]):t._e(),4==s.status?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approve(s.purchaseOrderNo)}}},[t._v("重新发起审批")]):t._e(),3==s.status?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.createInspect(s.id)}}},[t._v("生成报检单")]):t._e(),1==s.status||4==s.status?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.updatePurchase(s.id)}}},[t._v("编辑")]):t._e(),2==s.status?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approveProgress(s)}}},[t._v("审批进度")]):t._e(),1==s.status||4==s.status?e("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.deletePurchase(s.purchaseOrderNo)}}},[t._v("删除")]):t._e()])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("采购合同号")]),e("th",[t._v("供方单位")]),e("th",[t._v("采购完成日期")]),e("th",[t._v("采购总数量")]),e("th",[t._v("检验合格数量")]),e("th",[t._v("订单状态")]),e("th",[t._v("创建人")]),e("th",[t._v("创建日期")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?e("layer",{attrs:{title:"订单折损",width:"450px"}},[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损金额"},model:{value:t.wreck.wreckAmount,callback:function(e){t.$set(t.wreck,"wreckAmount",e)},expression:"wreck.wreckAmount"}}),e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损原因"},model:{value:t.wreck.wreckReason,callback:function(e){t.$set(t.wreck,"wreckReason",e)},expression:"wreck.wreckReason"}})],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?e("layer",{attrs:{title:"详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14"},[e("tr",[e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("采购订单")]),e("td",{staticClass:"b",attrs:{colspan:"6"}},[e("a",{staticClass:"a",staticStyle:{color:"#008eff","margin-right":"10px"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),e("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),e("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),e("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),e("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),e("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),e("tr",[e("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(a,s){return e("tr",{key:a.id},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.specification))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.material))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unit))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.number))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitPrice))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalAmount))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.remark))])])})),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("总计")]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),e("td",{attrs:{colspan:"1"}})]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),e("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")])])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),e("tr",[e("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),e("td",{attrs:{colspan:"3"}},[t._v("批准：")]),e("td",{attrs:{colspan:"3"}},[t._v("审核：")]),e("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e(),t.numLayer?e("layer",{attrs:{title:"详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14"},[e("tr",[e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"20%"}}),e("td",{staticStyle:{width:"20%"}}),e("td",{staticStyle:{width:"15%"}}),e("td",{staticStyle:{width:"15%"}}),e("td",{staticStyle:{width:"15%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("零件名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购总数")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("报检总数")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("合格总数")])]),t._l(t.numList,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(s+1))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.purchaseNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.deliveryNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.qualifiedNumber))])])})),0===t.numList.length?e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v("无数据")])]):t._e()],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.numLayer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"purchsemanage-purchase",components:{DataList:r["a"]},data:function(){return{natureList:["国有","三资","集体","联营","私营"],statusList:[{status:1,name:"待审批"},{status:2,name:"审批中"},{status:3,name:"采购中"},{status:4,name:"审批不通过"},{status:5,name:"采购完成"}],filter:{orderNo:"",status:0,supplierName:"",createUserId:0},wreck:{orderNo:"",wreckAmount:0,wreckReason:""},completeLayer:!1,confirmLayer:!1,loading:!1,info:{},itemList:[],orderUrl:"",layer:!1,numLayer:!1,numList:[]}},created:function(){this.filter.createUserId=0},methods:{flush:function(){this.filter={orderNo:"",status:0,supplierName:"",createUserId:0},this.$refs.list.update(!0)},getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/purchase-order/info/".concat(t)).then((function(t){e.info=t.order,e.itemList=t.items,e.orderUrl=t.order.fileUrl,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10),console.log("info",e.info),console.log("itemList",e.itemList)})).catch((function(t){e.$toast(t.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))},createInspect:function(t){var e=this;this.$http.get("/haolifa/purchase-order/createInspect/".concat(t)).then((function(t){console.log("报检单号",t),e.$confirm({title:"完善报检单",text:"现在去完善报检单？",color:"blue",btns:["稍后再说","现在完善"],yes:function(){e.$router.push("/applyBuy-material/edit?id=".concat(t))},no:function(){e.$http.get("/haolifa/material-inspect/delete/".concat(t)).then((function(t){}))}})}))},approveProgress:function(t){this.$router.push({path:"/purchsemanage-purchase/approveProgress?",query:{formNo:t.purchaseOrderNo,formId:0}})},approve:function(t){var e=this;this.$confirm({title:"发起审批",text:"确定发起审批？",color:"blue",btns:["取消","确认"],yes:function(){e.$http.get("/haolifa/purchase-order/approve/".concat(t,"/0")).then((function(t){e.$toast("发起成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},updatePurchase:function(t){this.$router.push("/purchsemanage-purchase/add?formId=".concat(t))},completePurchase:function(t){this.completeLayer=!0,this.wreck.orderNo=t},complete:function(){var t=this;this.$http.post("/haolifa/purchase-order/complete",this.wreck).then((function(e){t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},deletePurchase:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除该订单么？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/purchase-order/delete/".concat(t)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg)}))}})},numClick:function(t){var e=this;this.numLayer=!0,this.numList=[],this.$http.get("/haolifa/material-inspect/purchase-all-qty?purchaseNo=".concat(t)).then((function(t){e.numList=t})).catch((function(t){e.$toast(t.msg)}))}}},l=n,o=(a("6ba4"),a("2877")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},f48a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-supplier-info abs scroll-y"},[e("div",{staticClass:"form-content"},[e("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[e("icon-btn",{staticClass:"mr-15",on:{click:function(e){return t.$router.back()}}},[t._v("arrow_back")]),e("div",{staticClass:"flex-item"},[t._v("订单详情")]),e("div",{staticClass:"flex-item ml-20"},[e("a",{staticClass:"a",staticStyle:{color:"#008eff"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])],1),e("table",{staticClass:"f-14"},[t._m(0),t._m(1),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),e("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),e("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),e("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),e("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),e("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),t._m(2),t._m(3),t._l(t.itemList,(function(a,s){return e("tr",{key:a.id},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.specification))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.material))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unit))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.number))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalWeight))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.unitPrice))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalAmount))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.remark))])])})),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("总计")]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),e("td",{attrs:{colspan:"1"}}),e("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),e("td",{attrs:{colspan:"1"}})]),e("tr",[e("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v(t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。")])]),t._m(4),e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v(t._s(t.info.payType))])]),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11)],2)])])},i=[function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}})])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"b",attrs:{colspan:"12"}},[t._v("采购订单")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，"),e("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"12"}},[e("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),e("td",{attrs:{colspan:"3"}},[t._v("批准：")]),e("td",{attrs:{colspan:"3"}},[t._v("审核：")]),e("td",{attrs:{colspan:"3"}},[t._v("经办：")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])}],r={name:"purchsemanage-purchaseinfo",data:function(){return{loading:!1,info:{},itemList:[],orderUrl:""}},created:function(){this.getInfo()},methods:{getInfo:function(){var t=this,e=this.$route.query.formId;console.log(e),this.info.id=e,this.$http.get("/haolifa/purchase-order/info/".concat(e)).then((function(e){t.info=e.order,t.itemList=e.items,t.orderUrl=e.order.fileUrl,t.info.operateTime=e.order.operateTime.substring(0,10),t.info.confirmTime=e.order.confirmTime.substring(0,10),t.info.createTime=e.order.createTime.substring(0,10),t.info.deliveryTime=e.order.deliveryTime.substring(0,10),t.info.updateTime=e.order.updateTime.substring(0,10),console.log("info",t.info),console.log("itemList",t.itemList)})).catch((function(e){t.$toast(e.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))}}},n=r,l=(a("cc40"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},fe63:function(t,e,a){},fe99:function(t,e,a){}}]);
//# sourceMappingURL=suppliermanage.0e8ded39.js.map