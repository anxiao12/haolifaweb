(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["diliverylist"],{"0407":function(t,e,s){"use strict";s("67bf")},"0756":function(t,e,s){},"0757":function(t,e,s){"use strict";s("c21a")},"0a80":function(t,e,s){},"0d23":function(t,e,s){},"0f1a":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-part-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"}),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{param:t.filter,url:"/haolifa/delivery/noticeList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.deliveryNo))]),s("td",[a.deliveryUrl.match(".(pdf|jpe?g|png|bmp)$")?s("a",{staticClass:"fixed-length",attrs:{target:"_blank",href:a.deliveryUrl}},[t._v("预览")]):t._e(),a.deliveryUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():s("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+a.deliveryUrl}},[t._v("预览")])]),s("td",[t._v(t._s(a.contractOrderNo))]),s("td",[t._v(t._s(t.auditResultList[a.auditResult]))]),s("td",[t._v(t._s(a.auditInfo))]),s("td",[t._v(t._s(a.auditTime))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(a.updateTime))]),s("td",{staticClass:"t-right"},[0==a.auditResult?s("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(a)}}},[t._v("审核")]):t._e()])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("发货通知单号")]),s("th",{staticStyle:{width:"50px"}},[t._v("发货通知单")]),s("th",[t._v("订单号")]),s("th",[t._v("审批结果")]),s("th",[t._v("审批信息")]),s("th",[t._v("审批时间")]),s("th",[t._v("创建时间")]),s("th",[t._v("更新时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1)])},i=[],r=s("9b68"),o={name:"page-bills-list",components:{DataList:r["a"]},data:function(){return{filter:{},auditResultList:["待审核","审核通过","审核不通过"]}},methods:{flush:function(){this.$refs.list.update(!0)},edit:function(t){this.$router.push("/finance-bills/edit?id=".concat(t.id))},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下发货通知单吗？<br>".concat(t.deliveryNo),color:"red",btns:["取消","删除"],yes:function(){e.$http.delete("/haolifa/material/delete/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg)}))}})}}},l=o,n=(s("6bc2"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},"0f71":function(t,e,s){"use strict";s("6b9e")},"10f8":function(t,e,s){"use strict";s("4e30")},"14bd":function(t,e,s){"use strict";s("c5c1")},"153b":function(t,e,s){"use strict";e["a"]=function(t){return new Promise((function(e,s){var a=new FileReader;a.readAsDataURL(t),a.onload=function(){e(a.result)},a.onerror=function(t){s(t)}}))}},"16e4":function(t,e,s){"use strict";s("ca15")},"1bde":function(t,e,s){"use strict";s("c6d3")},"1d84":function(t,e,s){},"281b":function(t,e,s){"use strict";s("9f39")},"28b6":function(t,e,s){"use strict";function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.d(e,"a",(function(){return a}))},"29d5":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-invoice-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.workshopName,expression:"filter.workshopName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"车间名称"},domProps:{value:t.filter.workshopName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"workshopName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.workType,expression:"filter.workType"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"工种类别"},domProps:{value:t.filter.workType},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"workType",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.productModel,expression:"filter.productModel"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"适用工单产品型号"},domProps:{value:t.filter.productModel},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"productModel",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.postName,expression:"filter.postName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"岗位（工序）名称"},domProps:{value:t.filter.postName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"postName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.postCapability,expression:"filter.postCapability"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"岗位能力简称"},domProps:{value:t.filter.postCapability},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"postCapability",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.postCode,expression:"filter.postCode"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"岗位（工序）代码"},domProps:{value:t.filter.postCode},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"postCode",e.target.value)}}})]),s("div",{staticClass:"flex-item"}),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")])],1),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/pay-working-procedure/getList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.workshopName))]),s("td",[t._v(t._s(a.workType))]),s("td",[t._v(t._s(a.productModel))]),s("td",[t._v(t._s(a.postName))]),s("td",[t._v(t._s(a.postCapability))]),s("td",[t._v(t._s(a.postCode))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(a.updateTime))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(a)}}},[t._v("编辑 | ")]),s("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(a)}}},[t._v("删除")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("车间名称")]),s("th",[t._v("工种类别")]),s("th",[t._v("适用工单产品型号")]),s("th",[t._v("岗位（工序）名称")]),s("th",[t._v("岗位能力简称")]),s("th",[t._v("岗位（工序）代码")]),s("th",[t._v("创建时间")]),s("th",[t._v("更新时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"flex"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",list:t.deptList,label:"车间名称"},model:{value:t.form.workshopName,callback:function(e){t.$set(t.form,"workshopName",e)},expression:"form.workshopName"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",list:t.workTypeList,label:"工种类别"},model:{value:t.form.workType,callback:function(e){t.$set(t.form,"workType",e)},expression:"form.workType"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"适用工单产品型号"},model:{value:t.form.productModel,callback:function(e){t.$set(t.form,"productModel",e)},expression:"form.productModel"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"岗位（工序）名称"},model:{value:t.form.postName,callback:function(e){t.$set(t.form,"postName",e)},expression:"form.postName"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"岗位能力简称"},model:{value:t.form.postCapability,callback:function(e){t.$set(t.form,"postCapability",e)},expression:"form.postCapability"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"岗位（工序）代码"},model:{value:t.form.postCode,callback:function(e){t.$set(t.form,"postCode",e)},expression:"form.postCode"}})],1)]),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(s("a450"),s("9b68")),o={name:"jiaoxiaogongxu-list",components:{DataList:r["a"]},data:function(){return{filter:{id:"",postCapability:"",postCode:"",postName:"",productModel:"",serial:"",workType:"",workshopName:""},layer:!1,form:{id:"",pageNum:"",pageSize:"",postCapability:"",postCode:"",postName:"",productModel:"",serial:"",workType:"",workshopName:""},deptList:[],loading:!1,workTypeList:[]}},mounted:function(){this.getDeptList(),this.getWorkList()},methods:{flush:function(){this.filter={id:"",postCapability:"",postCode:"",postName:"",productModel:"",serial:"",workType:"",workshopName:""},this.$refs.list.update(!0)},getDeptList:function(){var t=this;this.$http.get("/haolifa/dept/list").then((function(e){e.map((function(e){t.deptList.push({text:e.deptName,value:e.deptName})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},getWorkList:function(){var t=this;this.$http.get("/haolifa/dictionaries/getTypeOfWorkEnum").then((function(e){e.result.map((function(e){t.workTypeList.push({text:e.name,value:e.name})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},edit:function(t){this.layer=!0,this.form.id=t.id,this.form.postCode=t.postCode,this.form.postCapability=t.postCapability,this.form.postName=t.postName,this.form.productModel=t.productModel,this.form.serial=t.serial,this.form.workType=t.workType,this.form.workshopName=t.workshopName},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下工序吗？<br><b>".concat(t.postName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/pay-working-procedure/del/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},add:function(){this.layer=!0},save:function(){var t=this;if(this.form.postName.trim())if(this.form.postCode.trim())if(this.form.postCapability.trim())if(this.form.workshopName.trim())if(this.form.productModel.trim())if(this.form.workType.trim()){this.loading=!0;var e=this.form.id?"/haolifa/pay-working-procedure/edit":"/haolifa/pay-working-procedure/save";this.$http.post(e,this.form).then((function(e){t.close(),t.$toast("保存成功"),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))}else this.$toast("工种类别不能为空");else this.$toast("适用工单产品型号不能为空");else this.$toast("车间名称不能为空");else this.$toast("岗位能力简称不能为空");else this.$toast("岗位（工序）代码不能为空");else this.$toast("岗位（工序）名称不能为空")},close:function(){this.layer=!1,this.form={id:"",pageNum:"",pageSize:"",postCapability:"",postCode:"",postName:"",productModel:"",serial:"",workType:"",workshopName:""}}}},l=o,n=(s("10f8"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},"2a65":function(t,e,s){},"2a90":function(t,e,s){},"2e2f":function(t,e,s){},"38c3":function(t,e,s){"use strict";s("c149")},"3bf1":function(t,e,s){"use strict";s("913d")},"3d1d":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-invoice-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.workshopName,expression:"filter.workshopName"}],staticClass:"flex-item",staticStyle:{width:"180px"},attrs:{type:"text",placeholder:"车间名称"},domProps:{value:t.filter.workshopName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"workshopName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.workType,expression:"filter.workType"}],staticClass:"flex-item",staticStyle:{width:"180px"},attrs:{type:"text",placeholder:"工种类别"},domProps:{value:t.filter.workType},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"workType",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.procedureName,expression:"filter.procedureName"}],staticClass:"flex-item",staticStyle:{width:"180px"},attrs:{type:"text",placeholder:"工序名称"},domProps:{value:t.filter.procedureName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"procedureName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.appSpecifications,expression:"filter.appSpecifications"}],staticClass:"flex-item",staticStyle:{width:"180px"},attrs:{type:"text",placeholder:"适用规格"},domProps:{value:t.filter.appSpecifications},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"appSpecifications",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.appModel,expression:"filter.appModel"}],staticClass:"flex-item",staticStyle:{width:"180px"},attrs:{type:"text",placeholder:"适用型号"},domProps:{value:t.filter.appModel},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"appModel",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.idCategory,expression:"filter.idCategory"}],staticClass:"flex-item",staticStyle:{width:"180px"},attrs:{type:"text",placeholder:"图号类别"},domProps:{value:t.filter.idCategory},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"idCategory",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.hourQuotaPrice,expression:"filter.hourQuotaPrice"}],staticClass:"flex-item",staticStyle:{width:"180px"},attrs:{type:"text",placeholder:"工时定额（元）"},domProps:{value:t.filter.hourQuotaPrice},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"hourQuotaPrice",e.target.value)}}})]),s("div",{staticClass:"flex-item"}),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")])],1),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/pay-hour_quota/getList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.workshopName))]),s("td",[t._v(t._s(a.workType))]),s("td",[t._v(t._s(a.productName))]),s("td",[t._v(t._s(a.procedureName))]),s("td",[t._v(t._s(a.postCode))]),s("td",[t._v(t._s(a.appSpecifications))]),s("td",[t._v(t._s(a.appModel))]),s("td",[t._v(t._s(a.idCategory))]),s("td",[t._v(t._s(a.hourQuotaPrice))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(a.updateTime))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(a)}}},[t._v("编辑 | ")]),s("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(a)}}},[t._v("删除")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("车间名称")]),s("th",[t._v("工种类别")]),s("th",[t._v("过程产品名称")]),s("th",[t._v("工序名称")]),s("th",[t._v("岗位代码")]),s("th",[t._v("适用规格")]),s("th",[t._v("适用型号")]),s("th",[t._v("图号类别")]),s("th",[t._v("工时定额（元）")]),s("th",[t._v("创建时间")]),s("th",[t._v("更新时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"flex"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",list:t.deptList,label:"车间名称"},on:{change:t.getProcedureList},model:{value:t.form.workshopName,callback:function(e){t.$set(t.form,"workshopName",e)},expression:"form.workshopName"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",list:t.procedureNameList,label:"工序名称"},on:{change:t.procedureNameChange},model:{value:t.form.procedureName,callback:function(e){t.$set(t.form,"procedureName",e)},expression:"form.procedureName"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"岗位代码",disabled:!0},model:{value:t.form.postCode,callback:function(e){t.$set(t.form,"postCode",e)},expression:"form.postCode"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"工种类别"},model:{value:t.form.workType,callback:function(e){t.$set(t.form,"workType",e)},expression:"form.workType"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"过程产品名称"},model:{value:t.form.productName,callback:function(e){t.$set(t.form,"productName",e)},expression:"form.productName"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"适用规格"},model:{value:t.form.appSpecifications,callback:function(e){t.$set(t.form,"appSpecifications",e)},expression:"form.appSpecifications"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"适用型号"},model:{value:t.form.appModel,callback:function(e){t.$set(t.form,"appModel",e)},expression:"form.appModel"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"图号类别"},model:{value:t.form.idCategory,callback:function(e){t.$set(t.form,"idCategory",e)},expression:"form.idCategory"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"工时定额（元）"},model:{value:t.form.hourQuotaPrice,callback:function(e){t.$set(t.form,"hourQuotaPrice",e)},expression:"form.hourQuotaPrice"}})],1),s("div",{staticClass:"flex"})]),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=s("9b68"),o={name:"jiaoxiaogongxu-list",components:{DataList:r["a"]},data:function(){return{filter:{appModel:"",appSpecifications:"",hourQuotaPrice:"",id:"",idCategory:"",postCode:"",procedureName:"",productName:"",serial:"",workType:"",workshopName:""},layer:!1,form:{appModel:"",appSpecifications:"",hourQuotaPrice:"",id:"",idCategory:"",pageNum:"",pageSize:"",postCode:"",procedureName:"",productName:"",serial:"",workType:"",workshopName:""},deptList:[],procedureNameList:[],loading:!1}},mounted:function(){this.getDeptList()},methods:{flush:function(){this.filter={appModel:"",appSpecifications:"",hourQuotaPrice:"",id:"",idCategory:"",postCode:"",procedureName:"",productName:"",serial:"",workType:"",workshopName:""},this.$refs.list.update(!0)},getDeptList:function(){var t=this;this.$http.get("/haolifa/dept/list").then((function(e){e.map((function(e){t.deptList.push({text:e.deptName,value:e.deptName})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},getProcedureList:function(){var t=this;this.procedureNameList=[],this.form.procedureName=this.form.postCode="",this.$http.post("/haolifa/pay-working-procedure/getAllList",{id:"",pageNum:"",pageSize:"",postCapability:"",postCode:"",postName:"",productModel:"",serial:"",workType:"",workshopName:this.form.workshopName}).then((function(e){e.map((function(e){t.procedureNameList.push({text:e.postName,value:e.postName,postCode:e.postCode})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},procedureNameChange:function(){var t=this;this.procedureNameList.map((function(e){t.form.procedureName==e.value&&(t.form.postCode=e.postCode)}))},edit:function(t){this.layer=!0,this.form.id=t.id,this.form.appModel=t.appModel,this.form.appSpecifications=t.appSpecifications,this.form.hourQuotaPrice=t.hourQuotaPrice,this.form.idCategory=t.idCategory,this.form.postCode=t.postCode,this.form.procedureName=t.procedureName,this.form.productName=t.productName,this.form.serial=t.serial,this.form.workType=t.workType,this.form.workshopName=t.workshopName},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下工序名称吗？<br><b>".concat(t.procedureName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/pay-hour_quota/del/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},add:function(){this.layer=!0},save:function(){var t=this;if(this.form.workshopName.trim()&&this.form.procedureName.trim()){this.loading=!0;var e=this.form.id?"/haolifa/pay-hour_quota/edit":"/haolifa/pay-hour_quota/save";this.$http.post(e,this.form).then((function(e){t.close(),t.$toast("保存成功"),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.$toast(e.msg||e.message)}))}else this.$toast("请输入必填项")},close:function(){this.layer=!1,this.form={appModel:"",appSpecifications:"",hourQuotaPrice:"",id:"",idCategory:"",pageNum:"",pageSize:"",postCode:"",procedureName:"",productName:"",serial:"",workType:"",workshopName:""}}}},l=o,n=(s("579a"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},"3f7a":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-invoice-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.postName,expression:"filter.postName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"岗位名称"},domProps:{value:t.filter.postName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"postName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.dept,expression:"filter.dept"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"部门名称"},domProps:{value:t.filter.dept},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"dept",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.project,expression:"filter.project"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"项目名称"},domProps:{value:t.filter.project},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"project",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.workType,expression:"filter.workType"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"产品类别"},domProps:{value:t.filter.workType},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"workType",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.idCategory,expression:"filter.idCategory"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"产品ID代码"},domProps:{value:t.filter.idCategory},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"idCategory",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.appModel,expression:"filter.appModel"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"适用型号"},domProps:{value:t.filter.appModel},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"appModel",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.appSpecifications,expression:"filter.appSpecifications"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"适用规格"},domProps:{value:t.filter.appSpecifications},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"appSpecifications",e.target.value)}}})])]),s("div",{staticClass:"flex-item"},[s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")]),s("a",{staticStyle:{color:"#008eff"},attrs:{href:"/haolifa/pay-manager_cal/export",target:"_blank"}},[t._v("导出")]),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.upload}},[t._v("导入")])],1),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/pay-manager_cal/getList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.postName))]),s("td",[t._v(t._s(a.dept))]),s("td",[t._v(t._s(a.workType))]),s("td",[t._v(t._s(a.project))]),s("td",[t._v(t._s(a.idCategory))]),s("td",[t._v(t._s(a.price))]),s("td",[t._v(t._s(a.appModel))]),s("td",[t._v(t._s(a.appSpecifications))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(a.updateTime))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(a)}}},[t._v("编辑 | ")]),s("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(a)}}},[t._v("删除")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("岗位名称")]),s("th",[t._v("部门名称")]),s("th",[t._v("产品类别")]),s("th",[t._v("项目名称")]),s("th",[t._v("产品ID代码")]),s("th",[t._v("计提标准")]),s("th",[t._v("适用型号")]),s("th",[t._v("适用规格")]),s("th",[t._v("创建时间")]),s("th",[t._v("更新时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"flex"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.postList,label:"岗位名称"},model:{value:t.form.postName,callback:function(e){t.$set(t.form,"postName",e)},expression:"form.postName"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.deptList,label:"部门名称"},model:{value:t.form.dept,callback:function(e){t.$set(t.form,"dept",e)},expression:"form.dept"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"项目名称"},model:{value:t.form.project,callback:function(e){t.$set(t.form,"project",e)},expression:"form.project"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"产品类别"},model:{value:t.form.workType,callback:function(e){t.$set(t.form,"workType",e)},expression:"form.workType"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"计提标准"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"适用型号"},model:{value:t.form.appModel,callback:function(e){t.$set(t.form,"appModel",e)},expression:"form.appModel"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"适用规格"},model:{value:t.form.appSpecifications,callback:function(e){t.$set(t.form,"appSpecifications",e)},expression:"form.appSpecifications"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"产品ID代码"},model:{value:t.form.idCategory,callback:function(e){t.$set(t.form,"idCategory",e)},expression:"form.idCategory"}})],1)]),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e(),t.uploadFlag?s("layer",{attrs:{title:"导入",width:"50%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"on-success":t.uploadSuccess,limit:1,action:"/haolifa/pay-manager_cal/import","on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!1}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"warning"},slot:"trigger"},[t._v("选取文件")])],1)],1),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.submitUpload}},[t._v("上传")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:function(e){t.uploadFlag=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(s("a450"),s("9b68")),o={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{appModel:"",appSpecifications:"",dept:"",id:"",idCategory:"",postName:"",price:"",project:"",userName:"",workType:""},fileList:[],uploadFlag:!1,layer:!1,form:{appModel:"",appSpecifications:"",dept:"",id:"",idCategory:"",postName:"",price:"",project:"",workType:""},banList:[],postList:[],deptList:[],userArr:[],userList:[],loading:!1}},mounted:function(){this.getBanList(),this.getDeptList(),this.getUsers(),this.getAllUsers(),this.getPostList()},methods:{flush:function(){this.filter={appModel:"",appSpecifications:"",dept:"",id:"",idCategory:"",postName:"",price:"",project:"",userName:"",workType:""},this.$refs.list.update(!0),this.getBanList(),this.getDeptList()},edit:function(t){for(var e in this.form)this.form[e]=t[e];this.layer=!0},handleRemove:function(t,e){console.log(t,e)},upload:function(){this.fileList=[],this.uploadFlag=!0},submitUpload:function(){this.$refs.upload.submit()},uploadSuccess:function(t,e,s){"0000"===t.code?(this.$toast("上传成功"),this.uploadFlag=!1,this.$refs.list.update(!0),this.fileList=[]):this.$toast(t.message)},handlePreview:function(t){console.log(t)},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下人员吗？<br><b>".concat(t.userName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/pay-manager_cal/del/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},add:function(){this.layer=!0},save:function(){var t=this;this.loading=!0;var e=this.form.id?"/haolifa/pay-manager_cal/edit":"/haolifa/pay-manager_cal/save";this.$http.post(e,this.form).then((function(e){t.$toast("保存成功"),t.close(),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))},close:function(){this.layer=!1,this.form={appModel:"",appSpecifications:"",dept:"",id:"",idCategory:"",postName:"",price:"",project:"",workType:""}},getBanList:function(){var t=this;this.$http.post("/haolifa/pay-team/getAllList").then((function(e){e.map((function(e){t.banList.push({text:e.teamName,value:e.id})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},getDeptList:function(){var t=this;this.deptList=[],this.$http.get("/haolifa/dept/list").then((function(e){e.map((function(e){t.deptList.push({text:e.deptName,value:e.deptName})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},getPostList:function(){var t=this;this.postList=[],this.$http.post("/haolifa/pay-production-work-shop/getAllList").then((function(e){e.map((function(e){t.postList.push({text:e.postName,value:e.postName})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},getUsers:function(){var t=this;this.$http.get("/haolifa/dictionaries/getUserType").then((function(e){e.result.map((function(e){t.userArr.push({text:e.name,value:e.code})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},getAllUsers:function(){var t=this;this.$http.post("/haolifa/pay-user/getAllList",{departName:"",id:"",pageNum:0,pageSize:"",postId:"",postName:"",sex:"",superiorId:"",teamId:"",teamName:"",userName:"",userType:""}).then((function(e){e.map((function(e){t.userList.push({text:e.userName,value:e.userName})}))})).catch((function(e){t.$toast(e.msg||e.message)}))}}},l=o,n=(s("38c3"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},4164:function(t,e,s){"use strict";s("0a80")},4223:function(t,e,s){},"445f":function(t,e,s){},"4e30":function(t,e,s){},"50b4":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-material-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),t._v("\n            状态：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},t._l(t.statusList,(function(e){return s("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])})),0),s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.sprayNo,expression:"filter.sprayNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"喷涂加工号"},domProps:{value:t.filter.sprayNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"sprayNo",e.target.value)}}}),s("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])])]),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/spray/forms",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.sprayNo))]),s("td",[t._v(t._s(a.planner))]),s("td",[t._v(t._s(a.totalNumber))]),s("td",[t._v(t._s(a.qualifiedNumber))]),s("td",[t._v(t._s(a.orignGraphNo))]),s("td",[t._v(t._s(a.sprayedGraphNo))]),s("td",[t._v(t._s(a.batchNumber))]),s("td",[t._v(t._s(t.busTypeList[a.busType]))]),s("td",[t._v(t._s(t.rowStatusList[a.status].name))]),s("td",[t._v(t._s(t.inspectStatusList[a.inspectStatus]))]),s("td",[t._v(t._s(a.createTime))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.sprayInfo(a)}}},[t._v("查看")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("喷涂加工单号")]),s("th",[t._v("计划人")]),s("th",[t._v("总数量")]),s("th",[t._v("检验合格数量")]),s("th",[t._v("原图号")]),s("th",[t._v("加工后图号")]),s("th",[t._v("批次号")]),s("th",[t._v("类别")]),s("th",[t._v("状态")]),s("th",[t._v("质检状态")]),s("th",[t._v("发起时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:"详情",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"form-content page-supplier-info"},[s("table",{staticClass:"f-14"},[s("tr",[s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}})]),s("tr",[s("td",{staticClass:"b",staticStyle:{border:"none"},attrs:{colspan:"10",align:"center"}},[t._v("喷涂加工单")])]),s("tr",[s("th",{attrs:{colspan:"11"}},[t._v("喷涂单号："+t._s(t.spray.sprayNo))])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("计划人："+t._s(t.spray.planner))]),s("td",{attrs:{colspan:"6"}},[t._v("日 期："+t._s(t.spray.createTime))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("零件名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("零件图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("喷涂颜色")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("特殊要求")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("完成时间")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.spray.items,(function(e,a){return s("tr",{key:a},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(a+1))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.model))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specifications))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.sprayColor))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specialRequires))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.completeTime))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])}))],2)]),t.inspectHistory.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("质检记录")])]),s("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[s("table",{staticClass:"data-table"},[s("tr",{staticStyle:{display:"none"}},[s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"12%"}}),s("td",{staticStyle:{width:"12%"}})]),s("tr",[s("th",[t._v("喷涂单号")]),s("th",[t._v("零件名称")]),s("th",[t._v("零件原图号")]),s("th",[t._v("零件图号")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("处理意见")]),s("th",[t._v("附件")]),s("th",[t._v("不合格现象描述")])]),t._l(t.inspectHistory,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.sprayNo))]),s("td",[t._v(t._s(e.materialGraphName))]),s("td",[t._v(t._s(e.originalGraphNo))]),s("td",[t._v(t._s(e.materialGraphNo))]),s("td",[t._v(t._s(e.testNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",[t._v(t._s(e.handlingSuggestion))]),s("td",t._l(e.accessoryList,(function(e,a){return s("div",{key:a},[s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v(t._s(e.fileName))])])})),0),s("td",[t._v(t._s(e.reasonArr.toString()))])])}))],2)])]):t._e()]),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=s("9b68"),o={name:"spray-list",components:{DataList:r["a"]},data:function(){return{layer:!1,filter:{type:1,status:-1},rowStatusList:[{status:0,name:"待审批"},{status:1,name:"加工中"},{status:2,name:"质检完成"},{status:3,name:"加工完成"},{status:4,name:"暂停加工"}],statusList:[{status:0,name:"待审批"},{status:1,name:"加工中"},{status:2,name:"质检完成"},{status:3,name:"加工完成"},{status:4,name:"暂停加工"},{status:-1,name:"全部"}],busTypeList:["未选择","订单需求","生产库存"],inspectStatusList:{0:"待质检",1:"质检中",2:"质检完成"},inspectHistory:[],spray:{planner:"",sprayNo:"",createTime:"",items:[]}}},methods:{flush:function(){this.filter={type:1,status:-1},this.$refs.list.update(!0)},sprayInfo:function(t){var e=this;this.$http.get("/haolifa/spray/form/".concat(t.sprayNo)).then((function(t){e.spray=t})).catch((function(t){e.$toast(t.msg||t.message)})),this.$http.get("/haolifa/spray/inspect/list/".concat(t.sprayNo)).then((function(t){e.inspectHistory=t,e.inspectHistory.map((function(t){return t.reasonArr=t.reasonList.map((function(t){if(t.number)return"数量:"+t.number+",原因:"+t.reason+";"}))}))})).catch((function(t){e.$toast(t.msg||t.message)})),this.layer=!0}}},l=o,n=(s("281b"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},"579a":function(t,e,s){"use strict";s("7623")},5947:function(t,e,s){},"644b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"flex-v-center tool-bar"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.entrustNo,expression:"filter.entrustNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"机加工单号"},domProps:{value:t.filter.entrustNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"entrustNo",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.batchNumber,expression:"filter.batchNumber"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"批次号"},domProps:{value:t.filter.batchNumber},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"batchNumber",e.target.value)}}}),t._v("\n            状态：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},t._l(t.statusList,(function(e){return s("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])})),0),s("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","margin-right":"10px","pointer-events":"none"}},[t._v("arrow_drop_down")]),t._v("\n            质检状态：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.inspectStatus,expression:"filter.inspectStatus"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"inspectStatus",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},t._l(t.inspectStatusArr,(function(e){return s("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])})),0),s("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])])]),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/entrust/list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.entrustNo))]),s("td",[t._v(t._s(a.purchaseNo))]),s("td",[t._v(t._s(a.batchNumber))]),s("td",[t._v(t._s(a.materialGraphName))]),s("td",[t._v(t._s(a.materialGraphNo))]),s("td",[t._v(t._s(a.processedGraphNo))]),s("td",[t._v(t._s(a.number))]),s("td",[t._v(t._s(a.qualifiedNumber))]),s("td",[t._v(t._s(a.unqualifiedNumber))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(t.rowStatusList[a.status-3].name))]),s("td",[t._v(t._s(t.inspectStatusList[a.inspectStatus]))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.info(a)}}},[t._v("查看")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("机加工单号")]),s("th",[t._v("采购合同号")]),s("th",[t._v("批次号")]),s("th",[t._v("物料名称")]),s("th",[t._v("物料图号")]),s("th",[t._v("加工后图号")]),s("th",[t._v("数量")]),s("th",[t._v("检验合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("发起时间")]),s("th",[t._v("状态")]),s("th",[t._v("质检状态")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.inspectHistory.completeLayer?s("layer",{attrs:{title:"质检记录",width:"650px"}},[s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{disabled:"true",label:"采购合同号"},model:{value:t.inspectHistory.purchaseNo,callback:function(e){t.$set(t.inspectHistory,"purchaseNo",e)},expression:"inspectHistory.purchaseNo"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:"true",label:"批次号"},model:{value:t.inspectHistory.batchNumber,callback:function(e){t.$set(t.inspectHistory,"batchNumber",e)},expression:"inspectHistory.batchNumber"}})],1),s("div",{staticClass:"flex mt-15"},[s("input-box",{staticClass:"mt-15 ml-20",attrs:{disabled:"true",label:"物料图号"},model:{value:t.inspectHistory.materialGraphNo,callback:function(e){t.$set(t.inspectHistory,"materialGraphNo",e)},expression:"inspectHistory.materialGraphNo"}}),s("input-box",{staticClass:"mr-20 mt-15 ml-20",attrs:{disabled:"true",label:"物料名称"},model:{value:t.inspectHistory.materialName,callback:function(e){t.$set(t.inspectHistory,"materialName",e)},expression:"inspectHistory.materialName"}})],1),s("div",{staticClass:"flex mt-15"},[s("input-box",{staticClass:"flex-item mr-20 ml-20 mt-15",attrs:{label:"检测数量"},model:{value:t.inspectHistory.testNumber,callback:function(e){t.$set(t.inspectHistory,"testNumber",e)},expression:"inspectHistory.testNumber"}}),s("input-box",{staticClass:"flex-item mr-20 mt-15",attrs:{label:"不合格数量"},model:{value:t.inspectHistory.unqualifiedNumber,callback:function(e){t.$set(t.inspectHistory,"unqualifiedNumber",e)},expression:"inspectHistory.unqualifiedNumber"}}),s("input-box",{staticClass:"flex-item mr-20 mt-15",attrs:{label:"合格数量"},model:{value:t.inspectHistory.qualifiedNumber,callback:function(e){t.$set(t.inspectHistory,"qualifiedNumber",e)},expression:"inspectHistory.qualifiedNumber"}})],1),s("div",{staticClass:"flex mt-15"},[s("input-box",{staticClass:"flex-item mr-20 ml-20 mt-15",attrs:{label:"处理意见"},model:{value:t.inspectHistory.handlingSuggestion,callback:function(e){t.$set(t.inspectHistory,"handlingSuggestion",e)},expression:"inspectHistory.handlingSuggestion"}}),s("input-box",{staticClass:"flex-item mr-20 mt-15",attrs:{label:"不合格现象描述"},model:{value:t.inspectHistory.remark,callback:function(e){t.$set(t.inspectHistory,"remark",e)},expression:"inspectHistory.remark"}})],1),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:""},on:{click:function(e){t.inspectHistory.completeLayer=!1}}},[t._v("取消")]),s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?s("layer",{attrs:{title:"详情",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"form-content metalwork-info"},[s("table",{staticClass:"f-14"},[s("tr",[s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("机加工单")])]),s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("机加工单号："+t._s(t.entrust.entrustNo))]),s("td",{attrs:{colspan:"3"}},[t._v("发起日期："+t._s(t.entrust.createTime))])]),s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("采购合同号："+t._s(t.entrust.purchaseNo))]),s("td",{attrs:{colspan:"3"}},[t._v("批次号："+t._s(t.entrust.batchNumber))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购合同编号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("批次号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("加工后图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")])]),s("tr",[s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.purchaseNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.batchNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.materialGraphName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.materialGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.processedGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.number))])])])]),s("div",{staticClass:"form-content metalwork-info"},[s("table",{staticClass:"data-table"},[s("tr",[s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"12%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"9"}},[t._v("质检记录")])]),s("tr",[s("th",[t._v("质检单号")]),s("th",[t._v("类别")]),s("th",[t._v("物料名称")]),s("th",[t._v("加工后图号")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("处理意见")]),s("th",[t._v("不合格现象描述")]),s("th",[t._v("附件")])]),t._l(t.inspectHistory,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.inspectNo))]),s("td",[t._v(t._s(1==e.type?"采购零件":"机加工零件"))]),s("td",[t._v(t._s(e.materialGraphName))]),s("td",[t._v(t._s(e.materialGraphNo))]),s("td",[t._v(t._s(e.testNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",[t._v(t._s(e.handlingSuggestion))]),s("td",[t._v(t._s(e.reasonArr.toString()))]),s("td",t._l(e.accessoryList,(function(e,a){return s("div",{key:a},[s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v(t._s(e.fileName))])])})),0)])}))],2)])]),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=s("9b68"),o={name:"metalwork-list",components:{DataList:r["a"]},data:function(){return{inspectHistory:{completeLayer:!1,handlingSuggestion:"",inspectNo:"",materialName:"",materialGraphNo:"",qualifiedNumber:0,remark:"",testNumber:0,unqualifiedNumber:0,batchNumber:"",purchaseNo:"",supplierName:"",supplierNo:""},filter:{type:3,entrustNo:"",status:-1,inspectStatus:-1},inspectStatusList:{0:"待质检",1:"质检中",2:"质检完成"},rowStatusList:[{status:3,name:"加工中"},{status:4,name:"加工完成"},{status:5,name:"审批不通过"}],statusList:[{status:-1,name:"全部"},{status:3,name:"加工中"},{status:4,name:"加工完成"}],inspectStatusArr:[{status:-1,name:"全部"},{status:1,name:"质检中"},{status:2,name:"质检完成"}],loading:!1,entrustNo:"",entrust:{},items:[],layer:!1}},methods:{flush:function(){this.filter={type:3,entrustNo:"",status:-1,inspectStatus:-1},this.$refs.list.update(!0)},info:function(t){this.layer=!0,this.entrustNo=t.entrustNo,this.getInfo(),this.getInspectHistory()},getInfo:function(){var t=this;this.$http.get("/haolifa/entrust/info/".concat(this.entrustNo)).then((function(e){t.entrust=e,t.entrust.createTime=e.createTime.substring(0,10)})).catch((function(e){t.$toast(e.msg||e.message)}))},getInspectHistory:function(){var t=this;this.$http.get("/haolifa/material-inspect/history/list/".concat(this.entrustNo)).then((function(e){t.inspectHistory=e,t.inspectHistory.map((function(t){return t.reasonArr=t.reasonList.map((function(t){if(t.number)return"数量:"+t.number+",原因:"+t.reason+";"}))}))})).catch((function(e){t.$toast(e.msg||e.message)}))},complete:function(){var t=this,e={handlingSuggestion:this.inspectHistory.handlingSuggestion,inspectNo:this.inspectHistory.inspectNo,materialGraphName:this.inspectHistory.materialName,materialGraphNo:this.inspectHistory.materialGraphNo,qualifiedNumber:this.inspectHistory.qualifiedNumber,remark:this.inspectHistory.remark,testNumber:this.inspectHistory.testNumber,unqualifiedNumber:this.inspectHistory.unqualifiedNumber,type:2,batchNumber:this.inspectHistory.batchNumber,purchaseNo:this.inspectHistory.purchaseNo,supplierName:this.inspectHistory.supplierName,supplierNo:this.inspectHistory.supplierNo};this.$http.post("/haolifa/material-inspect/history/save",e).then((function(e){t.$toast("添加成功"),t.$refs.list.update(!0),t.inspectHistory.completeLayer=!1})).catch((function(e){t.$toast(e.msg||e.message)}))},addInspectHistory:function(t){this.inspectHistory.batchNumber=t.batchNumber,this.inspectHistory.purchaseNo=t.purchaseNo,this.inspectHistory.supplierName=t.supplierName,this.inspectHistory.supplierNo=t.supplierNo,this.inspectHistory.materialGraphNo=t.materialGraphNo,this.inspectHistory.materialName=t.materialGraphName,this.inspectHistory.inspectNo=t.entrustNo,this.inspectHistory.completeLayer=!0}}},l=o,n=(s("0407"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},"67bf":function(t,e,s){},"6ab1":function(t,e,s){"use strict";s("0d23")},"6b9e":function(t,e,s){},"6bc2":function(t,e,s){"use strict";s("5947")},7358:function(t,e,s){},"74a7":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-material-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.entrustNo,expression:"filter.entrustNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"机加工单号"},domProps:{value:t.filter.entrustNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"entrustNo",e.target.value)}}}),t._v("\n            状态：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},t._l(t.statusList,(function(e){return s("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])})),0),s("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),s("div",{staticClass:"flex-item"})]),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/entrust/list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.entrustNo))]),s("td",[t._v(t._s(a.batchNumber))]),s("td",[t._v(t._s(a.purchaseNo))]),s("td",[t._v(t._s(t.workShopList[a.workshopType].name))]),s("td",[t._v(t._s("0"==a.workshopType?"暂无":a.supplierName))]),s("td",[t._v(t._s(a.materialGraphName))]),s("td",[t._v(t._s(a.materialGraphNo))]),s("td",[t._v(t._s(a.processedGraphNo))]),s("td",[t._v(t._s(t.busTypeList[a.busType]))]),s("td",[t._v(t._s(a.specifications))]),s("td",[t._v(t._s(a.model))]),s("td",[t._v(t._s(a.number))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(t.statusList[a.status+1].name))])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("机加工单号")]),s("th",[t._v("批次号")]),s("th",[t._v("采购合同号")]),s("th",[t._v("车间类型")]),s("th",[t._v("加工方")]),s("th",[t._v("物料名称")]),s("th",[t._v("物料图号")]),s("th",[t._v("加工后图号")]),s("th",[t._v("类别")]),s("th",[t._v("规格")]),s("th",[t._v("型号")]),s("th",[t._v("数量")]),s("th",[t._v("发起时间")]),s("th",[t._v("状态")])])])],1)])},i=[],r=s("9b68"),o={name:"page-machining-list",components:{DataList:r["a"]},data:function(){return{filter:{type:0,status:-1,entrustNo:""},statusList:[{status:-1,name:"全部"},{status:0,name:"未提交"},{status:1,name:"待审批"},{status:2,name:"待加工"},{status:3,name:"加工中"},{status:4,name:"处理完成"},{status:5,name:"审批不通过"},{status:6,name:"质检完成"}],workShopList:[{status:0,name:"暂无"},{status:1,name:"内部车间1"},{status:2,name:"外部"},{status:3,name:"内部车间2"}],busTypeList:["未选择","订单需求","生产库存"]}},methods:{flush:function(){this.filter={type:0,status:-1,entrustNo:""},this.$refs.list.update(!0)},machining:function(t,e){this.initApprove(t,e)},edit:function(t){this.$router.push("/applyBuy-machining/edit?entrustNo=".concat(t.entrustNo))},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下送检单吗？<br><b>".concat(t.entrustNo,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/entrust/delete/".concat(t.entrustNo)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},initApprove:function(t,e){var s=this;this.$http.get("/haolifa/entrust/updateStatus/".concat(t,"/").concat(e)).then((function(t){s.$refs.list.update(!0)})).catch((function(t){s.$toast(t.msg||t.message)}))}}},l=o,n=(s("b4ab"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},7623:function(t,e,s){},"7b42":function(t,e,s){},"80f9":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-invoice-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.projectName,expression:"filter.projectName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"名称"},domProps:{value:t.filter.projectName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"projectName",e.target.value)}}})]),s("div",{staticClass:"flex-item"}),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")])],1),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/pay-assessment-quota/getList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.projectName))]),s("td",[t._v(t._s(a.departName))]),s("td",[t._v(t._s(a.quotaName))]),s("td",[t._v(t._s(a.quotaContent))]),s("td",[t._v(t._s(a.score))]),s("td",[t._v(t._s(a.standard))]),s("td",[t._v(t._s(a.remark))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(a.updateTime))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(a)}}},[t._v("编辑 | ")]),s("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(a)}}},[t._v("删除")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("项目")]),s("th",[t._v("岗位名称")]),s("th",[t._v("考核指标")]),s("th",[t._v("指标内容")]),s("th",[t._v("对应分值")]),s("th",[t._v("考核标准")]),s("th",[t._v("备注")]),s("th",[t._v("创建时间")]),s("th",[t._v("更新时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"项目"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"考核指标"},model:{value:t.form.quotaName,callback:function(e){t.$set(t.form,"quotaName",e)},expression:"form.quotaName"}})],1),s("div",{staticClass:"flex"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",list:t.postList,label:"岗位名称"},model:{value:t.form.departId,callback:function(e){t.$set(t.form,"departId",e)},expression:"form.departId"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"分数"},model:{value:t.form.score,callback:function(e){t.$set(t.form,"score",e)},expression:"form.score"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"指标内容"},model:{value:t.form.quotaContent,callback:function(e){t.$set(t.form,"quotaContent",e)},expression:"form.quotaContent"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"考核标准"},model:{value:t.form.standard,callback:function(e){t.$set(t.form,"standard",e)},expression:"form.standard"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)]),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=s("9b68"),o={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{projectName:""},layer:!1,form:{id:"",projectName:"",quotaContent:"",quotaName:"",remark:"",score:0,standard:"",departName:"",departId:""},postList:[],loading:!1}},mounted:function(){this.getPostList()},methods:{flush:function(){this.filter={projectName:""},this.$refs.list.update(!0)},edit:function(t){this.layer=!0,this.form.id=t.id,this.form.projectName=t.projectName,this.form.quotaContent=t.quotaContent,this.form.quotaName=t.quotaName,this.form.remark=t.remark,this.form.score=t.score,this.form.standard=t.standard},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下项目吗？<br><b>".concat(t.projectName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/pay-assessment-quota/del/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},getPostList:function(){var t=this;this.$http.post("/haolifa/pay-production-work-shop/getAllList").then((function(e){e.map((function(e){t.postList.push({text:e.postName,value:e.id})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},add:function(){this.layer=!0},save:function(){var t=this;if(this.form.projectName.trim()&&this.form.departId&&this.form.quotaName.trim()){this.postList.map((function(e){e.value==t.form.departId&&(t.form.departName=e.text)})),this.loading=!0;var e=this.form.id?"/haolifa/pay-assessment-quota/edit":"/haolifa/pay-assessment-quota/save";this.$http.post(e,this.form).then((function(e){t.close(),t.$toast("保存成功"),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))}else this.$toast("请输入必填项")},close:function(){this.layer=!1,this.form={id:"",projectName:"",quotaContent:"",quotaName:"",remark:"",score:0,standard:""}}}},l=o,n=(s("16e4"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},"86e6":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-invoice-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.departName,expression:"filter.departName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"部门名称"},domProps:{value:t.filter.departName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"departName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.postName,expression:"filter.postName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"岗位名称"},domProps:{value:t.filter.postName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"postName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.workType,expression:"filter.workType"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"工种类别"},domProps:{value:t.filter.workType},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"workType",e.target.value)}}})]),s("div",{staticClass:"flex-item"}),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")])],1),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/pay-production-work-shop/getList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.departName))]),s("td",[t._v(t._s(a.postName))]),s("td",[t._v(t._s(a.workType))]),s("td",[t._v(t._s(a.postCode))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(a.updateTime))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(a)}}},[t._v("编辑 | ")]),s("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(a)}}},[t._v("删除")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("部门名称")]),s("th",[t._v("岗位名称")]),s("th",[t._v("工种类别")]),s("th",[t._v("岗位序号")]),s("th",[t._v("创建时间")]),s("th",[t._v("更新时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"flex"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",list:t.deptList,label:"部门名称"},model:{value:t.form.departName,callback:function(e){t.$set(t.form,"departName",e)},expression:"form.departName"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",list:t.typeList,label:"工种类别"},model:{value:t.form.workType,callback:function(e){t.$set(t.form,"workType",e)},expression:"form.workType"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"岗位名称"},model:{value:t.form.postName,callback:function(e){t.$set(t.form,"postName",e)},expression:"form.postName"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"岗位序号"},model:{value:t.form.postCode,callback:function(e){t.$set(t.form,"postCode",e)},expression:"form.postCode"}})],1)]),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=s("9b68"),o={name:"jiaoxiaogongshi-list",components:{DataList:r["a"]},data:function(){return{filter:{departName:"",endCreateTime:"",postName:"",startCreateTime:"",workType:""},layer:!1,form:{id:"",postCode:"",postName:"",workType:"",departName:""},typeList:[{text:"生产",value:"生产"},{text:"管理",value:"管理"}],loading:!1,deptList:[]}},mounted:function(){this.getDeptList()},methods:{flush:function(){this.filter={departName:"",endCreateTime:"",postName:"",startCreateTime:"",workType:""},this.$refs.list.update(!0)},edit:function(t){this.layer=!0,this.form.id=t.id,this.form.postCode=t.postCode,this.form.postCapability=t.postCapability,this.form.postName=t.postName,this.form.productModel=t.productModel,this.form.serial=t.serial,this.form.workType=t.workType,this.form.departName=t.departName},getDeptList:function(){var t=this;this.$http.get("/haolifa/dept/list").then((function(e){e.map((function(e){t.deptList.push({text:e.deptName,value:e.deptName})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下岗位名称吗？<br><b>".concat(t.postName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/pay-production-work-shop/del/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},add:function(){this.layer=!0},save:function(){var t=this;if(this.form.postName.trim())if(this.form.postCode.trim())if(this.form.departName.trim())if(this.form.workType.trim()){this.loading=!0;var e=this.form.id?"/haolifa/pay-production-work-shop/edit":"/haolifa/pay-production-work-shop/save";this.$http.post(e,this.form).then((function(e){t.close(),t.$toast("保存成功"),t.loading=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))}else this.$toast("工种类别不能为空");else this.$toast("车间名称不能为空");else this.$toast("岗位序号不能为空");else this.$toast("岗位名称不能为空")},close:function(){this.layer=!1,this.form={id:"",postCode:"",postName:"",workType:"",departName:""}}}},l=o,n=(s("dfc8"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},8756:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-material-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),t._v("\n            状态：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},t._l(t.statusList,(function(e){return s("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])})),0),s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.sprayNo,expression:"filter.sprayNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"喷涂加工号"},domProps:{value:t.filter.sprayNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"sprayNo",e.target.value)}}}),s("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),s("div",{staticClass:"flex-item"})]),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/spray/forms",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.sprayNo))]),s("td",[t._v(t._s(a.planner))]),s("td",[t._v(t._s(a.totalNumber))]),s("td",[t._v(t._s(a.qualifiedNumber))]),s("td",[t._v(t._s(a.orignGraphNo))]),s("td",[t._v(t._s(a.sprayedGraphNo))]),s("td",[t._v(t._s(a.batchNumber))]),s("td",[t._v(t._s(t.busTypeList[a.busType]))]),s("td",[t._v(t._s(t.rowStatusList[a.status].name))]),s("td",[t._v(t._s(t.inspectStatusList[a.inspectStatus]))]),s("td",[t._v(t._s(a.createTime))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.sprayInfo(a)}}},[t._v("查看")]),2!=a.inspectStatus?s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.completeInspect(a)}}},[t._v("| 质检完成")]):t._e(),2!=a.inspectStatus?s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.addSprayInspect(a)}}},[t._v("| 添加质检记录")]):t._e()])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("喷涂加工单号")]),s("th",[t._v("计划人")]),s("th",[t._v("总数量")]),s("th",[t._v("检验合格数量")]),s("th",[t._v("原图号")]),s("th",[t._v("加工后图号")]),s("th",[t._v("批次号")]),s("th",[t._v("类别")]),s("th",[t._v("状态")]),s("th",[t._v("质检状态")]),s("th",[t._v("发起时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?s("layer",{attrs:{title:"新增喷涂质检记录",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"form-content page-supplier-info"},[s("table",{staticClass:"f-14"},[s("tr",[s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}})]),s("tr",[s("td",{staticClass:"b",staticStyle:{border:"none"},attrs:{colspan:"11",align:"center"}},[t._v("喷涂加工单详情")])]),s("tr",[s("th",{attrs:{colspan:"11"}},[t._v("喷涂单号："+t._s(t.spray.sprayNo))])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("计划人："+t._s(t.spray.planner))]),s("td",{attrs:{colspan:"6"}},[t._v("日 期："+t._s(t.spray.createTime))])]),s("tr",{staticStyle:{border:"thin"}},[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("零件名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("零件图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("喷涂颜色")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("特殊要求")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("完成时间")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.spray.items,(function(e,a){return s("tr",{key:a,staticStyle:{border:"thin"}},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(a+1))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.model))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specifications))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.sprayColor))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specialRequires))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.completeTime))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])}))],2)]),t.inspectHistory.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("已添加质检记录")])]),s("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[s("table",{staticClass:"data-table"},[s("tr",{staticStyle:{display:"none"}},[s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"12%"}}),s("td",{staticStyle:{width:"12%"}})]),s("tr",[s("th",[t._v("喷涂单号")]),s("th",[t._v("零件名称")]),s("th",[t._v("零件原图号")]),s("th",[t._v("零件图号")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("处理意见")]),s("th",[t._v("附件")]),s("th",[t._v("不合格现象描述")])]),t._l(t.inspectHistory,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.sprayNo))]),s("td",[t._v(t._s(e.materialGraphName))]),s("td",[t._v(t._s(e.originalGraphNo))]),s("td",[t._v(t._s(e.materialGraphNo))]),s("td",[t._v(t._s(e.testNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",[t._v(t._s(e.handlingSuggestion))]),s("td",t._l(e.accessoryList,(function(e,a){return s("div",{key:a},[s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v(t._s(e.fileName))])])})),0),s("td",[t._v(t._s(e.reasonArr.toString()))])])}))],2)])]):t._e(),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"喷涂委托单号"},model:{value:t.inspectHistoryAdd.sprayNo,callback:function(e){t.$set(t.inspectHistoryAdd,"sprayNo",e)},expression:"inspectHistoryAdd.sprayNo"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.nameList,label:"零件名称"},model:{value:t.inspectHistoryAdd.materialGraphName,callback:function(e){t.$set(t.inspectHistoryAdd,"materialGraphName",e)},expression:"inspectHistoryAdd.materialGraphName"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.arrList,disabled:"",label:"类型"},model:{value:t.inspectHistoryAdd.busType,callback:function(e){t.$set(t.inspectHistoryAdd,"busType",e)},expression:"inspectHistoryAdd.busType"}})],1),s("div",{staticClass:"flex mt-15"},[s("select-box",{staticClass:"flex-item mr-20 ml-20",attrs:{list:t.tuhaoList,label:"原图号"},model:{value:t.inspectHistoryAdd.originalGraphNo,callback:function(e){t.$set(t.inspectHistoryAdd,"originalGraphNo",e)},expression:"inspectHistoryAdd.originalGraphNo"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"加工后图号"},model:{value:t.inspectHistoryAdd.materialGraphNo,callback:function(e){t.$set(t.inspectHistoryAdd,"materialGraphNo",e)},expression:"inspectHistoryAdd.materialGraphNo"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"批次号"},model:{value:t.inspectHistoryAdd.batchNumber,callback:function(e){t.$set(t.inspectHistoryAdd,"batchNumber",e)},expression:"inspectHistoryAdd.batchNumber"}})],1),s("div",{staticClass:"flex mt-15"},[s("input-box",{staticClass:"flex-item mr-20 ml-20 mt-15",attrs:{label:"检测数量"},model:{value:t.inspectHistoryAdd.testNumber,callback:function(e){t.$set(t.inspectHistoryAdd,"testNumber",e)},expression:"inspectHistoryAdd.testNumber"}}),s("input-box",{staticClass:"flex-item mr-20 mt-15",attrs:{label:"合格数量"},model:{value:t.inspectHistoryAdd.qualifiedNumber,callback:function(e){t.$set(t.inspectHistoryAdd,"qualifiedNumber",e)},expression:"inspectHistoryAdd.qualifiedNumber"}}),s("input-box",{staticClass:"flex-item mr-20 ml-20 mt-15",attrs:{label:"处理意见"},model:{value:t.inspectHistoryAdd.handlingSuggestion,callback:function(e){t.$set(t.inspectHistoryAdd,"handlingSuggestion",e)},expression:"inspectHistoryAdd.handlingSuggestion"}})],1),t._l(t.inspectHistoryAdd.reasonList,(function(e,a){return s("div",{key:a,staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"不合格数量"},model:{value:e.number,callback:function(s){t.$set(e,"number",s)},expression:"item.number"}}),s("input-box",{staticClass:"flex-item",attrs:{label:"不合格现象描述"},model:{value:e.reason,callback:function(s){t.$set(e,"reason",s)},expression:"item.reason"}}),t.inspectHistoryAdd.reasonList.length>1?s("icon-btn",{attrs:{small:""},on:{click:function(e){return t.removeReason(a)}}},[t._v("close")]):t._e()],1)})),s("div",{staticStyle:{"padding-left":"100px"}},[s("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"更多不合格数量及因",expression:"'更多不合格数量及因'"}],attrs:{bg:"",small:""},on:{click:t.addReason}},[t._v("add")])],1),s("div",{staticClass:"flex"},[s("upload-box",{staticClass:"ml-20 mb-10",staticStyle:{width:"50%"},attrs:{btnText:"上传附件",fileList:t.fileList,onchange:t.uploadFile,multiple:!0,onremove:t.removeFile}})],1),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),s("el-button",{attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.complete}},[t._v("保存")])],1)],2)]):t._e(),t.layer?s("layer",{attrs:{title:"详情",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"form-content page-supplier-info"},[s("table",{staticClass:"f-14"},[s("tr",[s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}})]),s("tr",[s("td",{staticClass:"b",staticStyle:{border:"none"},attrs:{colspan:"11",align:"center"}},[t._v("喷涂加工单")])]),s("tr",[s("th",{attrs:{colspan:"11"}},[t._v("喷涂单号："+t._s(t.spray.sprayNo))])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("计划人："+t._s(t.spray.planner))]),s("td",{attrs:{colspan:"6"}},[t._v("日 期："+t._s(t.spray.createTime))])]),s("tr",{staticStyle:{border:"thin"}},[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("零件名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("零件图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("喷涂颜色")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("特殊要求")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("完成时间")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.spray.items,(function(e,a){return s("tr",{key:a,staticStyle:{border:"thin"}},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(a+1))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.model))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specifications))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.sprayColor))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specialRequires))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.completeTime))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])}))],2)]),t.inspectHistory.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("质检记录")])]),s("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[s("table",{staticClass:"data-table"},[s("tr",{staticStyle:{display:"none"}},[s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"12%"}}),s("td",{staticStyle:{width:"12%"}})]),s("tr",[s("th",[t._v("喷涂单号")]),s("th",[t._v("零件名称")]),s("th",[t._v("零件原图号")]),s("th",[t._v("零件图号")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("处理意见")]),s("th",[t._v("附件")]),s("th",[t._v("不合格现象描述")])]),t._l(t.inspectHistory,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.sprayNo))]),s("td",[t._v(t._s(e.materialGraphName))]),s("td",[t._v(t._s(e.originalGraphNo))]),s("td",[t._v(t._s(e.materialGraphNo))]),s("td",[t._v(t._s(e.testNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",[t._v(t._s(e.handlingSuggestion))]),s("td",t._l(e.accessoryList,(function(e,a){return s("div",{key:a},[s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v(t._s(e.fileName))])])})),0),s("td",[t._v(t._s(e.reasonArr.toString()))])])}))],2)])]):t._e()]),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(s("a450"),s("9b68")),o=s("153b"),l={name:"spray-add-list",components:{DataList:r["a"]},data:function(){return{items:[],completeLayer:!1,layer:!1,filter:{type:1,status:-1},rowStatusList:[{status:0,name:"待审批"},{status:1,name:"加工中"},{status:2,name:"质检完成"},{status:3,name:"加工完成"},{status:4,name:"暂停加工"}],inspectStatusList:{0:"待质检",1:"质检中",2:"质检完成"},busTypeList:["未选择","订单需求","生产库存"],statusList:[{status:0,name:"待审批"},{status:1,name:"加工中"},{status:2,name:"质检完成"},{status:3,name:"加工完成"},{status:4,name:"暂停加工"},{status:-1,name:"全部"}],arrList:[{value:"0",text:"未选择"},{value:"1",text:"订单需求"},{value:"2",text:"生产库存"}],inspectHistoryAdd:{},spray:{planner:"",sprayNo:"",createTime:"",items:[]},nameList:[],tuhaoList:[],fileList:[],loading:!1,inspectHistory:[]}},methods:{flush:function(){this.filter={type:1,status:-1},this.$refs.list.update(!0)},completeInspect:function(t){this.updateStatus(t.sprayNo,2)},complete:function(){var t=this;this.loading=!0,delete this.inspectHistoryAdd.busType,delete this.inspectHistoryAdd.batchNumber,this.$http.post("/haolifa/spray/inspect",this.inspectHistoryAdd).then((function(e){t.loading=!1,t.$toast("添加成功"),t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))},addSprayInspect:function(t){var e=this;this.inspectHistoryAdd={sprayNo:t.sprayNo,originalGraphNo:t.materialGraphNo,busType:t.busType+"",materialGraphName:"",testNumber:0,qualifiedNumber:0,unqualifiedNumber:0,handlingSuggestion:"",accessoryList:[],remark:"",reasonList:[{number:"",reason:""}]},this.fileList=[],this.$http.get("/haolifa/spray/form/".concat(t.sprayNo)).then((function(t){e.nameList=t.items.map((function(t){return{text:t.materialName,value:t.materialName}})),e.tuhaoList=t.items.map((function(t){return{text:t.materialGraphNo,value:t.materialGraphNo}})),e.inspectHistoryAdd.batchNumber=t.items[0].batchNumber,e.inspectHistoryAdd.materialGraphNo=t.items[0].sprayedGraphNo})).catch((function(t){e.$toast(t.msg||t.message)})),this.sprayInfo(t),this.layer=!1,this.completeLayer=!0},uploadFile:function(t,e){var s=this;this.loading=!0,Object(o["a"])(t.source).then((function(e){s.$http.post("/haolifa/file/uploadFileBase64",{base64Source:e,fileName:t.name}).then((function(e){s.inspectHistoryAdd.accessoryList.push({fileName:t.name,fileUrl:e}),s.loading=!1})).catch((function(t){s.$toast(t.msg||t.message),s.loading=!1}))}))},removeFile:function(t,e){var s=this;return new Promise((function(t,a){s.inspectHistoryAdd.accessoryList.splice(e,1),t()}))},updateStatus:function(t,e){var s=this;this.$http.put("/haolifa/spray/inspectStatus/".concat(t,"/").concat(e)).then((function(t){s.$refs.list.update(!0)})).catch((function(t){s.$toast(t.msg||t.message)}))},sprayInfo:function(t){var e=this;this.$http.get("/haolifa/spray/form/".concat(t.sprayNo)).then((function(t){e.spray=t})).catch((function(t){e.$toast(t.msg||t.message)})),this.$http.get("/haolifa/spray/inspect/list/".concat(t.sprayNo)).then((function(t){e.inspectHistory=t,e.inspectHistory.map((function(t){return t.reasonArr=t.reasonList.map((function(t){if(t.number)return"数量:"+t.number+",原因:"+t.reason+";"}))}))})).catch((function(t){e.$toast(t.msg||t.message)})),this.layer=!0},addReason:function(){this.inspectHistoryAdd.reasonList.push({number:"0",reason:""})},removeReason:function(t){this.inspectHistoryAdd.reasonList.splice(t,1)}}},n=l,c=(s("cb21"),s("cba8")),d=Object(c["a"])(n,a,i,!1,null,null,null);e["default"]=d.exports},"88ea":function(t,e,s){"use strict";s("0756")},"8bb6":function(t,e,s){"use strict";s("2a90")},"913d":function(t,e,s){},"916d":function(t,e,s){},"91ed":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-orders-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderStatus,expression:"filter.orderStatus"}],staticClass:"f-14",attrs:{disabled:""},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"orderStatus",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},[s("option",{attrs:{value:"-1"}},[t._v("全部")]),t._l(t.orderStatusList,(function(e){return s("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2),s("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),s("div",{staticClass:"flex-item"})]),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{param:t.filter,url:"/haolifa/order-product/pageInfo",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.orderNo))]),s("td",[s("a",{staticClass:"fixed-length",attrs:{href:a.orderContractUrl,title:a.orderContractUrl}},[t._v(t._s(a.orderContractUrl))])]),s("td",[t._v(t._s(a.deliveryDate))]),s("td",[t._v(t._s(a.totalCount))]),s("td",[t._v(t._s(a.qualifiedNumber))]),s("td",[t._v(t._s(t.orderStatusList[a.orderStatus-5].text))]),s("td",[t._v(t._s(a.createTime))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.infoShow(a)}}},[t._v("详情")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("订单编号")]),s("th",[t._v("订单合同URL")]),s("th",[t._v("发货日期")]),s("th",[t._v("订单数量")]),s("th",[t._v("检验合格数量")]),s("th",[t._v("订单状态")]),s("th",[t._v("创建时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?s("layer",{attrs:{title:"质检记录",width:"650px"}},[s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"订单号"},model:{value:t.order.orderNo,callback:function(e){t.$set(t.order,"orderNo",e)},expression:"order.orderNo"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.productNoList,label:"产品编号"},model:{value:t.order.productNo,callback:function(e){t.$set(t.order,"productNo",e)},expression:"order.productNo"}})],1),s("div",{staticClass:"flex"},[s("select-box",{staticClass:"flex-item mr-20 ml-20",attrs:{list:t.productModelList,label:"成品型号"},model:{value:t.order.productModel,callback:function(e){t.$set(t.order,"productModel",e)},expression:"order.productModel"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.productSpecificationsList,label:"成品规格"},model:{value:t.order.productSpecifications,callback:function(e){t.$set(t.order,"productSpecifications",e)},expression:"order.productSpecifications"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"检测数量"},model:{value:t.order.testingNumber,callback:function(e){t.$set(t.order,"testingNumber",e)},expression:"order.testingNumber"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"合格数量"},model:{value:t.order.qualifiedNumber,callback:function(e){t.$set(t.order,"qualifiedNumber",e)},expression:"order.qualifiedNumber"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"不合格数量"},model:{value:t.order.unqualifiedNumber,callback:function(e){t.$set(t.order,"unqualifiedNumber",e)},expression:"order.unqualifiedNumber"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.reasonList,label:"不合格原因"},model:{value:t.order.reason,callback:function(e){t.$set(t.order,"reason",e)},expression:"order.reason"}})],1),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?s("layer",{attrs:{title:"详情",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"form-content metalwork-info"},[s("table",{staticClass:"f-14 order-info"},[s("tr",[s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"8%"}}),s("td",{staticStyle:{width:"8%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单编号 : "+t._s(t.info.orderNo))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("发货日期 : "+t._s(t.info.deliveryDate))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单状态 : "+t._s(t.orderStatusList[t.info.orderStatus-5].text))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("\n                            订单合同:\n                            "),s("a",{staticStyle:{"margin-right":"15px"},attrs:{href:t.info.orderContractUrl}},[t._v("下载")]),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?s("a",{attrs:{target:"_blank",href:t.info.orderContractUrl}},[t._v("预览")]):t._e(),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():s("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+t.info.orderContractUrl}},[t._v("预览")])])]),s("tr",[t.fileDetailList.length?s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:")]):s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:无")])]),t._l(t.fileDetailList,(function(e,a){return s("tr",{key:a},[s("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v(t._s(e.fileName))]),s("td",{staticClass:"b",attrs:{colspan:"12"}},[e.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v("预览")]):t._e(),e.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():s("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+e.fileUrl}},[t._v("预览")])])])})),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配车间: "+t._s(t.info.assemblyShop))]),s("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配小组: "+t._s(t.info.assemblyGroup))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("采购反馈时间: "+t._s(t.info.purchaseFeedbackTime))]),s("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("生产反馈时间: "+t._s(t.info.productionFeedbackTime))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("技术清单:")])]),s("tr",[s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("产品名称")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("型号")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("规格")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("数量")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("上法兰标准")]),s("td",{attrs:{colspan:"3",rowspan:"1"}},[t._v("上法兰尺寸")]),s("td",{attrs:{colspan:"4",rowspan:"1"}},[t._v("出轴尺寸")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("静扭矩")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("执行器型号")])]),s("tr",[s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("连接孔")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("角度")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("中心距")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴型式")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴长度")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("轴图号")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("过渡盘")])]),t._l(JSON.parse(t.info.technicalRequire),(function(e,a){return s("tr",{key:a},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.name))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.xinhao))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.guige))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.num))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.biaozhun))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.lianjiek))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.jiaodu))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.zhongxinju))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.xinshi))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.length))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.tuhao))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.guodupan))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.jinniuju))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.jishuxinhao))])])})),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单产品列表")])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品编号")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("标签属性")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("颜色")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品数量")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总计价格")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("材质说明")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品备注")])]),t._l(t.info.orderProductAssociates,(function(e,a){return s("tr",{key:a},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.productNo))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.productName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.productModel))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.lable))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specifications))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.productColor))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.productNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalPrice))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.materialDescription))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.productRemark))])])})),t.accessoryList.length>0?s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批附件:")])]):t._e(),t.accessoryList.length>0?s("tr",[s("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件名称")]),s("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件地址")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("——")])]):t._e(),t._l(t.accessoryList,(function(e,a){return s("tr",{key:a},[s("td",{attrs:{colspan:"6"}},[t._v(t._s(e.fileName))]),s("td",{attrs:{colspan:"6"}},[t._v(t._s(e.fileUrl))]),s("td",{attrs:{colspan:"2"}},[e.fileUrl.match(".(doc|docx|xls|xlsx)$")?t._e():s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v("预览")]),e.fileUrl.match(".(doc|docx|xls|xlsx)$")?s("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+e.fileUrl}},[t._v("预览")]):t._e()])])}))],2)]),t.recordList.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("质检记录")])]),s("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[s("table",{staticClass:"data-table"},[s("tr",{staticStyle:{display:"none"}},[s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"12%"}})]),s("tr",[s("th",[t._v("产品编号")]),s("th",[t._v("成品型号")]),s("th",[t._v("成品规格")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("不合格原因")]),s("th",[t._v("附件")]),s("th",[t._v("状态")]),s("th",[t._v("创建日期")])]),t._l(t.recordList,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.productNo))]),s("td",[t._v(t._s(e.productModel))]),s("td",[t._v(t._s(e.productSpecifications))]),s("td",[t._v(t._s(e.testingNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",[t._v(t._s(e.reasonArr.toString()))]),s("td",t._l(e.accessoryList,(function(e,a){return s("div",{key:a},[s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v(t._s(e.fileName))])])})),0),s("td",[t._v(t._s(1==e.storageStatus?"待入库":"已入库"))]),s("td",[t._v(t._s(e.createTime))])])}))],2)])]):t._e(),s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("审核信息")])]),s("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[s("table",{staticClass:"data-table"},[s("tr",[s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"8%"}}),s("td",{staticStyle:{width:"8%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v("流程节点")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("角色")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("审核人")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核状态")]),s("td",{staticClass:"b",attrs:{colspan:"4"}},[t._v("审核意见")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核时间")])]),t._l(t.processList,(function(e){return s("tr",{key:e.stepName},[s("td",{attrs:{colspan:"3"}},[t._v(t._s(e.stepName))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.roleName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.auditUserName))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.statusList[e.auditResult]))]),s("td",{attrs:{colspan:"4"}},[t._v(t._s(e.info))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.auditTime))])])}))],2)])])]),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.closeLayer()}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(s("1bc78"),s("9b68")),o={name:"product-addList",components:{DataList:r["a"]},data:function(){return{completeLayer:!1,loading:!1,orderStatusList:[{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:8,text:"生产暂停"},{value:9,text:"生产完成"},{value:10,text:"质检中"},{value:11,text:"已入库"},{value:12,text:"申请发货"},{value:13,text:"发货完成"}],filter:{orderNo:"",orderStatus:7},layer:!1,info:{},accessoryList:[],productNoList:[],productModelList:[],productSpecificationsList:[],order:{id:"",orderNo:"",productModel:"",productNo:"",productSpecifications:"",qualifiedNumber:"",reason:"",testingNumber:"",unqualifiedNumber:""},reasonList:[],recordList:[],fileDetailList:[],processList:[],statusList:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},created:function(){this.getReasonList()},methods:{flush:function(){this.filter={orderNo:"",orderStatus:7},this.$refs.list.update(!0)},closeLayer:function(){this.layer=!1,this.accessoryList=[]},getAccessory:function(t){var e=this;this.$http.get("/haolifa/flowInstance/flow/accessoryInfo?formNo=".concat(t,"&formId=0")).then((function(t){t.forEach((function(t){""!=t.fileUrl&&e.accessoryList.push(t)}))})).catch((function(t){e.$toast(t.msg||t.message)}))},getOrderStatusList:function(){var t=this;this.$http.get("/haolifa/order-product/order-status-list").then((function(e){t.orderStatusList=e.map((function(t){return{value:t.code,text:t.desc}}))}))},getReasonList:function(){var t=this;this.$http.get("/haolifa/pro-inspect/reasonList").then((function(e){t.reasonList=e.map((function(t){return{text:t,value:t}}))})).catch((function(e){t.$toast(e.msg||e.message)}))},progress:function(t){var e=this;this.completeLayer=!0,this.reset(),this.order.orderNo=t.orderNo,this.$http.get("/haolifa/order-product/details?orderNo=".concat(t.orderNo)).then((function(t){e.productNoList=t.orderProductAssociates.map((function(t){return{text:t.productNo,value:t.productNo}})),e.productModelList=t.orderProductAssociates.map((function(t){return{text:t.productModel,value:t.productModel}})),e.productSpecificationsList=t.orderProductAssociates.map((function(t){return{text:t.specifications,value:t.specifications}}))})).catch((function(t){e.$toast(t.msg||t.message)}))},infoShow:function(t){var e=this;this.layer=!0,this.getInfo(t.orderNo),this.getAccessory(t.orderNo),this.$http.get("/haolifa/order-product/accessoryorderNo=".concat(t.orderNo)).then((function(t){e.fileDetailList=t})).catch((function(t){e.$toast(t.msg||t.message)}))},getInfo:function(t){var e=this;this.$http.get("/haolifa/order-product/details?orderNo=".concat(t)).then((function(t){e.info=t})).catch((function(t){e.$toast(t.msg||t.message)}));var s={inspectNo:"",orderNo:t,pageNum:1,pageSize:100,storageStatus:0};this.$http.post("/haolifa/pro-inspect/pageInfo",s).then((function(t){e.recordList=t.list,e.recordList.map((function(t){return t.reasonArr=t.reasonList.map((function(t){if(t.number)return"数量:"+t.number+",原因:"+t.reason+";"}))}))})).catch((function(t){e.$toast(t.msg||t.message)})),this.getProcess(t)},getProcess:function(t){var e=this;this.$http.get("/haolifa/flowInstance/flow/progress/?formNo=".concat(t)).then((function(t){e.processList=t})).catch((function(t){e.$toast(t.msg||t.message)}))},close:function(){this.layer=!1},complete:function(){var t=this;this.$http.post("/haolifa/pro-inspect/save",this.order).then((function(e){t.$toast("添加成功"),t.completeLayer=!1})).catch((function(e){t.$toast(e.msg||e.message)}))},reset:function(){this.order={id:"",orderNo:"",productModel:"",productNo:"",productSpecifications:"",qualifiedNumber:"",reason:"",testingNumber:"",unqualifiedNumber:""}}}},l=o,n=(s("db0f"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},9453:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-material-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.materialName,expression:"filter.materialName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"名称"},domProps:{value:t.filter.materialName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"materialName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.materialGraphNo,expression:"filter.materialGraphNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"图号"},domProps:{value:t.filter.materialGraphNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"materialGraphNo",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},t._l(t.allStatus,(function(e){return s("option",{key:e.id,domProps:{value:e.value}},[t._v(t._s(e.text))])})),0)]),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.mergeData}},[t._v("合并采购合同")])],1),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/applyBuy/list",method:"get"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index,r=e.i;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),2==a.status?s("td",[s("input",{attrs:{type:"checkbox",name:"boxId"},domProps:{value:r}})]):s("td"),s("td",[t._v(t._s(a.productOrderNo))]),s("td",[t._v(t._s(a.materialName))]),s("td",[t._v(t._s(a.materialGraphNo))]),s("td",[t._v(t._s(a.purchaseNumber))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(a.arrivalTime))]),s("td",[t._v(t._s(t.allStatus[a.status].text))]),s("td",{staticClass:"t-right"},[2==a.status?s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.dealApplyBuy(a.id)}}},[t._v("处理完成")]):t._e()])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.all,expression:"all"}],attrs:{type:"checkbox",name:""},domProps:{checked:Array.isArray(t.all)?t._i(t.all,null)>-1:t.all},on:{change:[function(e){var s=t.all,a=e.target,i=!!a.checked;if(Array.isArray(s)){var r=null,o=t._i(s,r);a.checked?o<0&&(t.all=s.concat([r])):o>-1&&(t.all=s.slice(0,o).concat(s.slice(o+1)))}else t.all=i},t.selectAll]}})]),s("th",[t._v("订单号")]),s("th",[t._v("物料名称")]),s("th",[t._v("物料图号")]),s("th",[t._v("数量")]),s("th",[t._v("发起时间")]),s("th",[t._v("到货时间")]),s("th",[t._v("状态")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1)])},i=[],r=(s("aa18"),s("9b68")),o={name:"page-order-list",components:{DataList:r["a"]},data:function(){return{filter:{type:0,status:-1,materialName:"",orderNo:"",materialGraphNo:""},allStatus:[{value:0,text:"未处理"},{value:1,text:"待审批"},{value:2,text:"待采购"},{value:3,text:"已处理"},{value:4,text:"审批不通过"},{value:-1,text:"全部"}],all:!1}},methods:{flush:function(){this.filter={type:0,status:-1,materialName:"",orderNo:"",materialGraphNo:""},this.$refs.list.update(!0)},dealApplyBuy:function(t){var e=this;this.$http.post("/haolifa/applyBuy/updateStatus/".concat(t)).then((function(t){e.$toast("处理成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast("处理失败")}))},selectAll:function(){var t=document.getElementsByName("boxId");if(this.all)for(var e in t)t[e].checked=!0;else for(var s in t)t[s].checked=!1},listHasName:function(t,e){var s=!1;return 0===t.length||t.map((function(t){if(e==t.materialGraphNo)return s=!0,s})),s},mergeData:function(){var t=this,e=JSON.parse(JSON.stringify(this.$refs.list.list)),s=document.getElementsByName("boxId"),a=[],i=[],r=[],o=function(o){s[o].checked&&(r.includes(e[s[o].value].materialGraphNo)||r.push(e[s[o].value].materialGraphNo),t.listHasName(a,e[s[o].value].materialGraphNo)?a.map((function(t){t.materialGraphNo==e[s[o].value].materialGraphNo&&(t.purchaseNumber=t.purchaseNumber+e[s[o].value].purchaseNumber)})):a.push(e[s[o].value]),i.push(e[s[o].value].id))};for(var l in s)o(l);0!=r.length?this.$http.post("/haolifa/supplier/supplier-list",{graphNos:r}).then((function(e){0!==e.length?t.$router.push({name:"order-purchaseAdd",params:{list:a,supList:e,ids:i}}):t.$toast("未找到供应商")})).catch((function(e){t.$toast("处理失败")})):this.$toast("请至少选中一条数据!")}}},l=o,n=(s("6ab1"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},"94a3":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"abs scroll-y"},[s("div",{staticClass:"form-content metalwork-info"},[s("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[s("icon-btn",{staticClass:"mr-15",on:{click:function(e){return t.$router.back()}}},[t._v("arrow_back")]),s("div",{staticClass:"flex-item"},[t._v("详情")])],1),s("table",{staticClass:"f-14"},[t._m(0),t._m(1),s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("机加工单号："+t._s(t.entrust.entrustNo))]),s("td",{attrs:{colspan:"2"}},[t._v("发起日期："+t._s(t.entrust.createTime))])]),s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("采购合同号："+t._s(t.entrust.purchaseNo))]),s("td",{attrs:{colspan:"2"}},[t._v("批次号："+t._s(t.entrust.batchNumber))])]),t._m(2),s("tr",[s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.purchaseNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.batchNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.materialGraphName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.materialGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.number))])])])]),t.inspectHistory.length?s("div",{staticClass:"mt-15 ml-20 mr-20 form-content"},[t._m(3),s("div",{staticClass:"flex-item scroll-y ml-20"},[s("table",{staticClass:"data-table"},[t._m(4),t._l(t.inspectHistory,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.inspectNo))]),s("td",[t._v(t._s(1==e.type?"采购零件":"机加工零件"))]),s("td",[t._v(t._s(e.materialGraphName))]),s("td",[t._v(t._s(e.materialGraphNo))]),s("td",[t._v(t._s(e.testNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",[t._v(t._s(e.handlingSuggestion))]),s("td",[t._v(t._s(e.remark))])])}))],2)])]):t._e()])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("机加工单")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购合同编号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("批次号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item"},[t._v("质检记录")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",[t._v("质检单号")]),s("th",[t._v("类别")]),s("th",[t._v("物料名称")]),s("th",[t._v("物料图号")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("处理意见")]),s("th",[t._v("不合格现象描述")])])}],r={name:"metalwork-info",data:function(){return{loading:!1,entrustNo:"",entrust:{},items:[],inspectHistory:[]}},created:function(){this.entrustNo=this.$route.query.inspectNo,this.getInfo(),this.getInspectHistory()},methods:{getInfo:function(){var t=this;this.$http.get("/haolifa/entrust/info/".concat(this.entrustNo)).then((function(e){t.entrust=e,t.entrust.createTime=e.createTime.substring(0,10)})).catch((function(e){t.$toast(e.msg||e.message)}))},getInspectHistory:function(){var t=this;this.$http.get("/haolifa/material-inspect/history/list/".concat(this.entrustNo)).then((function(e){t.inspectHistory=e})).catch((function(e){t.$toast(e.msg||e.message)}))}}},o=r,l=(s("bafd"),s("cba8")),n=Object(l["a"])(o,a,i,!1,null,null,null);e["default"]=n.exports},9719:function(t,e,s){},"9b68":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list relative f-12"},[s("transition",{attrs:{name:"slide-y"}},[t.list.length?s("table",{staticClass:"data-table"},[t._t("header",(function(){return[s("tr",[s("th",[t._v("表头1")]),s("th",[t._v("表头2")])])]})),t._l(t.list,(function(e,a){return s("tr",{key:e.id},[t._t("item",(function(){return[s("td",[t._v("数据1")]),s("td",[t._v("数据2")])]}),{i:a,item:e,index:(t.pageNum-1)*t.pageSize+a+1})],2)}))],2):t._e()]),s("div",{staticClass:"flex-v-center",staticStyle:{"margin-top":"10px"}},[t.list.length?s("pagination",{staticClass:"mr-20",attrs:{page:t.pageNum,size:t.pageSize,total:t.total},on:{change:t.getList}}):t._e(),t.total?s("span",{staticClass:"f-12 c-6"},[t._v("共 "+t._s(t.total)+" 条数据")]):t._e()],1),t.list.length||t.loading?t._e():s("div",{staticStyle:{"margin-top":"100px"}},[s("no-data")],1)],1)},i=[];s("e680"),s("1bc78"),s("32ea");function r(t){return"?"+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}var o={name:"data-list",props:{method:{type:String,default:"get"},url:{type:String,default:""},pageSize:{type:Number,default:20},param:{type:Object,default:function(){}},pageNumStr:{type:String,default:"pageNum"}},data:function(){return{pageNum:1,total:0,loading:!1,list:[]}},watch:{url:function(){this.update()},mehtod:function(){this.update()},pageSize:function(){this.update()},param:function(){this.update()}},created:function(){this.pageNum=this.$route.query.page||1,this.getList(this.pageNum)},methods:{getList:function(t){var e=this,s=this.method,a=this.url,i=this.pageSize,o=this.param;if(a){this.loading=!0;var l={pageSize:i};l[this.pageNumStr]=t;var n=Object.assign(l,o),c="get"===s?a+r(n):a;this.$http[s](c,n).then((function(t){e.list=t.list||[],e.pageNum=t.pageNum;var s=e.$route.query;s.page=t.pageNum,e.$router.push({path:e.$route.path,query:s}),e.total=t.total,e.loading=!1})).catch((function(t){e.loading=!1,e.$toast(t.message||t.msg||t)}))}},update:function(t){this.getList(t?1:this.pageNum)}}},l=o,n=(s("c8ea"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["a"]=c.exports},"9f39":function(t,e,s){},a3c9:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-invoice-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.userName,expression:"filter.userName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.filter.userName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"userName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.postName,expression:"filter.postName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"岗位名称"},domProps:{value:t.filter.postName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"postName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.departName,expression:"filter.departName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"归属部门"},domProps:{value:t.filter.departName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"departName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.superiorName,expression:"filter.superiorName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"直属上级"},domProps:{value:t.filter.superiorName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"superiorName",e.target.value)}}}),t._v("\n            人员类型\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.userType,expression:"filter.userType"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"userType",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},[s("option",{attrs:{value:""}},[t._v("所有")]),t._l(t.userArr,(function(e){return s("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2),s("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),s("div",{staticClass:"flex-item"}),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")])],1),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/pay-user/getList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.userName))]),s("td",[t._v(t._s(a.userNo))]),s("td",[t._v(t._s("1"==a.userType?"管理":"生产"))]),s("td",[t._v(t._s(t.sexArr[a.sex]))]),s("td",[t._v(t._s(a.nativePlace))]),s("td",[t._v(t._s(a.nation))]),s("td",[t._v(t._s(t.marryArr[a.marryStatus]))]),s("td",[t._v(t._s(a.major))]),s("td",[t._v(t._s(t.educationArr[a.education]))]),s("td",[t._v(t._s(a.basePay))]),s("td",[t._v(t._s(a.meritPay))]),s("td",[t._v(t._s(a.insuranceBase))]),s("td",[t._v(t._s(a.postName))]),s("td",[t._v(t._s(a.departName))]),s("td",[t._v(t._s(a.superiorName))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(a.updateTime))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(a)}}},[t._v("编辑 | ")]),s("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(a)}}},[t._v("删除")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("姓名")]),s("th",[t._v("员工编号")]),s("th",[t._v("人员类型")]),s("th",[t._v("性别")]),s("th",[t._v("籍贯")]),s("th",[t._v("民族")]),s("th",[t._v("婚姻状况")]),s("th",[t._v("专业")]),s("th",[t._v("学历")]),s("th",[t._v("基本工资")]),s("th",[t._v("绩效工资")]),s("th",[t._v("保险基数")]),s("th",[t._v("岗位名称")]),s("th",[t._v("归属部门")]),s("th",[t._v("直属上级")]),s("th",[t._v("创建时间")]),s("th",[t._v("更新时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"姓名"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"员工编号"},model:{value:t.form.userNo,callback:function(e){t.$set(t.form,"userNo",e)},expression:"form.userNo"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.sexList,hint:"必填",label:"性别"},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"联系电话"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"身份证号码"},model:{value:t.form.idCard,callback:function(e){t.$set(t.form,"idCard",e)},expression:"form.idCard"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"籍贯"},model:{value:t.form.nativePlace,callback:function(e){t.$set(t.form,"nativePlace",e)},expression:"form.nativePlace"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"户口所在地"},model:{value:t.form.registered,callback:function(e){t.$set(t.form,"registered",e)},expression:"form.registered"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"民族"},model:{value:t.form.nation,callback:function(e){t.$set(t.form,"nation",e)},expression:"form.nation"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"常用住址"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),s("div",{staticClass:"flex"},[s("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{hint:"必填",label:"出生日期"},model:{value:t.form.birthday,callback:function(e){t.$set(t.form,"birthday",e)},expression:"form.birthday"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"政治面貌"},model:{value:t.form.politicalOutlook,callback:function(e){t.$set(t.form,"politicalOutlook",e)},expression:"form.politicalOutlook"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",list:t.marryList,label:"婚姻状况"},model:{value:t.form.marryStatus,callback:function(e){t.$set(t.form,"marryStatus",e)},expression:"form.marryStatus"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"邮箱"},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}})],1),s("div",{staticClass:"flex"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",list:t.educationList,label:"学历"},model:{value:t.form.education,callback:function(e){t.$set(t.form,"education",e)},expression:"form.education"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"专业"},model:{value:t.form.major,callback:function(e){t.$set(t.form,"major",e)},expression:"form.major"}}),s("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{hint:"必填",label:"毕业时间"},model:{value:t.form.graduationTime,callback:function(e){t.$set(t.form,"graduationTime",e)},expression:"form.graduationTime"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",label:"毕业院校"},model:{value:t.form.universityFrom,callback:function(e){t.$set(t.form,"universityFrom",e)},expression:"form.universityFrom"}})],1),s("div",{staticClass:"flex"},[s("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{hint:"必填",label:"入职时间"},model:{value:t.form.workingTime,callback:function(e){t.$set(t.form,"workingTime",e)},expression:"form.workingTime"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",list:t.userArr,label:"人员类型"},model:{value:t.form.userType,callback:function(e){t.$set(t.form,"userType",e)},expression:"form.userType"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",list:t.postList,label:"岗位名称"},model:{value:t.form.postId,callback:function(e){t.$set(t.form,"postId",e)},expression:"form.postId"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",list:t.deptList,label:"归属部门"},model:{value:t.form.departId,callback:function(e){t.$set(t.form,"departId",e)},expression:"form.departId"}})],1),s("div",{staticClass:"flex"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{hint:"必填",list:t.postList,label:"直属上级"},model:{value:t.form.superiorId,callback:function(e){t.$set(t.form,"superiorId",e)},expression:"form.superiorId"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.userList,label:"上级人员"},model:{value:t.form.parentId,callback:function(e){t.$set(t.form,"parentId",e)},expression:"form.parentId"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",hint:"必填",label:"基本工资"},model:{value:t.form.basePay,callback:function(e){t.$set(t.form,"basePay",e)},expression:"form.basePay"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"绩效工资"},model:{value:t.form.meritPay,callback:function(e){t.$set(t.form,"meritPay",e)},expression:"form.meritPay"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"保险基数"},model:{value:t.form.insuranceBase,callback:function(e){t.$set(t.form,"insuranceBase",e)},expression:"form.insuranceBase"}})],1)]),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(s("a450"),s("28b6")),o=s("9b68"),l={name:"khzb-list",components:{DataList:o["a"]},data:function(){var t;return{filter:{address:"",basePay:"",birthday:"",bloodType:"",createTime:"",createUser:"",education:"",endCreateTime:"",endGraduationTime:"",endUpdateTime:"",endWorkingTime:"",graduationTime:"",health:"",idCard:"",insuranceBase:"",mail:"",major:"",marryStatus:"",meritPay:"",nation:"",nativePlace:"",onceUserName:"",phone:"",politicalOutlook:"",postId:"",postName:"",registered:"",sex:"",startCreateTime:"",startGraduationTime:"",startUpdateTime:"",startWorkingTime:"",superiorId:"",teamId:"",teamName:"",universityFrom:"",updateTime:"",updateUser:"",userName:"",userType:"",workingTime:""},layer:!1,form:(t={address:"",basePay:0,birthday:"",bloodType:"",createTime:"",createUser:"",education:"",endCreateTime:"",endGraduationTime:"",endUpdateTime:"",endWorkingTime:"",graduationTime:"",health:"",id:"",idCard:"",insuranceBase:0,mail:"",major:"",marryStatus:0,meritPay:0,nation:"",nativePlace:"",onceUserName:"",pageNum:0,pageSize:0,phone:"",politicalOutlook:"",postId:"",postName:"",registered:"",sex:"",startCreateTime:"",startGraduationTime:"",startUpdateTime:"",startWorkingTime:"",superiorId:"",teamId:"",teamName:"",universityFrom:"",updateTime:"",updateUser:"",userName:"",userType:"",workingTime:"",departName:"",superiorName:""},Object(r["a"])(t,"superiorId",""),Object(r["a"])(t,"parentId",""),Object(r["a"])(t,"userNo",""),Object(r["a"])(t,"departId",""),t),marryArr:["","未婚","已婚","离异","丧偶"],marryList:[{text:"未婚",value:"1"},{text:"已婚",value:"2"},{text:"离异",value:"3"},{text:"丧偶",value:"4"}],educationArr:["","小学","初中","中专","高中","大专","本科","硕士","博士"],educationList:[{text:"小学",value:"1"},{text:"初中",value:"2"},{text:"中专",value:"3"},{text:"高中",value:"4"},{text:"大专",value:"5"},{text:"本科",value:"6"},{text:"硕士",value:"7"},{text:"博士",value:"8"}],sexArr:["","男","女"],sexList:[{text:"男",value:"1"},{text:"女",value:"2"}],banList:[],postList:[],deptList:[],userArr:[],userList:[],loading:!1}},mounted:function(){this.getBanList(),this.getDeptList(),this.getUsers(),this.getAllUsers(),this.getPostList()},methods:{flush:function(){this.filter={address:"",basePay:"",birthday:"",bloodType:"",createTime:"",createUser:"",education:"",endCreateTime:"",endGraduationTime:"",endUpdateTime:"",endWorkingTime:"",graduationTime:"",health:"",idCard:"",insuranceBase:"",mail:"",major:"",marryStatus:"",meritPay:"",nation:"",nativePlace:"",onceUserName:"",phone:"",politicalOutlook:"",postId:"",postName:"",registered:"",sex:"",startCreateTime:"",startGraduationTime:"",startUpdateTime:"",startWorkingTime:"",superiorId:"",teamId:"",teamName:"",universityFrom:"",updateTime:"",updateUser:"",userName:"",userType:"",workingTime:""},this.$refs.list.update(!0),this.getBanList(),this.getDeptList()},edit:function(t){this.layer=!0,this.form.id=t.id,this.form.address=t.address,this.form.workingTime=t.workingTime,this.form.quotaName=t.quotaName,this.form.userType=t.userType,this.form.userName=t.userName,this.form.updateUser=t.updateUser,this.form.updateTime=t.updateTime,this.form.universityFrom=t.universityFrom,this.form.teamName=t.teamName,this.form.teamId=t.teamId,this.form.superiorId=t.superiorId,this.form.startWorkingTime=t.startWorkingTime,this.form.startUpdateTime=t.startUpdateTime,this.form.startGraduationTime=t.startGraduationTime,this.form.startCreateTime=t.startCreateTime,this.form.sex=t.sex+"",this.form.registered=t.registered,this.form.postName=t.postName,this.form.postId=t.postId,this.form.politicalOutlook=t.politicalOutlook,this.form.phone=t.phone,this.form.onceUserName=t.onceUserName,this.form.nativePlace=t.nativePlace,this.form.nation=t.nation,this.form.meritPay=t.meritPay,this.form.marryStatus=t.marryStatus+"",this.form.major=t.major,this.form.mail=t.mail,this.form.insuranceBase=t.insuranceBase,this.form.idCard=t.idCard,this.form.health=t.health,this.form.graduationTime=t.graduationTime,this.form.endWorkingTime=t.endWorkingTime,this.form.endUpdateTime=t.endUpdateTime,this.form.endGraduationTime=t.endGraduationTime,this.form.endCreateTime=t.endCreateTime,this.form.education=t.education+"",this.form.createUser=t.createUser,this.form.createTime=t.createTime,this.form.bloodType=t.bloodType,this.form.birthday=t.birthday,this.form.basePay=t.basePay,this.form.superiorId=t.superiorId,this.form.parentId=t.parentId,this.form.userNo=t.userNo,this.form.departId=t.departId},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下人员吗？<br><b>".concat(t.userName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/pay-user/del/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},add:function(){this.layer=!0},save:function(){var t=this;if(this.form.userName&&this.form.userNo&&this.form.sex&&this.form.phone&&this.form.idCard&&this.form.nativePlace&&this.form.registered&&this.form.nation&&this.form.address&&this.form.birthday&&this.form.politicalOutlook&&this.form.marryStatus&&this.form.mail&&this.form.education&&this.form.major&&this.form.graduationTime&&this.form.universityFrom&&this.form.workingTime&&this.form.userType&&this.form.postId&&this.form.basePay){this.loading=!0;var e=this.form.id?"/haolifa/pay-user/edit":"/haolifa/pay-user/save";this.$http.post(e,this.form).then((function(e){t.layer=!1,t.$toast("保存成功"),t.close(),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))}else this.$toast("请输入必填项")},close:function(){var t;this.layer=!1,this.form=(t={address:"",basePay:0,birthday:"",bloodType:"",createTime:"",createUser:"",education:"",endCreateTime:"",endGraduationTime:"",endUpdateTime:"",endWorkingTime:"",graduationTime:"",health:"",id:"",idCard:"",insuranceBase:0,mail:"",major:"",marryStatus:"",meritPay:0,nation:"",nativePlace:"",onceUserName:"",pageNum:0,pageSize:0,phone:"",politicalOutlook:"",postId:"",postName:"",registered:"",sex:"",startCreateTime:"",startGraduationTime:"",startUpdateTime:"",startWorkingTime:"",superiorId:"",teamId:"",teamName:"",universityFrom:"",updateTime:"",updateUser:"",userName:"",userType:"",workingTime:"",departName:"",superiorName:""},Object(r["a"])(t,"superiorId",""),Object(r["a"])(t,"userNo",""),Object(r["a"])(t,"parentId",""),Object(r["a"])(t,"departId",""),t)},getBanList:function(){var t=this;this.$http.post("/haolifa/pay-team/getAllList").then((function(e){e.map((function(e){t.banList.push({text:e.teamName,value:e.id})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},getDeptList:function(){var t=this;this.$http.get("/haolifa/dept/list").then((function(e){e.map((function(e){t.deptList.push({text:e.deptName,value:e.id})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},getPostList:function(){var t=this;this.$http.post("/haolifa/pay-production-work-shop/getAllList").then((function(e){e.map((function(e){t.postList.push({text:e.postName,value:e.id})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},getUsers:function(){var t=this;this.$http.get("/haolifa/dictionaries/getUserType").then((function(e){e.result.map((function(e){t.userArr.push({text:e.name,value:e.code})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},getAllUsers:function(){var t=this;this.$http.post("/haolifa/pay-user/getAllList",{departName:"",id:"",pageNum:0,pageSize:"",postId:"",postName:"",sex:"",superiorId:"",teamId:"",teamName:"",userName:"",userType:""}).then((function(e){e.map((function(e){t.userList.push({text:e.userName,value:e.id})}))})).catch((function(e){t.$toast(e.msg||e.message)}))}}},n=l,c=(s("d8f7"),s("cba8")),d=Object(c["a"])(n,a,i,!1,null,null,null);e["default"]=d.exports},a5aa:function(t,e,s){"use strict";s("7358")},aae95:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-invoice-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.userName,expression:"filter.userName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.filter.userName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"userName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.department,expression:"filter.department"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"部门"},domProps:{value:t.filter.department},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"department",e.target.value)}}}),t._v("\n            年份选择：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.wagesYear,expression:"filter.wagesYear"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"wagesYear",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},[s("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.yearArr,(function(e,a){return s("option",{key:a,domProps:{value:e}},[t._v(t._s(e))])}))],2),t._v("\n            月份选择：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.wagesMonth,expression:"filter.wagesMonth"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"wagesMonth",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},[s("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.monthList,(function(e,a){return s("option",{key:a,domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2)]),s("div",{staticClass:"flex-item"}),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.addData}},[t._v("计算工资")]),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.createData}},[t._v("生成工资")]),s("a",{staticStyle:{color:"#008eff"},attrs:{href:"/haolifa/pay-wages/export",target:"_blank"}},[t._v("导出")]),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.upload}},[t._v("导入")])],1),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/pay-wages/getList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.userName))]),s("td",[t._v(t._s(a.department))]),s("td",[t._v(t._s(a.wagesYear))]),s("td",[t._v(t._s(a.wagesMonth))]),s("td",[t._v(t._s(a.requiredAttendanceDays))]),s("td",[t._v(t._s(a.actualAttendanceDays))]),s("td",[t._v(t._s(a.absenteeismTimes))]),s("td",[t._v(t._s(a.lateAndLeaveTimes))]),s("td",[t._v(t._s(a.byPieceCount))]),s("td",[t._v(t._s(a.byPieceMoney))]),s("td",[t._v(t._s(a.industrialWasteCount))]),s("td",[t._v(t._s(a.industrialWasteMoney))]),s("td",[t._v(t._s(a.oddJobCount))]),s("td",[t._v(t._s(a.oddJobMoney))]),s("td",[t._v(t._s(a.temporaryDispatchCount))]),s("td",[t._v(t._s(a.temporaryDispatchMoney))]),s("td",[t._v(t._s(a.minLiveSecurityFund))]),s("td",[t._v(t._s(a.lunchAllowanceMoney))]),s("td",[t._v(t._s(a.fullAttendanceMoney))]),s("td",[t._v(t._s(a.deductionPersonalIncomeTax))]),s("td",[t._v(t._s(a.deductPersonalInsuranceMoney))]),s("td",[t._v(t._s(a.commendationMoney))]),s("td",[t._v(t._s(a.absenteeismFine))]),s("td",[t._v(t._s(a.totalMoney))]),s("td",[t._v(t._s(a.totalTaxPayableMoney))]),s("td",[t._v(t._s(a.totalPayableMoney))]),s("td",[t._v(t._s(a.taxableWagesMoney))]),s("td",[t._v(t._s(a.overtimePayMoney))]),s("td",[t._v(t._s(a.otherSubsidiesMoney))]),s("td",[t._v(t._s(a.accruedPerformanceSalary))]),s("td",[t._v(t._s(a.netSalaryMoney))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(a.updateTime))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(a)}}},[t._v("编辑 | ")]),s("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(a)}}},[t._v("删除")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("姓名")]),s("th",[t._v("部门")]),s("th",[t._v("年")]),s("th",[t._v("月")]),s("th",[t._v("应出勤天数")]),s("th",[t._v("实出勤天数")]),s("th",[t._v("旷工次数")]),s("th",[t._v("迟到早退次数")]),s("th",[t._v("计件定额数量")]),s("th",[t._v("计件定额金额")]),s("th",[t._v("工废数量")]),s("th",[t._v("工废金额")]),s("th",[t._v("零工数量")]),s("th",[t._v("零工金额")]),s("th",[t._v("派工单数量")]),s("th",[t._v("派工单金额")]),s("th",[t._v("最底生活保障金")]),s("th",[t._v("午餐补贴")]),s("th",[t._v("全勤奖")]),s("th",[t._v("扣个人所得税")]),s("th",[t._v("扣个人保险")]),s("th",[t._v("嘉奖")]),s("th",[t._v("旷工罚款")]),s("th",[t._v("总计工资")]),s("th",[t._v("应纳税合计")]),s("th",[t._v("应发合计")]),s("th",[t._v("应纳税工资")]),s("th",[t._v("加班费")]),s("th",[t._v("其他补贴")]),s("th",[t._v("计提绩效工资")]),s("th",[t._v("实发工资")]),s("th",[t._v("创建时间")]),s("th",[t._v("更新时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"姓名"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"部门"},model:{value:t.form.department,callback:function(e){t.$set(t.form,"department",e)},expression:"form.department"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"计提绩效工资"},model:{value:t.form.accruedPerformanceSalary,callback:function(e){t.$set(t.form,"accruedPerformanceSalary",e)},expression:"form.accruedPerformanceSalary"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"派工单数量"},model:{value:t.form.temporaryDispatchCount,callback:function(e){t.$set(t.form,"temporaryDispatchCount",e)},expression:"form.temporaryDispatchCount"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"派工单金额"},model:{value:t.form.temporaryDispatchMoney,callback:function(e){t.$set(t.form,"temporaryDispatchMoney",e)},expression:"form.temporaryDispatchMoney"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"零工数量"},model:{value:t.form.oddJobCount,callback:function(e){t.$set(t.form,"oddJobCount",e)},expression:"form.oddJobCount"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"零工金额"},model:{value:t.form.oddJobMoney,callback:function(e){t.$set(t.form,"oddJobMoney",e)},expression:"form.oddJobMoney"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"工废数量"},model:{value:t.form.industrialWasteCount,callback:function(e){t.$set(t.form,"industrialWasteCount",e)},expression:"form.industrialWasteCount"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"工废金额"},model:{value:t.form.industrialWasteMoney,callback:function(e){t.$set(t.form,"industrialWasteMoney",e)},expression:"form.industrialWasteMoney"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"计件定额数量"},model:{value:t.form.byPieceCount,callback:function(e){t.$set(t.form,"byPieceCount",e)},expression:"form.byPieceCount"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"计件定额金额"},model:{value:t.form.byPieceMoney,callback:function(e){t.$set(t.form,"byPieceMoney",e)},expression:"form.byPieceMoney"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"应出勤天数"},model:{value:t.form.requiredAttendanceDays,callback:function(e){t.$set(t.form,"requiredAttendanceDays",e)},expression:"form.requiredAttendanceDays"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"实出勤天数"},model:{value:t.form.actualAttendanceDays,callback:function(e){t.$set(t.form,"actualAttendanceDays",e)},expression:"form.actualAttendanceDays"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"旷工次数"},model:{value:t.form.absenteeismTimes,callback:function(e){t.$set(t.form,"absenteeismTimes",e)},expression:"form.absenteeismTimes"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"旷工罚款"},model:{value:t.form.absenteeismFine,callback:function(e){t.$set(t.form,"absenteeismFine",e)},expression:"form.absenteeismFine"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"迟到早退次数"},model:{value:t.form.lateAndLeaveTimes,callback:function(e){t.$set(t.form,"lateAndLeaveTimes",e)},expression:"form.lateAndLeaveTimes"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"迟到早退罚款"},model:{value:t.form.lateAndLeaveFine,callback:function(e){t.$set(t.form,"lateAndLeaveFine",e)},expression:"form.lateAndLeaveFine"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"全勤奖"},model:{value:t.form.fullAttendanceMoney,callback:function(e){t.$set(t.form,"fullAttendanceMoney",e)},expression:"form.fullAttendanceMoney"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"午餐补贴"},model:{value:t.form.lunchAllowanceMoney,callback:function(e){t.$set(t.form,"lunchAllowanceMoney",e)},expression:"form.lunchAllowanceMoney"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"最底生活保障金"},model:{value:t.form.minLiveSecurityFund,callback:function(e){t.$set(t.form,"minLiveSecurityFund",e)},expression:"form.minLiveSecurityFund"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"加班费"},model:{value:t.form.overtimePayMoney,callback:function(e){t.$set(t.form,"overtimePayMoney",e)},expression:"form.overtimePayMoney"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"其他补贴"},model:{value:t.form.otherSubsidiesMoney,callback:function(e){t.$set(t.form,"otherSubsidiesMoney",e)},expression:"form.otherSubsidiesMoney"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"总计工资"},model:{value:t.form.totalMoney,callback:function(e){t.$set(t.form,"totalMoney",e)},expression:"form.totalMoney"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"扣个人保险"},model:{value:t.form.deductPersonalInsuranceMoney,callback:function(e){t.$set(t.form,"deductPersonalInsuranceMoney",e)},expression:"form.deductPersonalInsuranceMoney"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"扣个人所得税"},model:{value:t.form.deductionPersonalIncomeTax,callback:function(e){t.$set(t.form,"deductionPersonalIncomeTax",e)},expression:"form.deductionPersonalIncomeTax"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"应纳税工资"},model:{value:t.form.taxableWagesMoney,callback:function(e){t.$set(t.form,"taxableWagesMoney",e)},expression:"form.taxableWagesMoney"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"应纳税合计"},model:{value:t.form.totalTaxPayableMoney,callback:function(e){t.$set(t.form,"totalTaxPayableMoney",e)},expression:"form.totalTaxPayableMoney"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"应发合计"},model:{value:t.form.totalPayableMoney,callback:function(e){t.$set(t.form,"totalPayableMoney",e)},expression:"form.totalPayableMoney"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"嘉奖"},model:{value:t.form.commendationMoney,callback:function(e){t.$set(t.form,"commendationMoney",e)},expression:"form.commendationMoney"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"实发工资"},model:{value:t.form.netSalaryMoney,callback:function(e){t.$set(t.form,"netSalaryMoney",e)},expression:"form.netSalaryMoney"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)]),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e(),t.createDataLayer?s("layer",{attrs:{title:"生成工资 ",width:"30%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"flex"},[s("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("日期选择:")]),s("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",placeholder:"选择年月"},model:{value:t.createDate,callback:function(e){t.createDate=e},expression:"createDate"}})],1)]),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.createSave}},[t._v("保存")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:function(e){t.createDataLayer=!1}}},[t._v("关闭")])],1)]):t._e(),t.addDataLayer?s("layer",{attrs:{title:"计算工资 ",width:"30%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"flex"},[s("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("日期选择:")]),s("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",placeholder:"选择年月"},model:{value:t.addDate,callback:function(e){t.addDate=e},expression:"addDate"}})],1)]),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.addSave}},[t._v("保存")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:function(e){t.addDataLayer=!1}}},[t._v("关闭")])],1)]):t._e(),t.uploadFlag?s("layer",{attrs:{title:"导入",width:"50%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"on-success":t.uploadSuccess,limit:1,action:"/haolifa/pay-wages/import","on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!1}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"warning"},slot:"trigger"},[t._v("选取文件")])],1)],1),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.submitUpload}},[t._v("上传")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:function(e){t.uploadFlag=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(s("fc02"),s("9b68")),o={name:"jiaoxiaogongxu-list",components:{DataList:r["a"]},data:function(){return{filter:{absenteeismTimes:"",actualAttendanceDays:"",byPieceCount:"",byPieceMoney:"",department:"",endCreateTime:"",industrialWasteCount:"",industrialWasteMoney:"",lateAndLeaveTimes:"",oddJobCount:"",oddJobMoney:"",requiredAttendanceDays:"",startCreateTime:"",temporaryDispatchCount:"",temporaryDispatchMoney:"",userName:"",wagesMonth:"",wagesYear:""},layer:!1,loading:!1,form:{absenteeismFine:0,absenteeismTimes:0,accruedPerformanceSalary:0,actualAttendanceDays:0,byPieceCount:0,byPieceMoney:0,commendationMoney:0,deductPersonalInsuranceMoney:0,deductionPersonalIncomeTax:0,department:"",fullAttendanceMoney:0,id:"",industrialWasteCount:0,industrialWasteMoney:0,lateAndLeaveFine:0,lateAndLeaveTimes:0,lunchAllowanceMoney:0,minLiveSecurityFund:0,netSalaryMoney:0,oddJobCount:0,oddJobMoney:0,otherSubsidiesMoney:0,overtimePayMoney:0,remark:"",requiredAttendanceDays:0,serial:"",taxableWagesMoney:0,temporaryDispatchCount:0,temporaryDispatchMoney:0,totalMoney:0,totalPayableMoney:0,totalTaxPayableMoney:0,userName:""},addDataLayer:!1,createDataLayer:!1,addDate:"",createDate:"",fileList:[],uploadFlag:!1,yearArr:["2018","2019","2020","2021","2022","2023","2024","2025","2026","2027","2028"],monthList:[{value:"01",text:"1月"},{value:"02",text:"2月"},{value:"03",text:"3月"},{value:"04",text:"4月"},{value:"05",text:"5月"},{value:"06",text:"6月"},{value:"07",text:"7月"},{value:"08",text:"8月"},{value:"09",text:"9月"},{value:"10",text:"10月"},{value:"11",text:"11月"},{value:"12",text:"12月"}]}},mounted:function(){},methods:{flush:function(){this.filter={absenteeismTimes:"",actualAttendanceDays:"",byPieceCount:"",byPieceMoney:"",department:"",endCreateTime:"",industrialWasteCount:"",industrialWasteMoney:"",lateAndLeaveTimes:"",oddJobCount:"",oddJobMoney:"",requiredAttendanceDays:"",startCreateTime:"",temporaryDispatchCount:"",temporaryDispatchMoney:"",userName:"",wagesMonth:"",wagesYear:""},this.$refs.list.update(!0)},handleRemove:function(t,e){console.log(t,e)},upload:function(){this.fileList=[],this.uploadFlag=!0},submitUpload:function(){this.$refs.upload.submit()},uploadSuccess:function(t,e,s){"0000"===t.code?(this.$toast("上传成功"),this.uploadFlag=!1,this.$refs.list.update(!0),this.fileList=[]):this.$toast(t.message)},handlePreview:function(t){console.log(t)},edit:function(t){this.layer=!0,this.form.id=t.id,this.form.absenteeismTimes=t.absenteeismTimes,this.form.absenteeismFine=t.absenteeismFine,this.form.accruedPerformanceSalary=t.accruedPerformanceSalary,this.form.actualAttendanceDays=t.actualAttendanceDays,this.form.byPieceCount=t.byPieceCount,this.form.byPieceMoney=t.byPieceMoney,this.form.commendationMoney=t.commendationMoney,this.form.deductPersonalInsuranceMoney=t.deductPersonalInsuranceMoney,this.form.deductionPersonalIncomeTax=t.deductionPersonalIncomeTax,this.form.department=t.department,this.form.fullAttendanceMoney=t.fullAttendanceMoney,this.form.industrialWasteCount=t.industrialWasteCount,this.form.industrialWasteMoney=t.industrialWasteMoney,this.form.lateAndLeaveFine=t.lateAndLeaveFine,this.form.lateAndLeaveTimes=t.lateAndLeaveTimes,this.form.lunchAllowanceMoney=t.lunchAllowanceMoney,this.form.minLiveSecurityFund=t.minLiveSecurityFund,this.form.netSalaryMoney=t.netSalaryMoney,this.form.oddJobCount=t.oddJobCount,this.form.oddJobMoney=t.oddJobMoney,this.form.otherSubsidiesMoney=t.otherSubsidiesMoney,this.form.overtimePayMoney=t.overtimePayMoney,this.form.remark=t.remark,this.form.requiredAttendanceDays=t.requiredAttendanceDays,this.form.serial=t.serial,this.form.taxableWagesMoney=t.taxableWagesMoney,this.form.temporaryDispatchCount=t.temporaryDispatchCount,this.form.temporaryDispatchMoney=t.temporaryDispatchMoney,this.form.totalMoney=t.totalMoney,this.form.totalPayableMoney=t.totalPayableMoney,this.form.totalTaxPayableMoney=t.totalTaxPayableMoney,this.form.userName=t.userName},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下人员吗？<br><b>".concat(t.userName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/pay-wages/del/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},add:function(){this.layer=!0},save:function(){var t=this;if(this.form.userName.trim()){this.loading=!0;var e=this.form.id?"/haolifa/pay-wages/edit":"/haolifa/pay-wages/save";this.$http.post(e,this.form).then((function(e){t.close(),t.$toast("保存成功"),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.$toast(e.msg||e.message)}))}else this.$toast("姓名不能为空")},close:function(){this.layer=!1,this.form={absenteeismFine:0,absenteeismTimes:0,accruedPerformanceSalary:0,actualAttendanceDays:0,byPieceCount:0,byPieceMoney:0,commendationMoney:0,deductPersonalInsuranceMoney:0,deductionPersonalIncomeTax:0,department:"",fullAttendanceMoney:0,id:"",industrialWasteCount:0,industrialWasteMoney:0,lateAndLeaveFine:0,lateAndLeaveTimes:0,lunchAllowanceMoney:0,minLiveSecurityFund:0,netSalaryMoney:0,oddJobCount:0,oddJobMoney:0,otherSubsidiesMoney:0,overtimePayMoney:0,remark:"",requiredAttendanceDays:0,serial:"",taxableWagesMoney:0,temporaryDispatchCount:0,temporaryDispatchMoney:0,totalMoney:0,totalPayableMoney:0,totalTaxPayableMoney:0,userName:""}},addData:function(){this.addDataLayer=!0},createData:function(){this.createDataLayer=!0},addSave:function(){var t=this;if(this.addDate){this.loading=!0;var e=this.addDate.split("-");this.$http.post("/haolifa/pay-wages/calculateSalary",{year:e[0],month:e[1]}).then((function(e){t.addDate="",t.addDataLayer=!1,t.$toast("保存成功"),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.$toast(e.msg||e.message)}))}else this.$toast("请选择日期")},createSave:function(){var t=this;if(this.createDate){this.loading=!0;var e=this.createDate.split("-");this.$http.post("/haolifa/pay-wages/createWages",{year:e[0],month:e[1]}).then((function(e){t.createDate="",t.createDataLayer=!1,t.$toast("保存成功"),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.$toast(e.msg||e.message)}))}else this.$toast("请选择日期")}}},l=o,n=(s("3bf1"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},ab76:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-invoice-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.userName,expression:"filter.userName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.filter.userName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"userName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.department,expression:"filter.department"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"部门"},domProps:{value:t.filter.department},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"department",e.target.value)}}}),t._v("\n            年份选择：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.attendYear,expression:"filter.attendYear"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"attendYear",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},[s("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.yearArr,(function(e,a){return s("option",{key:a,domProps:{value:e}},[t._v(t._s(e))])}))],2),t._v("\n            月份选择：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.attendMonth,expression:"filter.attendMonth"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"attendMonth",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},[s("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.monthList,(function(e,a){return s("option",{key:a,domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2)]),s("div",{staticClass:"flex-item"}),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.upload}},[t._v("导入")]),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.exportOut}},[t._v("导出")]),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.build}},[t._v("生成考勤")])],1),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/pay-work-attendance/getList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.userName))]),s("td",[t._v(t._s(a.department))]),s("td",[t._v(t._s(a.attendanceDays))]),s("td",[t._v(t._s(a.middleDays))]),s("td",[t._v(t._s(a.nightDays))]),s("td",[t._v(t._s(a.workOvertimeDays))]),s("td",[t._v(t._s(a.absenteeismTimes))]),s("td",[t._v(t._s(a.businessTravelDays))]),s("td",[t._v(t._s(a.compassionateLeaveDays))]),s("td",[t._v(t._s(a.lateTimes))]),s("td",[t._v(t._s(a.leaveEarlyTimes))]),s("td",[t._v(t._s(a.lateAndLeaveTimes))]),s("td",[t._v(t._s(a.sickLeaveDays))]),s("td",[t._v(t._s(a.attendYear))]),s("td",[t._v(t._s(a.attendMonth))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(a)}}},[t._v("编辑 | ")]),s("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(a)}}},[t._v("删除")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("姓名")]),s("th",[t._v("部门")]),s("th",[t._v("出勤天数")]),s("th",[t._v("中班天数")]),s("th",[t._v("夜班天数")]),s("th",[t._v("加班天数")]),s("th",[t._v("旷工次数")]),s("th",[t._v("出差天数")]),s("th",[t._v("事假天数")]),s("th",[t._v("迟到次数")]),s("th",[t._v("早退次数")]),s("th",[t._v("迟到早退次数")]),s("th",[t._v("病假天数")]),s("th",[t._v("年")]),s("th",[t._v("月")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"姓名"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"部门"},model:{value:t.form.department,callback:function(e){t.$set(t.form,"department",e)},expression:"form.department"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"出勤天数"},model:{value:t.form.attendanceDays,callback:function(e){t.$set(t.form,"attendanceDays",e)},expression:"form.attendanceDays"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"中班天数"},model:{value:t.form.middleDays,callback:function(e){t.$set(t.form,"middleDays",e)},expression:"form.middleDays"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"夜班天数"},model:{value:t.form.nightDays,callback:function(e){t.$set(t.form,"nightDays",e)},expression:"form.nightDays"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"加班天数"},model:{value:t.form.workOvertimeDays,callback:function(e){t.$set(t.form,"workOvertimeDays",e)},expression:"form.workOvertimeDays"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"旷工天数"},model:{value:t.form.absenteeismTimes,callback:function(e){t.$set(t.form,"absenteeismTimes",e)},expression:"form.absenteeismTimes"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"出差天数"},model:{value:t.form.businessTravelDays,callback:function(e){t.$set(t.form,"businessTravelDays",e)},expression:"form.businessTravelDays"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"事假天数"},model:{value:t.form.compassionateLeaveDays,callback:function(e){t.$set(t.form,"compassionateLeaveDays",e)},expression:"form.compassionateLeaveDays"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"迟到次数"},model:{value:t.form.lateTimes,callback:function(e){t.$set(t.form,"lateTimes",e)},expression:"form.lateTimes"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"早退次数"},model:{value:t.form.leaveEarlyTimes,callback:function(e){t.$set(t.form,"leaveEarlyTimes",e)},expression:"form.leaveEarlyTimes"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"迟到早退次数"},model:{value:t.form.lateAndLeaveTimes,callback:function(e){t.$set(t.form,"lateAndLeaveTimes",e)},expression:"form.lateAndLeaveTimes"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"病假天数"},model:{value:t.form.sickLeaveDays,callback:function(e){t.$set(t.form,"sickLeaveDays",e)},expression:"form.sickLeaveDays"}})],1),s("div",{staticClass:"flex"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.yearList,label:"年份"},model:{value:t.form.attendYear,callback:function(e){t.$set(t.form,"attendYear",e)},expression:"form.attendYear"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.monthList,label:"月份"},model:{value:t.form.attendMonth,callback:function(e){t.$set(t.form,"attendMonth",e)},expression:"form.attendMonth"}})],1)]),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e(),t.uploadFlag?s("layer",{attrs:{title:"导入",width:"50%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"on-success":t.uploadSuccess,limit:1,action:"/haolifa/pay-work-attendance/import","on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!1}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"warning"},slot:"trigger"},[t._v("选取文件")])],1)],1),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.submitUpload}},[t._v("上传")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:function(e){t.uploadFlag=!1}}},[t._v("关闭")])],1)]):t._e(),t.exportFlag?s("layer",{attrs:{title:"导出",width:"30%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px","min-height":"380px"}},[s("div",{staticClass:"flex ml-20 mr-20"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.yearList,label:"年份"},model:{value:t.exportForm.attendYear,callback:function(e){t.$set(t.exportForm,"attendYear",e)},expression:"exportForm.attendYear"}})],1),s("div",{staticClass:"flex ml-20 mr-20"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.monthList,label:"月份"},model:{value:t.exportForm.attendMonth,callback:function(e){t.$set(t.exportForm,"attendMonth",e)},expression:"exportForm.attendMonth"}})],1)]),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:""},on:{click:function(e){t.exportFlag=!1}}},[t._v("取消")]),s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.downloadOut()}}},[t._v("确定")])],1)]):t._e(),t.buildFlag?s("layer",{attrs:{title:"考勤生成",width:"30%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px","min-height":"380px"}},[s("div",{staticClass:"flex ml-20 mr-20"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.yearList,label:"年份"},model:{value:t.buildForm.attendYear,callback:function(e){t.$set(t.buildForm,"attendYear",e)},expression:"buildForm.attendYear"}})],1),s("div",{staticClass:"flex ml-20 mr-20"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.monthList,label:"月份"},model:{value:t.buildForm.attendMonth,callback:function(e){t.$set(t.buildForm,"attendMonth",e)},expression:"buildForm.attendMonth"}})],1)]),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:""},on:{click:function(e){t.buildFlag=!1}}},[t._v("取消")]),s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.buildSave()}}},[t._v("确定")])],1)]):t._e()],1)},i=[],r=s("9b68"),o={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{attendYear:(new Date).getFullYear(),attendMonth:(new Date).getMonth()+1>9?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1),absenteeismTimes:0,attendanceDays:0,businessTravelDays:0,compassionateLeaveDays:0,createUser:"",department:"",endCreateTime:"",lateAndLeaveTimes:0,lateTimes:0,leaveEarlyTimes:0,middleDays:0,nightDays:0,serial:0,sickLeaveDays:0,startCreateTime:"",userName:"",workOvertimeDays:0},layer:!1,exportFlag:!1,buildFlag:!1,exportForm:{attendYear:"",attendMonth:""},buildForm:{attendYear:"",attendMonth:""},form:{attendYear:"",attendMonth:"",absenteeismTimes:"",attendanceDays:"",businessTravelDays:"",compassionateLeaveDays:"",createUser:"",department:"",endCreateTime:"",id:"",lateAndLeaveTimes:"",lateTimes:"",leaveEarlyTimes:"",middleDays:"",nightDays:"",pageNum:"",pageSize:"",remark:"",serial:"",sickLeaveDays:"",startCreateTime:"",userName:"",workOvertimeDays:""},loading:!1,yearArr:["2018","2019","2020","2021","2022","2023","2024","2025","2026","2027","2028"],monthList:[{value:"01",text:"1月"},{value:"02",text:"2月"},{value:"03",text:"3月"},{value:"04",text:"4月"},{value:"05",text:"5月"},{value:"06",text:"6月"},{value:"07",text:"7月"},{value:"08",text:"8月"},{value:"09",text:"9月"},{value:"10",text:"10月"},{value:"11",text:"11月"},{value:"12",text:"12月"}],yearList:[{value:"2018",text:"2018"},{value:"2019",text:"2019"},{value:"2020",text:"2020"},{value:"2021",text:"2021"},{value:"2022",text:"2022"},{value:"2023",text:"2023"},{value:"2024",text:"2024"},{value:"2025",text:"2025"},{value:"2026",text:"2026"},{value:"2027",text:"2027"},{value:"2028",text:"2028"},{value:"2029",text:"2029"}],uploadFlag:!1,fileList:[]}},mounted:function(){},methods:{flush:function(){this.filter={attendYear:(new Date).getFullYear(),attendMonth:(new Date).getMonth()+1>9?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1),absenteeismTimes:0,attendanceDays:0,businessTravelDays:0,compassionateLeaveDays:0,createUser:"",department:"",endCreateTime:"",lateAndLeaveTimes:0,lateTimes:0,leaveEarlyTimes:0,middleDays:0,nightDays:0,serial:0,sickLeaveDays:0,startCreateTime:"",userName:"",workOvertimeDays:0},this.$refs.list.update(!0)},edit:function(t){this.layer=!0,this.form.id=t.id,this.form.userName=t.userName,this.form.department=t.department,this.form.middleDays=t.middleDays,this.form.nightDays=t.nightDays,this.form.attendanceDays=t.attendanceDays,this.form.workOvertimeDays=t.workOvertimeDays,this.form.absenteeismTimes=t.absenteeismTimes,this.form.businessTravelDays=t.businessTravelDays,this.form.compassionateLeaveDays=t.compassionateLeaveDays,this.form.lateTimes=t.lateTimes,this.form.leaveEarlyTimes=t.leaveEarlyTimes,this.form.lateAndLeaveTimes=t.lateAndLeaveTimes,this.form.sickLeaveDays=t.sickLeaveDays,this.form.attendYear=t.attendYear,this.form.attendMonth=t.attendMonth},build:function(){this.buildFlag=!0},exportOut:function(){this.exportFlag=!0},downloadOut:function(){if(this.exportForm.attendYear&&this.exportForm.attendMonth){var t=document.createElement("a");t.setAttribute("download",""),t.setAttribute("href","/haolifa/pay-work-attendance/export?attendMonth=".concat(this.exportForm.attendMonth,"&attendYear=").concat(this.exportForm.attendYear)),t.click(),this.exportFlag=!1}else this.$toast("请选择年月")},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下考勤人员吗？<br><b>".concat(t.userName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/pay-work-attendance/del/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},add:function(){this.layer=!0},handleRemove:function(t,e){console.log(t,e)},upload:function(){this.fileList=[],this.uploadFlag=!0},submitUpload:function(){this.$refs.upload.submit()},uploadSuccess:function(t,e,s){"0000"===t.code?(this.$toast("上传成功"),this.uploadFlag=!1,this.$refs.list.update(!0),this.fileList=[]):this.$toast(t.message)},handlePreview:function(t){console.log(t)},buildSave:function(){var t=this;this.buildForm.attendYear&&this.buildForm.attendMonth?this.$http.get("/haolifa/pay-work-attendance/createAttendance?attendYear="+this.buildForm.attendYear+"&attendMonth="+this.buildForm.attendMonth).then((function(e){t.$toast("生成成功"),t.buildFlag=!1,t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.$toast(e.msg||e.message)})):this.$toast("请选择年月")},save:function(){var t=this;this.loading=!0;var e=this.form.id?"/haolifa/pay-work-attendance/edit":"/haolifa/pay-work-attendance/save";this.$http.post(e,this.form).then((function(e){t.layer=!1,t.$toast("保存成功"),t.close(),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.$toast(e.msg||e.message)}))},close:function(){this.layer=!1,this.form={absenteeismTimes:"",attendanceDays:"",businessTravelDays:"",compassionateLeaveDays:"",createUser:"",department:"",endCreateTime:"",id:"",lateAndLeaveTimes:"",lateTimes:"",leaveEarlyTimes:"",middleDays:"",nightDays:"",pageNum:"",pageSize:"",remark:"",serial:"",sickLeaveDays:"",startCreateTime:"",userName:"",workOvertimeDays:""}}}},l=o,n=(s("a5aa"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},b316:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"material-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.inspectNo,expression:"filter.inspectNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"送检单号"},domProps:{value:t.filter.inspectNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"inspectNo",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.purchaseOrderNo,expression:"filter.purchaseOrderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"采购合同号"},domProps:{value:t.filter.purchaseOrderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"purchaseOrderNo",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.batchNumber,expression:"filter.batchNumber"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"批次号"},domProps:{value:t.filter.batchNumber},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"batchNumber",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供应商名称"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),t._v("\n            质检状态:\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},t._l(t.statusArr,(function(e){return s("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])})),0),s("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])])]),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",staticClass:"f-14",attrs:{"page-size":15,param:t.filter,url:"/haolifa/material-inspect/purchase-list/1",method:"get"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.inspectNo))]),s("td",[t._v(t._s(a.purchaseNo))]),s("td",[t._v(t._s(a.batchNumber))]),s("td",[t._v(t._s(a.totalCount))]),s("td",[t._v(t._s(a.qualifiedNumber))]),s("td",[t._v(t._s(a.arrivalTime))]),s("td",[t._v(t._s(a.supplierName))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(t.statusList[a.status].name))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.info(a)}}},[t._v("查看")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("送检单号")]),s("th",[t._v("采购合同号")]),s("th",[t._v("批次号")]),s("th",[t._v("送检总数")]),s("th",[t._v("检验合格数量")]),s("th",[t._v("到货日期")]),s("th",[t._v("供应商名称")]),s("th",[t._v("发起时间")]),s("th",[t._v("状态")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.inspectHistory.completeLayer?s("layer",{attrs:{title:"质检记录",width:"650px"}},[s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"采购合同号"},model:{value:t.inspectHistory.purchaseNo,callback:function(e){t.$set(t.inspectHistory,"purchaseNo",e)},expression:"inspectHistory.purchaseNo"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"批次号"},model:{value:t.inspectHistory.batchNumber,callback:function(e){t.$set(t.inspectHistory,"batchNumber",e)},expression:"inspectHistory.batchNumber"}})],1),s("div",{staticClass:"flex mt-15"},[s("input-box",{staticClass:"mr-20 ml-20 mt-15",attrs:{label:"送检单号"},model:{value:t.inspectHistory.inspectNo,callback:function(e){t.$set(t.inspectHistory,"inspectNo",e)},expression:"inspectHistory.inspectNo"}}),s("select-box",{staticClass:"mt-15",attrs:{list:t.inspectHistory.selectMaterialNo,label:"物料图号"},on:{change:function(e){return t.changeMaterialNo()}},model:{value:t.inspectHistory.materialGraphNo,callback:function(e){t.$set(t.inspectHistory,"materialGraphNo",e)},expression:"inspectHistory.materialGraphNo"}}),s("input-box",{staticClass:"mr-20 mt-15",attrs:{label:"物料名称"},model:{value:t.inspectHistory.materialName,callback:function(e){t.$set(t.inspectHistory,"materialName",e)},expression:"inspectHistory.materialName"}})],1),s("div",{staticClass:"flex mt-15"},[s("input-box",{staticClass:"flex-item mr-20 ml-20 mt-15",attrs:{label:"检测数量"},model:{value:t.inspectHistory.testNumber,callback:function(e){t.$set(t.inspectHistory,"testNumber",e)},expression:"inspectHistory.testNumber"}}),s("input-box",{staticClass:"flex-item mr-20 mt-15",attrs:{label:"不合格数量"},model:{value:t.inspectHistory.unqualifiedNumber,callback:function(e){t.$set(t.inspectHistory,"unqualifiedNumber",e)},expression:"inspectHistory.unqualifiedNumber"}}),s("input-box",{staticClass:"flex-item mr-20 mt-15",attrs:{label:"合格数量"},model:{value:t.inspectHistory.qualifiedNumber,callback:function(e){t.$set(t.inspectHistory,"qualifiedNumber",e)},expression:"inspectHistory.qualifiedNumber"}})],1),s("div",{staticClass:"flex mt-15"},[s("input-box",{staticClass:"flex-item mr-20 ml-20 mt-15",attrs:{label:"处理意见"},model:{value:t.inspectHistory.handlingSuggestion,callback:function(e){t.$set(t.inspectHistory,"handlingSuggestion",e)},expression:"inspectHistory.handlingSuggestion"}}),s("input-box",{staticClass:"flex-item mr-20 mt-15",attrs:{label:"不合格现象描述"},model:{value:t.inspectHistory.remark,callback:function(e){t.$set(t.inspectHistory,"remark",e)},expression:"inspectHistory.remark"}})],1),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:""},on:{click:function(e){t.inspectHistory.completeLayer=!1}}},[t._v("取消")]),s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?s("layer",{attrs:{title:"详情",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"form-content page-supplier-info"},[s("table",{staticClass:"f-14"},[s("tr",[s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"11"}},[t._v("零件送检单")])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("送检单号："+t._s(t.inspect.inspectNo))]),s("td",{attrs:{colspan:"6"}},[t._v("发起日期："+t._s(t.inspect.createTime))])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("采购合同号："+t._s(t.inspect.purchaseNo))]),s("td",{attrs:{colspan:"6"}},[t._v("批次号："+t._s(t.inspect.batchNumber))])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("供应商："+t._s(t.inspect.supplierName))]),s("td",{attrs:{colspan:"6"}},[t._v("到货日期："+t._s(t.inspect.arrivalTime))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("合同编号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质与标准要求")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购数")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("送货数")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("不合格数量")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.items,(function(e,a){return s("tr",{key:a},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(a+1))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.requirements))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.deliveryNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unqualifiedNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])}))],2)]),t.resFileList.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"left","line-height":"24px"}},[t._v("质量保证书")])]),s("div",{staticStyle:{"margin-left":"20px","margin-top":"5px"}},[s("table",{staticClass:"data-table"},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("文件名称")]),s("th",[t._v("下载地址")])]),t._l(t.resFileList,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(a))]),s("td",[t._v(t._s(e.fileName))]),s("td",[s("a",{staticClass:"fixed-length",attrs:{href:e.fileUrl,title:e.fileUrl}},[t._v(t._s(e.fileUrl))])])])}))],2)])]):t._e(),t.inList.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("质检记录")])]),s("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[s("table",{staticClass:"data-table"},[s("tr",{staticStyle:{display:"none"}},[s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"12%"}})]),s("tr",[s("th",[t._v("质检单号")]),s("th",[t._v("类别")]),s("th",[t._v("物料名称")]),s("th",[t._v("物料图号")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("附件")]),s("th",[t._v("处理意见")]),s("th",[t._v("不合格现象描述")])]),t._l(t.inList,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.inspectNo))]),s("td",[t._v(t._s(1==e.type?"采购零件":"机加工零件"))]),s("td",[t._v(t._s(e.materialGraphName))]),s("td",[t._v(t._s(e.materialGraphNo))]),s("td",[t._v(t._s(e.testNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",t._l(e.accessoryList,(function(e,a){return s("div",{key:a},[s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v(t._s(e.fileName))])])})),0),s("td",[t._v(t._s(e.handlingSuggestion))]),s("td",[t._v(t._s(e.reasonArr?e.reasonArr.toString():""))])])}))],2)])]):t._e()]),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(s("1bc78"),s("9b68")),o={name:"material-list",components:{DataList:r["a"]},data:function(){return{inspectHistory:{completeLayer:!1,selectMaterialNo:[],selectMaterialName:[],handlingSuggestion:"",inspectNo:"",materialName:"",materialGraphNo:"",qualifiedNumber:0,remark:"",testNumber:0,unqualifiedNumber:0,batchNumber:"",purchaseNo:"",supplierName:"",supplierNo:""},filter:{type:0,inspectNo:"",purchaseOrderNo:"",batchNumber:"",supplierName:"",status:0},statusList:[{status:0,name:"全部"},{status:1,name:"未提交"},{status:2,name:"质检中"},{status:3,name:"质检完成"},{status:4,name:"入库中"},{status:5,name:"入库完成"}],layer:!1,inspect:{id:0,inspectNo:""},items:[],resFileList:[],inList:[],statusArr:[{status:0,name:"全部"},{status:2,name:"质检中"},{status:3,name:"质检完成"}]}},methods:{flush:function(){this.filter={type:0,inspectNo:"",purchaseOrderNo:"",batchNumber:"",supplierName:"",status:0},this.$refs.list.update(!0)},changeMaterialNo:function(){var t=this;this.inspectHistory.selectMaterialNo.forEach((function(e){console.log("当前值",e),console.log("change值",t.inspectHistory.materialGraphNo),e.value==t.inspectHistory.materialGraphNo&&(t.inspectHistory.materialName=e.materialName)}))},complete:function(){var t=this,e={handlingSuggestion:this.inspectHistory.handlingSuggestion,inspectNo:this.inspectHistory.inspectNo,materialGraphName:this.inspectHistory.materialName,materialGraphNo:this.inspectHistory.materialGraphNo,qualifiedNumber:this.inspectHistory.qualifiedNumber,remark:this.inspectHistory.remark,testNumber:this.inspectHistory.testNumber,unqualifiedNumber:this.inspectHistory.unqualifiedNumber,type:1,batchNumber:this.inspectHistory.batchNumber,purchaseNo:this.inspectHistory.purchaseNo,supplierName:this.inspectHistory.supplierName,supplierNo:this.inspectHistory.supplierNo};this.$http.post("/haolifa/material-inspect/history/save",e).then((function(e){t.$toast("添加成功"),t.$refs.list.update(!0),t.inspectHistory.completeLayer=!1})).catch((function(e){t.$toast(e.msg||e.message)}))},commit:function(t){var e=this;this.$http.post("/haolifa/material-inspect/updateStatus/".concat(t,"?status=3")).then((function(t){e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))},info:function(t){this.layer=!0,this.inspect.id=t.id,this.inspect.inspectNo=t.inspectNo,this.resFileList=[],this.getInfo(),this.getInspectHistory()},addInspectHistory:function(t){var e=this;this.inspectHistory.batchNumber=t.batchNumber,this.inspectHistory.purchaseNo=t.purchaseNo,this.inspectHistory.inspectNo=t.inspectNo,this.inspectHistory.supplierName=t.supplierName,this.inspectHistory.supplierNo=t.supplierNo;var s=t.id;this.$http.get("/haolifa/material-inspect/info/".concat(s)).then((function(t){e.inspectHistory.completeLayer=!0;var s=t.items;e.inspectHistory.selectMaterialNo=s.map((function(t){return{value:t.materialGraphNo,text:t.materialGraphNo,materialName:t.materialName}})),e.inspectHistory.materialGraphNo=e.inspectHistory.selectMaterialNo[0].value,e.inspectHistory.materialName=e.inspectHistory.selectMaterialNo[0].materialName})).catch((function(t){e.$toast(t.msg||t.message)}))},getInfo:function(){var t=this;this.$http.get("/haolifa/material-inspect/info/".concat(this.inspect.id)).then((function(e){t.inspect=e.inspect,t.items=e.items,t.inspect.createTime=e.inspect.createTime.substring(0,10),t.inspect.arrivalTime=e.inspect.arrivalTime.substring(0,10),t.inspect.updateTime=e.inspect.updateTime.substring(0,10),""!=e.inspect.blueprints&&null!=e.inspect.blueprints&&(t.resFileList=JSON.parse(e.inspect.blueprints))})).catch((function(e){t.$toast(e.msg||e.message)}))},getInspectHistory:function(){var t=this;this.$http.get("/haolifa/material-inspect/history/list/".concat(this.inspect.inspectNo)).then((function(e){t.inList=e,t.inList.map((function(t){if(t.reasonList)return t.reasonArr=t.reasonList.map((function(t){if(t.number)return"数量:"+t.number+",原因:"+t.reason+";"}))}))})).catch((function(e){t.$toast(e.msg||e.message)}))}}},l=o,n=(s("8bb6"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},b4ab:function(t,e,s){"use strict";s("c2d4")},bafd:function(t,e,s){"use strict";s("d732")},bfd6:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-invoice-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),t._m(0),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/pay-user/getScoreUserList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.userName))]),s("td",[t._v(t._s(a.postName))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(a.updateTime))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(a)}}},[t._v("打分")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("姓名")]),s("th",[t._v("岗位名称")]),s("th",[t._v("创建时间")]),s("th",[t._v("更新时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:"打分 ",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"flex"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,list:t.userList,label:"姓名"},model:{value:t.form.userId,callback:function(e){t.$set(t.form,"userId",e)},expression:"form.userId"}})],1),s("div",{staticClass:"flex"},[s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.assessmentList,label:"考核内容"},on:{change:t.assessmentChange},model:{value:t.form.assessmentId,callback:function(e){t.$set(t.form,"assessmentId",e)},expression:"form.assessmentId"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"考核标准"},model:{value:t.info.standard,callback:function(e){t.$set(t.info,"standard",e)},expression:"info.standard"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"对应分值"},model:{value:t.info.score,callback:function(e){t.$set(t.info,"score",e)},expression:"info.score"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"分数"},model:{value:t.form.score,callback:function(e){t.$set(t.form,"score",e)},expression:"form.score"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"说明"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)]),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-item"})])}],r=s("9b68"),o={name:"dafen-list",components:{DataList:r["a"]},data:function(){return{filter:{address:"",basePay:"",birthday:"",bloodType:"",createTime:"",createUser:"",education:"",endCreateTime:"",endGraduationTime:"",endUpdateTime:"",endWorkingTime:"",graduationTime:"",health:"",idCard:"",insuranceBase:"",mail:"",major:"",marryStatus:"",meritPay:"",nation:"",nativePlace:"",onceUserName:"",phone:"",politicalOutlook:"",postId:"",postName:"",registered:"",sex:"",startCreateTime:"",startGraduationTime:"",startUpdateTime:"",startWorkingTime:"",superiorId:"",teamId:"",teamName:"",universityFrom:"",updateTime:"",updateUser:"",userName:"",userType:"",workingTime:""},layer:!1,form:{assessmentId:"",id:"",score:"",userId:"",userName:"",remark:""},banList:[],postList:[],deptList:[],userArr:[],userList:[],assessmentList:[],loading:!1,info:{}}},mounted:function(){this.getAllUsers()},methods:{flush:function(){this.$refs.list.update(!0)},edit:function(t){var e=this;this.layer=!0,this.form.userId=t.id,this.form.userName=t.userName,this.assessmentList=[],this.$http.post("/haolifa/pay-assessment-quota/getAllList",{departId:t.postId,departName:"",pageNum:0,pageSize:0,projectName:""}).then((function(t){t.length?t.map((function(t){e.assessmentList.push({text:t.quotaContent,value:t.id,score:t.score,standard:t.standard})})):e.$toast("未查到该人员岗位考核数据")})).catch((function(t){e.$toast(t.msg||t.message)}))},assessmentChange:function(){var t=this;this.info={},this.form.assessmentId&&this.assessmentList.map((function(e){e.value==t.form.assessmentId&&(t.info=e)}))},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下人员吗？<br><b>".concat(t.userName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/pay-assessment-score/del/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},add:function(){this.layer=!0},save:function(){var t=this;this.loading=!0;var e=this.form.id?"/haolifa/pay-assessment-score/edit":"/haolifa/pay-assessment-score/save";this.$http.post(e,this.form).then((function(e){t.layer=!1,t.$toast("保存成功"),t.close(),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))},close:function(){this.layer=!1,this.form={assessmentId:"",id:"",score:"",userId:"",userName:"",remark:""}},getAllUsers:function(){var t=this;this.$http.post("/haolifa/pay-user/getAllList",{departName:"",id:"",pageNum:0,pageSize:"",postId:"",postName:"",sex:"",superiorId:"",teamId:"",teamName:"",userName:"",userType:""}).then((function(e){e.map((function(e){t.userList.push({text:e.userName,value:e.id})}))})).catch((function(e){t.$toast(e.msg||e.message)}))}}},l=o,n=(s("4164"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},c149:function(t,e,s){},c21a:function(t,e,s){},c2ba:function(t,e,s){"use strict";s("1d84")},c2d4:function(t,e,s){},c5c1:function(t,e,s){},c6d3:function(t,e,s){},c8ea:function(t,e,s){"use strict";s("2a65")},ca15:function(t,e,s){},ca51:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"flex-v-center tool-bar"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.entrustNo,expression:"filter.entrustNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"机加工单号"},domProps:{value:t.filter.entrustNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"entrustNo",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.processedGraphNo,expression:"filter.processedGraphNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"加工后图号"},domProps:{value:t.filter.processedGraphNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"processedGraphNo",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.batchNumber,expression:"filter.batchNumber"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"批次号"},domProps:{value:t.filter.batchNumber},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"batchNumber",e.target.value)}}}),t._v("\n            状态：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},t._l(t.statusList,(function(e){return s("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])})),0),s("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","margin-right":"10px","pointer-events":"none"}},[t._v("arrow_drop_down")]),t._v("\n            质检状态：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.inspectStatus,expression:"filter.inspectStatus"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"inspectStatus",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},t._l(t.inspectStatusArr,(function(e){return s("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])})),0),s("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])])]),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/entrust/list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.entrustNo))]),s("td",[t._v(t._s(a.purchaseNo))]),s("td",[t._v(t._s(a.batchNumber))]),s("td",[t._v(t._s(a.materialGraphName))]),s("td",[t._v(t._s(a.materialGraphNo))]),s("td",[t._v(t._s(a.processedGraphNo))]),s("td",[t._v(t._s(a.number))]),s("td",[t._v(t._s(a.qualifiedNumber))]),s("td",[t._v(t._s(a.unqualifiedNumber))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(t.rowStatusList[a.status-3].name))]),s("td",[t._v(t._s(t.inspectStatusList[a.inspectStatus]))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.info(a)}}},[t._v("查看")]),2!=a.inspectStatus?s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.addInspectHistory(a)}}},[t._v("添加质检记录")]):t._e(),2!=a.inspectStatus?s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.updateEntrustStatus(a)}}},[t._v("质检完成")]):t._e()])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("机加工单号")]),s("th",[t._v("采购合同号")]),s("th",[t._v("批次号")]),s("th",[t._v("物料名称")]),s("th",[t._v("物料图号")]),s("th",[t._v("加工后图号")]),s("th",[t._v("数量")]),s("th",[t._v("检验合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("发起时间")]),s("th",[t._v("状态")]),s("th",[t._v("质检状态")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?s("layer",{attrs:{title:"添加质检记录",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"form-content metalwork-info"},[s("table",{staticClass:"f-14"},[s("tr",[s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("机加工单")])]),s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("机加工单号："+t._s(t.entrust.entrustNo))]),s("td",{attrs:{colspan:"3"}},[t._v("发起日期："+t._s(t.entrust.createTime))])]),s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("采购合同号："+t._s(t.entrust.purchaseNo))]),s("td",{attrs:{colspan:"3"}},[t._v("批次号："+t._s(t.entrust.batchNumber))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购合同编号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("批次号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("加工后图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")])]),s("tr",[s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.purchaseNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.batchNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.materialGraphName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.materialGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.processedGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.number))])])])]),s("div",{staticClass:"form-content metalwork-info"},[s("table",{staticClass:"data-table"},[s("tr",[s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"10"}},[t._v("已添加质检记录")])]),s("tr",[s("th",[t._v("质检单号")]),s("th",[t._v("类别")]),s("th",[t._v("物料名称")]),s("th",[t._v("加工后图号")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("处理意见")]),s("th",[t._v("不合格现象描述")]),s("th",[t._v("附件")])]),t._l(t.inspectHistory,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.inspectNo))]),s("td",[t._v(t._s(1==e.type?"采购零件":"机加工零件"))]),s("td",[t._v(t._s(e.materialGraphName))]),s("td",[t._v(t._s(e.materialGraphNo))]),s("td",[t._v(t._s(e.testNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",[t._v(t._s(e.handlingSuggestion))]),s("td",[t._v(t._s(e.reasonArr.toString()))]),s("td",t._l(e.accessoryList,(function(e,a){return s("div",{key:a},[s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v(t._s(e.fileName))])])})),0)])}))],2)]),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{disabled:!0,label:"采购合同号"},model:{value:t.inspectHistoryAdd.purchaseNo,callback:function(e){t.$set(t.inspectHistoryAdd,"purchaseNo",e)},expression:"inspectHistoryAdd.purchaseNo"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"批次号"},model:{value:t.inspectHistoryAdd.batchNumber,callback:function(e){t.$set(t.inspectHistoryAdd,"batchNumber",e)},expression:"inspectHistoryAdd.batchNumber"}})],1),s("div",{staticClass:"flex mt-15"},[s("input-box",{staticClass:"flex-item mt-15 ml-20",attrs:{disabled:!0,label:"物料图号"},model:{value:t.inspectHistoryAdd.materialGraphNo,callback:function(e){t.$set(t.inspectHistoryAdd,"materialGraphNo",e)},expression:"inspectHistoryAdd.materialGraphNo"}}),s("input-box",{staticClass:"flex-item mr-20 mt-15 ml-20",attrs:{disabled:!0,label:"物料名称"},model:{value:t.inspectHistoryAdd.materialName,callback:function(e){t.$set(t.inspectHistoryAdd,"materialName",e)},expression:"inspectHistoryAdd.materialName"}})],1),s("div",{staticClass:"flex mt-15"},[s("input-box",{staticClass:"flex-item mr-20 ml-20 mt-15",attrs:{label:"检测数量"},model:{value:t.inspectHistoryAdd.testNumber,callback:function(e){t.$set(t.inspectHistoryAdd,"testNumber",e)},expression:"inspectHistoryAdd.testNumber"}}),s("input-box",{staticClass:"flex-item mr-20 mt-15",attrs:{label:"合格数量"},model:{value:t.inspectHistoryAdd.qualifiedNumber,callback:function(e){t.$set(t.inspectHistoryAdd,"qualifiedNumber",e)},expression:"inspectHistoryAdd.qualifiedNumber"}}),s("input-box",{staticClass:"flex-item mr-20 ml-20 mt-15",attrs:{label:"处理意见"},model:{value:t.inspectHistoryAdd.handlingSuggestion,callback:function(e){t.$set(t.inspectHistoryAdd,"handlingSuggestion",e)},expression:"inspectHistoryAdd.handlingSuggestion"}})],1),t._l(t.inspectHistoryAdd.reasonList,(function(e,a){return s("div",{key:a,staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"不合格数量"},model:{value:e.number,callback:function(s){t.$set(e,"number",s)},expression:"item.number"}}),s("input-box",{staticClass:"flex-item",attrs:{label:"不合格现象描述"},model:{value:e.reason,callback:function(s){t.$set(e,"reason",s)},expression:"item.reason"}}),t.inspectHistoryAdd.reasonList.length>1?s("icon-btn",{attrs:{small:""},on:{click:function(e){return t.removeReason(a)}}},[t._v("close")]):t._e()],1)})),s("div",{staticStyle:{"padding-left":"100px"}},[s("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"更多不合格数量及因",expression:"'更多不合格数量及因'"}],attrs:{bg:"",small:""},on:{click:t.addReason}},[t._v("add")])],1),s("div",{staticClass:"flex"},[s("upload-box",{staticClass:"ml-20 mb-10",staticStyle:{width:"50%"},attrs:{btnText:"上传附件",fileList:t.fileList,onchange:t.uploadFile,multiple:!0,onremove:t.removeFile}})],1),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),s("el-button",{attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.complete}},[t._v("保存")])],1)],2)]):t._e(),t.layer?s("layer",{attrs:{title:"详情",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"form-content metalwork-info"},[s("table",{staticClass:"f-14"},[s("tr",[s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}}),s("td",{staticStyle:{width:"20%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("机加工单")])]),s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("机加工单号："+t._s(t.entrust.entrustNo))]),s("td",{attrs:{colspan:"3"}},[t._v("发起日期："+t._s(t.entrust.createTime))])]),s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("采购合同号："+t._s(t.entrust.purchaseNo))]),s("td",{attrs:{colspan:"3"}},[t._v("批次号："+t._s(t.entrust.batchNumber))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购合同编号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("批次号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("加工后图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")])]),s("tr",[s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.purchaseNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.batchNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.materialGraphName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.materialGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.processedGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(t.entrust.number))])])])]),s("div",{staticClass:"form-content metalwork-info"},[s("table",{staticClass:"data-table"},[s("tr",[s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"12%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"10"}},[t._v("质检记录")])]),s("tr",[s("th",[t._v("质检单号")]),s("th",[t._v("类别")]),s("th",[t._v("物料名称")]),s("th",[t._v("加工后图号")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("处理意见")]),s("th",[t._v("不合格现象描述")]),s("th",[t._v("附件")])]),t._l(t.inspectHistory,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.inspectNo))]),s("td",[t._v(t._s(1==e.type?"采购零件":"机加工零件"))]),s("td",[t._v(t._s(e.materialGraphName))]),s("td",[t._v(t._s(e.materialGraphNo))]),s("td",[t._v(t._s(e.testNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",[t._v(t._s(e.handlingSuggestion))]),s("td",[t._v(t._s(e.reasonArr.toString()))]),s("td",t._l(e.accessoryList,(function(e,a){return s("div",{key:a},[s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v(t._s(e.fileName))])])})),0)])}))],2)])]),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(s("a450"),s("9b68")),o=s("153b"),l={name:"metalwork-list",components:{DataList:r["a"]},data:function(){return{completeLayer:!1,inspectHistory:{handlingSuggestion:"",inspectNo:"",materialName:"",materialGraphNo:"",qualifiedNumber:0,remark:"",testNumber:0,unqualifiedNumber:0,batchNumber:"",purchaseNo:"",supplierName:"",supplierNo:"",accessoryList:[]},inspectHistoryAdd:{handlingSuggestion:"",inspectNo:"",materialName:"",materialGraphNo:"",qualifiedNumber:0,remark:"",testNumber:0,unqualifiedNumber:0,batchNumber:"",purchaseNo:"",supplierName:"",supplierNo:"",reasonList:[{number:"",reason:""}]},filter:{type:3,entrustNo:"",status:-1,processedGraphNo:"",inspectStatus:-1},inspectStatusList:{0:"待质检",1:"质检中",2:"质检完成"},rowStatusList:[{status:3,name:"加工中"},{status:4,name:"加工完成"},{status:5,name:"审批不通过"},{status:6,name:"质检完成"}],statusList:[{status:-1,name:"全部"},{status:3,name:"加工中"},{status:4,name:"加工完成"}],inspectStatusArr:[{status:-1,name:"全部"},{status:1,name:"质检中"},{status:2,name:"质检完成"}],loading:!1,entrustNo:"",entrust:{},items:[],fileList:[],layer:!1}},methods:{flush:function(){this.filter={type:3,entrustNo:"",status:-1,processedGraphNo:"",inspectStatus:-1},this.$refs.list.update(!0)},info:function(t){this.layer=!0,this.entrustNo=t.entrustNo,this.getInfo(),this.getInspectHistory()},getInfo:function(){var t=this;this.entrust={},this.$http.get("/haolifa/entrust/info/".concat(this.entrustNo)).then((function(e){t.entrust=e,t.entrust.createTime=e.createTime.substring(0,10)})).catch((function(e){t.$toast(e.msg||e.message)}))},getInspectHistory:function(){var t=this;this.$http.get("/haolifa/material-inspect/history/list/".concat(this.entrustNo)).then((function(e){t.inspectHistory=e,t.inspectHistory.map((function(t){return t.reasonArr=t.reasonList.map((function(t){if(t.number)return"数量:"+t.number+",原因:"+t.reason+";"}))}))})).catch((function(e){t.$toast(e.msg||e.message)}))},complete:function(){var t=this,e={handlingSuggestion:this.inspectHistoryAdd.handlingSuggestion,inspectNo:this.inspectHistoryAdd.inspectNo,materialGraphName:this.inspectHistoryAdd.materialName,materialGraphNo:this.inspectHistoryAdd.materialGraphNo,qualifiedNumber:this.inspectHistoryAdd.qualifiedNumber,remark:this.inspectHistoryAdd.remark,testNumber:this.inspectHistoryAdd.testNumber,unqualifiedNumber:this.inspectHistoryAdd.unqualifiedNumber,type:2,batchNumber:this.inspectHistoryAdd.batchNumber,purchaseNo:this.inspectHistoryAdd.purchaseNo,supplierName:this.inspectHistoryAdd.supplierName,supplierNo:this.inspectHistoryAdd.supplierNo,accessoryList:this.inspectHistoryAdd.accessoryList,reasonList:this.inspectHistoryAdd.reasonList};this.loading=!0,this.$http.post("/haolifa/material-inspect/history/save",e).then((function(e){t.loading=!1,t.$toast("添加成功"),t.$refs.list.update(!0),t.completeLayer=!1})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))},uploadFile:function(t,e){var s=this;this.loading=!0,this.loadingMsg="正在上传",Object(o["a"])(t.source).then((function(e){s.$http.post("/haolifa/file/uploadFileBase64",{base64Source:e,fileName:t.name}).then((function(e){s.inspectHistoryAdd.accessoryList.push({fileName:t.name,fileUrl:e}),s.loading=!1})).catch((function(t){s.$toast(t.msg||t.message),s.loading=!1}))}))},removeFile:function(t,e){var s=this;return new Promise((function(t,e){s.inspectHistoryAdd.accessoryList.splice(index,1),t()}))},addInspectHistory:function(t){this.resetInspectHistoryAdd(),this.fileList=[],this.inspectHistoryAdd.batchNumber=t.batchNumber,this.inspectHistoryAdd.purchaseNo=t.purchaseNo,this.inspectHistoryAdd.supplierName=t.supplierName,this.inspectHistoryAdd.supplierNo=t.supplierNo,this.inspectHistoryAdd.materialGraphNo=t.processedGraphNo,this.inspectHistoryAdd.materialName=t.materialGraphName,this.inspectHistoryAdd.inspectNo=t.entrustNo,this.inspectHistoryAdd.accessoryList=[],this.completeLayer=!0,this.entrustNo=t.entrustNo,this.getInfo(),this.getInspectHistory()},updateEntrustStatus:function(t){var e=this;this.$http.get("/haolifa/entrust/updateInspectStatus/".concat(t.entrustNo,"/2")).then((function(t){e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))},resetInspectHistoryAdd:function(){this.inspectHistoryAdd={handlingSuggestion:"",inspectNo:"",materialName:"",materialGraphNo:"",qualifiedNumber:0,remark:"",testNumber:0,unqualifiedNumber:0,batchNumber:"",purchaseNo:"",supplierName:"",supplierNo:"",accessoryList:[],reasonList:[{number:"",reason:""}]}},addReason:function(){this.inspectHistoryAdd.reasonList.push({number:"0",reason:""})},removeReason:function(t){this.inspectHistoryAdd.reasonList.splice(t,1)}}},n=l,c=(s("0757"),s("cba8")),d=Object(c["a"])(n,a,i,!1,null,null,null);e["default"]=d.exports},cb21:function(t,e,s){"use strict";s("7b42")},cff6:function(t,e,s){"use strict";s("4223")},d6a3:function(t,e,s){"use strict";s("916d")},d732:function(t,e,s){},d8a1:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-material-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.inspectNo,expression:"filter.inspectNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"送检单号"},domProps:{value:t.filter.inspectNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"inspectNo",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.purchaseOrderNo,expression:"filter.purchaseOrderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"采购合同号"},domProps:{value:t.filter.purchaseOrderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"purchaseOrderNo",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.batchNumber,expression:"filter.batchNumber"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"批次号"},domProps:{value:t.filter.batchNumber},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"batchNumber",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供应商"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}})]),t._v("状态：\n        "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},[s("option",{attrs:{value:"0"}},[t._v("全部")]),s("option",{attrs:{value:"2"}},[t._v("质检中")]),s("option",{attrs:{value:"3"}},[t._v("质检完成")])]),s("div",{staticClass:"flex-item"})]),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",staticClass:"f-14",attrs:{"page-size":15,param:t.filter,url:"/haolifa/material-inspect/purchase-list/0",method:"get"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.inspectNo))]),s("td",[t._v(t._s(a.purchaseNo))]),s("td",[t._v(t._s(a.batchNumber))]),s("td",[t._v(t._s(a.totalCount))]),s("td",[t._v(t._s(a.qualifiedNumber))]),s("td",[t._v(t._s(a.arrivalTime))]),s("td",[t._v(t._s(a.supplierName))]),s("td",[t._v(t._s(a.freight))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(t.statusList[a.status].name))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.info(a)}}},[t._v("查看")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("报检单号")]),s("th",[t._v("采购合同号")]),s("th",[t._v("批次号")]),s("th",[t._v("送检总数")]),s("th",[t._v("检验合格数")]),s("th",[t._v("到货日期")]),s("th",[t._v("供应商名称")]),s("th",[t._v("费用")]),s("th",[t._v("发起时间")]),s("th",[t._v("状态")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:"详情",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"form-content page-supplier-info"},[s("table",{staticClass:"f-14"},[s("tr",[s("td",{staticStyle:{width:"9%"}}),s("td",{staticStyle:{width:"9%"}}),s("td",{staticStyle:{width:"9%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"9%"}}),s("td",{staticStyle:{width:"9%"}}),s("td",{staticStyle:{width:"9%"}}),s("td",{staticStyle:{width:"9%"}}),s("td",{staticStyle:{width:"9%"}}),s("td",{staticStyle:{width:"9%"}}),s("td",{staticStyle:{width:"9%"}}),s("td",{staticStyle:{width:"9%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v("零件送检单")]),s("td",{staticClass:"b",attrs:{colspan:"9"}},[s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"/haolifa/export/material-inspect/"+t.inspect.id}},[t._v("下载")])])]),s("tr",[s("th",{attrs:{colspan:"6"}},[t._v("送检单号："+t._s(t.inspect.inspectNo))]),s("td",{attrs:{colspan:"6"}},[t._v("发起日期："+t._s(t.inspect.createTime))])]),s("tr",[s("th",{attrs:{colspan:"6"}},[t._v("采购合同号："+t._s(t.inspect.purchaseNo))]),s("td",{attrs:{colspan:"6"}},[t._v("批次号："+t._s(t.inspect.batchNumber))])]),s("tr",[s("th",{attrs:{colspan:"6"}},[t._v("供应商："+t._s(t.inspect.supplierName))]),s("td",{attrs:{colspan:"6"}},[t._v("到货日期："+t._s(t.inspect.arrivalTime))])]),s("tr",[s("th",{attrs:{colspan:"11"}},[t._v("费用："+t._s(t.inspect.freight))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("合同编号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质与标准要求")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购数")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("送货数")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("合格数")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("不合格数量")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.items,(function(e,a){return s("tr",{key:a},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(a+1))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.requirements))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.deliveryNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.qualifiedNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unqualifiedNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])}))],2)]),t.resFileList.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"left","line-height":"24px"}},[t._v("质量保证书")])]),s("div",{staticStyle:{"margin-left":"20px","margin-top":"5px"}},[s("table",{staticClass:"data-table"},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("文件名称")]),s("th",[t._v("下载地址")])]),t._l(t.resFileList,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(a))]),s("td",[t._v(t._s(e.fileName))]),s("td",[s("a",{staticClass:"fixed-length",attrs:{href:e.fileUrl,title:e.fileUrl}},[t._v(t._s(e.fileUrl))])])])}))],2)])]):t._e(),t.inspectHistory.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("质检记录")])]),s("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[s("table",{staticClass:"data-table"},[s("tr",{staticStyle:{display:"none"}},[s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"12%"}})]),s("tr",[s("th",[t._v("质检单号")]),s("th",[t._v("类别")]),s("th",[t._v("物料名称")]),s("th",[t._v("物料图号")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("处理意见")]),s("th",[t._v("不合格现象描述")])]),t._l(t.inspectHistory,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.inspectNo))]),s("td",[t._v(t._s(1==e.type?"采购零件":"机加工零件"))]),s("td",[t._v(t._s(e.materialGraphName))]),s("td",[t._v(t._s(e.materialGraphNo))]),s("td",[t._v(t._s(e.testNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",[t._v(t._s(e.handlingSuggestion))]),s("td",[t._v(t._s(e.reasonArr?e.reasonArr.toString():""))])])}))],2)])]):t._e()]),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=s("9b68"),o={name:"page-material-list",components:{DataList:r["a"]},data:function(){return{filter:{type:0,status:0,inspectNo:"",supplierName:"",purchaseOrderNo:""},statusList:[{status:0,name:"全部"},{status:1,name:"未提交"},{status:2,name:"质检中"},{status:3,name:"质检完成"},{status:4,name:"入库中"},{status:5,name:"入库完成"}],layer:!1,inspect:{id:0,inspectNo:""},items:[],inspectHistory:[],resFileList:[]}},methods:{flush:function(){this.filter={type:0,status:0,inspectNo:"",supplierName:"",purchaseOrderNo:""},this.$refs.list.update(!0)},edit:function(t){this.$router.push("/applyBuy-material/edit?id=".concat(t.id))},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下送检单吗？<br><b>".concat(t.inspectNo,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/material-inspect/delete/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},getInfo:function(){var t=this;this.$http.get("/haolifa/material-inspect/info/".concat(this.inspect.id)).then((function(e){t.inspect=e.inspect,t.items=e.items,t.inspect.createTime=e.inspect.createTime.substring(0,10),t.inspect.arrivalTime=e.inspect.arrivalTime.substring(0,10),t.inspect.updateTime=e.inspect.updateTime.substring(0,10),""!=e.inspect.blueprints&&null!=e.inspect.blueprints&&(t.resFileList=JSON.parse(e.inspect.blueprints))})).catch((function(e){t.$toast(e.msg||e.message)}))},getInspectHistory:function(){var t=this;this.$http.get("/haolifa/material-inspect/history/list/".concat(this.inspect.inspectNo)).then((function(e){t.inspectHistory=e,t.inspectHistory.map((function(t){if(t.reasonList)return t.reasonArr=t.reasonList.map((function(t){if(t.number)return"数量:"+t.number+",原因:"+t.reason+";"}))}))})).catch((function(e){t.$toast(e.msg||e.message)}))},commit:function(t){var e=this;this.$http.post("/haolifa/material-inspect/updateStatus/".concat(t,"?status=2")).then((function(t){e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))},info:function(t){this.layer=!0,this.inspect.id=t.id,this.inspect.inspectNo=t.inspectNo,this.resFileList=[],this.getInfo(),this.getInspectHistory()},close:function(){this.close=!1}}},l=o,n=(s("c2ba"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},d8f7:function(t,e,s){"use strict";s("2e2f")},db0f:function(t,e,s){"use strict";s("445f")},dfc8:function(t,e,s){"use strict";s("9719")},e070:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-invoice-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),t._m(0),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/pay-assessment-score/getList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.userName))]),s("td",[t._v(t._s(a.score))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.detail(a)}}},[t._v("详情")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("人员")]),s("th",[t._v("分数")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:"详情",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[s("el-table-column",{attrs:{prop:"quotaContent",label:"指标内容"}}),s("el-table-column",{attrs:{prop:"quotaName",label:"考核指标"}}),s("el-table-column",{attrs:{prop:"standard",label:"考核标准"}}),s("el-table-column",{attrs:{prop:"score",label:"扣分"}}),s("el-table-column",{attrs:{prop:"remark",label:"说明"}}),s("el-table-column",{attrs:{prop:"createTime",label:"打分日期"}})],1)],1),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-item"})])}],r=s("9b68"),o={name:"jiaoxiaodafen-list",components:{DataList:r["a"]},data:function(){return{filter:{},layer:!1,form:{id:"",assessmentId:"",score:"",scoreTime:"",userId:""},loading:!1,tableData:[]}},mounted:function(){},methods:{flush:function(){this.$refs.list.update(!0)},edit:function(t){this.layer=!0,this.form.id=t.id,this.form.assessmentId=t.assessmentId,this.form.score=t.score,this.form.userId=t.userId},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下人员打分吗？<br><b>".concat(t.userId,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/pay-assessment-score/del/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},detail:function(t){var e=this;this.layer=!0,this.tableData=[],this.$http.get("/haolifa/pay-assessment-score/info/"+t.id).then((function(t){e.tableData=t})).catch((function(t){e.$toast(t.msg||t.message)}))},save:function(){var t=this;if(this.form.postName.trim())if(this.form.postCode.trim())if(this.form.departName.trim())if(this.form.workType.trim()){this.loading=!0;var e=this.form.id?"/haolifa/pay-production-work-shop/edit":"/haolifa/pay-production-work-shop/save";this.$http.post(e,this.form).then((function(e){t.close(),t.$toast("保存成功"),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))}else this.$toast("工种类别不能为空");else this.$toast("车间名称不能为空");else this.$toast("岗位序号不能为空");else this.$toast("岗位名称不能为空")},close:function(){this.layer=!1,this.form={id:"",postCode:"",postName:"",workType:"",departName:""}}}},l=o,n=(s("14bd"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},e15b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-jiaoxiaogongxu-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.userName,expression:"filter.userName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.filter.userName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"userName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.departName,expression:"filter.departName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"部门名称"},domProps:{value:t.filter.departName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"departName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.capacityCode,expression:"filter.capacityCode"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"能力代码"},domProps:{value:t.filter.capacityCode},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"capacityCode",e.target.value)}}})]),s("div",{staticClass:"flex-item"}),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")])],1),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/pay-production_capacity/getList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.userName))]),s("td",[t._v(t._s(a.departName))]),s("td",[t._v(t._s(a.teamName))]),s("td",[t._v(t._s(a.capacityCode))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(a)}}},[t._v("编辑 | ")]),s("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(a)}}},[t._v("删除")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("人员")]),s("th",[t._v("部门")]),s("th",[t._v("班组")]),s("th",[t._v("能力代码")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"50%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"flex"},[s("el-select",{staticClass:"flex-item mr-10 mycs",attrs:{filterable:"",placeholder:"部门选择"},on:{change:t.deptChange},model:{value:t.form.departId,callback:function(e){t.$set(t.form,"departId",e)},expression:"form.departId"}},t._l(t.deptList,(function(t,e){return s("el-option",{key:e,attrs:{label:t.deptName,value:t.id}})})),1)],1),s("div",{staticClass:"flex"},[s("el-select",{staticClass:"flex-item mr-10 mycs",attrs:{filterable:"",placeholder:"人员选择"},model:{value:t.form.userId,callback:function(e){t.$set(t.form,"userId",e)},expression:"form.userId"}},t._l(t.userList,(function(t,e){return s("el-option",{key:e,attrs:{label:t.userName,value:t.id}})})),1)],1),s("div",{staticClass:"flex"},[s("el-select",{staticClass:"flex-item mr-10 mycs",attrs:{multiple:!0,filterable:"",placeholder:"能力序号"},model:{value:t.capacityCode,callback:function(e){t.capacityCode=e},expression:"capacityCode"}},t._l(t.procedureList,(function(t,e){return s("el-option",{key:e,attrs:{label:t.text,value:t.value}})})),1)],1)]),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(s("4057"),s("fc02"),s("9b68")),o={name:"jiaoxiaogongxu-list",components:{DataList:r["a"]},data:function(){return{filter:{capacityCode:"",departId:"",departName:"",id:"",teamId:"",userName:""},layer:!1,form:{capacityCode:"",departId:"",departName:"",id:"",pageNum:0,pageSize:0,teamId:"",userId:"",userName:""},deptId:[],userList:[],deptList:[],loading:!1,procedureList:[],capacityCode:[]}},mounted:function(){this.getDeptList()},methods:{flush:function(){this.filter={capacityCode:"",departId:"",departName:"",id:"",teamId:"",userName:""},this.$refs.list.update(!0)},getUsers:function(t){var e=this;this.userList=[],this.$http.post("/haolifa/pay-user/getAllList",{departName:t,id:"",pageNum:0,pageSize:0,postId:"",postName:"",sex:"",superiorId:"",teamId:"",teamName:"",userName:"",userType:""}).then((function(t){t.map((function(t){"0"==t.userType&&e.userList.push(t)}))})).catch((function(t){e.$toast(t.msg||t.message)}))},edit:function(t){var e=this;this.layer=!0,this.form.id=t.id,this.form.userName=t.userName,this.form.departId=t.departId,this.form.userId=t.userId;var s="";this.deptList.map((function(t){t.id==e.form.departId&&(s=t.deptName)})),s&&(this.getUsers(s),this.getProcedureList(s)),this.form.teamId=t.teamId,this.capacityCode=t.capacityCode.split(",")},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下人员吗？<br><b>".concat(t.userName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/pay-production_capacity/del/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},add:function(){this.layer=!0},save:function(){var t=this;if(this.form.departId)if(this.form.userId)if(this.capacityCode.length){this.deptList.map((function(e){t.form.departId==e.id&&(t.form.departName=e.deptName)})),this.userList.map((function(e){e.id==t.form.userId&&(t.form.userName=e.userName,t.form.teamId=e.teamId)})),this.form.capacityCode=this.capacityCode.toString(),this.loading=!0;var e=this.form.id?"/haolifa/pay-production_capacity/edit":"/haolifa/pay-production_capacity/save";this.$http.post(e,this.form).then((function(e){t.close(),t.$toast("保存成功"),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))}else this.$toast("请选择能力序号");else this.$toast("请选择人员");else this.$toast("请选择部门")},getProcedureList:function(t){var e=this;this.procedureList=[],this.$http.post("/haolifa/pay-working-procedure/getAllList",{id:"",pageNum:"",pageSize:"",postCapability:"",postCode:"",postName:"",productModel:"",serial:"",workType:"",workshopName:t}).then((function(t){t.map((function(t){e.procedureList.push({text:t.postName,value:t.postCode})}))})).catch((function(t){e.$toast(t.msg||t.message)}))},getDeptList:function(){var t=this;this.$http.get("/haolifa/dept/list").then((function(e){e.map((function(e){t.deptList.push(e)}))})).catch((function(e){t.$toast(e.msg||e.message)}))},close:function(){this.layer=!1,this.form={capacityCode:"",departId:"",departName:"",id:"",pageNum:0,pageSize:0,teamId:"",userId:"",userName:""},this.capacityCode=[]},deptChange:function(){var t=this,e="";this.form.userId="",this.deptList.map((function(s){s.id==t.form.departId&&(e=s.deptName)})),e&&(this.form.userName="",this.capacityCode=[],this.getUsers(e),this.getProcedureList(e))}}},l=o,n=(s("d6a3"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},ef9e:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"material-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.inspectNo,expression:"filter.inspectNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"送检单号"},domProps:{value:t.filter.inspectNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"inspectNo",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.purchaseOrderNo,expression:"filter.purchaseOrderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"采购合同号"},domProps:{value:t.filter.purchaseOrderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"purchaseOrderNo",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.batchNumber,expression:"filter.batchNumber"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"批次号"},domProps:{value:t.filter.batchNumber},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"batchNumber",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供应商名称"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),t._v("\n            质检状态:\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},t._l(t.statusArr,(function(e){return s("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])})),0),s("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])])]),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",staticClass:"f-14",attrs:{"page-size":15,param:t.filter,url:"/haolifa/material-inspect/purchase-list/1",method:"get"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.inspectNo))]),s("td",[t._v(t._s(a.purchaseNo))]),s("td",[t._v(t._s(a.batchNumber))]),s("td",[t._v(t._s(a.totalCount))]),s("td",[t._v(t._s(a.qualifiedNumber))]),s("td",[t._v(t._s(a.arrivalTime))]),s("td",[t._v(t._s(a.supplierName))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(t.statusList[a.status].name))]),s("td",{staticClass:"t-right"},[2==a.status?s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.addInspectHistoryFun(a)}}},[t._v("添加质检记录")]):t._e(),2==a.status?s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.commit(a.id)}}},[t._v("质检完成")]):t._e(),s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.infoDeatail(a)}}},[t._v("查看")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("送检单号")]),s("th",[t._v("采购合同号")]),s("th",[t._v("批次号")]),s("th",[t._v("送检总数")]),s("th",[t._v("检验合格数")]),s("th",[t._v("到货日期")]),s("th",[t._v("供应商名称")]),s("th",[t._v("发起时间")]),s("th",[t._v("状态")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?s("layer",{attrs:{title:"添加零件质检记录",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"form-content page-supplier-info"},[s("table",{staticClass:"f-14"},[s("tr",[s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"11"}},[t._v("零件送检单")])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("送检单号："+t._s(t.inspect.inspectNo))]),s("td",{attrs:{colspan:"6"}},[t._v("发起日期："+t._s(t.inspect.createTime))])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("采购合同号："+t._s(t.inspect.purchaseNo))]),s("td",{attrs:{colspan:"6"}},[t._v("批次号："+t._s(t.inspect.batchNumber))])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("供应商："+t._s(t.inspect.supplierName))]),s("td",{attrs:{colspan:"6"}},[t._v("到货日期："+t._s(t.inspect.arrivalTime))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("合同编号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质与标准要求")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购数")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("送货数")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("不合格数量")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.items,(function(e,a){return s("tr",{key:a},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(a+1))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.requirements))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.deliveryNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unqualifiedNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])}))],2)]),t.resFileList.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"left","line-height":"24px"}},[t._v("质量保证书")])]),s("div",{staticStyle:{"margin-left":"20px","margin-top":"5px"}},[s("table",{staticClass:"data-table"},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("文件名称")]),s("th",[t._v("下载地址")])]),t._l(t.resFileList,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(a))]),s("td",[t._v(t._s(e.fileName))]),s("td",[s("a",{staticClass:"fixed-length",attrs:{href:e.fileUrl,title:e.fileUrl}},[t._v(t._s(e.fileUrl))])])])}))],2)])]):t._e(),t.inList.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("已添加零件质检记录")])]),s("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[s("table",{staticClass:"data-table"},[s("tr",{staticStyle:{display:"none"}},[s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"12%"}})]),s("tr",[s("th",[t._v("质检单号")]),s("th",[t._v("类别")]),s("th",[t._v("物料名称")]),s("th",[t._v("物料图号")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("附件")]),s("th",[t._v("处理意见")]),s("th",[t._v("不合格现象描述")])]),t._l(t.inList,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.inspectNo))]),s("td",[t._v(t._s(1==e.type?"采购零件":"机加工零件"))]),s("td",[t._v(t._s(e.materialGraphName))]),s("td",[t._v(t._s(e.materialGraphNo))]),s("td",[t._v(t._s(e.testNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",t._l(e.accessoryList,(function(e,a){return s("div",{key:a},[s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v(t._s(e.fileName))])])})),0),s("td",[t._v(t._s(e.handlingSuggestion))]),s("td",[t._v(t._s(e.reasonArr?e.reasonArr.toString():""))])])}))],2)])]):t._e(),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"采购合同号"},model:{value:t.addInspectHistory.purchaseNo,callback:function(e){t.$set(t.addInspectHistory,"purchaseNo",e)},expression:"addInspectHistory.purchaseNo"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"批次号"},model:{value:t.addInspectHistory.batchNumber,callback:function(e){t.$set(t.addInspectHistory,"batchNumber",e)},expression:"addInspectHistory.batchNumber"}})],1),s("div",{staticClass:"flex mt-15"},[s("input-box",{staticClass:"flex-item mr-20 ml-20 mt-15",attrs:{label:"送检单号"},model:{value:t.addInspectHistory.inspectNo,callback:function(e){t.$set(t.addInspectHistory,"inspectNo",e)},expression:"addInspectHistory.inspectNo"}}),s("select-box",{staticClass:"flex-item mt-15",attrs:{list:t.tuhaoList,label:"物料图号"},on:{change:function(e){return t.changeMaterialNo()}},model:{value:t.addInspectHistory.materialGraphNo,callback:function(e){t.$set(t.addInspectHistory,"materialGraphNo",e)},expression:"addInspectHistory.materialGraphNo"}}),s("select-box",{staticClass:"flex-item mt-15",attrs:{list:t.nameList,label:"物料名称"},on:{change:function(e){return t.changeMaterialNo()}},model:{value:t.addInspectHistory.materialName,callback:function(e){t.$set(t.addInspectHistory,"materialName",e)},expression:"addInspectHistory.materialName"}})],1),s("div",{staticClass:"flex mt-15"},[s("input-box",{staticClass:"flex-item mr-20 ml-20 mt-15",attrs:{label:"检测数量"},model:{value:t.addInspectHistory.testNumber,callback:function(e){t.$set(t.addInspectHistory,"testNumber",e)},expression:"addInspectHistory.testNumber"}}),s("input-box",{staticClass:"flex-item mr-20 mt-15",attrs:{label:"合格数量"},model:{value:t.addInspectHistory.qualifiedNumber,callback:function(e){t.$set(t.addInspectHistory,"qualifiedNumber",e)},expression:"addInspectHistory.qualifiedNumber"}})],1),t._l(t.addInspectHistory.reasonList,(function(e,a){return s("div",{key:a,staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"不合格数量"},model:{value:e.number,callback:function(s){t.$set(e,"number",s)},expression:"item.number"}}),s("input-box",{staticClass:"flex-item",attrs:{label:"不合格现象描述"},model:{value:e.reason,callback:function(s){t.$set(e,"reason",s)},expression:"item.reason"}}),t.addInspectHistory.reasonList.length>1?s("icon-btn",{attrs:{small:""},on:{click:function(e){return t.removeReason(a)}}},[t._v("close")]):t._e()],1)})),s("div",{staticStyle:{"padding-left":"100px"}},[s("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"更多不合格数量及因",expression:"'更多不合格数量及因'"}],attrs:{bg:"",small:""},on:{click:t.addReason}},[t._v("add")])],1),s("div",{staticClass:"flex mt-15"},[s("input-box",{staticClass:"flex-item mr-20 ml-20 mt-15",attrs:{label:"处理意见"},model:{value:t.addInspectHistory.handlingSuggestion,callback:function(e){t.$set(t.addInspectHistory,"handlingSuggestion",e)},expression:"addInspectHistory.handlingSuggestion"}})],1),s("div",{staticClass:"flex"},[s("upload-box",{staticClass:"ml-20 mb-10",staticStyle:{width:"50%"},attrs:{btnText:"上传附件",fileList:t.fileList,onchange:t.uploadFile,multiple:!0,onremove:t.removeFile}})],1),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),s("el-button",{attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.complete}},[t._v("保存")])],1)],2)]):t._e(),t.layer?s("layer",{attrs:{title:"详情",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"form-content page-supplier-info"},[s("table",{staticClass:"f-14"},[s("tr",[s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"11"}},[t._v("零件送检单")])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("送检单号："+t._s(t.inspect.inspectNo))]),s("td",{attrs:{colspan:"6"}},[t._v("发起日期："+t._s(t.inspect.createTime))])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("采购合同号："+t._s(t.inspect.purchaseNo))]),s("td",{attrs:{colspan:"6"}},[t._v("批次号："+t._s(t.inspect.batchNumber))])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("供应商："+t._s(t.inspect.supplierName))]),s("td",{attrs:{colspan:"6"}},[t._v("到货日期："+t._s(t.inspect.arrivalTime))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("合同编号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质与标准要求")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购数")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("送货数")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("不合格数量")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.items,(function(e,a){return s("tr",{key:a},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(a+1))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.requirements))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.deliveryNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unqualifiedNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])}))],2)]),t.resFileList.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"left","line-height":"24px"}},[t._v("质量保证书")])]),s("div",{staticStyle:{"margin-left":"20px","margin-top":"5px"}},[s("table",{staticClass:"data-table"},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("文件名称")]),s("th",[t._v("下载地址")])]),t._l(t.resFileList,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(a))]),s("td",[t._v(t._s(e.fileName))]),s("td",[s("a",{staticClass:"fixed-length",attrs:{href:e.fileUrl,title:e.fileUrl}},[t._v(t._s(e.fileUrl))])])])}))],2)])]):t._e(),t.inList.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("质检记录")])]),s("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[s("table",{staticClass:"data-table"},[s("tr",{staticStyle:{display:"none"}},[s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"12%"}})]),s("tr",[s("th",[t._v("质检单号")]),s("th",[t._v("类别")]),s("th",[t._v("物料名称")]),s("th",[t._v("物料图号")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("附件")]),s("th",[t._v("处理意见")]),s("th",[t._v("不合格现象描述")])]),t._l(t.inList,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.inspectNo))]),s("td",[t._v(t._s(1==e.type?"采购零件":"机加工零件"))]),s("td",[t._v(t._s(e.materialGraphName))]),s("td",[t._v(t._s(e.materialGraphNo))]),s("td",[t._v(t._s(e.testNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",t._l(e.accessoryList,(function(e,a){return s("div",{key:a},[s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v(t._s(e.fileName))])])})),0),s("td",[t._v(t._s(e.handlingSuggestion))]),s("td",[t._v(t._s(e.reasonArr?e.reasonArr.toString():""))])])}))],2)])]):t._e()]),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(s("a450"),s("1bc78"),s("9b68")),o=s("153b"),l={name:"material-list",components:{DataList:r["a"]},data:function(){return{completeLayer:!1,inspectHistory:{selectMaterialNo:[],selectMaterialName:[],handlingSuggestion:"",inspectNo:"",materialName:"",materialGraphNo:"",qualifiedNumber:0,remark:"",testNumber:0,unqualifiedNumber:0,batchNumber:"",purchaseNo:"",supplierName:"",supplierNo:""},addInspectHistory:{selectMaterialNo:[],selectMaterialName:[],handlingSuggestion:"",inspectNo:"",materialName:"",materialGraphNo:"",qualifiedNumber:0,remark:"",testNumber:0,unqualifiedNumber:0,batchNumber:"",purchaseNo:"",supplierName:"",supplierNo:"",accessoryList:[],reasonList:[{reason:"",number:""}]},tuhaoList:[],nameList:[],filter:{type:0,inspectNo:"",purchaseOrderNo:"",batchNumber:"",supplierName:"",status:0},statusList:[{status:0,name:"全部"},{status:1,name:"未提交"},{status:2,name:"质检中"},{status:3,name:"质检完成"},{status:4,name:"入库中"},{status:5,name:"入库完成"}],layer:!1,inspect:{id:0,inspectNo:""},items:[],resFileList:[],loading:!1,fileList:[],inList:[],statusArr:[{status:0,name:"全部"},{status:2,name:"质检中"},{status:3,name:"质检完成"}]}},methods:{flush:function(){this.filter={type:0,inspectNo:"",purchaseOrderNo:"",batchNumber:"",supplierName:"",status:0},this.$refs.list.update(!0)},changeMaterialNo:function(){var t=this;this.inspectHistory.selectMaterialNo.forEach((function(e){console.log("change值",t.inspectHistory.materialGraphNo),e.value==t.inspectHistory.materialGraphNo&&(t.inspectHistory.materialName=e.materialName)}))},complete:function(){var t=this,e={handlingSuggestion:this.addInspectHistory.handlingSuggestion,inspectNo:this.addInspectHistory.inspectNo,materialGraphName:this.addInspectHistory.materialName,materialGraphNo:this.addInspectHistory.materialGraphNo,qualifiedNumber:this.addInspectHistory.qualifiedNumber,remark:this.addInspectHistory.remark,testNumber:this.addInspectHistory.testNumber,unqualifiedNumber:this.addInspectHistory.unqualifiedNumber,type:1,batchNumber:this.addInspectHistory.batchNumber,purchaseNo:this.addInspectHistory.purchaseNo,supplierName:this.addInspectHistory.supplierName,supplierNo:this.addInspectHistory.supplierNo,accessoryList:this.addInspectHistory.accessoryList,reasonList:this.addInspectHistory.reasonList};this.loading=!0,this.$http.post("/haolifa/material-inspect/history/save",e).then((function(e){t.loading=!1,t.$toast("添加成功"),t.$refs.list.update(!0),t.completeLayer=!1})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))},commit:function(t){var e=this;this.$http.post("/haolifa/material-inspect/updateStatus/".concat(t,"?status=3")).then((function(t){e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))},uploadFile:function(t,e){var s=this;this.loading=!0,this.loadingMsg="正在上传",Object(o["a"])(t.source).then((function(e){s.$http.post("/haolifa/file/uploadFileBase64",{base64Source:e,fileName:t.name}).then((function(e){s.addInspectHistory.accessoryList.push({fileName:t.name,fileUrl:e}),s.loading=!1})).catch((function(t){s.$toast(t.msg||t.message),s.loading=!1}))}))},removeFile:function(t,e){var s=this;return new Promise((function(t,e){s.addInspectHistory.accessoryList.splice(index,1),t()}))},infoDeatail:function(t){this.layer=!0,this.inspect.id=t.id,this.inspect.inspectNo=t.inspectNo,this.resFileList=[],this.getInfo(),this.getInspectHistory()},addInspectHistoryFun:function(t){var e=this;this.completeLayer=!0,this.fileList=[],this.reset(),this.addInspectHistory.batchNumber=t.batchNumber,this.addInspectHistory.purchaseNo=t.purchaseNo,this.addInspectHistory.inspectNo=t.inspectNo,this.addInspectHistory.supplierName=t.supplierName,this.addInspectHistory.supplierNo=t.supplierNo;var s=t.id;this.$http.get("/haolifa/material-inspect/info/".concat(s)).then((function(t){var s=t.items;e.nameList=s.map((function(t){return{value:t.materialName,text:t.materialName}})),e.tuhaoList=s.map((function(t){return{value:t.materialGraphNo,text:t.materialGraphNo}})),e.addInspectHistory.materialGraphNo=e.tuhaoList[0].value,e.addInspectHistory.materialName=e.nameList[0].value})).catch((function(t){e.$toast(t.msg||t.message)})),this.inspect.id=t.id,this.inspect.inspectNo=t.inspectNo,this.resFileList=[],this.getInfo(),this.getInspectHistory()},getInfo:function(){var t=this;this.$http.get("/haolifa/material-inspect/info/".concat(this.inspect.id)).then((function(e){t.inspect=e.inspect,t.items=e.items,t.inspect.createTime=e.inspect.createTime.substring(0,10),t.inspect.arrivalTime=e.inspect.arrivalTime.substring(0,10),t.inspect.updateTime=e.inspect.updateTime.substring(0,10),""!=e.inspect.blueprints&&null!=e.inspect.blueprints&&(t.resFileList=JSON.parse(e.inspect.blueprints))})).catch((function(e){t.$toast(e.msg||e.message)}))},getInspectHistory:function(){var t=this;this.$http.get("/haolifa/material-inspect/history/list/".concat(this.inspect.inspectNo)).then((function(e){t.inList=e,t.inList.map((function(t){if(t.reasonList)return t.reasonArr=t.reasonList.map((function(t){if(t.number)return"数量:"+t.number+",原因:"+t.reason+";"}))}))})).catch((function(e){t.$toast(e.msg||e.message)}))},reset:function(){this.addInspectHistory={selectMaterialNo:[],selectMaterialName:[],handlingSuggestion:"",inspectNo:"",materialName:"",materialGraphNo:"",qualifiedNumber:0,remark:"",testNumber:0,unqualifiedNumber:0,batchNumber:"",purchaseNo:"",supplierName:"",supplierNo:"",accessoryList:[],reasonList:[{reason:"",number:""}]}},addReason:function(){this.addInspectHistory.reasonList.push({number:"0",reason:""})},removeReason:function(t){this.addInspectHistory.reasonList.splice(t,1)}}},n=l,c=(s("0f71"),s("cba8")),d=Object(c["a"])(n,a,i,!1,null,null,null);e["default"]=d.exports},f55c:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-invoice-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.teamName,expression:"filter.teamName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"班组名称"},domProps:{value:t.filter.teamName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"teamName",e.target.value)}}}),t._v("\n            开始时间:\n            "),s("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",editable:!1,placeholder:"选择年月日"},on:{change:function(e){return t.$refs.list.update(!0)}},model:{value:t.filter.startCreateTime,callback:function(e){t.$set(t.filter,"startCreateTime",e)},expression:"filter.startCreateTime"}}),t._v("结束时间:\n            "),s("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",editable:!1,placeholder:"选择年月日"},on:{change:function(e){return t.$refs.list.update(!0)}},model:{value:t.filter.endCreateTime,callback:function(e){t.$set(t.filter,"endCreateTime",e)},expression:"filter.endCreateTime"}})],1),s("div",{staticClass:"flex-item"}),s("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")])],1),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/pay-team/getList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.teamName))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(a.updateTime))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(a)}}},[t._v("编辑 | ")]),s("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(a)}}},[t._v("删除")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("班组名称")]),s("th",[t._v("创建时间")]),s("th",[t._v("更新时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?s("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"班组名称"},model:{value:t.form.teamName,callback:function(e){t.$set(t.form,"teamName",e)},expression:"form.teamName"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"车间名称"},model:{value:t.form.workshopName,callback:function(e){t.$set(t.form,"workshopName",e)},expression:"form.workshopName"}})],1)]),s("div",{staticClass:"layer-btns"},[s("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),s("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=s("9b68"),o={name:"jiaoxiaogongxu-list",components:{DataList:r["a"]},data:function(){return{filter:{endCreateTime:"",startCreateTime:"",teamName:"",workshopId:""},layer:!1,form:{id:"",pageNum:"",pageSize:"",teamName:"",workshopId:"",workshopName:""},loading:!1}},mounted:function(){},methods:{flush:function(){this.filter={endCreateTime:"",startCreateTime:"",teamName:"",workshopId:""},this.$refs.list.update(!0)},edit:function(t){this.layer=!0,this.form.id=t.id,this.form.teamName=t.teamName},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下班组名称吗？<br><b>".concat(t.teamName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/pay-team/del/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},add:function(){this.layer=!0},save:function(){var t=this;if(this.form.teamName.trim()){this.loading=!0;var e=this.form.id?"/haolifa/pay-team/edit":"/haolifa/pay-team/save";this.$http.post(e,this.form).then((function(e){t.close(),t.$toast("保存成功"),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.$toast(e.msg||e.message)}))}else this.$toast("班组名称不能为空")},close:function(){this.layer=!1,this.form={id:"",pageNum:"",pageSize:"",teamName:"",workshopId:"",workshopName:""}}}},l=o,n=(s("88ea"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},f7ba:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-invoice-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.userName,expression:"filter.userName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.filter.userName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"userName",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.department,expression:"filter.department"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"部门"},domProps:{value:t.filter.department},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"department",e.target.value)}}}),t._v("\n            年份选择：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.wagesYear,expression:"filter.wagesYear"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"wagesYear",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},[s("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.yearArr,(function(e,a){return s("option",{key:a,domProps:{value:e}},[t._v(t._s(e))])}))],2),t._v("\n            月份选择：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.wagesMonth,expression:"filter.wagesMonth"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"wagesMonth",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},[s("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.monthList,(function(e,a){return s("option",{key:a,domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2)]),s("div",{staticClass:"flex-item"})]),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/pay-wages-search/getList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.userName))]),s("td",[t._v(t._s(a.department))]),s("td",[t._v(t._s(a.wagesMonth))]),s("td",[t._v(t._s(a.requiredAttendanceDays))]),s("td",[t._v(t._s(a.actualAttendanceDays))]),s("td",[t._v(t._s(a.absenteeismTimes))]),s("td",[t._v(t._s(a.lateAndLeaveTimes))]),s("td",[t._v(t._s(a.byPieceCount))]),s("td",[t._v(t._s(a.byPieceMoney))]),s("td",[t._v(t._s(a.industrialWasteCount))]),s("td",[t._v(t._s(a.industrialWasteMoney))]),s("td",[t._v(t._s(a.oddJobCount))]),s("td",[t._v(t._s(a.oddJobMoney))]),s("td",[t._v(t._s(a.temporaryDispatchCount))]),s("td",[t._v(t._s(a.temporaryDispatchMoney))]),s("td",[t._v(t._s(a.minLiveSecurityFund))]),s("td",[t._v(t._s(a.lunchAllowanceMoney))]),s("td",[t._v(t._s(a.fullAttendanceMoney))]),s("td",[t._v(t._s(a.deductionPersonalIncomeTax))]),s("td",[t._v(t._s(a.deductPersonalInsuranceMoney))]),s("td",[t._v(t._s(a.commendationMoney))]),s("td",[t._v(t._s(a.absenteeismFine))]),s("td",[t._v(t._s(a.totalMoney))]),s("td",[t._v(t._s(a.totalTaxPayableMoney))]),s("td",[t._v(t._s(a.totalPayableMoney))]),s("td",[t._v(t._s(a.taxableWagesMoney))]),s("td",[t._v(t._s(a.overtimePayMoney))]),s("td",[t._v(t._s(a.otherSubsidiesMoney))]),s("td",[t._v(t._s(a.accruedPerformanceSalary))]),s("td",[t._v(t._s(a.netSalaryMoney))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(a.updateTime))]),s("td",{staticClass:"t-right"},[s("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(a)}}},[t._v("删除")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("姓名")]),s("th",[t._v("部门")]),s("th",[t._v("月份")]),s("th",[t._v("应出勤天数")]),s("th",[t._v("实出勤天数")]),s("th",[t._v("旷工次数")]),s("th",[t._v("迟到早退次数")]),s("th",[t._v("计件定额数量")]),s("th",[t._v("计件定额金额")]),s("th",[t._v("工废数量")]),s("th",[t._v("工废金额")]),s("th",[t._v("零工数量")]),s("th",[t._v("零工金额")]),s("th",[t._v("派工单数量")]),s("th",[t._v("派工单金额")]),s("th",[t._v("最底生活保障金")]),s("th",[t._v("午餐补贴")]),s("th",[t._v("全勤奖")]),s("th",[t._v("扣个人所得税")]),s("th",[t._v("扣个人保险")]),s("th",[t._v("嘉奖")]),s("th",[t._v("旷工罚款")]),s("th",[t._v("总计工资")]),s("th",[t._v("应纳税合计")]),s("th",[t._v("应发合计")]),s("th",[t._v("应纳税工资")]),s("th",[t._v("加班费")]),s("th",[t._v("其他补贴")]),s("th",[t._v("计提绩效工资")]),s("th",[t._v("实发工资")]),s("th",[t._v("创建时间")]),s("th",[t._v("更新时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1)])},i=[],r=s("9b68"),o={name:"jiaoxiaogongxu-list",components:{DataList:r["a"]},data:function(){return{filter:{department:"",userName:"",wagesMonth:(new Date).getMonth()+1>9?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1),wagesYear:(new Date).getFullYear()},yearArr:["2018","2019","2020","2021","2022","2023","2024","2025","2026","2027","2028"],monthList:[{value:"01",text:"1月"},{value:"02",text:"2月"},{value:"03",text:"3月"},{value:"04",text:"4月"},{value:"05",text:"5月"},{value:"06",text:"6月"},{value:"07",text:"7月"},{value:"08",text:"8月"},{value:"09",text:"9月"},{value:"10",text:"10月"},{value:"11",text:"11月"},{value:"12",text:"12月"}],layer:!1}},mounted:function(){},methods:{flush:function(){this.filter={department:"",userName:"",wagesMonth:(new Date).getMonth()+1>9?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1),wagesYear:(new Date).getFullYear()},this.$refs.list.update(!0)},edit:function(t){this.layer=!0},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下人员吗？<br><b>".concat(t.userName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/pay-wages/del/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},add:function(){this.layer=!0},save:function(){var t=this;if(this.form.userName.trim()){this.loading=!0;var e=this.form.id?"/haolifa/pay-wages/edit":"/haolifa/pay-wages/save";this.$http.post(e,this.form).then((function(e){t.close(),t.$toast("保存成功"),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.$toast(e.msg||e.message)}))}else this.$toast("姓名不能为空")},close:function(){this.layer=!1,this.form={absenteeismFine:0,absenteeismTimes:0,accruedPerformanceSalary:0,actualAttendanceDays:0,byPieceCount:0,byPieceMoney:0,commendationMoney:0,deductPersonalInsuranceMoney:0,deductionPersonalIncomeTax:0,department:"",fullAttendanceMoney:0,id:"",industrialWasteCount:0,industrialWasteMoney:0,lateAndLeaveFine:0,lateAndLeaveTimes:0,lunchAllowanceMoney:0,minLiveSecurityFund:0,netSalaryMoney:0,oddJobCount:0,oddJobMoney:0,otherSubsidiesMoney:0,overtimePayMoney:0,remark:"",requiredAttendanceDays:0,serial:"",taxableWagesMoney:0,temporaryDispatchCount:0,temporaryDispatchMoney:0,totalMoney:0,totalPayableMoney:0,totalTaxPayableMoney:0,userName:""}}}},l=o,n=(s("1bde"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports},f896:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-invoice-list"},[s("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"生产订单号"},domProps:{value:t.filter.orderNo},on:{change:function(e){t.$refs.list.update(!0),t.getPriceTotal()},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.constractParty,expression:"filter.constractParty"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"合同方"},domProps:{value:t.filter.constractParty},on:{change:function(e){t.$refs.list.update(!0),t.getPriceTotal()},input:function(e){e.target.composing||t.$set(t.filter,"constractParty",e.target.value)}}}),t._v("\n            发票状态：\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?s:s[0])},function(e){t.$refs.list.update(!0),t.getPriceTotal()}]}},t._l(t.statusList,(function(e){return s("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])})),0),s("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),s("div",{staticClass:"flex-item",staticStyle:{"text-align":"right",color:"#0f95ff"}},[t._v("发票总金额(元):"+t._s(t.priceTotal))])]),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/invoice/list/0",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.orderNo))]),s("td",[t._v(t._s(a.constractParty))]),s("td",[t._v(t._s(a.orderAmount))]),s("td",[t._v(t._s(a.totalAmount))]),s("td",[t._v(t._s(t.statusArr[a.status].name))]),s("td",[t._v(t._s(a.remark))]),s("td",[t._v(t._s(a.createTime))]),s("td",[t._v(t._s(a.updateTime))])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("合同编号")]),s("th",[t._v("合同方")]),s("th",[t._v("合同金额")]),s("th",[t._v("开票金额")]),s("th",[t._v("状态")]),s("th",[t._v("备注")]),s("th",[t._v("创建时间")]),s("th",[t._v("更新时间")])])])],1)])},i=[],r=s("9b68"),o={name:"invoice-list",components:{DataList:r["a"]},data:function(){return{priceTotal:"",statusList:[{status:-1,name:"全部"},{status:0,name:"待开票"},{status:1,name:"已申请"},{status:2,name:"已开票"}],statusArr:[{status:0,name:"待开票"},{status:1,name:"已申请"},{status:2,name:"已开票"}],filter:{type:1,status:-1,orderNo:"",constractParty:""}}},mounted:function(){this.getPriceTotal()},methods:{flush:function(){this.filter={type:1,status:-1,orderNo:"",constractParty:""},this.$refs.list.update(!0),this.getPriceTotal()},edit:function(t){this.$router.push("/jgzx-invoice/edit?id=".concat(t.id))},getPriceTotal:function(){var t=this;this.$http.post("/haolifa/statistics/money/invoice/1",this.filter).then((function(e){t.priceTotal=e.totalAmount})).catch((function(e){t.$toast(e.msg||e.message)}))},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下发票吗？<br><b>".concat(t.invoiceNo,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/invoice/delete/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})}}},l=o,n=(s("cff6"),s("cba8")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=diliverylist.cdaa7eef.js.map