(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["xxInvoice"],{"0ea6":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"invoice"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"100px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(e){t.$refs.list.update(!0),t.getPriceTotal()},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.constractParty,expression:"filter.constractParty"}],staticClass:"flex-item",staticStyle:{width:"250px"},attrs:{type:"text",placeholder:"合同方"},domProps:{value:t.filter.constractParty},on:{change:function(e){t.$refs.list.update(!0),t.getPriceTotal()},input:function(e){e.target.composing||t.$set(t.filter,"constractParty",e.target.value)}}}),t._v("\n            开票状态：\n            "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},t.statusChange]}},t._l(t.allStatus,(function(e){return a("option",{key:e.id,domProps:{value:e.value}},[t._v(t._s(e.text))])})),0),a("i",{staticClass:"icon",staticStyle:{"margin-left":"-10px","pointer-events":"none"}},[t._v("arrow_drop_down")]),t._v("\n            开票开始日期：\n            "),a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date","value-format":"yyyy-MM-dd",editable:!1,placeholder:"选择年月日"},on:{change:function(e){t.$refs.list.update(!0),t.getPriceTotal()}},model:{value:t.filter.startInvoiceDate,callback:function(e){t.$set(t.filter,"startInvoiceDate",e)},expression:"filter.startInvoiceDate"}}),t._v("开票结束日期：\n            "),a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date","value-format":"yyyy-MM-dd",editable:!1,placeholder:"选择年月日"},on:{change:function(e){t.$refs.list.update(!0),t.getPriceTotal()}},model:{value:t.filter.endInvoiceDate,callback:function(e){t.$set(t.filter,"endInvoiceDate",e)},expression:"filter.endInvoiceDate"}})],1),a("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!0}}},[t._v("添加发票")])],1),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-item",staticStyle:{"text-align":"right",color:"#0f95ff"}},[t._v("发票总金额（元）:"+t._s(t.priceTotal))])]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",staticClass:"f-14",attrs:{method:"post","page-size":15,param:t.filter,url:"/haolifa/invoice/list/1"},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item,o=e.index;return[a("td",[t._v(t._s(o))]),a("td",[t._v(t._s(i.orderNo))]),a("td",[t._v(t._s(i.constractParty))]),a("td",[t._v("￥ "+t._s(i.orderAmount))]),a("td",[t._v("￥ "+t._s(i.totalAmount))]),a("td",[t._v(t._s(i.invoiceNo))]),a("td",[t._v(t._s(t.allTypes[i.type].text))]),a("td",[t._v(t._s(i.invoiceDate))]),a("td",[t._v(t._s(t.statusArr[i.status].text))]),a("td",[t._v(t._s(i.remark))]),a("td",{staticClass:"t-right"},[1==i.status||0==i.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.billing(i)}}},[t._v("开票")]):t._e(),1==i.status||0==i.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.download(i.orderNo)}}},[t._v("| 出库记录下载")]):t._e(),2==i.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(i)}}},[t._v("编辑")]):t._e()])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("合同编号")]),a("th",[t._v("合同方")]),a("th",[t._v("合同金额")]),a("th",[t._v("开票金额")]),a("th",[t._v("发票号")]),a("th",[t._v("类型")]),a("th",[t._v("开票日期")]),a("th",[t._v("状态")]),a("th",[t._v("备注")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?a("layer",{attrs:{title:t.form.id?"编辑发票":"新增发票",width:"60%"}},[a("div",{staticClass:"layer-text",staticStyle:{"margin-bottom":"80px"}},[a("input-box",{attrs:{label:"发票编号"},model:{value:t.form.invoiceNo,callback:function(e){t.$set(t.form,"invoiceNo",e)},expression:"form.invoiceNo"}}),a("input-box",{attrs:{label:"订单编号"},model:{value:t.form.orderNo,callback:function(e){t.$set(t.form,"orderNo",e)},expression:"form.orderNo"}}),a("select-box",{attrs:{list:t.allStatusAdd,label:"发票状态"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}}),a("select-box",{attrs:{list:t.allTypesAdd,label:"发票类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}}),a("input-box",{attrs:{label:"开票单位"},model:{value:t.form.invoiceIssuing,callback:function(e){t.$set(t.form,"invoiceIssuing",e)},expression:"form.invoiceIssuing"}}),a("input-box",{attrs:{label:"收票单位"},model:{value:t.form.invoiceCompany,callback:function(e){t.$set(t.form,"invoiceCompany",e)},expression:"form.invoiceCompany"}}),a("input-box",{attrs:{type:"number",label:"发票金额"},model:{value:t.form.totalAmount,callback:function(e){t.$set(t.form,"totalAmount",e)},expression:"form.totalAmount"}}),a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"开票时间"},model:{value:t.form.invoiceDate,callback:function(e){t.$set(t.form,"invoiceDate",e)},expression:"form.invoiceDate"}}),a("input-box",{attrs:{"multi-line":!0,type:"text",label:"备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:t.cancel}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.submit}},[t._v("保存")])],1)]):t._e(),t.bill.layerbill?a("layer",{attrs:{title:"开票",width:"450px"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"250px"}},[a("input-box",{attrs:{label:"合同编号"},model:{value:t.bill.orderNo,callback:function(e){t.$set(t.bill,"orderNo",e)},expression:"bill.orderNo"}}),a("input-box",{attrs:{label:"发票编号"},model:{value:t.bill.billInvoiceNo,callback:function(e){t.$set(t.bill,"billInvoiceNo",e)},expression:"bill.billInvoiceNo"}}),a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"开票时间"},model:{value:t.bill.invoiceDate,callback:function(e){t.$set(t.bill,"invoiceDate",e)},expression:"bill.invoiceDate"}})],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:t.cancel}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.billInvoice()}}},[t._v("开票")])],1)]):t._e(),t.exportLayer?a("layer",{attrs:{title:"导出",width:"30%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px","min-height":"380px"}},[a("div",{staticClass:"flex ml-20 mr-20"},[a("date-picker",{staticClass:"flex-item",attrs:{hint:"必填",label:"开始时间"},model:{value:t.exportForm.startDate,callback:function(e){t.$set(t.exportForm,"startDate",e)},expression:"exportForm.startDate"}})],1),a("div",{staticClass:"flex ml-20 mr-20"},[a("date-picker",{staticClass:"flex-item",attrs:{hint:"必填",label:"结束时间"},model:{value:t.exportForm.endDate,callback:function(e){t.$set(t.exportForm,"endDate",e)},expression:"exportForm.endDate"}})],1),a("div",{staticClass:"flex ml-20 mr-20"},[a("input-box",{staticClass:"flex-item",attrs:{label:"订单号"},model:{value:t.exportForm.orderNo,callback:function(e){t.$set(t.exportForm,"orderNo",e)},expression:"exportForm.orderNo"}})],1)]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){t.exportLayer=!1}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.download()}}},[t._v("确定")])],1)]):t._e()],1)},o=[],s=a("9b68"),l={name:"invoice",components:{DataList:s["a"]},data:function(){return{priceTotal:"",filter:{type:1,status:-1,statusList:[1,2],orderNo:"",startInvoiceDate:"",endInvoiceDate:""},allStatus:[{value:-1,text:"全部"},{value:1,text:"已申请"},{value:2,text:"已开票"}],statusArr:[{value:0,text:"待开票"},{value:1,text:"已申请"},{value:2,text:"已开票"}],allTypes:[{value:0,text:"全部"},{value:1,text:"开出（生产）"},{value:2,text:"开入（采购）"}],allStatusAdd:[{value:1,text:"待开票"},{value:2,text:"已开票"}],allTypesAdd:[{value:1,text:"开出（生产）"},{value:2,text:"开入（采购）"}],bill:{layerbill:!1,billInvoiceNo:"",invoiceDate:"",orderNo:""},layer:!1,form:{id:"",invoiceNo:"",orderNo:"",status:1,totalAmount:"",type:1,invoiceIssuing:"",invoiceCompany:"",invoiceDate:""},exportLayer:!1,exportForm:{startDate:"",endDate:"",orderNo:""}}},mounted:function(){this.getPriceTotal()},methods:{flush:function(){this.filter={type:1,status:-1,statusList:[1,2],orderNo:"",startInvoiceDate:"",endInvoiceDate:""},this.$refs.list.update(!0),this.getPriceTotal()},billing:function(t){this.bill.orderNo=t.orderNo,this.bill.layerbill=!0,this.bill.billInvoiceNo="",this.bill.invoiceDate="",this.bill.id=t.id},statusChange:function(){this.$refs.list.update(!0),this.getPriceTotal()},billInvoice:function(){var t=this;this.$http.post("/haolifa/invoice/updateInvoiceNo",{id:this.bill.id,invoiceNo:this.bill.billInvoiceNo,invoiceDate:this.bill.invoiceDate}).then((function(e){t.$toast("开票成功"),t.$refs.list.update(!0),t.bill.layerbill=!1})).catch((function(e){t.$toast(e.msg||e.message)}))},getPriceTotal:function(){var t=this;this.$http.post("/haolifa/statistics/money/invoice/2",this.filter).then((function(e){t.priceTotal=e.totalAmount})).catch((function(e){t.$toast(e.msg||e.message)}))},edit:function(t){for(var e in this.form)this.form[e]=t[e];this.layer=!0},vertify:function(){for(var t in this.form){var e=this.form[t];if(!e&&0!==e&&"id"!==t&&"orderNo"!==t&&"remark"!==t)return this.$toast("请输入完整信息"),!1}return!0},submit:function(){var t=this;if(this.vertify()){var e=this.form;this.$http.post("/haolifa/invoice/save",e).then((function(e){t.$refs.list.update(!0),t.cancel(),t.$toast("保存成功")})).catch((function(e){t.$toast(e.message||e.meg)}))}},cancel:function(){this.form={id:"",invoiceNo:"",orderNo:"",status:1,totalAmount:"",type:1},this.bill.layerbill=!1,this.layer=!1},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下发票吗？<br><b>".concat(t.invoiceNo,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/invoice/delete/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},out:function(t){this.$router.push("/invoice-out?orderNo=".concat(t.orderNo))},exportExcel:function(t){this.exportLayer=!0,this.exportForm={orderNo:t.orderNo,startDate:"",endDate:""}},download:function(t){var e=document.createElement("a");e.setAttribute("download",""),e.setAttribute("href","/haolifa/export/product-out?orderNo=".concat(t,"&operationType=1")),e.click()}}},r=l,n=(a("0f03"),a("cba8")),c=Object(n["a"])(r,i,o,!1,null,null,null);e["default"]=c.exports},"0f03":function(t,e,a){"use strict";a("8232")},"1b19":function(t,e,a){"use strict";a("2557")},2557:function(t,e,a){},"2a65":function(t,e,a){},"36a42":function(t,e,a){},4401:function(t,e,a){"use strict";a("36a42")},8232:function(t,e,a){},"9b68":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-list relative f-12"},[a("transition",{attrs:{name:"slide-y"}},[t.list.length?a("table",{staticClass:"data-table"},[t._t("header",(function(){return[a("tr",[a("th",[t._v("表头1")]),a("th",[t._v("表头2")])])]})),t._l(t.list,(function(e,i){return a("tr",{key:e.id},[t._t("item",(function(){return[a("td",[t._v("数据1")]),a("td",[t._v("数据2")])]}),{i:i,item:e,index:(t.pageNum-1)*t.pageSize+i+1})],2)}))],2):t._e()]),a("div",{staticClass:"flex-v-center",staticStyle:{"margin-top":"10px"}},[t.list.length?a("pagination",{staticClass:"mr-20",attrs:{page:t.pageNum,size:t.pageSize,total:t.total},on:{change:t.getList}}):t._e(),t.total?a("span",{staticClass:"f-12 c-6"},[t._v("共 "+t._s(t.total)+" 条数据")]):t._e()],1),t.list.length||t.loading?t._e():a("div",{staticStyle:{"margin-top":"100px"}},[a("no-data")],1)],1)},o=[];a("e680"),a("1bc78"),a("32ea");function s(t){return"?"+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}var l={name:"data-list",props:{method:{type:String,default:"get"},url:{type:String,default:""},pageSize:{type:Number,default:20},param:{type:Object,default:function(){}},pageNumStr:{type:String,default:"pageNum"}},data:function(){return{pageNum:1,total:0,loading:!1,list:[]}},watch:{url:function(){this.update()},mehtod:function(){this.update()},pageSize:function(){this.update()},param:function(){this.update()}},created:function(){this.pageNum=this.$route.query.page||1,this.getList(this.pageNum)},methods:{getList:function(t){var e=this,a=this.method,i=this.url,o=this.pageSize,l=this.param;if(i){this.loading=!0;var r={pageSize:o};r[this.pageNumStr]=t;var n=Object.assign(r,l),c="get"===a?i+s(n):i;this.$http[a](c,n).then((function(t){e.list=t.list||[],e.pageNum=t.pageNum;var a=e.$route.query;a.page=t.pageNum,e.$router.push({path:e.$route.path,query:a}),e.total=t.total,e.loading=!1})).catch((function(t){e.loading=!1,e.$toast(t.message||t.msg||t)}))}},update:function(t){this.getList(t?1:this.pageNum)}}},r=l,n=(a("c8ea"),a("cba8")),c=Object(n["a"])(r,i,o,!1,null,null,null);e["a"]=c.exports},c2c4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"invoice"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"100px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(e){t.$refs.list.update(!0),t.getPriceTotal()},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.constractParty,expression:"filter.constractParty"}],staticClass:"flex-item",staticStyle:{width:"100px"},attrs:{type:"text",placeholder:"合同方"},domProps:{value:t.filter.constractParty},on:{change:function(e){t.$refs.list.update(!0),t.getPriceTotal()},input:function(e){e.target.composing||t.$set(t.filter,"constractParty",e.target.value)}}}),t._v("\n            开票状态：\n            "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},t.statusChange]}},t._l(t.allStatus,(function(e){return a("option",{key:e.id,domProps:{value:e.value}},[t._v(t._s(e.text))])})),0),a("i",{staticClass:"icon",staticStyle:{"margin-left":"-10px","pointer-events":"none"}},[t._v("arrow_drop_down")]),t._v("\n            开票开始日期：\n            "),a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date","value-format":"yyyy-MM-dd",editable:!1,placeholder:"选择年月日",width:"100"},on:{change:function(e){t.$refs.list.update(!0),t.getPriceTotal()}},model:{value:t.filter.startInvoiceDate,callback:function(e){t.$set(t.filter,"startInvoiceDate",e)},expression:"filter.startInvoiceDate"}}),t._v("开票结束日期：\n            "),a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date","value-format":"yyyy-MM-dd",editable:!1,placeholder:"选择年月日"},on:{change:function(e){t.$refs.list.update(!0),t.getPriceTotal()}},model:{value:t.filter.endInvoiceDate,callback:function(e){t.$set(t.filter,"endInvoiceDate",e)},expression:"filter.endInvoiceDate"}}),a("btn",{staticClass:"b",staticStyle:{width:"100px"},attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!0}}},[t._v("添加发票")])],1)]),a("div",{staticClass:"flex-v-center tool-bar"},[a("span",{staticClass:"f-16",staticStyle:{"margin-left":"10px",color:"#008eff"}},[t._v("发票总金额（元）:"+t._s(t.priceTotal))])]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",staticClass:"f-14",attrs:{method:"post","page-size":15,param:t.filter,url:"/haolifa/invoice/list/1"},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item,o=e.index;return[a("td",[t._v(t._s(o))]),a("td",[t._v(t._s(i.orderNo))]),a("td",[t._v(t._s(i.constractParty))]),a("td",[t._v("￥ "+t._s(i.totalAmount))]),a("td",[t._v(t._s(i.invoiceNo))]),a("td",[t._v(t._s(t.allTypes[i.type].text))]),a("td",[t._v(t._s(i.invoiceDate))]),a("td",[t._v(t._s(t.statusArr[i.status].text))]),a("td",[t._v(t._s(i.remark))]),a("td",{staticClass:"t-right"},[1==i.status||0==i.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.billing(i)}}},[t._v("开票")]):t._e(),1==i.status||0==i.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.download(i.orderNo)}}},[t._v("| 出库记录下载")]):t._e(),2==i.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(i)}}},[t._v("编辑")]):t._e()])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("合同编号")]),a("th",[t._v("合同方")]),a("th",[t._v("金额")]),a("th",[t._v("发票号")]),a("th",[t._v("类型")]),a("th",[t._v("开票日期")]),a("th",[t._v("状态")]),a("th",[t._v("备注")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?a("layer",{attrs:{title:t.form.id?"编辑发票":"新增发票",width:"60%"}},[a("div",{staticClass:"layer-text",staticStyle:{"margin-bottom":"80px"}},[a("input-box",{attrs:{label:"发票编号"},model:{value:t.form.invoiceNo,callback:function(e){t.$set(t.form,"invoiceNo",e)},expression:"form.invoiceNo"}}),a("input-box",{attrs:{label:"订单编号"},model:{value:t.form.orderNo,callback:function(e){t.$set(t.form,"orderNo",e)},expression:"form.orderNo"}}),a("select-box",{attrs:{list:t.allStatusAdd,label:"发票状态"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}}),a("select-box",{attrs:{list:t.allTypesAdd,label:"发票类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}}),a("input-box",{attrs:{label:"开票单位"},model:{value:t.form.invoiceIssuing,callback:function(e){t.$set(t.form,"invoiceIssuing",e)},expression:"form.invoiceIssuing"}}),a("input-box",{attrs:{label:"收票单位"},model:{value:t.form.invoiceCompany,callback:function(e){t.$set(t.form,"invoiceCompany",e)},expression:"form.invoiceCompany"}}),a("input-box",{attrs:{type:"number",label:"发票金额"},model:{value:t.form.totalAmount,callback:function(e){t.$set(t.form,"totalAmount",e)},expression:"form.totalAmount"}}),a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"开票时间"},model:{value:t.form.invoiceDate,callback:function(e){t.$set(t.form,"invoiceDate",e)},expression:"form.invoiceDate"}}),a("input-box",{attrs:{"multi-line":!0,type:"text",label:"备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:t.cancel}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.submit}},[t._v("保存")])],1)]):t._e(),t.bill.layerbill?a("layer",{attrs:{title:"开票",width:"450px"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"250px"}},[a("input-box",{attrs:{label:"合同编号"},model:{value:t.bill.orderNo,callback:function(e){t.$set(t.bill,"orderNo",e)},expression:"bill.orderNo"}}),a("input-box",{attrs:{label:"发票编号"},model:{value:t.bill.billInvoiceNo,callback:function(e){t.$set(t.bill,"billInvoiceNo",e)},expression:"bill.billInvoiceNo"}}),a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"开票时间"},model:{value:t.bill.invoiceDate,callback:function(e){t.$set(t.bill,"invoiceDate",e)},expression:"bill.invoiceDate"}})],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:t.cancel}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.billInvoice()}}},[t._v("开票")])],1)]):t._e(),t.exportLayer?a("layer",{attrs:{title:"导出",width:"30%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px","min-height":"380px"}},[a("div",{staticClass:"flex ml-20 mr-20"},[a("date-picker",{staticClass:"flex-item",attrs:{hint:"必填",label:"开始时间"},model:{value:t.exportForm.startDate,callback:function(e){t.$set(t.exportForm,"startDate",e)},expression:"exportForm.startDate"}})],1),a("div",{staticClass:"flex ml-20 mr-20"},[a("date-picker",{staticClass:"flex-item",attrs:{hint:"必填",label:"结束时间"},model:{value:t.exportForm.endDate,callback:function(e){t.$set(t.exportForm,"endDate",e)},expression:"exportForm.endDate"}})],1),a("div",{staticClass:"flex ml-20 mr-20"},[a("input-box",{staticClass:"flex-item",attrs:{label:"订单号"},model:{value:t.exportForm.orderNo,callback:function(e){t.$set(t.exportForm,"orderNo",e)},expression:"exportForm.orderNo"}})],1)]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){t.exportLayer=!1}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.download()}}},[t._v("确定")])],1)]):t._e()],1)},o=[],s=a("9b68"),l={name:"invoice",components:{DataList:s["a"]},data:function(){return{priceTotal:"",filter:{type:2,status:-1,statusList:[1,2],orderNo:"",startInvoiceDate:"",endInvoiceDate:""},allStatus:[{value:-1,text:"全部"},{value:1,text:"已申请"},{value:2,text:"已开票"}],statusArr:[{value:0,text:"待开票"},{value:1,text:"已申请"},{value:2,text:"已开票"}],allTypes:[{value:0,text:"全部"},{value:1,text:"开出（生产）"},{value:2,text:"开入（采购）"}],allStatusAdd:[{value:1,text:"待开票"},{value:2,text:"已开票"}],allTypesAdd:[{value:1,text:"开出（生产）"},{value:2,text:"开入（采购）"}],bill:{layerbill:!1,billInvoiceNo:"",invoiceDate:"",orderNo:""},layer:!1,form:{id:"",invoiceNo:"",orderNo:"",status:2,totalAmount:"",type:2,invoiceIssuing:"",invoiceCompany:"山西好利阀机械制造有限公司",invoiceDate:""},exportLayer:!1,exportForm:{startDate:"",endDate:"",orderNo:""}}},mounted:function(){this.getPriceTotal()},methods:{flush:function(){this.filter={type:2,status:-1,statusList:[1,2],orderNo:"",startInvoiceDate:"",endInvoiceDate:""},this.form={id:"",invoiceNo:"",orderNo:"",status:2,totalAmount:"",type:2,invoiceIssuing:"",invoiceCompany:"山西好利阀机械制造有限公司",invoiceDate:""},this.bill={layerbill:!1,billInvoiceNo:"",invoiceDate:"",orderNo:""},this.exportForm={startDate:"",endDate:"",orderNo:""},this.$refs.list.update(!0),this.getPriceTotal()},billing:function(t){this.bill.orderNo=t.orderNo,this.bill.layerbill=!0,this.bill.billInvoiceNo="",this.bill.invoiceDate="",this.bill.id=t.id},statusChange:function(){this.$refs.list.update(!0),this.getPriceTotal()},billInvoice:function(){var t=this;this.$http.post("/haolifa/invoice/updateInvoiceNo",{id:this.bill.id,invoiceNo:this.bill.billInvoiceNo,invoiceDate:this.bill.invoiceDate}).then((function(e){t.$toast("开票成功"),t.$refs.list.update(!0),t.bill.layerbill=!1})).catch((function(e){t.$toast(e.msg||e.message)}))},getPriceTotal:function(){var t=this;this.$http.post("/haolifa/statistics/money/invoice/2",this.filter).then((function(e){t.priceTotal=e.totalAmount})).catch((function(e){t.$toast(e.msg||e.message)}))},edit:function(t){for(var e in this.form)this.form[e]=t[e];this.layer=!0},vertify:function(){for(var t in this.form){var e=this.form[t];if(!e&&0!==e&&"id"!==t&&"orderNo"!==t&&"remark"!==t)return this.$toast("请输入完整信息"),!1}return!0},submit:function(){var t=this;if(this.vertify()){var e=this.form;this.$http.post("/haolifa/invoice/save",e).then((function(e){t.$refs.list.update(!0),t.cancel(),t.$toast("保存成功")})).catch((function(e){t.$toast(e.message||e.meg)}))}},cancel:function(){this.form={invoiceNo:"",orderNo:"",status:2,totalAmount:"",type:2,invoiceIssuing:"",invoiceCompany:"山西好利阀机械制造有限公司",invoiceDate:""},this.bill.layerbill=!1,this.layer=!1},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下发票吗？<br><b>".concat(t.invoiceNo,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/invoice/delete/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},out:function(t){this.$router.push("/invoice-out?orderNo=".concat(t.orderNo))},exportExcel:function(t){this.exportLayer=!0,this.exportForm={orderNo:t.orderNo,startDate:"",endDate:""}},download:function(t){var e=document.createElement("a");e.setAttribute("download",""),e.setAttribute("href","/haolifa/export/product-out?orderNo=".concat(t,"&operationType=1")),e.click()}}},r=l,n=(a("1b19"),a("cba8")),c=Object(n["a"])(r,i,o,!1,null,null,null);e["default"]=c.exports},c8ea:function(t,e,a){"use strict";a("2a65")},cf78:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-outInfo-list"},[a("div",{staticClass:"flex-v-center tool-bar"}),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{"page-num-str":"currentPage",param:t.filter,url:"/haolifa/store-room/entryOut/pageInfo",method:"get"},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item,o=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(o))]),a("td",[t._v(t._s(i.materialGraphNo))]),a("td",[t._v(t._s(i.orderNo))]),a("td",[t._v(t._s(i.materialBatchNo))]),a("td",[t._v(t._s(i.price))]),a("td",[t._v(t._s(i.quantity))]),a("td",[t._v(t._s(i.receiveDepartment))]),a("td",[t._v(t._s(i.storeRoomId))]),a("td",[t._v(t._s(i.storeRoomRackId))]),a("td",[t._v(t._s(i.storeRoomRackNo))]),a("td",[t._v(t._s(i.createTime))])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("零件号")]),a("th",[t._v("订单号")]),a("th",[t._v("批次号")]),a("th",[t._v("零件购买单价")]),a("th",[t._v("出库数量（负数）")]),a("th",[t._v("领料部门")]),a("th",[t._v("库房Id")]),a("th",[t._v("库房货位Id")]),a("th",[t._v("库房货位号")]),a("th",[t._v("出库时间")])])])],1)])},o=[],s=a("9b68"),l={name:"page-outInfo-list",components:{DataList:s["a"]},data:function(){return{filter:{type:2,operationType:1,orderNo:""}}},created:function(){var t=this.$route.query.orderNo;void 0!==t&&(this.filter.orderNo=t)},methods:{}},r=l,n=(a("4401"),a("cba8")),c=Object(n["a"])(r,i,o,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=xxInvoice.fb2c6a31.js.map