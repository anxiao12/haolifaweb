(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["suppliermanage"],{"0137":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-notification"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[t._v("费用报表统计图")]),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex"}},[a("div",{staticStyle:{"line-height":"28px"}},[t._v("开始时间:")]),a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getTwo},model:{value:t.twoData.startDate,callback:function(e){t.$set(t.twoData,"startDate",e)},expression:"twoData.startDate"}}),a("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("结束时间:")]),a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getTwo},model:{value:t.twoData.endDate,callback:function(e){t.$set(t.twoData,"endDate",e)},expression:"twoData.endDate"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDeptDetail(1)}}},[t._v("数据显示")])],1),a("div",{staticStyle:{width:"95%",display:"flex",margin:"30px auto"}},[a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartTwonew"}}),t.showFlag?a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartTwoDetail"}}):t._e()]),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex"}},[a("div",{staticStyle:{"line-height":"28px"}},[t._v("开始时间:")]),a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getThree},model:{value:t.threeData.startDate,callback:function(e){t.$set(t.threeData,"startDate",e)},expression:"threeData.startDate"}}),a("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("结束时间:")]),a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getThree},model:{value:t.threeData.endDate,callback:function(e){t.$set(t.threeData,"endDate",e)},expression:"threeData.endDate"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDeptDetail(2)}}},[t._v("数据显示")])],1),t._m(0),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex"}},[a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"year","value-format":"yyyy",editable:!1,placeholder:"选择年月"},on:{change:t.getFour},model:{value:t.fourYearDate,callback:function(e){t.fourYearDate=e},expression:"fourYearDate"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDeptDetail(3)}}},[t._v("数据显示")])],1),t._m(1),t.layer?a("layer",{attrs:{title:"详情",width:"80%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwor-info"},[a("table",{staticClass:"f-14 order-info"},[a("tr",[a("td",{staticStyle:{width:"5%"}}),a("td",{staticStyle:{width:"6%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"17%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"9%"}}),a("td",{staticStyle:{width:"9%"}})]),a("tr",[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("报销人")]),a("th",[t._v("报销部门")]),a("th",[t._v("报销摘要")]),a("th",[t._v("费用类别")]),a("th",[t._v("凭证号")]),a("th",[t._v("费用类别明细")]),a("th",[t._v("总费用")]),a("th",[t._v("费用产生年份")]),a("th",[t._v("费用产生月份")]),a("th",[t._v("备注")])]),t._l(t.departData,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.commitUser))]),a("td",[t._v(t._s(e.department))]),a("td",[t._v(t._s(e.summary))]),a("td",[t._v(t._s(e.expensesClassify))]),a("td",[t._v(t._s(e.voucherNo))]),a("td",[t._v(t._s(e.secondClassify))]),a("td",[t._v("￥ "+t._s(e.totalAmount))]),a("td",[t._v(t._s(e.dataYear))]),a("td",[t._v(t._s(e.dataMonth))]),a("td",[t._v(t._s(e.remark))])])}))],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e(),t.deptFlag?a("layer",{attrs:{title:"详情",width:"95%"}},[a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                报销人:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.commitUser,expression:"form.commitUser"}],staticClass:"flex-item",staticStyle:{width:"150px","border-bottom":"1px solid #ccc"},attrs:{type:"text",placeholder:""},domProps:{value:t.form.commitUser},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.form,"commitUser",e.target.value)}}}),t._v("\n                报销部门:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.department,expression:"form.department"}],staticClass:"flex-item",staticStyle:{width:"150px","border-bottom":"1px solid #ccc"},attrs:{type:"text",placeholder:""},domProps:{value:t.form.department},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.form,"department",e.target.value)}}}),t._v("\n                费用类别:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.classifyName,expression:"form.classifyName"}],staticClass:"flex-item",staticStyle:{width:"150px","border-bottom":"1px solid #ccc"},attrs:{type:"text"},domProps:{value:t.form.classifyName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.form,"classifyName",e.target.value)}}}),t._v("\n                费用类别明细:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.secondClassifyName,expression:"form.secondClassifyName"}],staticClass:"flex-item",staticStyle:{width:"150px","border-bottom":"1px solid #ccc"},attrs:{type:"text",placeholder:""},domProps:{value:t.form.secondClassifyName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.form,"secondClassifyName",e.target.value)}}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.getDeptDetail(4)}}},[t._v("查询")]),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{underline:!1,type:"text"}},[t._v("费用汇总金额: "+t._s(t.totalNum)+"元")])],1)]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{"page-size":50,param:t.form,url:"/haolifa/expenses/list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.commitUser))]),a("td",[t._v(t._s(s.department))]),a("td",[t._v(t._s(s.summary))]),a("td",[t._v(t._s(s.expensesClassify))]),a("td",[t._v(t._s(s.voucherNo))]),a("td",[t._v(t._s(s.secondClassify))]),a("td",[t._v("￥ "+t._s(s.totalAmount))]),a("td",[t._v(t._s(s.dataYear))]),a("td",[t._v(t._s(s.dataMonth))]),a("td",[t._v(t._s(s.remark))])]}}],null,!1,507770287)},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("报销人")]),a("th",[t._v("报销部门")]),a("th",[t._v("报销摘要")]),a("th",[t._v("费用类别")]),a("th",[t._v("凭证号")]),a("th",[t._v("费用类别明细")]),a("th",[t._v("总费用")]),a("th",[t._v("费用产生年份")]),a("th",[t._v("费用产生月份")]),a("th",[t._v("备注")])])])],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.deptFlag=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"310px",width:"90%",display:"flex",margin:"60px auto"}},[a("div",{staticStyle:{width:"80%",height:"300px","margin-top":"20px"},attrs:{id:"chartThreenew"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"0 auto"}},[a("div",{staticStyle:{width:"80%",height:"500px",margin:"0 auto"},attrs:{id:"chartFour"}})])}];a("a450");function r(t){if(Array.isArray(t))return t}function n(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var s,i,r=[],n=!0,l=!1;try{for(a=a.call(t);!(n=(s=a.next()).done);n=!0)if(r.push(s.value),e&&r.length===e)break}catch(o){l=!0,i=o}finally{try{n||null==a["return"]||a["return"]()}finally{if(l)throw i}}return r}}var l=a("9153");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){return r(t)||n(t,e)||Object(l["a"])(t,e)||o()}a("fc02");var p=a("9b68"),d={name:"report-form",components:{DataList:p["a"]},data:function(){return{twoYearDate:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),threeYearDate:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),chartOneList:[],yearDate:(new Date).getFullYear()+"",fourYearDate:(new Date).getFullYear()+"",totalNum:"",totalPrice:"",layer:!1,departData:[],showFlag:!0,twoData:{classifyName:"",commitUser:"",department:"",endDate:"",month:"",secondClassifyName:"",startDate:"",voucherNo:"",year:""},threeData:{classifyName:"",commitUser:"",department:"",endDate:"",month:"",secondClassifyName:"",startDate:"",voucherNo:"",year:""},deptFlag:!1,form:{classifyName:"",commitUser:"",department:"",endDate:"",month:"",secondClassifyName:"",startDate:"",voucherNo:"",year:""},deptDetailData:[]}},mounted:function(){this.twoData.startDate=this.threeData.startDate=(new Date).getFullYear()+"-01",this.getDepart(),this.getType(this.threeYearDate.split("-")[0],this.threeYearDate.split("-")[1]),this.getFour()},methods:{flush:function(){this.twoData.startDate=this.threeData.startDate=(new Date).getFullYear()+"-01",this.twoYearDate=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.threeYearDate=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.yearDate=(new Date).getFullYear()+"",this.fourYearDate=(new Date).getFullYear()+"",this.getDepart(),this.getType(this.threeYearDate.split("-")[0],this.threeYearDate.split("-")[1]),this.getFour()},addRezo:function(t){return t>9?t:"0"+t},getTwo:function(){var t=this.twoYearDate.split("-"),e=c(t,2);e[0],e[1];this.getDepart()},getThree:function(){var t=this.threeYearDate.split("-"),e=c(t,2),a=e[0],s=e[1];this.getType(a,s)},getDepart:function(){var t=this,e=this;this.$http.post("/haolifa/report/expense/classifyByDepartmentAll",this.twoData).then((function(a){a.length?t.showFlag=!0:t.showFlag=!1;var s=[],i=[];a.map((function(t){s.push(t.department),i.push({name:t.department,value:t.totalAmount})}));var r=t.$echarts.init(document.getElementById("chartTwonew")),n={title:{text:"部门费用分配",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.on("click",(function(t){e.getDepartDetail(t.data.name)})),r.setOption(n),e.getDepartDetail(s[0])})).catch((function(e){t.$toast(e.msg||e.message)}))},getDepartDetail:function(t){var e=this,a=this;this.$http.post("/haolifa/report/expense/getAllClassifyWithDepartment",{classifyName:"",commitUser:"",department:t,endDate:this.twoData.endDate,month:"",secondClassifyName:"",startDate:this.twoData.startDate,voucherNo:"",year:""}).then((function(s){var i=[],r=[];s.map((function(t){i.push(t.expensesClassify),r.push({name:t.expensesClassify,value:t.totalAmount})}));var n=e.$echarts.init(document.getElementById("chartTwoDetail")),l={title:{text:"部门明细:"+t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:i},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:r,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};n.on("click",(function(e){a.getDepartDetailSecond(t,e.data.name,year,month)})),n.setOption(l)})).catch((function(t){e.$toast(t.msg||t.message)}))},getDepartDetailSecond:function(t,e,a,s){var i=this;this.$http.post("/haolifa/expenses/list",{classifyName:e,commitUser:"",department:t,endDate:this.threeData.endDate,month:"",secondClassifyName:"",startDate:this.threeData.startDate,voucherNo:"",year:""}).then((function(t){i.layer=!0,i.departData=t.list})).catch((function(t){i.$toast(t.msg||t.message)}))},getDeptDetail:function(t){1==t?(this.form.startDate=this.twoData.startDate,this.form.endDate=this.twoData.endDate):2==t?(this.form.startDate=this.threeData.startDate,this.form.endDate=this.threeData.endDate):3==t&&(this.form.startDate=this.fourYearDate+"-01",this.form.endDate=this.fourYearDate+"-12"),this.deptDetailData=[],this.deptFlag=!0,this.getTotalNum(),this.$refs.list.update(!0)},getTotalNum:function(){var t=this;this.totalNum="",this.$http.post("/haolifa/expenses/list-summary",this.form).then((function(e){t.totalNum=e})).catch((function(e){t.$toast(e.msg||e.message)}))},getType:function(t,e){var a=this,s=this;this.$http.post("/haolifa/report/expense/getAllClassify",this.threeData).then((function(i){var r=[],n=[];i.map((function(t){r.push(t.expensesClassify),n.push({name:t.expensesClassify,value:t.totalAmount})}));var l=a.$echarts.init(document.getElementById("chartThreenew")),o={title:{text:"费用分配",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:r},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:n,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};l.on("click",(function(a){s.getDepartDetailSecond("",a.data.name,t,e)})),l.setOption(o)})).catch((function(t){a.$toast(t.msg||t.message)}))},getTypeDetail:function(t){var e=this;this.$http.get("/haolifa/report/expense/getAllClassifyWithFirstClassify?classify="+t).then((function(a){var s=[],i=[];a.map((function(t){s.push(t.department),i.push({name:t.secondClassify,value:t.totalAmount})}));var r=e.$echarts.init(document.getElementById("chartThreeDetail")),n={title:{text:"费用明细:"+t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.setOption(n)})).catch((function(t){e.$toast(t.msg||t.message)}))},getFour:function(){var t=this;this.$http.get("/haolifa/report/expense/total-by-month?year="+this.fourYearDate).then((function(e){var a=[],s=[],i=[],r=e[0].value[0].year,n=e[0].value[1].year;e.map((function(t){a.push(t.companyName+"月"),s.push(t.value[0].amount),i.push(t.value[1].amount)}));var l=t.$echarts.init(document.getElementById("chartFour")),o={color:["#3398DB","#91CC75"],title:{text:"年度费用按月统计",x:"left"},legend:{},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:a},yAxis:{type:"value"},series:[{name:r,barWidth:"30%",data:s,type:"bar"},{name:n,barWidth:"30%",data:i,type:"bar"}]};l.setOption(o)}))}}},u=d,m=(a("dc62"),a("cba8")),f=Object(m["a"])(u,s,i,!1,null,null,null);e["default"]=f.exports},"017e":function(t,e,a){},"0324":function(t,e,a){"use strict";a("121e")},"08c5":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-kemu-list"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.name,expression:"filter.name"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"费用明细"},domProps:{value:t.filter.name},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"name",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.deptName,expression:"filter.deptName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"部门名称"},domProps:{value:t.filter.deptName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"deptName",e.target.value)}}}),t._v("\n            费用类别:\n            "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.subjectsTypeCode,expression:"filter.subjectsTypeCode"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"subjectsTypeCode",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.subjectList,(function(e,s){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2)]),a("div",{staticClass:"flex-item"}),a("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")])],1),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/costbudget/subjects/getSubjectsBudgetList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.subjectsName))]),a("td",[t._v(t._s(s.name))]),a("td",[t._v(t._s(s.deptName))]),a("td",[t._v(t._s(s.costRatioFormulaCN))]),a("td",[t._v(t._s(s.balanceAmount))]),a("td",[t._v(t._s(s.remark))]),a("td",[t._v(t._s(s.updateTime))]),a("td",[t._v(t._s(s.createTime))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(s)}}},[t._v("编辑 | ")]),a("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(s)}}},[t._v("删除")])])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("费用类别")]),a("th",[t._v("费用明细")]),a("th",[t._v("部门")]),a("th",[t._v("费用")]),a("th",[t._v("余额")]),a("th",[t._v("备注")]),a("th",[t._v("更新时间")]),a("th",[t._v("创建时间")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?a("layer",{attrs:{title:"添加",width:"50%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"flex"},[a("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.subjectList,label:"选择费用类别"},on:{change:t.subjectsTypeChange},model:{value:t.form.subjectsType,callback:function(e){t.$set(t.form,"subjectsType",e)},expression:"form.subjectsType"}})],1),a("div",{staticClass:"flex"},[a("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.subjectList2,label:"选择费用明细"},on:{change:t.subChange},model:{value:t.form.subjectsId,callback:function(e){t.$set(t.form,"subjectsId",e)},expression:"form.subjectsId"}})],1),a("div",{staticClass:"flex"},[a("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.deptList,label:"选择部门"},model:{value:t.form.deptId,callback:function(e){t.$set(t.form,"deptId",e)},expression:"form.deptId"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"比例（1-100）"},model:{value:t.form.costRatio,callback:function(e){t.$set(t.form,"costRatio",e)},expression:"form.costRatio"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.save}},[t._v("保存")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(a("a450"),a("9b68")),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{deptId:"",deptName:"",name:"",subjectsId:"",subjectsTypeCode:""},statusList:[{text:"正常",value:"1"},{text:"禁用",value:"2"}],subjectList:[],subjectList2:[],layer:!1,form:{costRatio:"",deptId:"",name:"",remark:"",subjectsId:"",subjectsType:""},deptList:[]}},activated:function(){this.getSubjectList(),this.getDeptList()},methods:{flush:function(){this.filter={deptId:"",deptName:"",name:"",subjectsId:"",subjectsTypeCode:""},this.$refs.list.update(!0),this.getSubjectList(),this.getDeptList()},getSubjectList:function(){var t=this;this.$http.get("/haolifa/sys-dict/getDictListByType/SUBJECTS_TYPE").then((function(e){t.subjectList=[],e.map((function(e){t.subjectList.push({text:e.desc,value:e.code})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},subjectsTypeChange:function(t){var e=this;this.subjectList2=[],t||(this.form.subjectsId=""),this.$http.post("/haolifa/finance/subjects/getSubjectsListAllP",{pageNum:1,pageSize:1e3,subjectsType:this.form.subjectsType}).then((function(t){t.map((function(t){e.subjectList2.push({text:t.name,value:t.id})}))}))},subChange:function(){var t=this;this.form.subjectsId&&this.subjectList.map((function(e){t.form.subjectsId==e.value&&(t.form.name=e.text)}))},add:function(){this.layer=!0},edit:function(t){this.form={costRatio:t.costRatio,deptId:t.deptId,name:t.name,remark:t.remark,subjectsId:t.subjectsId,id:t.id,subjectsType:t.subjectsTypeCode},this.subjectsTypeChange(2),this.layer=!0},save:function(){var t=this;this.loading=!0;var e=this.form.id?"/haolifa/finance/costbudget/subjects/updateSubjectsBudget":"/haolifa/finance/costbudget/subjects/saveSubjectsBudget";this.$http.post(e,this.form).then((function(e){t.close(),t.$toast("保存成功"),t.loading=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},close:function(){this.form={costRatio:"",deptId:"",name:"",remark:"",subjectsType:"",subjectsId:""},this.layer=!1},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除吗？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/finance/costbudget/subjects/deleteSubjectsBudget/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},getDeptList:function(){var t=this;this.$http.get("/haolifa/dept/list").then((function(e){e.map((function(e){t.deptList.push({text:e.deptName,value:e.id})}))})).catch((function(e){t.$toast(e.msg||e.message)}))}}},l=n,o=(a("e966"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"0abe":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-invoice-list"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.demander,expression:"filter.demander"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"需求方"},domProps:{value:t.filter.demander},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"demander",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供应方"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}})]),a("div",{staticClass:"flex-item"})]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/payplansummary/getPayPlanList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.demander))]),a("td",[t._v(t._s(s.supplierName))]),a("td",[t._v(t._s(s.arrearPrice))]),a("td",[t._v(t._s(s.totalPrice))]),a("td",[t._v(t._s(s.entryPrice))]),a("td",[t._v(t._s(s.paidAccount))]),a("td",[t._v(t._s(s.applyAmount))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.detail(s)}}},[t._v("详 情")])])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("需求方")]),a("th",[t._v("供应商")]),a("th",[t._v("累计欠款额")]),a("th",[t._v("累计订货额")]),a("th",[t._v("累计入账额")]),a("th",[t._v("已付货款")]),a("th",[t._v("计划付款额")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1)])},i=[],r=a("9b68"),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{supplierName:"",demander:""}}},mounted:function(){this.getAccount()},methods:{flush:function(){this.filter={supplierName:"",demander:""},this.$refs.list.update(!0)},detail:function(t){this.$router.push({name:"/pay-planList",query:{demander:t.demander,supplierName:t.supplierName}})}}},l=n,o=(a("f9df"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"0c13e":function(t,e,a){"use strict";a("510a")},"0d14":function(t,e,a){"use strict";a("8475")},"121e":function(t,e,a){},"12b1":function(t,e,a){"use strict";a("d6f6e")},"13b9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-invoice-list"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"}),a("div",{staticClass:"flex-item scroll-y"},[a("el-tree",{ref:"tree",attrs:{data:t.data,"default-expand-all":!0,"node-click":t.nodeClick,"node-key":"id",props:t.defaultProps},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.node,i=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[t._v(t._s(s.label))]),a("span",{staticClass:"tree-span ml-20"},[a("el-link",{staticStyle:{"margin-left":"50px"}},[t._v(t._s(i.costRatioFormulaCN))]),a("el-link",{staticStyle:{"margin-left":"50px"}},[t._v(t._s(i.description))]),a("el-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"text",size:"mini"},on:{click:function(){return t.edit(i)}}},[t._v("编辑")]),a("el-button",{staticClass:"ml-20",attrs:{type:"text",size:"mini"},on:{click:function(){return t.remove(i)}}},[t._v("删除")])],1)])}}])})],1),t.layer?a("layer",{attrs:{title:"编辑",width:"50%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"flex"},[a("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.deptList,disabled:!0,label:"选择部门"},model:{value:t.form.deptId,callback:function(e){t.$set(t.form,"deptId",e)},expression:"form.deptId"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"比例（1-100）"},model:{value:t.form.costRatio,callback:function(e){t.$set(t.form,"costRatio",e)},expression:"form.costRatio"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.save}},[t._v("保存")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{deptId:"",deptPid:"",name:"",pageNum:1,pageSize:9999},statusList:[{text:"正常",value:"1"},{text:"禁用",value:"2"}],subjectList:[],layer:!1,form:{costRatio:0,deptId:"",remark:""},deptList:[],data:[],defaultProps:{label:"name",children:"childList"}}},activated:function(){this.getDeptList(),this.getList()},methods:{flush:function(){this.filter={deptId:"",deptPid:"",name:"",pageNum:1,pageSize:9999},this.getList(),this.getDeptList()},subChange:function(){var t=this;this.form.subjectsId&&this.subjectList.map((function(e){t.form.subjectsId==e.value&&(t.form.name=e.text)}))},getList:function(){var t=this;this.$http.post("/haolifa/finance/costbudget/dept/getDeptBudgetList",this.filter).then((function(e){t.data=e})).catch((function(e){t.$toast(e.message||e.msg)}))},nodeClick:function(){},add:function(){this.layer=!0},edit:function(t){this.form={costRatio:t.costRatio,deptId:t.id+"",remark:t.description},this.layer=!0},save:function(){var t=this;this.loading=!0,this.$http.post("/haolifa/finance/costbudget/dept/saveOrUp",this.form).then((function(e){t.close(),t.$toast("保存成功"),t.loading=!1,t.getList()})).catch((function(e){t.$toast(e.msg||e.message)}))},close:function(){this.form={costRatio:0,deptId:"",remark:""},this.layer=!1},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除吗？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/finance/costbudget/dept/delete/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.getList()})).catch((function(t){e.$toast(t.msg||t.message)}))}})},getDeptList:function(){var t=this;this.$http.get("/haolifa/dept/list").then((function(e){e.map((function(e){t.deptList.push({text:e.deptName,value:e.id+""})}))})).catch((function(e){t.$toast(e.msg||e.message)}))}}},l=n,o=(a("4b2d"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"153b":function(t,e,a){"use strict";e["a"]=function(t){return new Promise((function(e,a){var s=new FileReader;s.readAsDataURL(t),s.onload=function(){e(s.result)},s.onerror=function(t){a(t)}}))}},1857:function(t,e,a){},"1d52":function(t,e,a){},"1fd1":function(t,e,a){},"28b6":function(t,e,a){"use strict";function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return s}))},"2a65":function(t,e,a){},"2b5f":function(t,e,a){},"2fbe":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"process-prod flex-col"},[a("div",{staticClass:"flex-item scroll-y"},[a("div",{staticClass:"content"},[t.data?a("div",{staticClass:"p-p-base"},[a("div",{staticClass:"node"},[t._m(0),a("div",{staticClass:"node"},[a("div",{staticClass:"node-title mb-10"},[a("span",{staticClass:"b"},[t._v("流程描述：")]),a("span",{staticClass:"mr-15"},[t._v(t._s(t.data.summary))])]),a("div",{staticClass:"node-title mb-10"},[a("span",{staticClass:"b"},[t._v("发 起 人：")]),a("span",{staticClass:"mr-15"},[t._v(t._s(t.data.initUserName))])]),a("div",{staticClass:"node-title mb-10"},[a("span",{staticClass:"b"},[t._v("发起时间：")]),a("span",[t._v(t._s(t.data.createTime))])]),t._m(1),a("div",{staticClass:"layer-text",staticStyle:{padding:"0"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14 order-info"},[t._m(2),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("借款人 :")]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.loanUserName))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("借款金额 :")]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.amount))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("部门 :")]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.deptName))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("资金性质 :")]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.amountTypeCN))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("户名 :")]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.accountName))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("开户行 :")]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.bankOfDeposit))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("卡号 :")]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.cardNumber))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("借款日期 :")]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.loanDate))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("预计还款日期 :")]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.expectRepaymentDate))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("用途 :")]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.purpose))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("备注摘要 :")]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.info.remark))])])])])])]),t.data.dealStep?a("div",[a("div",{staticClass:"flex-item mt-10 mb-10"},[a("span",{staticClass:"f-20"},[t._v("审批栏")]),a("span",{staticClass:"f-10 ml-20"},[t._v("当前节点:"+t._s(t.data.dealStep.stepName))])]),a("div",{staticClass:"node"},[a("div",[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{"multi-line":!0,label:"审批意见"},model:{value:t.handleStep.auditInfo,callback:function(e){t.$set(t.handleStep,"auditInfo",e)},expression:"handleStep.auditInfo"}})],1),a("div",{staticClass:"flex"},[a("upload-box",{staticStyle:{width:"50%"},attrs:{btnText:"附件上传",fileList:t.fileList,multiple:t.multiple,onchange:t.uploadFile,onremove:t.removeFile}})],1),a("div",{staticClass:"flex",staticStyle:{"margin-top":"10px"}},[a("btn",{on:{click:function(e){return t.handleStepM(1)}}},[t._v("同意")]),a("btn",{staticClass:"ml-10",on:{click:function(e){return t.handleStepM(0)}}},[t._v("不同意")]),a("btn",{staticClass:"ml-10",on:{click:function(e){return t.backStepM()}}},[t._v("退回")])],1)])])]):t._e(),t.data.historyInfos?a("div",[t._m(3),a("div",{staticClass:"flex-item scroll-y"},[a("table",{staticClass:"data-table"},[t._m(4),t._l(t.data.historyInfos,(function(e,s){return a("tr",[a("td",[t._v(t._s(e.historyId))]),a("td",[t._v(t._s(e.instanceId))]),a("td",[t._v(t._s(3==e.auditResult?"发起":"审批"))]),a("td",[t._v(t._s(e.stepName))]),a("td",[t._v(t._s(e.auditUserName))]),a("td",[t._v(t._s(t.auditResults[e.auditResult].name))]),a("td",[t._v(t._s(e.auditInfo))]),null!=e.accessories?a("td",t._l(e.accessories,(function(e,s){return a("a",{key:s,attrs:{href:e.fileUrl}},[t._v(t._s(e.fileName))])})),0):a("td",[t._v("无")])])}))],2)])]):t._e(),t.data.accessories?a("div",[t._m(5),a("div",{staticClass:"flex-item"},t._l(t.data.accessories,(function(e,s){return a("div",{key:s,staticStyle:{"margin-left":"20px","margin-top":"5px"}},[a("div",{staticClass:"flex"},[a("a",{staticStyle:{"text-decoration":"none","out-line":"none",color:"blue"},attrs:{href:e.fileUrl,target:"_blank"}},[t._v(t._s(e.fileName))])])])})),0)]):t._e()]),t.backStepLayer?a("layer",{attrs:{title:"退回节点",width:"450px"}},[a("div",{staticClass:"node"},t._l(t.backSteps,(function(e){return a("div",{staticClass:"node-item"},[a("radio-box",{attrs:{label:e.stepId},model:{value:t.handleStep.backStepId,callback:function(e){t.$set(t.handleStep,"backStepId",e)},expression:"handleStep.backStepId"}}),t._v("\n                            "+t._s(e.stepName)+"\n                        ")],1)})),0),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){return t.cancel()}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("提交")])],1)]):t._e()],1):t._e()])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-item mt-10 mb-10"},[a("span",{staticClass:"f-20"},[t._v("基本信息")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"node-title"},[a("span",{staticClass:"b"},[t._v("借款申请详情：")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{width:"20%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"25%"}}),a("td",{staticStyle:{width:"25%"}}),a("td",{staticStyle:{width:"20%"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-item mt-10 mb-10"},[a("span",{staticClass:"f-20"},[t._v("审批历史")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticStyle:{width:"60px"}},[t._v("ID")]),a("th",[t._v("实例ID")]),a("th",[t._v("节点类型")]),a("th",[t._v("节点名称")]),a("th",[t._v("审核人")]),a("th",[t._v("审核结果")]),a("th",[t._v("意见")]),a("th",[t._v("审核附件")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-item mt-10 mb-10"},[a("span",{staticClass:"f-20"},[t._v("审批附件")])])}],n=(a("a450"),a("8dee"),a("6864")),l=a.n(n),o=a("153b"),c={name:"process-prod",data:function(){return{data:null,orderUrl:"/haolifa/export/purchaseOrder/",backStepLayer:!1,auditResults:[{status:0,name:"审核不通过"},{status:1,name:"审核通过"},{status:2,name:"退回"},{status:3,name:"流程初始化"}],handleStep:{id:0,stepId:0,auditInfo:"",allotUserId:null,auditResult:1,formId:0,formType:0,backStepId:null,condition:!0,accessorys:[]},backSteps:[],fileList:[],fileName:"",multiple:!0,info:{}}},activated:function(){this.getData()},created:function(){},methods:{switchTab:function(t){this.$router.replace({path:t,query:this.$route.query})},getData:function(){var t=this;this.$http.get("/haolifa/flowInstance/flow-history/".concat(this.$route.query.instanceId)).then((function(e){e.createTime=l()(e.createTime).format("YYYY-MM-DD HH:mm"),t.data=e,t.handleStep.id=e.instanceId,e.dealStep&&(t.handleStep.stepId=e.dealStep.stepId),t.$http.get("/haolifa/finance/loanapply/info/".concat(e.formId)).then((function(e){t.info=e,console.log(t.info)}))})).catch((function(e){t.$toast(e.message||e.msg)}))},handleStepM:function(t){var e=this;this.handleStep.auditResult=t,this.$http.post("/haolifa/flowInstance/handleStep",this.handleStep).then((function(t){e.$toast("处理成功"),e.handleStep.backStepId=null,e.backStepLayer=!1,e.getData(),e.$store.commit("DELMENUTABS","/jkfkEntrust"),e.$router.push("/")})).catch((function(t){e.$toast(t.msg||t.message)}))},uploadFile:function(t,e){var a=this;this.loading=!0,this.loadingMsg="正在上传",Object(o["a"])(t.source).then((function(e){a.$http.post("/haolifa/file/uploadFileBase64",{base64Source:e,fileName:t.name}).then((function(e){a.handleStep.accessorys.push({fileName:t.name,fileUrl:e}),a.loading=!1})).catch((function(t){a.$toast(t.msg||t.message),a.loading=!1}))}))},removeFile:function(){var t=this;return new Promise((function(e,a){t.handleStep.accessorys.splice(i,1),e()}))},backStepM:function(){var t=this;this.$http.get("/haolifa/flowInstance/backSteps/".concat(this.handleStep.id)).then((function(e){e.length>0?(t.backSteps=e,t.backStepLayer=!0):t.$toast("无可退回节点")})).catch((function(e){t.$toast(e.msg||e.message)}))},complete:function(){this.handleStepM(2)},cancel:function(){this.backStepLayer=!1,this.handleStep.backStepId=null}}},p=c,d=(a("bec9"),a("cba8")),u=Object(d["a"])(p,s,r,!1,null,null,null);e["default"]=u.exports},"2fcd":function(t,e,a){"use strict";a("5231")},"37b5":function(t,e,a){},3907:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchaseadd flex-col"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"机加工合同号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供方单位"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:"0"}},[t._v("合同状态")]),t._l(t.statusList,(function(e){return a("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])}))],2),a("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),a("div",{staticClass:"flex-item"}),a("router-link",{attrs:{to:"/purchsemanage-entrust/add"}},[a("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"}},[t._v("新增机加工订单")])],1)],1),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{method:"get","page-size":15,param:t.filter,url:"/haolifa/purchase-order/list/1"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",[t._v(t._s(i))]),a("td",[t._v(t._s(s.purchaseOrderNo))]),a("td",[t._v(t._s(s.supplierName))]),a("td",[t._v(t._s(s.deliveryTime))]),a("td",[t._v(t._s(s.totalCount))]),a("td",[t._v(t._s(t.statusList[s.status-1].name))]),a("td",[t._v(t._s(s.createUserId))]),a("td",[t._v(t._s(s.createTime))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("查看")]),1==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approve(s.purchaseOrderNo)}}},[t._v("发起审批")]):t._e(),3==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.createInspect(s.id)}}},[t._v("生成报检单")]):t._e(),1==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.updatePurchase(s.id)}}},[t._v("编辑")]):t._e(),2==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approveProgress(s)}}},[t._v("审批进度")]):t._e(),1==s.status||4==s.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.deletePurchase(s.purchaseOrderNo)}}},[t._v("删除")]):t._e(),3==s.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.completePurchase(s.purchaseOrderNo)}}},[t._v("采购完成")]):t._e()])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("机加工合同号")]),a("th",[t._v("供方单位")]),a("th",[t._v("加工完成日期")]),a("th",[t._v("订单总数量")]),a("th",[t._v("订单状态")]),a("th",[t._v("创建人")]),a("th",[t._v("创建日期")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?a("layer",{attrs:{title:"订单折损",width:"450px"}},[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损金额"},model:{value:t.wreck.wreckAmount,callback:function(e){t.$set(t.wreck,"wreckAmount",e)},expression:"wreck.wreckAmount"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损原因"},model:{value:t.wreck.wreckReason,callback:function(e){t.$set(t.wreck,"wreckReason",e)},expression:"wreck.wreckReason"}})],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14"},[a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("机加工订单")]),a("td",{staticClass:"b",attrs:{colspan:"6"}},[a("a",{staticClass:"a",staticStyle:{color:"#008eff"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),a("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),a("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),a("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),a("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),a("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(e,s){return a("tr",{key:e.id},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitPrice))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalAmount))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])})),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("总计")]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),a("td",{attrs:{colspan:"1"}})]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),a("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),a("td",{attrs:{colspan:"3"}},[t._v("批准：")]),a("td",{attrs:{colspan:"3"}},[t._v("审核：")]),a("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"purchsemanage-entrust",components:{DataList:r["a"]},data:function(){return{natureList:["国有","三资","集体","联营","私营"],statusList:[{status:1,name:"待审批"},{status:2,name:"审批中"},{status:3,name:"采购中"},{status:4,name:"审批不通过"},{status:5,name:"采购完成"}],filter:{orderNo:"",supplierName:"",status:0,createUserId:0},wreck:{orderNo:"",wreckAmount:0,wreckReason:""},completeLayer:!1,confirmLayer:!1,loading:!1,info:{},itemList:[],orderUrl:"",layer:!1}},created:function(){this.filter.createUserId=0},methods:{flush:function(){this.filter={orderNo:"",supplierName:"",status:0,createUserId:0},this.$refs.list.update(!0)},getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/purchase-order/info/".concat(t)).then((function(t){e.info=t.order,e.orderUrl=t.order.fileUrl,e.itemList=t.items,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10),console.log("info",e.info),console.log("itemList",e.itemList)})).catch((function(t){e.$toast(t.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))},createInspect:function(t){var e=this;this.$http.get("/haolifa/purchase-order/createInspect/".concat(t)).then((function(t){console.log("报检单号",t),e.$confirm({title:"完善报检单",text:"现在去完善报检单？",color:"blue",btns:["稍后再说","现在完善"],yes:function(){e.$router.push("/applyBuy-material/edit?id=".concat(t))}})}))},approveProgress:function(t){this.$router.push("/purchsemanage-entrust/approveProgress?formNo=".concat(t.purchaseOrderNo,"&formId=0"))},approve:function(t){var e=this;this.$confirm({title:"发起审批",text:"确定发起审批？",color:"blue",btns:["取消","确认"],yes:function(){e.$http.get("/haolifa/purchase-order/approve/".concat(t,"/1")).then((function(t){e.$toast("发起成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},updatePurchase:function(t){this.$router.push("/purchsemanage-entrust/add?formId=".concat(t))},completePurchase:function(t){this.completeLayer=!0,this.wreck.orderNo=t},complete:function(){var t=this;this.$http.post("/haolifa/purchase-order/complete",this.wreck).then((function(e){t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},deletePurchase:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除该订单么？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/purchase-order/delete/".concat(t)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg)}))}})}}},l=n,o=(a("aed2"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"394af":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"abs scroll-y"},[a("div",{staticClass:"metalwork-info",staticStyle:{width:"100%",margin:"0 auto"}},[a("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[a("icon-btn",{staticClass:"mr-15",on:{click:function(e){t.$store.commit("DELMENUTABS","/purchsemanage-purchase/approveProgress"),t.$router.back()}}},[t._v("arrow_back")]),a("div",{staticClass:"flex-item"},[t._v("审批进度")])],1),a("div",{staticStyle:{"min-width":"1200px"}},t._l(t.list,(function(e,s){return a("div",{key:s,staticClass:"approve"},[a("p",[t._v(t._s(e.roleName))]),a("p",{class:4==e.auditResult?"button ccc":"button"},[t._v(t._s(e.stepName))]),s<t.list.length-1?a("span",[t._v("-----\x3e")]):t._e(),a("p",[t._v(t._s(t.status[e.auditResult])+t._s(e.auditTime))]),e.child.length>0?a("div",{staticClass:"approve",staticStyle:{position:"absolute",top:"123px"}},[a("div",{staticClass:"height-line"}),a("div",{staticClass:"bottom-arrows"}),a("p",[t._v(t._s(e.child[0].roleName))]),a("p",{class:4==e.child[0].auditResult?"button ccc":"button"},[t._v(t._s(e.child[0].stepName))]),a("p",[t._v(t._s(t.status[e.child[0].auditResult])+t._s(e.auditTime))]),a("div",{staticClass:"right-height-line"}),a("div",{staticClass:"top-arrows"})]):t._e()])})),0)])])},i=[],r={name:"purchsemanage-purchaseapproveProgress",data:function(){return{list:[],status:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},activated:function(){this.getInfo(this.$route.query.formNo,this.$route.query.formId)},methods:{getInfo:function(t,e){var a=this;this.$http.get("/haolifa/flowInstance/flow/progress?formNo=".concat(t,"&formId=").concat(e)).then((function(t){console.log(t),a.list=t})).catch((function(t){a.$toast(t.msg||t.message)}))}}},n=r,l=(a("0c13e"),a("cba8")),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},"42e9":function(t,e,a){"use strict";a("c4fe")},4404:function(t,e,a){},4517:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apply-buy-add"},[a("div",{staticClass:"content"},[a("div",{staticClass:"title b f-18 mb-10"},[t._v(t._s(t.isAdd?"新增":"编辑")+"采购订单")]),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方"},model:{value:t.form.demander,callback:function(e){t.$set(t.form,"demander",e)},expression:"form.demander"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方地址"},model:{value:t.form.demanderAddr,callback:function(e){t.$set(t.form,"demanderAddr",e)},expression:"form.demanderAddr"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系人"},model:{value:t.form.demanderLinkman,callback:function(e){t.$set(t.form,"demanderLinkman",e)},expression:"form.demanderLinkman"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系电话"},model:{value:t.form.demanderPhone,callback:function(e){t.$set(t.form,"demanderPhone",e)},expression:"form.demanderPhone"}})],1),a("div",{staticClass:"flex"},[a("select-box",{staticStyle:{"margin-right":"20px",width:"240px"},attrs:{list:t.supplierList,label:"供应商"},on:{change:function(e){return t.changeSupplier()}},model:{value:t.form.supplierNo,callback:function(e){t.$set(t.form,"supplierNo",e)},expression:"form.supplierNo"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方地址"},model:{value:t.form.supplierAddr,callback:function(e){t.$set(t.form,"supplierAddr",e)},expression:"form.supplierAddr"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系人"},model:{value:t.form.supplierLinkman,callback:function(e){t.$set(t.form,"supplierLinkman",e)},expression:"form.supplierLinkman"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系电话"},model:{value:t.form.suppilerPhone,callback:function(e){t.$set(t.form,"suppilerPhone",e)},expression:"form.suppilerPhone"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方确认人"},model:{value:t.form.supplierConfirmer,callback:function(e){t.$set(t.form,"supplierConfirmer",e)},expression:"form.supplierConfirmer"}})],1),a("div",{staticClass:"flex"},[a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"确认时间"},model:{value:t.form.confirmTime,callback:function(e){t.$set(t.form,"confirmTime",e)},expression:"form.confirmTime"}}),a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"交货时间"},model:{value:t.form.deliveryTime,callback:function(e){t.$set(t.form,"deliveryTime",e)},expression:"form.deliveryTime"}}),a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办时间"},model:{value:t.form.operateTime,callback:function(e){t.$set(t.form,"operateTime",e)},expression:"form.operateTime"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办人"},model:{value:t.form.operatorUserName,callback:function(e){t.$set(t.form,"operatorUserName",e)},expression:"form.operatorUserName"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",attrs:{label:"采购合同编号"},model:{value:t.form.orderNo,callback:function(e){t.$set(t.form,"orderNo",e)},expression:"form.orderNo"}}),a("select-box",{staticClass:"flex-item",attrs:{list:t.payTypeList,label:"付款方式"},model:{value:t.form.payType,callback:function(e){t.$set(t.form,"payType",e)},expression:"form.payType"}})],1),a("div",{staticClass:"b",staticStyle:{margin:"20px 0 10px"}},[t._v("采购物料项")]),t._l(t.form.itemList,(function(e,s){return a("div",{key:s,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[a("div",{staticClass:"flex-item"},[a("div",{staticClass:"flex"},[a("select-box",{staticClass:"flex-item mr-10",attrs:{list:t.nameList,label:"物料名称"},model:{value:e.materialName,callback:function(a){t.$set(e,"materialName",a)},expression:"item.materialName"}}),a("el-select",{staticClass:"flex-item mr-10 mycs",attrs:{filterable:"",placeholder:"物料图号选择"},on:{change:function(a){return t.materialInfo(e)}},model:{value:e.materialGraphNo,callback:function(a){t.$set(e,"materialGraphNo",a)},expression:"item.materialGraphNo"}},t._l(t.tuhaoList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.value}})})),1),a("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"数量"},model:{value:e.number,callback:function(a){t.$set(e,"number",a)},expression:"item.number"}}),a("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单位"},model:{value:e.unit,callback:function(a){t.$set(e,"unit",a)},expression:"item.unit"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-10",attrs:{label:"材质"},model:{value:e.material,callback:function(a){t.$set(e,"material",a)},expression:"item.material"}}),a("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格"},model:{value:e.specification,callback:function(a){t.$set(e,"specification",a)},expression:"item.specification"}}),a("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单价"},model:{value:e.unitPrice,callback:function(a){t.$set(e,"unitPrice",a)},expression:"item.unitPrice"}}),a("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单重"},model:{value:e.unitWeight,callback:function(a){t.$set(e,"unitWeight",a)},expression:"item.unitWeight"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",attrs:{label:"备注"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}})],1)]),t.form.itemList.length>1?a("div",[a("icon-btn",{attrs:{small:""},on:{click:function(e){return t.form.itemList.splice(s,1)}}},[t._v("close")])],1):t._e()])})),a("div",{staticClass:"card a flex-center",on:{click:function(e){return t.addItem()}}},[t._m(0)]),a("div",{staticClass:"flex"},[a("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(e){return t.submit()}}},[t._v("提交")]),a("btn",{attrs:{big:"",flat:""},on:{click:function(e){t.$store.commit("DELMENUTABS","/purchsemanage-purchase/add"),t.$router.back()}}},[t._v("取消")])],1)],2)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-v-center"},[a("i",{staticClass:"icon mr-10"},[t._v("add")]),a("span",[t._v("添加采购物料项")])])}],r=(a("1bc78"),{name:"purchsemanage-purchaseadd",data:function(){return{supplierInfoList:[],supplierList:[],form:{id:null,confirmTime:"",deliveryTime:"",demander:"山西好利阀机械制造有限公司",demanderAddr:"山西省侯马经济开发区旺旺北支路东侧",demanderLinkman:"",demanderPhone:"",operateTime:"",operatorUserName:"",orderNo:"",suppilerPhone:"",supplierAddr:"",supplierConfirmer:"",supplierLinkman:"",supplierName:"",supplierNo:"",payType:"",itemList:[{id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}]},isAdd:!0,nameList:[],tuhaoList:[],payTypeList:[{value:"款到发货",text:"款到发货"},{value:"月结",text:"月结"},{value:"先预付30%，发货前付清剩余货款",text:"先预付30%，发货前付清剩余货款"},{value:"收到发票后60天内付清货款",text:"收到发票后60天内付清货款"}]}},activated:function(){var t=this;this.form={id:null,confirmTime:"",deliveryTime:"",demander:"山西好利阀机械制造有限公司",demanderAddr:"山西省侯马经济开发区旺旺北支路东侧",demanderLinkman:"",demanderPhone:"",operateTime:"",operatorUserName:"",orderNo:"",suppilerPhone:"",supplierAddr:"",supplierConfirmer:"",supplierLinkman:"",supplierName:"",supplierNo:"",payType:"",itemList:[{id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}]};var e=this.$route.query.formId;this.form.id=e,this.$http.get("/haolifa/supplier/list-all").then((function(e){t.supplierList=e.map((function(t){return{value:t.suppilerNo,text:t.suppilerName}})),t.supplierInfoList=e})),e&&(this.isAdd=!1,this.$http.get("/haolifa/purchase-order/info/"+e).then((function(e){t.form.id=e.order.id,t.form.demander=e.order.demander,t.form.demanderAddr=e.order.demanderAddr,t.form.demanderLinkman=e.order.demanderLinkman,t.form.demanderPhone=e.order.demanderPhone,t.form.operatorUserName=e.order.operatorUserName,t.form.suppilerPhone=e.order.suppilerPhone,t.form.supplierAddr=e.order.supplierAddr,t.form.supplierConfirmer=e.order.supplierConfirmer,t.form.supplierLinkman=e.order.supplierLinkman,t.form.supplierName=e.order.supplierName,t.form.supplierNo=e.order.supplierNo,t.form.payType=e.order.payType,t.form.orderNo=e.order.purchaseOrderNo,t.form.confirmTime=e.order.confirmTime.substring(0,10),t.form.deliveryTime=e.order.deliveryTime.substring(0,10),t.form.operateTime=e.order.operateTime.substring(0,10),t.form.itemList=e.items.map((function(t){return{id:t.id,material:t.material,materialGraphNo:t.materialGraphNo,materialName:t.materialName,number:t.number,remark:t.remark,specification:t.specification,unit:t.unit,unitPrice:t.unitPrice,unitWeight:t.unitWeight}}))})))},mounted:function(){var t=this,e=this.$route.query.formId;this.form.id=e,this.$http.get("/haolifa/supplier/list-all").then((function(e){t.supplierList=e.map((function(t){return{value:t.suppilerNo,text:t.suppilerName}})),t.supplierInfoList=e})),e&&(this.isAdd=!1,this.$http.get("/haolifa/purchase-order/info/"+e).then((function(e){t.form.id=e.order.id,t.form.demander=e.order.demander,t.form.demanderAddr=e.order.demanderAddr,t.form.demanderLinkman=e.order.demanderLinkman,t.form.demanderPhone=e.order.demanderPhone,t.form.operatorUserName=e.order.operatorUserName,t.form.suppilerPhone=e.order.suppilerPhone,t.form.supplierAddr=e.order.supplierAddr,t.form.supplierConfirmer=e.order.supplierConfirmer,t.form.supplierLinkman=e.order.supplierLinkman,t.form.supplierName=e.order.supplierName,t.form.supplierNo=e.order.supplierNo,t.form.payType=e.order.payType,t.form.orderNo=e.order.purchaseOrderNo,t.form.confirmTime=e.order.confirmTime.substring(0,10),t.form.deliveryTime=e.order.deliveryTime.substring(0,10),t.form.operateTime=e.order.operateTime.substring(0,10),t.form.itemList=e.items.map((function(t){return{id:t.id,material:t.material,materialGraphNo:t.materialGraphNo,materialName:t.materialName,number:t.number,remark:t.remark,specification:t.specification,unit:t.unit,unitPrice:t.unitPrice,unitWeight:t.unitWeight}}))})))},methods:{materialInfo:function(t){},changeSupplier:function(){var t=this;if(this.supplierInfoList.forEach((function(e,a){e.suppilerNo==t.form.supplierNo&&(t.form.suppilerPhone=e.phone,t.form.supplierAddr=e.address,t.form.supplierLinkman=e.responsiblePerson,t.form.supplierName=e.suppilerName)})),this.nameList=this.tuhaoList=[],this.form.supplierNo){var e={pageNum:1,pageSize:500,supplierNo:this.form.supplierNo};this.$http.post("/haolifa/supplier-pro/list",e).then((function(e){var a=e.list;t.nameList=a.map((function(t){return{value:t.materialName,text:t.materialName}})),t.tuhaoList=a.map((function(t){return{value:t.materialGraphNo,text:t.materialGraphNo}}))})).catch((function(e){t.$toast(e.msg||e.message)}))}},addItem:function(){this.form.itemList.push({id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}),this.$forceUpdate()},submit:function(){var t=this,e={materialName:"物料名称",materialGraphNo:"物料图号",number:"数量",material:"材质",specification:"规格",unit:"单位",unitPrice:"单价",unitWeight:"单重"},a=!0;this.form.itemList.forEach((function(s,i){for(var r in s)e[r]&&!s[r]&&(t.$toast("请填写第 ".concat(i+1," 项 ").concat(e[r])),a=!1)})),a&&this.$http.post(this.isAdd?"/haolifa/purchase-order/save/0":"/haolifa/purchase-order/update",this.form).then((function(e){t.$toast(t.isAdd?"创建成功":"更新成功"),t.$store.commit("DELMENUTABS","/purchsemanage-purchase/add"),t.$router.push("/purchsemanage-purchase/addList")})).catch((function(e){t.$toast(e.message||e.msg)}))}}}),n=r,l=(a("0324"),a("cba8")),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},"47c4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-notification"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex"}},[a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"year","value-format":"yyyy",editable:!1,placeholder:"选择年"},on:{change:t.getCbOne},model:{value:t.yearDate,callback:function(e){t.yearDate=e},expression:"yearDate"}})],1),t._m(0),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex"}},[a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"year","value-format":"yyyy",editable:!1,placeholder:"选择年"},on:{change:t.getCbTwo},model:{value:t.yearDate2,callback:function(e){t.yearDate2=e},expression:"yearDate2"}})],1),t._m(1),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex"}},[a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"year","value-format":"yyyy",editable:!1,placeholder:"选择年"},on:{change:t.getCbThree},model:{value:t.yearDate3,callback:function(e){t.yearDate3=e},expression:"yearDate3"}})],1),t._m(2)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"300px",width:"96%",margin:"0 auto"}},[a("div",{staticStyle:{width:"100%",height:"300px",margin:"0 auto"},attrs:{id:"cbOne"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"300px",width:"96%",margin:"0 auto"}},[a("div",{staticStyle:{width:"100%",height:"300px",margin:"0 auto"},attrs:{id:"cbTwo"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"300px",width:"96%",margin:"0 auto"}},[a("div",{staticStyle:{width:"100%",height:"300px",margin:"0 auto"},attrs:{id:"cbThree"}})])}],r=a("9b68"),n={name:"report-form",components:{DataList:r["a"]},data:function(){return{yearDate:(new Date).getFullYear()+"",yearDate2:(new Date).getFullYear()+"",yearDate3:(new Date).getFullYear()+""}},mounted:function(){this.getCbOne(),this.getCbTwo(),this.getCbThree()},methods:{flush:function(){this.yearDate=(new Date).getFullYear()+"",this.getCbOne(),this.yearDate2=(new Date).getFullYear()+"",this.getCbTwo(),this.yearDate3=(new Date).getFullYear()+"",this.getCbThree()},addRezo:function(t){return t>9?t:"0"+t},getCbOne:function(){var t=this;this.$http.post("/haolifa/report/cost/finance",{endDate:"",startDate:"",year:this.yearDate}).then((function(e){var a=[],s=[];e.map((function(t){a.push(t.dataMonth),s.push(t.totalAmount)}));var i=t.$echarts.init(document.getElementById("cbOne")),r={title:{text:"财务成本趋势图",x:"center"},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{data:s,type:"line",areaStyle:{},itemStyle:{normal:{label:{show:!0}}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getCbTwo:function(){var t=this;this.$http.post("/haolifa/report/cost/material",{endDate:"",startDate:"",year:this.yearDate2}).then((function(e){var a=[],s=[];e.map((function(t){a.push(t.dataMonth),s.push(t.totalAmount)}));var i=t.$echarts.init(document.getElementById("cbTwo")),r={title:{text:"材料成本趋势图",x:"center"},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{data:s,type:"line",areaStyle:{},itemStyle:{normal:{label:{show:!0}}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getCbThree:function(){var t=this;this.$http.post("/haolifa/report/cost/quality",{endDate:"",startDate:"",year:this.yearDate3}).then((function(e){var a=[],s=[];e.map((function(t){a.push(t.dataMonth),s.push(t.totalAmount)}));var i=t.$echarts.init(document.getElementById("cbThree")),r={title:{text:"质量成本趋势图",x:"center"},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{data:s,type:"line",areaStyle:{},itemStyle:{normal:{label:{show:!0}}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))}}},l=n,o=(a("87b5"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"4a2e":function(t,e,a){"use strict";a("c86d")},"4b2d":function(t,e,a){"use strict";a("6e21")},"4d46":function(t,e,a){"use strict";a("548e")},"4ee2":function(t,e,a){},"4f0e":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-supplier-info abs scroll-y"},[a("div",{staticClass:"form-content"},[a("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[a("icon-btn",{staticClass:"mr-15",on:{click:function(e){return t.$router.back()}}},[t._v("arrow_back")]),a("div",{staticClass:"flex-item"},[t._v("订单详情")]),a("div",{staticClass:"flex-item ml-20"},[a("a",{staticClass:"a",staticStyle:{color:"#008eff"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])],1),a("table",{staticClass:"f-14"},[t._m(0),t._m(1),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),a("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),a("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),a("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),a("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),a("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),t._m(2),t._m(3),t._l(t.itemList,(function(e,s){return a("tr",{key:e.id},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitPrice))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalAmount))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])})),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("总计")]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),a("td",{attrs:{colspan:"1"}})]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                    "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                ")])]),t._m(4),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                    "+t._s(t.info.payType)+"\n                ")])]),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11)],2)])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"b",attrs:{colspan:"12"}},[t._v("机加工订单")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                    "),a("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29\n                ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),a("td",{attrs:{colspan:"3"}},[t._v("批准：")]),a("td",{attrs:{colspan:"3"}},[t._v("审核：")]),a("td",{attrs:{colspan:"3"}},[t._v("经办：")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])}],r={name:"purchsemanage-purchaseinfo",data:function(){return{loading:!1,info:{},itemList:[],orderUrl:""}},activated:function(){this.getInfo()},created:function(){this.getInfo()},methods:{getInfo:function(){var t=this,e=this.$route.query.formId;console.log(e),this.info.id=e,this.$http.get("/haolifa/purchase-order/info/".concat(e)).then((function(e){t.info=e.order,t.orderUrl=e.order.fileUrl,t.itemList=e.items,t.info.operateTime=e.order.operateTime.substring(0,10),t.info.confirmTime=e.order.confirmTime.substring(0,10),t.info.createTime=e.order.createTime.substring(0,10),t.info.deliveryTime=e.order.deliveryTime.substring(0,10),t.info.updateTime=e.order.updateTime.substring(0,10),console.log("info",t.info),console.log("itemList",t.itemList)})).catch((function(e){t.$toast(e.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))}}},n=r,l=(a("0d14"),a("cba8")),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},"510a":function(t,e,a){},5231:function(t,e,a){},"548e":function(t,e,a){},"54d4":function(t,e,a){"use strict";a("1857")},"576b":function(t,e,a){"use strict";a("c7a3")},5987:function(t,e,a){"use strict";a("a01e")},6097:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-invoice-list"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.applyNo,expression:"filter.applyNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"申请编号"},domProps:{value:t.filter.applyNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"applyNo",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.contractNo,expression:"filter.contractNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"合同号"},domProps:{value:t.filter.contractNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"contractNo",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.payCompany,expression:"filter.payCompany"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"付款单位"},domProps:{value:t.filter.payCompany},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"payCompany",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.applyCollectionCompany,expression:"filter.applyCollectionCompany"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"收款单位"},domProps:{value:t.filter.applyCollectionCompany},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"applyCollectionCompany",e.target.value)}}}),t._v("\n            付款状态:\n            "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:""}},[t._v("全部")]),a("option",{attrs:{value:"0"}},[t._v("未付")]),a("option",{attrs:{value:"1"}},[t._v("付款中")]),a("option",{attrs:{value:"2"}},[t._v("已付款")])]),t._v("\n            数据状态:\n            "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.dataStatus,expression:"filter.dataStatus"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"dataStatus",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:""}},[t._v("全部")]),a("option",{attrs:{value:"0"}},[t._v("待主管会计确认")]),a("option",{attrs:{value:"1"}},[t._v("出纳付款")])])]),a("div",{staticClass:"flex-item"})]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/payplan/getPayPlanList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.applyNo))]),a("td",[t._v(t._s(s.applyDate))]),a("td",[t._v(t._s(s.contractNo))]),a("td",[t._v(t._s(s.contractPayWay))]),a("td",[t._v(t._s(s.payCompany))]),a("td",[t._v(t._s(s.applyCollectionCompany))]),a("td",[t._v(t._s(s.applyAmount))]),a("td",[t._v(t._s(s.remark))]),a("td",[t._v(t._s(t.payWayCn(s.payWayList)))]),a("td",[t._v(t._s(t.statusArr[s.status]))]),a("td",[t._v(t._s(s.payDate))]),a("td",[t._v(t._s(s.bookingTypeList.toString()))]),a("td",[t._v(t._s(t.dataStatusArr[s.dataStatus]))]),a("td",{staticClass:"t-right"},[s.isCN&&0==s.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.payClick(s)}}},[t._v("付 款")]):t._e(),s.canConfirm?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.confirmClick(s.id)}}},[t._v("确 认")]):t._e()])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("申请编号")]),a("th",[t._v("申请日期")]),a("th",[t._v("合同号")]),a("th",[t._v("合同付款方式")]),a("th",[t._v("付款单位")]),a("th",[t._v("收款单位")]),a("th",[t._v("付款金额")]),a("th",[t._v("付款备注")]),a("th",[t._v("付款方式")]),a("th",[t._v("付款状态")]),a("th",[t._v("付款日期")]),a("th",[t._v("记账方式")]),a("th",[t._v("数据状态")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?a("layer",{attrs:{title:"付款",width:"50%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"申请付款单位"},model:{value:t.form.applyPayCompany,callback:function(e){t.$set(t.form,"applyPayCompany",e)},expression:"form.applyPayCompany"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"总付款金额"},model:{value:t.form.applyAmount,callback:function(e){t.$set(t.form,"applyAmount",e)},expression:"form.applyAmount"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"余额"},model:{value:t.balance,callback:function(e){t.balance=e},expression:"balance"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"付款备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"付款单位"},model:{value:t.form.payCompany,callback:function(e){t.$set(t.form,"payCompany",e)},expression:"form.payCompany"}}),a("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.accountList,label:"付款账号"},model:{value:t.form.payAccount,callback:function(e){t.$set(t.form,"payAccount",e)},expression:"form.payAccount"}})],1),a("div",{staticClass:"flex mt-20 mb-20",staticStyle:{color:"#2b7bcd"}},[t._v("付款方式：")]),t._l(t.form.payWayList,(function(e,s){return a("div",{key:s,staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"金额",type:"number"},on:{blur:function(e){return t.changeBalance(s)}},model:{value:e.amount,callback:function(a){t.$set(e,"amount",a)},expression:"item.amount"}}),a("select-box",{staticClass:"flex-item mr-20",attrs:{list:e.bookingTypeList,label:"记账方式"},on:{change:function(e){return t.getCodeList(s)}},model:{value:e.bookingType,callback:function(a){t.$set(e,"bookingType",a)},expression:"item.bookingType"}}),a("select-box",{staticClass:"flex-item mr-20",attrs:{list:e.codeList,label:"付款方式"},model:{value:e.code,callback:function(a){t.$set(e,"code",a)},expression:"item.code"}}),a("el-button",{staticStyle:{height:"30px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.addAmount(t.index)}}},[t._v("添加")]),t.form.payWayList.length>1?a("el-button",{staticStyle:{height:"30px"},attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.delAmount(t.index)}}},[t._v("删除")]):t._e()],1)})),a("div",{staticClass:"flex"},[a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"付款日期"},model:{value:t.form.payDate,callback:function(e){t.$set(t.form,"payDate",e)},expression:"form.payDate"}}),a("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.statusList,label:"付款状态"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],2),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.save}},[t._v("保存")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{applyAmount:"",applyCollectionCompany:"",applyDate:"",applyDateEnd:"",applyDateStart:"",applyNo:"",applyPayCompany:"",bookingType:"",contractId:"",contractNo:"",contractPayWay:"",createTime:"",createUser:"",dataStatus:"",delFlag:"",id:"",payAccount:"",payCompany:"",payDataId:"",payDate:"",payWay:"",paymentType:"",remark:"",status:"",updateTime:"",updateUser:""},statusArr:["未付","付款中","已付款"],statusList:[{text:"未付款",value:"0"},{text:"已付款",value:"2"}],dataStatusArr:["待主管会计确认","出纳付款"],layer:!1,form:{applyAmount:0,applyPayCompany:"",id:"",payAccount:"",payCompany:"",payDate:"",payWayList:[{amount:0,bookingType:"",bookingTypeList:[{text:"现金日记账",value:"cash_bill"},{text:"银行日记账",value:"bank_bill"},{text:"其他货币日记账",value:"other_bill"}],code:"",codeList:[]}],remark:"",status:""},accountList:[],account1:0,account2:0,account3:0,payTypeList:[{}],balance:0}},activated:function(){this.$route.query.demander&&(this.filter.payCompany=this.$route.query.demander),this.$route.query.supplierName&&(this.filter.applyCollectionCompany=this.$route.query.supplierName),this.$refs.list.update(!0),this.getAccount()},methods:{flush:function(){this.filter={applyAmount:"",applyCollectionCompany:"",applyDate:"",applyDateEnd:"",applyDateStart:"",applyNo:"",applyPayCompany:"",bookingType:"",contractId:"",contractNo:"",contractPayWay:"",createTime:"",createUser:"",dataStatus:"",delFlag:"",id:"",payAccount:"",payCompany:"",payDataId:"",payDate:"",payWay:"",paymentType:"",remark:"",status:"",updateTime:"",updateUser:""},this.$refs.list.update(!0),this.getAccount()},payWayCn:function(t){var e="";return t.length&&t.map((function(t){e+=t.payWay+":"+t.applyAmount+";"})),e},payClick:function(t){this.layer=!0,this.form.id=t.id,this.form.applyPayCompany=t.applyPayCompany,this.form.applyAmount=t.applyAmount,this.form.remark=t.remark,this.balance=t.applyAmount},confirmClick:function(t){var e=this;this.$confirm({title:"确认该操作吗",text:"",color:"red",btns:["取消","确认"],yes:function(){var a=[];a.push(t),e.$http.post("/haolifa/finance/payplan/confirm",{ids:a}).then((function(t){e.$toast("确认成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},getAccount:function(){var t=this;this.accountList=[],this.$http.get("/haolifa/sys-dict/getDictListByType/PAY_ACCOUNT").then((function(e){e.map((function(e){t.accountList.push({text:e.desc,value:e.desc})}))}))},changeBalance:function(t){var e=this;this.balance=this.form.applyAmount,this.form.payWayList.map((function(t){e.balance=e.balance-t.amount})),this.balance=Math.floor(100*this.balance)/100},save:function(){var t=this;if(this.balance<0)this.$toast("付款金额已超出总付款金额");else{var e=JSON.parse(JSON.stringify(this.form));e.payWayList.map((function(t){delete t.codeList,delete t.bookingTypeList})),this.$http.post("/haolifa/finance/payplan/updatePayPlan",e).then((function(e){t.layer=!1,t.$toast("付款成功"),t.close(),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))}},close:function(){this.layer=!1,this.form={applyAmount:0,applyPayCompany:"",id:"",payAccount:"",payCompany:"",payDate:"",payWayList:[{amount:0,bookingType:"",bookingTypeList:[{text:"现金日记账",value:"cash_bill"},{text:"银行日记账",value:"bank_bill"},{text:"其他货币日记账",value:"other_bill"}],code:"",codeList:[]}],remark:"",status:""}},addAmount:function(t){this.form.payWayList.push({amount:0,bookingType:"",bookingTypeList:[{text:"现金日记账",value:"cash_bill"},{text:"银行日记账",value:"bank_bill"},{text:"其他货币日记账",value:"other_bill"}],code:"",codeList:[]})},delAmount:function(t){this.form.payWayList.splice(t,1)},getCodeList:function(t){this.form.payWayList[t].code="","cash_bill"==this.form.payWayList[t].bookingType?this.form.payWayList[t].codeList=[{text:"现金",value:"cash_pay"}]:"bank_bill"==this.form.payWayList[t].bookingType?this.form.payWayList[t].codeList=[{text:"支票",value:"check_pay"},{text:"电汇",value:"remittance_pay"}]:"other_bill"==this.form.payWayList[t].bookingType&&(this.form.payWayList[t].codeList=[{text:"承兑",value:"acceptance_pay"},{text:"汇票",value:"money_oder_pay"}])}}},l=n,o=(a("4d46"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"6a68c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"process-prod flex-col"},[a("div",{staticClass:"flex-item scroll-y"},[a("div",{staticClass:"content"},[t.data?a("div",{staticClass:"p-p-base"},[a("div",{staticClass:"node"},[t._m(0),a("div",{staticClass:"node"},[a("div",{staticClass:"node-title mb-10"},[a("span",{staticClass:"b"},[t._v("流程描述：")]),a("span",{staticClass:"mr-15"},[t._v(t._s(t.data.summary))])]),a("div",{staticClass:"node-title mb-10"},[a("span",{staticClass:"b"},[t._v("发 起 人：")]),a("span",{staticClass:"mr-15"},[t._v(t._s(t.data.initUserName))])]),a("div",{staticClass:"node-title mb-10"},[a("span",{staticClass:"b"},[t._v("发起时间：")]),a("span",[t._v(t._s(t.data.createTime))])]),t._m(1),a("div",{staticClass:"layer-text",staticStyle:{padding:"0"}},[a("el-descriptions",{staticClass:"margin-top",attrs:{column:2,size:"mini",border:""}},[a("el-descriptions-item",[a("template",{slot:"label"},[t._v("报销金额")]),t._v("\n                                    "+t._s(t.form.amount)+"\n                                ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("户名")]),t._v("\n                                    "+t._s(t.form.accountName)+"\n                                ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("开户行")]),t._v("\n                                    "+t._s(t.form.bankOfDeposit)+"\n                                ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("卡号")]),t._v("\n                                    "+t._s(t.form.cardNumber)+"\n                                ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("报销日期")]),t._v("\n                                    "+t._s(t.form.reimburseDate)+"\n                                ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("备注摘要")]),t._v("\n                                    "+t._s(t.form.remark)+"\n                                ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("报销方式")]),t._v("\n                                    "+t._s("1"==t.form.reimburseType?"普通报销":"借款冲抵")+"\n                                ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("报销类别")]),t._v("\n                                    "+t._s("1"==t.form.type?"差旅报销":"费用报销")+"\n                                ")],2),2==t.form.reimburseType?a("el-descriptions-item",[a("template",{slot:"label"},[t._v("冲抵金额")]),t._v("\n                                    "+t._s(t.form.offsetAmount)+"\n                                ")],2):t._e(),2==t.form.reimburseType?a("el-descriptions-item",[a("template",{slot:"label"},[t._v("借款")]),t._v("\n                                    "+t._s(t.form.loanAmount)+"\n                                ")],2):t._e()],1),2==t.form.type?a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",border:"",data:t.form.reimburseCostDetailRSDTOList}},[a("el-table-column",{attrs:{label:"金额",prop:"amount"}}),a("el-table-column",{attrs:{label:"单据张数",prop:"docNum"}}),a("el-table-column",{attrs:{label:"费用类别",prop:"subjectsTypeName"}}),a("el-table-column",{attrs:{label:"费用明细",prop:"subjectCN"}}),a("el-table-column",{attrs:{label:"日期",prop:"time"}}),a("el-table-column",{attrs:{label:"备注",prop:"remark"}})],1)],1):t._e(),1==t.form.type?a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",border:"",data:t.form.reimburseTravelDetailRSDTOList}},[a("el-table-column",{attrs:{label:"金额",prop:"projectAmount"}}),a("el-table-column",{attrs:{label:"单据张数",prop:"projectDocNum"}}),a("el-table-column",{attrs:{label:"项目",prop:"projectType"}}),a("el-table-column",{attrs:{label:"出发地",prop:"depAddress"}}),a("el-table-column",{attrs:{label:"出发日期",prop:"depTime"}}),a("el-table-column",{attrs:{label:"到达地",prop:"arrAddress"}}),a("el-table-column",{attrs:{label:"到达日期",prop:"arrTime"}}),a("el-table-column",{attrs:{label:"出差天数",prop:"travelDays"}}),a("el-table-column",{attrs:{label:"出差补贴金额",prop:"travelSubsidyAmount"}}),a("el-table-column",{attrs:{label:"交通工具",prop:"vehicleCN"}}),a("el-table-column",{attrs:{label:"交通金额",prop:"vehicleAmount"}}),a("el-table-column",{attrs:{label:"交通单据张数",prop:"vehicleDocNum"}}),a("el-table-column",{attrs:{label:"备注",prop:"remark"}})],1)],1):t._e()],1)]),t.data.dealStep?a("div",[a("div",{staticClass:"flex-item mt-10 mb-10"},[a("span",{staticClass:"f-20"},[t._v("审批栏")]),a("span",{staticClass:"f-10 ml-20"},[t._v("当前节点:"+t._s(t.data.dealStep.stepName))])]),a("div",{staticClass:"node"},[a("div",[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{"multi-line":!0,label:"审批意见"},model:{value:t.handleStep.auditInfo,callback:function(e){t.$set(t.handleStep,"auditInfo",e)},expression:"handleStep.auditInfo"}})],1),a("div",{staticClass:"flex"},[a("upload-box",{staticStyle:{width:"50%"},attrs:{btnText:"附件上传",fileList:t.fileList,multiple:t.multiple,onchange:t.uploadFile,onremove:t.removeFile}})],1),a("div",{staticClass:"flex",staticStyle:{"margin-top":"10px"}},[a("btn",{on:{click:function(e){return t.handleStepM(1)}}},[t._v("同意")]),a("btn",{staticClass:"ml-10",on:{click:function(e){return t.handleStepM(0)}}},[t._v("不同意")]),a("btn",{staticClass:"ml-10",on:{click:function(e){return t.backStepM()}}},[t._v("退回")])],1)])])]):t._e(),t.data.historyInfos?a("div",[t._m(2),a("div",{staticClass:"flex-item scroll-y"},[a("table",{staticClass:"data-table"},[t._m(3),t._l(t.data.historyInfos,(function(e,s){return a("tr",[a("td",[t._v(t._s(e.historyId))]),a("td",[t._v(t._s(e.instanceId))]),a("td",[t._v(t._s(3==e.auditResult?"发起":"审批"))]),a("td",[t._v(t._s(e.stepName))]),a("td",[t._v(t._s(e.auditUserName))]),a("td",[t._v(t._s(t.auditResults[e.auditResult].name))]),a("td",[t._v(t._s(e.auditInfo))]),null!=e.accessories?a("td",t._l(e.accessories,(function(e,s){return a("a",{key:s,attrs:{href:e.fileUrl}},[t._v(t._s(e.fileName))])})),0):a("td",[t._v("无")])])}))],2)])]):t._e(),t.data.accessories?a("div",[t._m(4),a("div",{staticClass:"flex-item"},t._l(t.data.accessories,(function(e,s){return a("div",{key:s,staticStyle:{"margin-left":"20px","margin-top":"5px"}},[a("div",{staticClass:"flex"},[a("a",{staticStyle:{"text-decoration":"none","out-line":"none",color:"blue"},attrs:{href:e.fileUrl,target:"_blank"}},[t._v(t._s(e.fileName))])])])})),0)]):t._e()]),t.backStepLayer?a("layer",{attrs:{title:"退回节点",width:"450px"}},[a("div",{staticClass:"node"},t._l(t.backSteps,(function(e){return a("div",{staticClass:"node-item"},[a("radio-box",{attrs:{label:e.stepId},model:{value:t.handleStep.backStepId,callback:function(e){t.$set(t.handleStep,"backStepId",e)},expression:"handleStep.backStepId"}}),t._v("\n                            "+t._s(e.stepName)+"\n                        ")],1)})),0),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){return t.cancel()}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("提交")])],1)]):t._e()],1):t._e()])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-item mt-10 mb-10"},[a("span",{staticClass:"f-20"},[t._v("基本信息")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"node-title"},[a("span",{staticClass:"b"},[t._v("报销申请详情：")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-item mt-10 mb-10"},[a("span",{staticClass:"f-20"},[t._v("审批历史")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticStyle:{width:"60px"}},[t._v("ID")]),a("th",[t._v("实例ID")]),a("th",[t._v("节点类型")]),a("th",[t._v("节点名称")]),a("th",[t._v("审核人")]),a("th",[t._v("审核结果")]),a("th",[t._v("意见")]),a("th",[t._v("审核附件")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-item mt-10 mb-10"},[a("span",{staticClass:"f-20"},[t._v("审批附件")])])}],n=(a("a450"),a("8dee"),a("6864")),l=a.n(n),o=a("153b"),c={name:"process-prod",data:function(){return{data:null,orderUrl:"/haolifa/export/purchaseOrder/",backStepLayer:!1,auditResults:[{status:0,name:"审核不通过"},{status:1,name:"审核通过"},{status:2,name:"退回"},{status:3,name:"流程初始化"}],handleStep:{id:0,stepId:0,auditInfo:"",allotUserId:null,auditResult:1,formId:0,formType:0,backStepId:null,condition:!0,accessorys:[]},backSteps:[],fileList:[],fileName:"",multiple:!0,info:{},form:{}}},activated:function(){this.getData()},created:function(){},methods:{switchTab:function(t){this.$router.replace({path:t,query:this.$route.query})},getData:function(){var t=this;this.$http.get("/haolifa/flowInstance/flow-history/".concat(this.$route.query.instanceId)).then((function(e){e.createTime=l()(e.createTime).format("YYYY-MM-DD HH:mm"),t.data=e,t.handleStep.id=e.instanceId,e.dealStep&&(t.handleStep.stepId=e.dealStep.stepId),t.$http.get("/haolifa/finance/reimburseapply/info/".concat(e.formId)).then((function(e){t.form=e}))})).catch((function(e){t.$toast(e.message||e.msg)}))},handleStepM:function(t){var e=this;this.handleStep.auditResult=t,this.$http.post("/haolifa/flowInstance/handleStep",this.handleStep).then((function(t){e.$toast("处理成功"),e.handleStep.backStepId=null,e.backStepLayer=!1,e.getData(),e.$store.commit("DELMENUTABS","/jkfkEntrust"),e.$router.push("/")})).catch((function(t){e.$toast(t.msg||t.message)}))},uploadFile:function(t,e){var a=this;this.loading=!0,this.loadingMsg="正在上传",Object(o["a"])(t.source).then((function(e){a.$http.post("/haolifa/file/uploadFileBase64",{base64Source:e,fileName:t.name}).then((function(e){a.handleStep.accessorys.push({fileName:t.name,fileUrl:e}),a.loading=!1})).catch((function(t){a.$toast(t.msg||t.message),a.loading=!1}))}))},removeFile:function(){var t=this;return new Promise((function(e,a){t.handleStep.accessorys.splice(i,1),e()}))},backStepM:function(){var t=this;this.$http.get("/haolifa/flowInstance/backSteps/".concat(this.handleStep.id)).then((function(e){e.length>0?(t.backSteps=e,t.backStepLayer=!0):t.$toast("无可退回节点")})).catch((function(e){t.$toast(e.msg||e.message)}))},complete:function(){this.handleStepM(2)},cancel:function(){this.backStepLayer=!1,this.handleStep.backStepId=null}}},p=c,d=(a("b542"),a("cba8")),u=Object(d["a"])(p,s,r,!1,null,null,null);e["default"]=u.exports},"6e21":function(t,e,a){},7016:function(t,e,a){},"74c6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-notification"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[t._v("采购报表统计图")]),a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("div",{staticStyle:{"line-height":"28px"}},[t._v("开始时间:")]),a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getBuyOne},model:{value:t.yearDate,callback:function(e){t.yearDate=e},expression:"yearDate"}}),a("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("结束时间:")]),a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getBuyOne},model:{value:t.yearDate2,callback:function(e){t.yearDate2=e},expression:"yearDate2"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDetail()}}},[t._v("数据显示")])],1),a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("累计采购合同总金额:"+t._s(Math.round(100*t.totalNum)/100)+"元")]),a("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("累计挂账总金额:"+t._s(Math.round(100*t.registeredNum)/100)+"元")]),a("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("累计未付款总金额:"+t._s(Math.round(100*t.unpayNum)/100)+"元")]),a("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("累计已付款总金额:"+t._s(Math.round(100*t.payTotalNum)/100)+"元")])]),t._m(0),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("合计合同金额:"+t._s(Math.round(100*t.ctotalNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("合计挂账金额:"+t._s(Math.round(100*t.cregisteredNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("合计未付款金额:"+t._s(Math.round(100*t.cunpayNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("合计已付款金额:"+t._s(Math.round(100*t.cpayTotalNum)/100)+"元")])]),t._m(1),a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getByMonth},model:{value:t.yearMonthDate,callback:function(e){t.yearMonthDate=e},expression:"yearMonthDate"}})],1),a("div",{staticStyle:{width:"98%",margin:"0 auto",display:"flex"}},[a("div",{staticStyle:{display:"flex","padding-left":"20px","margin-left":"12px",color:"#008eff","font-size":"22px"}},[a("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("累计采购合同总金额:"+t._s(Math.round(100*t.mtotalNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("累计挂账总金额:"+t._s(Math.round(100*t.mregisteredNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("累计未付款总金额:"+t._s(Math.round(100*t.munpayNum)/100)+"元")]),a("p",{staticStyle:{"margin-left":"20px",color:"#008eff","font-size":"20px"}},[t._v("累计已付款总金额:"+t._s(Math.round(100*t.mpayTotalNum)/100)+"元")])])]),t._m(2),a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("el-date-picker",{staticStyle:{"margin-top":"50px"},attrs:{size:"mini",clearable:!1,type:"year","value-format":"yyyy",editable:!1,placeholder:"选择年月"},on:{change:t.getBuyThree},model:{value:t.threeYearDate,callback:function(e){t.threeYearDate=e},expression:"threeYearDate"}})],1),t._m(3),t.flag?a("layer",{attrs:{title:"数据列表",width:"95%"}},[a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                供应商名称:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.supplierName,expression:"form.supplierName"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form.supplierName},on:{change:function(e){t.$refs.list.update(!0),t.getFourTj()},input:function(e){e.target.composing||t.$set(t.form,"supplierName",e.target.value)}}}),t._v("\n                合同编号:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.purchaseOrderNo,expression:"form.purchaseOrderNo"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form.purchaseOrderNo},on:{change:function(e){t.$refs.list.update(!0),t.getFourTj()},input:function(e){e.target.composing||t.$set(t.form,"purchaseOrderNo",e.target.value)}}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.$refs.list.update(!0),t.getFourTj()}}},[t._v("查询")])],1)]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("合同金额: "+t._s(t.formObj.total)+"元")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("入账金额: "+t._s(t.formObj.registered)+"元")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("付款金额: "+t._s(t.formObj.payTotal)+"元")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("欠款金额: "+t._s(t.formObj.unpay)+"元")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("回票金额: "+t._s(t.formObj.returnTicketAmount)+"元")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("上账未开票: "+t._s(t.formObj.unTicketAmount)+"元")])],1)]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{"page-size":50,param:t.form,url:"/haolifa/report-extend/report-purchase-list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.supplierName))]),a("td",[t._v(t._s(s.createTime))]),a("td",[t._v(t._s(s.purchaseOrderNo))]),a("td",[t._v(t._s(s.totalCount))]),a("td",[t._v(t._s(s.total))]),a("td",[t._v(t._s(s.registered))]),a("td"),a("td",[t._v(t._s(s.payTotal))]),a("td",[t._v(t._s(s.unpay))]),a("td",[t._v(t._s(s.returnTicketAmount))]),a("td"),a("td",[t._v(t._s(s.unTicketAmount))])]}}],null,!1,4132287773)},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("供应商名称")]),a("th",[t._v("日期")]),a("th",[t._v("合同编号")]),a("th",[t._v("数量")]),a("th",[t._v("合同金额（元）")]),a("th",[t._v("入账金额（元）")]),a("th",[t._v("付款日期")]),a("th",[t._v("付款金额（元）")]),a("th",[t._v("欠款金额（元）")]),a("th",[t._v("回票金额（元）")]),a("th",[t._v("回票票号")]),a("th",[t._v("上账未开票（元）")])])])],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.flag=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"20px auto"}},[a("div",{staticStyle:{width:"100%",height:"600px",margin:"0 auto"},attrs:{id:"buyOne"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"30px auto"}},[a("div",{staticStyle:{width:"100%",height:"500px",margin:"0 auto"},attrs:{id:"buyTwo"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"20px auto"}},[a("div",{staticStyle:{width:"100%",height:"600px",margin:"0 auto"},attrs:{id:"byMonth"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"20px auto"}},[a("div",{staticStyle:{width:"100%",height:"600px",margin:"0 auto"},attrs:{id:"buyThree"}})])}],r=(a("fc02"),a("a450"),a("28b6")),n=a("9b68"),l={name:"cgreport-form",components:{DataList:n["a"]},data:function(){var t;return t={yearDate:(new Date).getFullYear()+"-01",yearDate2:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),threeYearDate:(new Date).getFullYear()+"",yearMonthDate:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),totalNum:0,totalPrice:0,payTotalNum:0,unpayNum:0},Object(r["a"])(t,"totalNum",0),Object(r["a"])(t,"registeredNum",0),Object(r["a"])(t,"mpayTotalNum",0),Object(r["a"])(t,"munpayNum",0),Object(r["a"])(t,"mtotalNum",0),Object(r["a"])(t,"mregisteredNum",0),Object(r["a"])(t,"cpayTotalNum",0),Object(r["a"])(t,"cunpayNum",0),Object(r["a"])(t,"ctotalNum",0),Object(r["a"])(t,"cregisteredNum",0),Object(r["a"])(t,"flag",!1),Object(r["a"])(t,"form",{endDate:this.yearDate2,purchaseOrderNo:"",startDate:this.yearDate,status:"",supplierName:"",year:""}),Object(r["a"])(t,"formObj",{total:0,payTotal:0,unpay:0,registered:0,collected:0,unTicketAmount:0,returnTicketAmount:0}),t},mounted:function(){this.getBuyOne(),this.getBuyThree(),this.getByMonth()},methods:{flush:function(){this.yearDate=(new Date).getFullYear()+"-01",this.yearDate2=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.threeYearDate=(new Date).getFullYear()+"",this.yearMonthDate=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.getBuyOne(),this.getBuyThree(),this.getByMonth()},addRezo:function(t){return t>9?t:"0"+t},getDetail:function(){this.flag=!0,this.getFourTj(),this.$refs.list.update(!0)},getFourTj:function(){var t=this;this.formObj={total:0,payTotal:0,unpay:0,registered:0,collected:0,unTicketAmount:0,returnTicketAmount:0},this.$http.post("/haolifa/report-extend/report-purchase-summary",this.form).then((function(e){t.formObj.total=e.total,t.formObj.payTotal=e.payTotal,t.formObj.registered=e.registered,t.formObj.unpay=e.unpay,t.formObj.collected=e.collected,t.formObj.unTicketAmount=e.unTicketAmount,t.formObj.returnTicketAmount=e.returnTicketAmount})).catch((function(e){t.$toast(e.msg||e.message)}))},getBuyOne:function(){var t=this;this.payTotalNum=this.unpayNum=this.registeredNum=this.totalNum=0,this.$http.post("/haolifa/report/purchase/getPurchases",{endDate:this.yearDate2,month:"",startDate:this.yearDate,supplierName:"",year:""}).then((function(e){var a=[],s=[],i=[],r=[],n=[],l=[],o=[];e.map((function(e){a.push(e.supplierName),s.push(e.payTotal),i.push(e.unpay),r.push(e.total),n.push(e.registered),l.push(e.returnTicketAmount),o.push(e.unTicketAmount),e.payTotal&&(t.payTotalNum=t.payTotalNum+ +e.payTotal),t.unpayNum=t.unpayNum+(e.unpay?+e.unpay:0),t.totalNum=t.totalNum+(e.total?+e.total:0),t.registeredNum=t.registeredNum+(e.registered?+e.registered:0)})),t.getBuyTwo(a[0]);var c=t,p=t.$echarts.init(document.getElementById("buyOne")),d={title:{text:"采购按年份统计",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["已付款","未付款","挂账金额","合同金额","累计回票金额","上账未开票金额"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a,axisLabel:{rotate:30}}],yAxis:[{type:"value"}],series:[{name:"已付款",type:"bar",barWidth:"10%",data:s},{name:"未付款",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"挂账金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:n},{name:"合同金额",type:"bar",color:"#67c23a",barWidth:"10%",data:r},{name:"累计回票金额",type:"bar",color:"#ffd702",barWidth:"10%",data:l},{name:"上账未开票金额",type:"bar",color:"#eb736a",barWidth:"10%",data:o}]};p.on("click",(function(t){c.getBuyTwo(t.name)})),p.setOption(d),c.getBuyTwo(a[0])}))},getBuyTwo:function(t){var e=this;this.cayTotalNum=this.cunpayNum=this.cregisteredNum=this.ctotalNum=0,this.$http.post("/haolifa/report/purchase/selectBySupplierName",{endDate:this.yearDate2,month:"",startDate:this.yearDate,supplierName:t,year:""}).then((function(a){var s=[],i=[],r=[],n=[],l=[],o=[],c=[];a.map((function(t){s.push(t.createTime),i.push(t.payTotal),l.push(t.unpay),r.push(t.total),n.push(t.registered),o.push(t.returnTicketAmount),c.push(t.unTicketAmount),t.payTotal&&(e.cpayTotalNum=e.cpayTotalNum+ +t.payTotal),e.cunpayNum=e.cunpayNum+(t.unpay?+t.unpay:0),e.ctotalNum=e.ctotalNum+(t.total?+t.total:0),e.cregisteredNum=e.cregisteredNum+(t.registered?+t.registered:0)}));var p=e.$echarts.init(document.getElementById("buyTwo")),d={title:{text:t+"按月统计",x:"left"},legend:{data:["已付款","未付款","挂账金额","合同金额","累计回票金额","上账未开票金额"]},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:s}],yAxis:[{type:"value"}],series:[{name:"已付款",type:"bar",barWidth:"10%",data:i},{name:"未付款",type:"bar",barWidth:"10%",color:"#3398DB",data:l},{name:"挂账金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:n},{name:"合同金额",type:"bar",color:"#67c23a",barWidth:"10%",data:r},{name:"累计回票金额",type:"bar",color:"#ffd702",barWidth:"10%",data:o},{name:"上账未开票金额",type:"bar",color:"#eb736a",barWidth:"10%",data:c}]};p.setOption(d)}))},getByMonth:function(){var t=this;this.mpayTotalNum=this.munpayNum=this.mregisteredNum=this.mtotalNum=0;var e=this.yearMonthDate.split("-"),a=e[0],s=e[1];this.$http.post("/haolifa/report/purchase/getPurchases?year=".concat(a,"&month=").concat(s),{endDate:"",month:s,startDate:"",supplierName:"",year:a}).then((function(e){var a=[],s=[],i=[],r=[],n=[];e.map((function(e){a.push(e.supplierName),s.push(e.payTotal),i.push(e.unpay),r.push(e.total),n.push(e.registered),e.payTotal&&(t.mpayTotalNum=t.mpayTotalNum+ +e.payTotal),t.munpayNum=t.munpayNum+(e.unpay?+e.unpay:0),t.mtotalNum=t.mtotalNum+(e.total?+e.total:0),t.mregisteredNum=t.mregisteredNum+(e.registered?+e.registered:0)}));var l=t.$echarts.init(document.getElementById("byMonth")),o={title:{text:"采购按月份统计",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["已付款","未付款","挂账金额","合同金额"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a,axisLabel:{rotate:60}}],yAxis:[{type:"value"}],series:[{name:"已付款",type:"bar",barWidth:"10%",data:s},{name:"未付款",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"挂账金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:n},{name:"合同金额",type:"bar",color:"#67c23a",barWidth:"10%",data:r}]};l.setOption(o)}))},getBuyThree:function(){var t=this;this.$http.get("/haolifa/report/purchase/getAllPurchase?year=".concat(this.threeYearDate)).then((function(e){var a=[],s=[],i=[],r=[],n=[];e.map((function(t){a.push(t.createTime),s.push(t.payTotal),i.push(t.collected),r.push(t.total),n.push(t.registered)}));var l=t.$echarts.init(document.getElementById("buyThree")),o={title:{text:"采购报表--按月查询采购物资",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["付款金额","回票金额","挂账金额","合同金额"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a,axisLabel:{rotate:60}}],yAxis:[{type:"value"}],series:[{name:"付款金额",type:"bar",barWidth:"10%",data:s},{name:"回票金额",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"挂账金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:n},{name:"合同金额",type:"bar",color:"#67c23a",barWidth:"10%",data:r}]};l.setOption(o)}))}}},o=l,c=a("cba8"),p=Object(c["a"])(o,s,i,!1,null,null,null);e["default"]=p.exports},7746:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apply-buy-add"},[a("div",{staticClass:"content"},[a("div",{staticClass:"title b f-18 mb-10"},[t._v(t._s(t.isAdd?"新增":"编辑")+"机加工订单")]),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方"},model:{value:t.form.demander,callback:function(e){t.$set(t.form,"demander",e)},expression:"form.demander"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方地址"},model:{value:t.form.demanderAddr,callback:function(e){t.$set(t.form,"demanderAddr",e)},expression:"form.demanderAddr"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系人"},model:{value:t.form.demanderLinkman,callback:function(e){t.$set(t.form,"demanderLinkman",e)},expression:"form.demanderLinkman"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系电话"},model:{value:t.form.demanderPhone,callback:function(e){t.$set(t.form,"demanderPhone",e)},expression:"form.demanderPhone"}})],1),a("div",{staticClass:"flex"},[a("select-box",{staticStyle:{"margin-right":"20px",width:"240px"},attrs:{list:t.supplierList,label:"供应商"},on:{change:function(e){return t.changeSupplier()}},model:{value:t.form.supplierNo,callback:function(e){t.$set(t.form,"supplierNo",e)},expression:"form.supplierNo"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方地址"},model:{value:t.form.supplierAddr,callback:function(e){t.$set(t.form,"supplierAddr",e)},expression:"form.supplierAddr"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系人"},model:{value:t.form.supplierLinkman,callback:function(e){t.$set(t.form,"supplierLinkman",e)},expression:"form.supplierLinkman"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系电话"},model:{value:t.form.suppilerPhone,callback:function(e){t.$set(t.form,"suppilerPhone",e)},expression:"form.suppilerPhone"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方确认人"},model:{value:t.form.supplierConfirmer,callback:function(e){t.$set(t.form,"supplierConfirmer",e)},expression:"form.supplierConfirmer"}})],1),a("div",{staticClass:"flex"},[a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"确认时间"},model:{value:t.form.confirmTime,callback:function(e){t.$set(t.form,"confirmTime",e)},expression:"form.confirmTime"}}),a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"交货时间"},model:{value:t.form.deliveryTime,callback:function(e){t.$set(t.form,"deliveryTime",e)},expression:"form.deliveryTime"}}),a("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办时间"},model:{value:t.form.operateTime,callback:function(e){t.$set(t.form,"operateTime",e)},expression:"form.operateTime"}}),a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办人"},model:{value:t.form.operatorUserName,callback:function(e){t.$set(t.form,"operatorUserName",e)},expression:"form.operatorUserName"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",attrs:{label:"加工合同编号"},model:{value:t.form.orderNo,callback:function(e){t.$set(t.form,"orderNo",e)},expression:"form.orderNo"}}),a("input-box",{staticClass:"flex-item",attrs:{label:"付款方式"},model:{value:t.form.payType,callback:function(e){t.$set(t.form,"payType",e)},expression:"form.payType"}})],1),a("div",{staticClass:"b",staticStyle:{margin:"20px 0 10px"}},[t._v("加工物料项")]),t._l(t.form.itemList,(function(e,s){return a("div",{key:s,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[a("div",{staticClass:"flex-item"},[a("div",{staticClass:"flex"},[a("select-box",{staticClass:"flex-item mr-10",attrs:{list:t.nameList,label:"物料名称"},model:{value:e.materialName,callback:function(a){t.$set(e,"materialName",a)},expression:"item.materialName"}}),a("select-box",{staticClass:"flex-item mr-10",attrs:{list:t.tuhaoList,label:"物料图号"},model:{value:e.materialGraphNo,callback:function(a){t.$set(e,"materialGraphNo",a)},expression:"item.materialGraphNo"}}),a("input-box",{staticClass:"flex-item mr-10",attrs:{type:"number",label:"数量"},model:{value:e.number,callback:function(a){t.$set(e,"number",a)},expression:"item.number"}}),a("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单位"},model:{value:e.unit,callback:function(a){t.$set(e,"unit",a)},expression:"item.unit"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-10",attrs:{label:"材质"},model:{value:e.material,callback:function(a){t.$set(e,"material",a)},expression:"item.material"}}),a("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格"},model:{value:e.specification,callback:function(a){t.$set(e,"specification",a)},expression:"item.specification"}}),a("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单价"},model:{value:e.unitPrice,callback:function(a){t.$set(e,"unitPrice",a)},expression:"item.unitPrice"}}),a("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单重"},model:{value:e.unitWeight,callback:function(a){t.$set(e,"unitWeight",a)},expression:"item.unitWeight"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",attrs:{label:"备注"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}})],1)]),t.form.itemList.length>1?a("div",[a("icon-btn",{attrs:{small:""},on:{click:function(e){return t.form.itemList.splice(s,1)}}},[t._v("close")])],1):t._e()])})),a("div",{staticClass:"card a flex-center",on:{click:function(e){return t.addItem()}}},[t._m(0)]),a("div",{staticClass:"flex"},[a("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(e){return t.submit()}}},[t._v("提交")]),a("btn",{attrs:{big:"",flat:""},on:{click:function(e){t.$store.commit("DELMENUTABS","/purchsemanage-entrust/add"),t.$router.back()}}},[t._v("取消")])],1)],2)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-v-center"},[a("i",{staticClass:"icon mr-10"},[t._v("add")]),a("span",[t._v("添加机加工物料项")])])}],r=(a("1bc78"),{name:"purchsemanage-entrustadd",data:function(){return{supplierInfoList:[],supplierList:[],form:{id:null,confirmTime:"",deliveryTime:"",demander:"山西好利阀机械制造有限公司",demanderAddr:"山西省侯马经济开发区旺旺北支路东侧",demanderLinkman:"",demanderPhone:"",operateTime:"",operatorUserName:"",orderNo:"",suppilerPhone:"",supplierAddr:"",supplierConfirmer:"",supplierLinkman:"",supplierName:"",supplierNo:"",payType:"",itemList:[{id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}]},isAdd:!0,nameList:[],tuhaoList:[]}},activated:function(){var t=this;this.form={id:null,confirmTime:"",deliveryTime:"",demander:"山西好利阀机械制造有限公司",demanderAddr:"山西省侯马经济开发区旺旺北支路东侧",demanderLinkman:"",demanderPhone:"",operateTime:"",operatorUserName:"",orderNo:"",suppilerPhone:"",supplierAddr:"",supplierConfirmer:"",supplierLinkman:"",supplierName:"",supplierNo:"",payType:"",itemList:[{id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}]};var e=this.$route.query.formId;this.form.id=e,this.$http.get("/haolifa/supplier/list-all/").then((function(e){t.supplierList=e.map((function(t){return{value:t.suppilerNo,text:t.suppilerName}})),t.supplierInfoList=e})),e&&(this.isAdd=!1,this.$http.get("/haolifa/purchase-order/info/"+e).then((function(e){t.form.id=e.order.id,t.form.demander=e.order.demander,t.form.demanderAddr=e.order.demanderAddr,t.form.demanderLinkman=e.order.demanderLinkman,t.form.demanderPhone=e.order.demanderPhone,t.form.operatorUserName=e.order.operatorUserName,t.form.suppilerPhone=e.order.suppilerPhone,t.form.supplierAddr=e.order.supplierAddr,t.form.supplierConfirmer=e.order.supplierConfirmer,t.form.supplierLinkman=e.order.supplierLinkman,t.form.supplierName=e.order.supplierName,t.form.supplierNo=e.order.supplierNo,t.form.payType=e.order.payType,t.form.orderNo=e.order.purchaseOrderNo,t.form.confirmTime=e.order.confirmTime.substring(0,10),t.form.deliveryTime=e.order.deliveryTime.substring(0,10),t.form.operateTime=e.order.operateTime.substring(0,10),t.form.itemList=e.items.map((function(t){return{id:t.id,material:t.material,materialGraphNo:t.materialGraphNo,materialName:t.materialName,number:t.number,remark:t.remark,specification:t.specification,unit:t.unit,unitPrice:t.unitPrice,unitWeight:t.unitWeight}}))})))},mounted:function(){var t=this,e=this.$route.query.formId;this.form.id=e,this.$http.get("/haolifa/supplier/list-all/").then((function(e){t.supplierList=e.map((function(t){return{value:t.suppilerNo,text:t.suppilerName}})),t.supplierInfoList=e})),e&&(this.isAdd=!1,this.$http.get("/haolifa/purchase-order/info/"+e).then((function(e){t.form.id=e.order.id,t.form.demander=e.order.demander,t.form.demanderAddr=e.order.demanderAddr,t.form.demanderLinkman=e.order.demanderLinkman,t.form.demanderPhone=e.order.demanderPhone,t.form.operatorUserName=e.order.operatorUserName,t.form.suppilerPhone=e.order.suppilerPhone,t.form.supplierAddr=e.order.supplierAddr,t.form.supplierConfirmer=e.order.supplierConfirmer,t.form.supplierLinkman=e.order.supplierLinkman,t.form.supplierName=e.order.supplierName,t.form.supplierNo=e.order.supplierNo,t.form.payType=e.order.payType,t.form.orderNo=e.order.purchaseOrderNo,t.form.confirmTime=e.order.confirmTime.substring(0,10),t.form.deliveryTime=e.order.deliveryTime.substring(0,10),t.form.operateTime=e.order.operateTime.substring(0,10),t.form.itemList=e.items.map((function(t){return{id:t.id,material:t.material,materialGraphNo:t.materialGraphNo,materialName:t.materialName,number:t.number,remark:t.remark,specification:t.specification,unit:t.unit,unitPrice:t.unitPrice,unitWeight:t.unitWeight}}))})))},methods:{changeSupplier:function(){var t=this;if(console.log(this.form.supplierNo),this.supplierInfoList.forEach((function(e,a){e.suppilerNo==t.form.supplierNo&&(t.form.suppilerPhone=e.phone,t.form.supplierAddr=e.address,t.form.supplierLinkman=e.responsiblePerson,t.form.supplierName=e.suppilerName)})),this.nameList=this.tuhaoList=[],this.form.supplierNo){var e={pageNum:1,pageSize:500,supplierNo:this.form.supplierNo};this.$http.post("/haolifa/supplier-pro/list",e).then((function(e){var a=e.list;t.nameList=a.map((function(t){return{value:t.materialName,text:t.materialName}})),t.tuhaoList=a.map((function(t){return{value:t.materialGraphNo,text:t.materialGraphNo}}))})).catch((function(e){t.$toast(e.msg||e.message)}))}},addItem:function(){this.form.itemList.push({id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}),this.$forceUpdate()},submit:function(){var t=this,e={materialName:"物料名称",materialGraphNo:"物料图号",number:"数量",material:"材质",specification:"规格",unit:"单位",unitPrice:"单价",unitWeight:"单重"},a=!0;if(this.form.itemList.forEach((function(s,i){for(var r in s)e[r]&&!s[r]&&(t.$toast("请填写第 ".concat(i+1," 项 ").concat(e[r])),a=!1)})),a){var s=this.isAdd?"/purchsemanage-entrust/add":"/purchsemanage-entrust/edit";this.$http.post(this.isAdd?"/haolifa/purchase-order/save/1":"/haolifa/purchase-order/update",this.form).then((function(e){t.$toast(t.isAdd?"创建成功":"更新成功"),t.$store.commit("DELMENUTABS",s),t.$router.push("/purchsemanage-entrust/addList")})).catch((function(e){t.$toast(e.message||e.msg)}))}}}}),n=r,l=(a("576b"),a("cba8")),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},"779b":function(t,e,a){},"7e4a":function(t,e,a){"use strict";a("37b5")},8475:function(t,e,a){},"848b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-invoice-list"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),t._v("\n            状态:\n            "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:"0"}},[t._v("全部")]),a("option",{attrs:{value:"1"}},[t._v("代办")]),a("option",{attrs:{value:"2"}},[t._v("已办")])])]),a("div",{staticClass:"flex-item"})]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/payapply/getPayAppList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.applyTime))]),a("td",[t._v(t._s(s.applyPayCompany))]),a("td",[t._v(t._s(s.totalPrice))]),a("td",[t._v(t._s(t.statusArr[s.status]))]),a("td",[t._v(t._s(s.remark))]),a("td",[t._v(t._s(s.createTime))]),a("td",[t._v(t._s(s.updateTime))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.detail(s)}}},[t._v("详情 | ")]),a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.approveProgress(s)}}},[t._v("审批进度")])])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("付款日期")]),a("th",[t._v("付款单位")]),a("th",[t._v("付款金额")]),a("th",[t._v("审批节点")]),a("th",[t._v("备注")]),a("th",[t._v("创建时间")]),a("th",[t._v("更新时间")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layerDetail?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14 order-info"},[a("tr",[a("td",{staticStyle:{width:"20%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"25%"}}),a("td",{staticStyle:{width:"25%"}}),a("td",{staticStyle:{width:"20%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款单位 : "+t._s(t.info.applyPayCompany))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款金额 : "+t._s(t.info.totalPrice))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款日期 : "+t._s(t.info.applyTime))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("备注 : "+t._s(t.info.remark))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("创建日期 : "+t._s(t.info.createTime))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("更新日期 : "+t._s(t.info.updateTime))])]),a("tr",[a("th",[t._v("订单号")]),a("th",[t._v("金额(元)")]),a("th",[t._v("收款单位")]),a("th",[t._v("付款单位")]),a("th",[t._v("备注")])]),t._l(t.info.applyDetailRSDTOList,(function(e,s){return a("tr",{key:s},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseOrderNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.price))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.applyCollectionCompany))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.applyPayCompany))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])}))],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layerDetail=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{status:"0"},layer:!1,tableForm:{orderNo:"",supplierName:"",status:"5"},loading:!1,tableData:[],pageNum:1,total:0,statusList:[{status:"3",name:"采购中"},{status:"5",name:"采购完成"}],layerDetail:!1,info:{},statusArr:["","待审批","审批中","付款中","审批不能过","付款完成"]}},mounted:function(){},methods:{flush:function(){this.filter={status:"0"},this.$refs.list.update(!0)},detail:function(t){this.layerDetail=!0,this.info=t},approveProgress:function(t){this.$router.push({path:"/purchsemanage-purchase/approveProgress?",query:{formNo:t.id,formId:""}})}}},l=n,o=(a("fa36"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"87b5":function(t,e,a){"use strict";a("a7fb")},"8a77":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchaseadd flex-col"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"机加工合同号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供方单位"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:"0"}},[t._v("合同状态")]),t._l(t.statusList,(function(e){return a("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])}))],2),a("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),a("div",{staticClass:"flex-item"})]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{method:"get","page-size":15,param:t.filter,url:"/haolifa/purchase-order/list/1"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",[t._v(t._s(i))]),a("td",[t._v(t._s(s.purchaseOrderNo))]),a("td",[t._v(t._s(s.supplierName))]),a("td",[t._v(t._s(s.deliveryTime))]),a("td",[t._v(t._s(s.totalCount))]),a("td",[t._v(t._s(t.statusList[s.status-1].name))]),a("td",[t._v(t._s(s.createUserId))]),a("td",[t._v(t._s(s.createTime))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("查看")])])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("机加工合同号")]),a("th",[t._v("供方单位")]),a("th",[t._v("加工完成日期")]),a("th",[t._v("订单总数量")]),a("th",[t._v("订单状态")]),a("th",[t._v("创建人")]),a("th",[t._v("创建日期")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?a("layer",{attrs:{title:"订单折损",width:"450px"}},[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损金额"},model:{value:t.wreck.wreckAmount,callback:function(e){t.$set(t.wreck,"wreckAmount",e)},expression:"wreck.wreckAmount"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损原因"},model:{value:t.wreck.wreckReason,callback:function(e){t.$set(t.wreck,"wreckReason",e)},expression:"wreck.wreckReason"}})],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14"},[a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("机加工订单")]),a("td",{staticClass:"b",attrs:{colspan:"6"}},[a("a",{staticClass:"a",staticStyle:{color:"#008eff"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),a("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),a("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),a("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),a("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),a("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(e,s){return a("tr",{key:e.id},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitPrice))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalAmount))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])})),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("总计")]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),a("td",{attrs:{colspan:"1"}})]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),a("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),a("td",{attrs:{colspan:"3"}},[t._v("批准：")]),a("td",{attrs:{colspan:"3"}},[t._v("审核：")]),a("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"purchsemanage-entrust",components:{DataList:r["a"]},data:function(){return{natureList:["国有","三资","集体","联营","私营"],statusList:[{status:1,name:"待审批"},{status:2,name:"审批中"},{status:3,name:"采购中"},{status:4,name:"审批不通过"},{status:5,name:"采购完成"}],filter:{orderNo:"",supplierName:"",status:0,createUserId:0},wreck:{orderNo:"",wreckAmount:0,wreckReason:""},completeLayer:!1,confirmLayer:!1,loading:!1,info:{},itemList:[],orderUrl:"",layer:!1}},created:function(){this.filter.createUserId=0},methods:{flush:function(){this.filter={orderNo:"",supplierName:"",status:0,createUserId:0},this.$refs.list.update(!0)},getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/purchase-order/info/".concat(t)).then((function(t){e.info=t.order,e.orderUrl=t.order.fileUrl,e.itemList=t.items,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10),console.log("info",e.info),console.log("itemList",e.itemList)})).catch((function(t){e.$toast(t.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))},createInspect:function(t){var e=this;this.$http.get("/haolifa/purchase-order/createInspect/".concat(t)).then((function(t){console.log("报检单号",t),e.$confirm({title:"完善报检单",text:"现在去完善报检单？",color:"blue",btns:["稍后再说","现在完善"],yes:function(){e.$router.push("/applyBuy-material/edit?id=".concat(t))}})}))},approveProgress:function(t){this.$router.push("/purchsemanage-entrust/approveProgress?formNo=".concat(t.purchaseOrderNo,"&formId=0"))},approve:function(t){var e=this;this.$confirm({title:"发起审批",text:"确定发起审批？",color:"blue",btns:["取消","确认"],yes:function(){e.$http.get("/haolifa/purchase-order/approve/".concat(t,"/1")).then((function(t){e.$toast("发起成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},updatePurchase:function(t){this.$router.push("/purchsemanage-entrust/add?formId=".concat(t))},completePurchase:function(t){this.completeLayer=!0,this.wreck.orderNo=t},complete:function(){var t=this;this.$http.post("/haolifa/purchase-order/complete",this.wreck).then((function(e){t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},deletePurchase:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除该订单么？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/purchase-order/delete/".concat(t)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg)}))}})}}},l=n,o=(a("a05c"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},9086:function(t,e,a){"use strict";a("1d52")},"90d7":function(t,e,a){"use strict";a("1fd1")},9235:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-invoice-list"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.demandName,expression:"filter.demandName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"需求方名称"},domProps:{value:t.filter.demandName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"demandName",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplyAgentName,expression:"filter.supplyAgentName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供应方责任人"},domProps:{value:t.filter.supplyAgentName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplyAgentName",e.target.value)}}}),t._v("\n            订单状态:\n            "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderStatus,expression:"filter.orderStatus"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"orderStatus",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.orderStatusList,(function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2)]),a("div",{staticClass:"flex-item"})]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/receivable/list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.orderNo))]),a("td",[t._v(t._s(s.demandName))]),a("td",[t._v(t._s(s.contractSignDate))]),a("td",[t._v(t._s(s.totalCount))]),a("td",[t._v(t._s(s.deliveredNumber))]),a("td",[t._v(t._s(s.signBoard))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.detail(s)}}},[t._v("详 情")])])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("订单编号")]),a("th",[t._v("客户名称")]),a("th",[t._v("签订日期")]),a("th",[t._v("销售总量")]),a("th",[t._v("已发货数")]),a("th",[t._v("已发货金额")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?a("layer",{attrs:{title:"详情",width:"80%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14 order-info"},[a("tr",[a("td",{staticStyle:{width:"7%"}}),a("td",{staticStyle:{width:"7%"}}),a("td",{staticStyle:{width:"7%"}}),a("td",{staticStyle:{width:"7%"}}),a("td",{staticStyle:{width:"7%"}}),a("td",{staticStyle:{width:"7%"}}),a("td",{staticStyle:{width:"7%"}}),a("td",{staticStyle:{width:"7%"}}),a("td",{staticStyle:{width:"7%"}}),a("td",{staticStyle:{width:"7%"}}),a("td",{staticStyle:{width:"7%"}}),a("td",{staticStyle:{width:"7%"}}),a("td",{staticStyle:{width:"8%"}}),a("td",{staticStyle:{width:"8%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单编号 : "+t._s(t.info.orderNo))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("发货日期 : "+t._s(t.info.deliveryDate))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单状态 : "+t._s(t.getOrderStatus(t.info.orderStatus)))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("\n                            订单合同:\n                            "),a("a",{staticStyle:{"margin-right":"15px"},attrs:{href:t.info.orderContractUrl}},[t._v("下载")]),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?a("a",{attrs:{target:"_blank",href:t.info.orderContractUrl}},[t._v("预览")]):t._e(),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():a("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+t.info.orderContractUrl}},[t._v("预览")]),a("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getPreCheckMater(t.info.orderNo)}}},[t._v("核料清单")])])]),a("tr",[t.fileDetailList.length?a("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:")]):a("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:无")])]),t._l(t.fileDetailList,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v(t._s(e.fileName))]),a("td",{staticClass:"b",attrs:{colspan:"12"}},[e.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?a("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v("预览")]):t._e(),e.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():a("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+e.fileUrl}},[t._v("预览")])])])})),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配车间: "+t._s(t.info.assemblyShop))]),a("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配小组: "+t._s(t.info.assemblyGroup))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("采购反馈时间: "+t._s(t.info.purchaseFeedbackTime))]),a("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("生产反馈时间: "+t._s(t.info.productionFeedbackTime))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("技术清单:")])]),a("tr",[a("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("产品名称")]),a("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("型号")]),a("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("规格")]),a("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("数量")]),a("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("上法兰标准")]),a("td",{attrs:{colspan:"3",rowspan:"1"}},[t._v("上法兰尺寸")]),a("td",{attrs:{colspan:"4",rowspan:"1"}},[t._v("出轴尺寸")]),a("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("静扭矩")]),a("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("执行器型号")])]),a("tr",[a("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("连接孔")]),a("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("角度")]),a("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("中心距")]),a("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴型式")]),a("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴长度")]),a("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("轴图号")]),a("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("过渡盘")])]),t._l(JSON.parse(t.info.technicalRequire),(function(e,s){return a("tr",{key:s},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.name))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.xinhao))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.guige))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.num))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.biaozhun))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.lianjiek))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.jiaodu))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.zhongxinju))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.xinshi))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.length))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.tuhao))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.guodupan))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.jinniuju))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.jishuxinhao))])])})),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单产品列表")])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品编号")]),a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("标签属性")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("颜色")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总计价格")]),a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("材质说明")]),a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品备注")])]),t._l(t.info.orderProductAssociates,(function(e,s){return a("tr",{key:s},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.productNo))]),a("td",{attrs:{colspan:"2"}},[t._v(t._s(e.productName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.productModel))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.lable))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specifications))]),a("td",{attrs:{colspan:"2"}},[t._v(t._s(e.productColor))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.productNumber))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalPrice))]),a("td",{attrs:{colspan:"2"}},[t._v(t._s(e.materialDescription))]),a("td",{attrs:{colspan:"2"}},[t._v(t._s(e.productRemark))])])})),t.accessoryList.length>0?a("tr",[a("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批附件:")])]):t._e(),t.accessoryList.length>0?a("tr",[a("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件名称")]),a("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件地址")]),a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("——")])]):t._e(),t._l(t.accessoryList,(function(e,s){return a("tr",{key:s},[a("td",{attrs:{colspan:"6"}},[t._v(t._s(e.fileName))]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(e.fileUrl))]),a("td",{attrs:{colspan:"2"}},[e.fileUrl.match(".(doc|docx|xls|xlsx)$")?t._e():a("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v("预览")]),e.fileUrl.match(".(doc|docx|xls|xlsx)$")?a("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+e.fileUrl}},[t._v("预览")]):t._e()])])})),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审核信息")])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v("流程节点")]),a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("角色")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("审核人")]),a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核状态")]),a("td",{staticClass:"b",attrs:{colspan:"4"}},[t._v("审核意见")]),a("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核时间")])]),t._l(t.processList,(function(e){return a("tr",{key:e.stepName},[a("td",{attrs:{colspan:"3"}},[t._v(t._s(e.stepName))]),a("td",{attrs:{colspan:"2"}},[t._v(t._s(e.roleName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.auditUserName))]),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.statusList[e.auditResult]))]),a("td",{attrs:{colspan:"4"}},[t._v(t._s(e.auditInfo))]),a("td",{attrs:{colspan:"2"}},[t._v(t._s(e.auditTime))])])}))],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(a("1bc78"),a("9b68")),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{contractSignDate:"",demandName:"",orderNo:"",orderStatus:"",supplyAgentName:""},orderStatusList:[{value:0,text:"创建"},{value:1,text:"审批中"},{value:2,text:"核料中"},{value:3,text:"替换料审批中"},{value:4,text:"核料完成"},{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:8,text:"生产暂停"},{value:9,text:"生产完成"},{value:10,text:"质检中"},{value:11,text:"已入库"},{value:12,text:"申请发货"},{value:13,text:"发货完成"},{value:14,text:"审核不通过"}],processList:[],accessoryList:[],info:{},fileDetailList:[],layer:!1,statusList:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},mounted:function(){},methods:{flush:function(){this.filter={contractSignDate:"",demandName:"",orderNo:"",orderStatus:"",supplyAgentName:""},this.$refs.list.update(!0)},detail:function(t){var e=this;this.layer=!0,this.getInfo(t.orderNo),this.getAccessory(t.orderNo),this.getProcess(t),this.$http.get("/haolifa/order-product/accessory?orderNo=".concat(t.orderNo)).then((function(t){e.fileDetailList=t})).catch((function(t){e.$toast(t.msg||t.message)}))},getInfo:function(t){var e=this;this.$http.get("/haolifa/order-product/details?orderNo=".concat(t)).then((function(t){e.info=t})).catch((function(t){e.$toast(t.msg||t.message)}))},getAccessory:function(t){var e=this;this.$http.get("/haolifa/flowInstance/flow/accessoryInfo?formNo=".concat(t,"&formId=0")).then((function(t){t.forEach((function(t){""!=t.fileUrl&&e.accessoryList.push(t)}))})).catch((function(t){e.$toast(t.msg||t.message)}))},getProcess:function(t){var e=this;this.$http.get("/haolifa/flowInstance/flow/progress/?formNo=".concat(t.orderNo)).then((function(t){e.processList=[],t.map((function(t){e.processList.push(t),t.child.length>0&&t.child.map((function(t){e.processList.push(t)}))}))})).catch((function(t){e.$toast(t.msg||t.message)}))},close:function(){this.layer=!1,this.accessoryList=[]},getOrderStatus:function(t){var e="";return this.orderStatusList.map((function(a){t==a.value&&(e=a.text)})),e}}},l=n,o=(a("2fcd"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"962f":function(t,e,a){},"964a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-invoice-list"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.purchaseOrderNo,expression:"filter.purchaseOrderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"采购合同"},domProps:{value:t.filter.purchaseOrderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"purchaseOrderNo",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.demander,expression:"filter.demander"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"采购方"},domProps:{value:t.filter.demander},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"demander",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供应商"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}})]),a("div",{staticClass:"flex-item"})]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/standaccount/list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.purchaseOrderNo))]),a("td",[t._v(t._s(s.demander))]),a("td",[t._v(t._s(s.supplierName))]),a("td",[t._v(t._s(s.deliveryTime))]),a("td",[t._v(t._s(s.totalCount))]),a("td",[t._v(t._s(s.qualifiedNumber))]),a("td",[t._v(t._s(s.totalPrice))]),a("td",[t._v(t._s(s.paidAccount))]),a("td",[t._v(t._s(t.statusArr[s.status]))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("详 情")])])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("采购合同")]),a("th",[t._v("采购方")]),a("th",[t._v("供应商")]),a("th",[t._v("交货日期")]),a("th",[t._v("总数量")]),a("th",[t._v("检验合格数量")]),a("th",[t._v("合同总金额")]),a("th",[t._v("已付货款")]),a("th",[t._v("状态")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14"},[a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("采购订单")]),a("td",{staticClass:"b",attrs:{colspan:"6"}},[a("a",{staticClass:"a",staticStyle:{color:"#008eff","margin-right":"10px"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),a("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),a("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),a("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),a("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),a("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(e,s){return a("tr",{key:e.id},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitPrice))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalAmount))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])})),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("总计")]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),a("td",{attrs:{colspan:"1"}})]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),a("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")])])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),a("td",{attrs:{colspan:"3"}},[t._v("批准：")]),a("td",{attrs:{colspan:"3"}},[t._v("审核：")]),a("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{demander:"",purchaseOrderNo:"",supplierName:""},statusArr:["","待审批","审批中","采购中","审批不通过","采购完成"],orderUrl:"",itemList:[],info:{},layer:!1}},mounted:function(){},methods:{flush:function(){this.filter={demander:"",purchaseOrderNo:"",supplierName:""},this.$refs.list.update(!0)},getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/finance/standaccount/info/".concat(t)).then((function(t){e.info=t.order,e.itemList=t.items,e.orderUrl=t.order.fileUrl,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10)})).catch((function(t){e.$toast(t.msg)}))},close:function(){this.layer=!1}}},l=n,o=(a("42e9"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"9b68":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-list relative f-12"},[a("transition",{attrs:{name:"slide-y"}},[t.list.length?a("table",{staticClass:"data-table"},[t._t("header",(function(){return[a("tr",[a("th",[t._v("表头1")]),a("th",[t._v("表头2")])])]})),t._l(t.list,(function(e,s){return a("tr",{key:e.id},[t._t("item",(function(){return[a("td",[t._v("数据1")]),a("td",[t._v("数据2")])]}),{i:s,item:e,index:(t.pageNum-1)*t.pageSize+s+1})],2)}))],2):t._e()]),a("div",{staticClass:"flex-v-center",staticStyle:{"margin-top":"10px"}},[t.list.length?a("pagination",{staticClass:"mr-20",attrs:{page:t.pageNum,size:t.pageSize,total:t.total},on:{change:t.getList}}):t._e(),t.total?a("span",{staticClass:"f-12 c-6"},[t._v("共 "+t._s(t.total)+" 条数据")]):t._e()],1),t.list.length||t.loading?t._e():a("div",{staticStyle:{"margin-top":"100px"}},[a("no-data")],1)],1)},i=[];a("e680"),a("1bc78"),a("32ea");function r(t){return"?"+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}var n={name:"data-list",props:{method:{type:String,default:"get"},url:{type:String,default:""},pageSize:{type:Number,default:20},param:{type:Object,default:function(){}},pageNumStr:{type:String,default:"pageNum"}},data:function(){return{pageNum:1,total:0,loading:!1,list:[]}},watch:{url:function(){this.update()},mehtod:function(){this.update()},pageSize:function(){this.update()},param:function(){this.update()}},created:function(){this.pageNum=this.$route.query.page||1,this.getList(this.pageNum)},methods:{getList:function(t){var e=this,a=this.method,s=this.url,i=this.pageSize,n=this.param;if(s){this.loading=!0;var l={pageSize:i};l[this.pageNumStr]=t;var o=Object.assign(l,n),c="get"===a?s+r(o):s;this.$http[a](c,o).then((function(t){e.list=t.list||[],e.pageNum=t.pageNum;var a=e.$route.query;a.page=t.pageNum,e.$router.push({path:e.$route.path,query:a}),e.total=t.total,e.loading=!1})).catch((function(t){e.loading=!1,e.$toast(t.message||t.msg||t)}))}},update:function(t){this.getList(t?1:this.pageNum)}}},l=n,o=(a("c8ea"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["a"]=c.exports},a01e:function(t,e,a){},a05c:function(t,e,a){"use strict";a("2b5f")},a4e2:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"process-prod flex-col"},[a("div",{staticClass:"flex-item scroll-y"},[a("div",{staticClass:"content"},[t.data?a("div",{staticClass:"p-p-base"},[a("div",{staticClass:"node"},[t._m(0),a("div",{staticClass:"node"},[a("div",{staticClass:"node-title mb-10"},[a("span",{staticClass:"b"},[t._v("流程描述：")]),a("span",{staticClass:"mr-15"},[t._v(t._s(t.data.summary))])]),a("div",{staticClass:"node-title mb-10"},[a("span",{staticClass:"b"},[t._v("采购单号：")]),a("span",{staticClass:"mr-15"},[t._v(t._s(t.data.formNo))])]),a("div",{staticClass:"node-title mb-10"},[a("span",{staticClass:"b"},[t._v("发 起 人：")]),a("span",{staticClass:"mr-15"},[t._v(t._s(t.data.initUserName))])]),a("div",{staticClass:"node-title mb-10"},[a("span",{staticClass:"b"},[t._v("发起时间：")]),a("span",[t._v(t._s(t.data.createTime))])]),t._m(1),a("div",{staticClass:"layer-text",staticStyle:{padding:"0"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14 order-info"},[t._m(2),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款单位 : "+t._s(t.info.applyPayCompany))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款金额 : "+t._s(t.info.totalPrice))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款日期 : "+t._s(t.info.applyTime))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("备注 : "+t._s(t.info.remark))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("创建日期 : "+t._s(t.info.createTime))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("更新日期 : "+t._s(t.info.updateTime))])]),t._m(3),t._l(t.info.applyDetailRSDTOList,(function(e,s){return a("tr",{key:s},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseOrderNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.price))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.applyCollectionCompany))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.applyPayCompany))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])}))],2)])])]),t.data.dealStep?a("div",[a("div",{staticClass:"flex-item mt-10 mb-10"},[a("span",{staticClass:"f-20"},[t._v("审批栏")]),a("span",{staticClass:"f-10 ml-20"},[t._v("当前节点:"+t._s(t.data.dealStep.stepName))])]),a("div",{staticClass:"node"},[a("div",[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{"multi-line":!0,label:"审批意见"},model:{value:t.handleStep.auditInfo,callback:function(e){t.$set(t.handleStep,"auditInfo",e)},expression:"handleStep.auditInfo"}})],1),a("div",{staticClass:"flex"},[a("upload-box",{staticStyle:{width:"50%"},attrs:{btnText:"附件上传",fileList:t.fileList,multiple:t.multiple,onchange:t.uploadFile,onremove:t.removeFile}})],1),a("div",{staticClass:"flex",staticStyle:{"margin-top":"10px"}},[a("btn",{on:{click:function(e){return t.handleStepM(1)}}},[t._v("同意")]),a("btn",{staticClass:"ml-10",on:{click:function(e){return t.handleStepM(0)}}},[t._v("不同意")]),a("btn",{staticClass:"ml-10",on:{click:function(e){return t.backStepM()}}},[t._v("退回")])],1)])])]):t._e(),t.data.historyInfos?a("div",[t._m(4),a("div",{staticClass:"flex-item scroll-y"},[a("table",{staticClass:"data-table"},[t._m(5),t._l(t.data.historyInfos,(function(e,s){return a("tr",[a("td",[t._v(t._s(e.historyId))]),a("td",[t._v(t._s(e.instanceId))]),a("td",[t._v(t._s(3==e.auditResult?"发起":"审批"))]),a("td",[t._v(t._s(e.stepName))]),a("td",[t._v(t._s(e.auditUserName))]),a("td",[t._v(t._s(t.auditResults[e.auditResult].name))]),a("td",[t._v(t._s(e.auditInfo))]),null!=e.accessories?a("td",t._l(e.accessories,(function(e,s){return a("a",{key:s,attrs:{href:e.fileUrl}},[t._v(t._s(e.fileName))])})),0):a("td",[t._v("无")])])}))],2)])]):t._e(),t.data.accessories?a("div",[t._m(6),a("div",{staticClass:"flex-item"},t._l(t.data.accessories,(function(e,s){return a("div",{key:s,staticStyle:{"margin-left":"20px","margin-top":"5px"}},[a("div",{staticClass:"flex"},[a("a",{staticStyle:{"text-decoration":"none","out-line":"none",color:"blue"},attrs:{href:e.fileUrl,target:"_blank"}},[t._v(t._s(e.fileName))])])])})),0)]):t._e()]),t.backStepLayer?a("layer",{attrs:{title:"退回节点",width:"450px"}},[a("div",{staticClass:"node"},t._l(t.backSteps,(function(e){return a("div",{staticClass:"node-item"},[a("radio-box",{attrs:{label:e.stepId},model:{value:t.handleStep.backStepId,callback:function(e){t.$set(t.handleStep,"backStepId",e)},expression:"handleStep.backStepId"}}),t._v("\n                            "+t._s(e.stepName)+"\n                        ")],1)})),0),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){return t.cancel()}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("提交")])],1)]):t._e()],1):t._e()])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-item mt-10 mb-10"},[a("span",{staticClass:"f-20"},[t._v("基本信息")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"node-title"},[a("span",{staticClass:"b"},[t._v("付款申请详情：")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{width:"20%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"25%"}}),a("td",{staticStyle:{width:"25%"}}),a("td",{staticStyle:{width:"20%"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("订单号")]),a("th",[t._v("金额(元)")]),a("th",[t._v("收款单位")]),a("th",[t._v("付款单位")]),a("th",[t._v("备注")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-item mt-10 mb-10"},[a("span",{staticClass:"f-20"},[t._v("审批历史")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticStyle:{width:"60px"}},[t._v("ID")]),a("th",[t._v("实例ID")]),a("th",[t._v("节点类型")]),a("th",[t._v("节点名称")]),a("th",[t._v("审核人")]),a("th",[t._v("审核结果")]),a("th",[t._v("意见")]),a("th",[t._v("审核附件")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-item mt-10 mb-10"},[a("span",{staticClass:"f-20"},[t._v("审批附件")])])}],n=(a("a450"),a("8dee"),a("6864")),l=a.n(n),o=a("153b"),c={name:"process-prod",data:function(){return{data:null,orderUrl:"/haolifa/export/purchaseOrder/",backStepLayer:!1,auditResults:[{status:0,name:"审核不通过"},{status:1,name:"审核通过"},{status:2,name:"退回"},{status:3,name:"流程初始化"}],handleStep:{id:0,stepId:0,auditInfo:"",allotUserId:null,auditResult:1,formId:0,formType:0,backStepId:null,condition:!0,accessorys:[]},backSteps:[],fileList:[],fileName:"",multiple:!0,info:{}}},activated:function(){this.getData()},created:function(){},methods:{switchTab:function(t){this.$router.replace({path:t,query:this.$route.query})},getData:function(){var t=this;this.$http.get("/haolifa/flowInstance/flow-history/".concat(this.$route.query.instanceId)).then((function(e){e.createTime=l()(e.createTime).format("YYYY-MM-DD HH:mm"),t.data=e,t.handleStep.id=e.instanceId,e.dealStep&&(t.handleStep.stepId=e.dealStep.stepId),t.$http.post("/haolifa/finance/payapply/getInfo/".concat(e.formId)).then((function(e){t.info=e,console.log(t.info)}))})).catch((function(e){t.$toast(e.message||e.msg)}))},handleStepM:function(t){var e=this;this.handleStep.auditResult=t,this.$http.post("/haolifa/flowInstance/handleStep",this.handleStep).then((function(t){e.$toast("处理成功"),e.handleStep.backStepId=null,e.backStepLayer=!1,e.getData()})).catch((function(t){e.$toast(t.msg||t.message)}))},uploadFile:function(t,e){var a=this;this.loading=!0,this.loadingMsg="正在上传",Object(o["a"])(t.source).then((function(e){a.$http.post("/haolifa/file/uploadFileBase64",{base64Source:e,fileName:t.name}).then((function(e){a.handleStep.accessorys.push({fileName:t.name,fileUrl:e}),a.loading=!1})).catch((function(t){a.$toast(t.msg||t.message),a.loading=!1}))}))},removeFile:function(){var t=this;return new Promise((function(e,a){t.handleStep.accessorys.splice(i,1),e()}))},backStepM:function(){var t=this;this.$http.get("/haolifa/flowInstance/backSteps/".concat(this.handleStep.id)).then((function(e){e.length>0?(t.backSteps=e,t.backStepLayer=!0):t.$toast("无可退回节点")})).catch((function(e){t.$toast(e.msg||e.message)}))},complete:function(){this.handleStepM(2)},cancel:function(){this.backStepLayer=!1,this.handleStep.backStepId=null}}},p=c,d=(a("5987"),a("cba8")),u=Object(d["a"])(p,s,r,!1,null,null,null);e["default"]=u.exports},a6a3:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-invoice-list"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),t._v("\n            状态:\n            "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:"0"}},[t._v("全部")]),a("option",{attrs:{value:"1"}},[t._v("代办")]),a("option",{attrs:{value:"2"}},[t._v("已办")])])]),a("div",{staticClass:"flex-item"}),a("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")])],1),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/payapply/getPayAppList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.applyTime))]),a("td",[t._v(t._s(s.applyPayCompany))]),a("td",[t._v(t._s(s.totalPrice))]),a("td",[t._v(t._s(t.statusArr[s.status]))]),a("td",[t._v(t._s(s.remark))]),a("td",[t._v(t._s(s.createTime))]),a("td",[t._v(t._s(s.updateTime))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(s)}}},[t._v("编辑 | ")]),a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.detail(s)}}},[t._v("详情 | ")]),1==s.status||4==s.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.startFinance(s.id)}}},[t._v("发起审批 | ")]):t._e(),a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.approveProgress(s)}}},[t._v("审批进度")]),1==s.status||4==s.status?a("a",{staticClass:"red",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(s)}}},[t._v("| 删除")]):t._e()])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("付款日期")]),a("th",[t._v("付款单位")]),a("th",[t._v("付款金额")]),a("th",[t._v("审批节点")]),a("th",[t._v("备注")]),a("th",[t._v("创建时间")]),a("th",[t._v("更新时间")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?a("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"flex"},[a("el-button",{staticClass:"mr-20",attrs:{size:"mini",type:"primary"},on:{click:t.addItem}},[t._v("选择合同")])],1),t._l(t.form.applyDetailAddDTOList,(function(e,s){return a("div",{key:s,staticStyle:{margin:"0 30px"}},[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"订单号"},model:{value:e.purchaseOrderNo,callback:function(a){t.$set(e,"purchaseOrderNo",a)},expression:"item.purchaseOrderNo"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{type:"number",label:"金额"},on:{blur:function(e){return t.amountChange(s)}},model:{value:e.price,callback:function(a){t.$set(e,"price",a)},expression:"item.price"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"收款单位"},model:{value:e.applyCollectionCompany,callback:function(a){t.$set(e,"applyCollectionCompany",a)},expression:"item.applyCollectionCompany"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"付款单位"},model:{value:e.applyPayCompany,callback:function(a){t.$set(e,"applyPayCompany",a)},expression:"item.applyPayCompany"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"备注"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}}),a("el-button",{staticClass:"mr-20",attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(e){return t.delItem(s)}}},[t._v("删 除")])],1),a("hr",{staticStyle:{border:"1px dashed #409EFF"}})])})),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"总计"},model:{value:t.form.totalPrice,callback:function(e){t.$set(t.form,"totalPrice",e)},expression:"form.totalPrice"}})],1),a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],2),a("div",{staticClass:"layer-btns"},[a("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),a("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e(),t.layerTable?a("layer",{attrs:{title:"数据列表",width:"90%"}},[a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                采购合同号:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tableForm.orderNo,expression:"tableForm.orderNo"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.tableForm.orderNo},on:{change:function(e){t.$refs.listOne.update(!0),t.getDataOneNum()},input:function(e){e.target.composing||t.$set(t.tableForm,"orderNo",e.target.value)}}}),t._v("\n                供方单位:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tableForm.supplierName,expression:"tableForm.supplierName"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.tableForm.supplierName},on:{change:function(e){t.$refs.listOne.update(!0),t.getDataOneNum()},input:function(e){e.target.composing||t.$set(t.tableForm,"supplierName",e.target.value)}}}),t._v("\n                订单状态:\n                "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tableForm.status,expression:"tableForm.status"}],staticClass:"f-14",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tableForm,"status",e.target.multiple?a:a[0])}}},t._l(t.statusList,(function(e){return a("option",{key:e.status,domProps:{value:e.status}},[t._v(t._s(e.name))])})),0),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.getTableData(1)}}},[t._v("查询")]),a("el-link",{staticClass:"ml-20"},[t._v("选择采购合同金额总计："+t._s(t.selectedAmount))]),a("el-link",{staticClass:"ml-20"},[t._v("材料费预算余额："+t._s(t.balanceNum))])],1)]),a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"purchaseOrderNo",label:"采购合同号"}}),a("el-table-column",{attrs:{prop:"supplierName",label:"供方单位"}}),a("el-table-column",{attrs:{prop:"demander",label:"采购单位"}}),a("el-table-column",{attrs:{prop:"paidAccount",label:"已付款金额"}}),a("el-table-column",{attrs:{prop:"invoiceAccount",label:"已开票金额"}}),a("el-table-column",{attrs:{prop:"totalPrice",label:"采购金额"}}),a("el-table-column",{attrs:{prop:"deliveryTime",width:"110",label:"采购完成日期"}}),a("el-table-column",{attrs:{prop:"totalCount",width:"100",label:"采购总数量"}}),a("el-table-column",{attrs:{prop:"qualifiedNumber",width:"110",label:"检验合格数量"}}),a("el-table-column",{attrs:{prop:"status",label:"订单状态",width:"80",formatter:t.statusFormatter}}),a("el-table-column",{attrs:{prop:"payType",label:"付款方式"}})],1)],1),a("el-pagination",{attrs:{"page-size":50,"pager-count":7,layout:"prev, pager, next,total",total:t.total},on:{"current-change":t.handleCurrentChange}}),a("div",{staticClass:"layer-btns"},[a("el-button",{staticClass:"mr-20",attrs:{size:"mini",type:"primary"},on:{click:t.saveSelect}},[t._v("保存")]),a("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:function(e){t.layerTable=!1}}},[t._v("关闭")])],1)],1):t._e(),t.layerDetail?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14 order-info"},[a("tr",[a("td",{staticStyle:{width:"20%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"25%"}}),a("td",{staticStyle:{width:"25%"}}),a("td",{staticStyle:{width:"20%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款单位 : "+t._s(t.info.applyPayCompany))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款金额 : "+t._s(t.info.totalPrice))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("付款日期 : "+t._s(t.info.applyTime))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("备注 : "+t._s(t.info.remark))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("创建日期 : "+t._s(t.info.createTime))])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"5"}},[t._v("更新日期 : "+t._s(t.info.updateTime))])]),a("tr",[a("th",[t._v("订单号")]),a("th",[t._v("金额(元)")]),a("th",[t._v("收款单位")]),a("th",[t._v("付款单位")]),a("th",[t._v("备注")])]),t._l(t.info.applyDetailRSDTOList,(function(e,s){return a("tr",{key:s},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseOrderNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.price))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.applyCollectionCompany))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.applyPayCompany))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])}))],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layerDetail=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(a("1bc78"),a("9b68")),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{status:"0"},layer:!1,form:{applyDetailAddDTOList:[],remark:"",totalPrice:0},tableForm:{orderNo:"",supplierName:"",status:"5"},loading:!1,layerTable:!1,tableData:[],multipleSelection:[],pageNum:1,total:0,statusList:[{status:"3",name:"采购中"},{status:"5",name:"采购完成"}],layerDetail:!1,info:{},selectedAmount:0,statusArr:["","待审批","审批中","付款中","审批不通过","付款完成"],balanceNum:0}},mounted:function(){},methods:{flush:function(){this.filter={status:"0"},this.$refs.list.update(!0)},edit:function(t){this.layer=!0,this.form.id=t.id,this.form.applyDetailAddDTOList=JSON.parse(JSON.stringify(t.applyDetailRSDTOList)),this.form.remark=t.remark,this.form.totalPrice=t.totalPrice},detail:function(t){this.layerDetail=!0,this.info=t},approveProgress:function(t){this.$router.push({path:"/purchsemanage-purchase/approveProgress?",query:{formNo:t.id,formId:""}})},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除采购订单申请吗？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/finance/payapply/delete/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},addItem:function(){this.pageNum=1,this.tableData=[],this.layerTable=!0,this.selectedAmount=0,this.getTableData()},delItem:function(t){this.form.applyDetailAddDTOList.splice(t,1)},startFinance:function(t){var e=this;this.$http.get("/haolifa/finance/payapply/approve/".concat(t)).then((function(t){e.$toast("审批发起成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))},getBalanceNum:function(){var t=this;this.$http.get("/haolifa/finance/payapply/subjects/getCurUserClfSubjectsBudget").then((function(e){t.balanceNum=e.balanceAmount})).catch((function(e){t.$toast(e.msg||e.message)}))},statusFormatter:function(t,e,a,s){return 3==t.status?"采购中":4==t.status?"采购完成":t.status},handleCurrentChange:function(t){this.pageNum=t,this.getTableData(t)},handleSelectionChange:function(t){var e=this;this.selectedAmount=0,this.multipleSelection=t,t.map((function(t){e.selectedAmount+=t.totalPrice})),this.selectedAmount=Math.floor(100*this.selectedAmount)/100},saveSelect:function(){var t=this;0!=this.multipleSelection.length?(this.multipleSelection.map((function(e){t.form.applyDetailAddDTOList.push({applyCollectionCompany:e.supplierName,applyPayCompany:e.demander,payType:e.payType,price:e.totalPrice,purchaseOrderId:e.id,purchaseOrderNo:e.purchaseOrderNo,remark:""}),t.form.totalPrice+=e.totalPrice})),this.form.totalPrice=Math.floor(100*this.form.totalPrice)/100,this.layerTable=!1):this.$toast("请选择数据")},amountChange:function(t){var e=this;this.form.totalPrice=0,this.form.applyDetailAddDTOList.forEach((function(t){e.form.totalPrice+=+t.price})),this.form.totalPrice=Math.floor(100*this.form.totalPrice)/100},add:function(){this.layer=!0,this.getBalanceNum()},getTableData:function(t){var e=this;t&&(this.pageNum=t),this.tableData=[],this.loading=!0,this.$http.post("/haolifa/purchase-order/payPlanlist",{pageSize:50,pageNum:1,orderType:0,orderNo:this.tableForm.orderNo,supplierName:this.tableForm.supplierName,status:this.tableForm.status}).then((function(t){e.loading=!1,e.tableData=t.list,e.total=t.total})).catch((function(t){e.loading=!1,e.$toast(t.msg||t.message)}))},save:function(){var t=this;this.loading=!0;var e=this.form.id?"/haolifa/finance/payapply/updatePayApp":"/haolifa/finance/payapply/savePayApp";this.$http.post(e,this.form).then((function(e){t.layer=!1,t.$toast("保存成功"),t.close(),t.$refs.list.update(!0),t.loading=!1})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))},close:function(){this.layer=!1,this.form={applyDetailAddDTOList:[],remark:"",totalPrice:0}}}},l=n,o=(a("7e4a"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},a7fb:function(t,e,a){},a9df:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-notification"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[t._v("销售报表统计图")]),a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"12px"}},[a("el-date-picker",{attrs:{size:"mini",clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.oneYearChange},model:{value:t.oneYearDate,callback:function(e){t.oneYearDate=e},expression:"oneYearDate"}})],1),a("div",{staticStyle:{width:"98%",margin:"0 auto",display:"flex"}},[a("div",{staticStyle:{display:"flex","padding-left":"20px","margin-left":"12px",color:"#008eff","font-size":"22px"}},[a("p",[t._v("生产总数量："+t._s(t.totalNum)+"台")]),a("p",{staticStyle:{"margin-left":"20px","font-size":"20px"}},[t._v("产值总额："+t._s(t.totalPrice.toFixed(2))+"元")]),a("p",{staticStyle:{"margin-left":"20px","font-size":"20px"}},[t._v("合同订货总数量："+t._s(t.contractTotalNum)+"台")]),a("p",{staticStyle:{"margin-left":"20px","font-size":"20px"}},[t._v("当年累计订货额："+t._s(t.contractTotalPrice.toFixed(2))+"元")])])]),a("div",{staticStyle:{width:"98%","margin-left":"20px",display:"flex","padding-left":"12px"}},[a("el-date-picker",{attrs:{size:"mini",clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.getSaleFive},model:{value:t.fiveYearDate,callback:function(e){t.fiveYearDate=e},expression:"fiveYearDate"}}),a("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("当年累计订货额:"+t._s(t.saleFiveNum.toFixed(2))+"元")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDataOne(1)}}},[t._v("数据显示")])],1),t._m(0),a("div",{staticStyle:{width:"98%","margin-left":"20px",display:"flex","padding-left":"1%"}},[a("div",{staticStyle:{"line-height":"28px"}},[t._v("开始时间:")]),a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getSale2Five},model:{value:t.fiveYear2Date,callback:function(e){t.fiveYear2Date=e},expression:"fiveYear2Date"}}),a("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("结束时间:")]),a("el-date-picker",{attrs:{size:"mini",clearable:!1,"value-format":"yyyy-MM",type:"month",placeholder:"选择年月"},on:{change:t.getSale2Five},model:{value:t.fiveYear2Date2,callback:function(e){t.fiveYear2Date2=e},expression:"fiveYear2Date2"}}),a("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("当月累计订货额:"+t._s(t.saleFive2Num.toFixed(2))+"元")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDataOne(2)}}},[t._v("数据显示")])],1),t._m(1),a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("el-date-picker",{attrs:{size:"mini",clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.getSaleSix},model:{value:t.sixYearDate,callback:function(e){t.sixYearDate=e},expression:"sixYearDate"}}),a("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("当年累计回款总额:"+t._s(t.salSixNum.toFixed(2))+"元")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getBackDetail(1)}}},[t._v("数据显示")])],1),t._m(2),a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("div",{staticStyle:{"line-height":"28px"}},[t._v("开始时间:")]),a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getSale2Six},model:{value:t.sixYear2Date,callback:function(e){t.sixYear2Date=e},expression:"sixYear2Date"}}),a("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("结束时间:")]),a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getSale2Six},model:{value:t.sixYear2Date2,callback:function(e){t.sixYear2Date2=e},expression:"sixYear2Date2"}}),a("span",{staticStyle:{color:"#008eff","line-height":"30px","margin-left":"20px","font-size":"20px"}},[t._v("当月累计回款总额:"+t._s(t.salSix2Num.toFixed(2))+"元")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getBackDetail(2)}}},[t._v("数据显示")])],1),t._m(3),a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("div",{staticStyle:{"line-height":"28px"}},[t._v("开始时间:")]),a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getBuyOne},model:{value:t.sevenYearDate,callback:function(e){t.sevenYearDate=e},expression:"sevenYearDate"}}),a("div",{staticStyle:{"line-height":"28px","margin-left":"10px"}},[t._v("结束时间:")]),a("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"month","value-format":"yyyy-MM",editable:!1,placeholder:"选择年月"},on:{change:t.getBuyOne},model:{value:t.sevenYearDate2,callback:function(e){t.sevenYearDate2=e},expression:"sevenYearDate2"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getSaleDetail()}}},[t._v("数据显示")])],1),t._m(4),a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("el-date-picker",{attrs:{size:"mini",clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.getYearTotal},model:{value:t.yearDate,callback:function(e){t.yearDate=e},expression:"yearDate"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getFourDetail()}}},[t._v("数据显示")])],1),t._m(5),a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("el-date-picker",{attrs:{size:"mini",clearable:!1,"value-format":"yyyy",type:"year",placeholder:"选择年"},on:{change:t.getSaleTwo},model:{value:t.twoYear,callback:function(e){t.twoYear=e},expression:"twoYear"}})],1),t._m(6),t.flag1?a("layer",{attrs:{title:"数据列表",width:"95%"}},[a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                客户名称:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form1.demandName,expression:"form1.demandName"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form1.demandName},on:{change:function(e){t.$refs.listOne.update(!0),t.getDataOneNum()},input:function(e){e.target.composing||t.$set(t.form1,"demandName",e.target.value)}}}),t._v("\n                订单号:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form1.orderNo,expression:"form1.orderNo"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form1.orderNo},on:{change:function(e){t.$refs.listOne.update(!0),t.getDataOneNum()},input:function(e){e.target.composing||t.$set(t.form1,"orderNo",e.target.value)}}}),t._v("\n                订单状态:\n                "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form1.orderStatus,expression:"form1.orderStatus"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form1,"orderStatus",e.target.multiple?a:a[0])},function(e){t.$refs.listOne.update(!0),t.getDataOneNum()}]}},[a("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.orderStatusList,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.$refs.listOne.update(!0),t.getDataOneNum()}}},[t._v("查询")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("累计订货总金额: "+t._s(t.totalAmountNum)+"元")])],1)]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"listOne",attrs:{"page-size":50,param:t.form1,url:"/haolifa/report-extend/report-order-list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.createTime))]),a("td",[t._v(t._s(s.demandName))]),a("td",[t._v(t._s(s.orderNo))]),a("td",[t._v(t._s(t.orderStatusArr[s.orderStatus]))]),a("td",[t._v(t._s(s.productName))]),a("td",[t._v(t._s(s.productModel))]),a("td",[t._v(t._s(s.specifications))]),a("td",[t._v(t._s(s.productNumber))]),a("td",[t._v(t._s(s.price))]),a("td",[t._v(t._s(s.totalPrice))]),a("td",[t._v(t._s(s.deliveryDate))])]}}],null,!1,947290064)},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("接单日期")]),a("th",[t._v("客户名称")]),a("th",[t._v("订单号")]),a("th",[t._v("订单状态")]),a("th",[t._v("产品名称")]),a("th",[t._v("系列")]),a("th",[t._v("规格")]),a("th",[t._v("数量")]),a("th",[t._v("单价（元）")]),a("th",[t._v("金额（元）")]),a("th",[t._v("交期")])])])],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.flag1=!1}}},[t._v("关闭")])],1)]):t._e(),t.flag2?a("layer",{attrs:{title:"数据列表",width:"95%"}},[a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                客户名称:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form2.demandName,expression:"form2.demandName"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form2.demandName},on:{change:function(e){t.$refs.listTwoTwo.update(!0),t.getDataBackNum()},input:function(e){e.target.composing||t.$set(t.form2,"demandName",e.target.value)}}}),t._v("\n                订单号:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form2.orderNo,expression:"form2.orderNo"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form2.orderNo},on:{change:function(e){t.$refs.listTwoTwo.update(!0),t.getDataBackNum()},input:function(e){e.target.composing||t.$set(t.form2,"orderNo",e.target.value)}}}),t._v("\n                订单状态:\n                "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form2.orderStatus,expression:"form2.orderStatus"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form2,"orderStatus",e.target.multiple?a:a[0])},function(e){t.$refs.listTwoTwo.update(!0),t.getDataBackNum()}]}},[a("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.orderStatusList,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2),t._v("\n                发货状态:\n                "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form2.deliverStatus,expression:"form2.deliverStatus"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form2,"deliverStatus",e.target.multiple?a:a[0])},function(e){t.$refs.listTwoTwo.update(!0),t.getDataBackNum()}]}},[a("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.deliverStatusList,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.$refs.listTwoTwo.update(!0),t.getDataBackNum()}}},[t._v("查询")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"18px"},attrs:{underline:!1,type:"text"}},[t._v("合同金额: "+t._s(t.form2Obj.totalSaleAmount.toFixed(2))+"元")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"18px"},attrs:{underline:!1,type:"text"}},[t._v("回款金额: "+t._s(t.form2Obj.totalCollectAmount.toFixed(2))+"元")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"18px"},attrs:{underline:!1,type:"text"}},[t._v("欠款金额: "+t._s(t.form2Obj.totalOwedAmount.toFixed(2))+"元")])],1)]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"listTwoTwo",attrs:{"page-size":50,param:t.form2,url:"/haolifa/report-extend/report-collect-order-list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.demandName))]),a("td",[t._v(t._s(s.createTime))]),a("td",[t._v(t._s(s.orderNo))]),a("td",[t._v(t._s(t.orderStatusArr[s.orderStatus]))]),a("td",[t._v(t._s(t.deliverStatusArr[s.deliverStatus]))]),a("td",[t._v(t._s(s.totalPrice))]),a("td",[t._v(t._s(s.deliveryDate))]),a("td",[t._v(t._s(s.collectionAmount))]),a("td",[t._v(t._s(s.collectionDate))]),a("td",[t._v(t._s(s.owedAmount))])]}}],null,!1,296013484)},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("客户名称")]),a("th",[t._v("接单日期")]),a("th",[t._v("订单号")]),a("th",[t._v("订单状态")]),a("th",[t._v("发货状态")]),a("th",[t._v("合同金额（元）")]),a("th",[t._v("交货日期")]),a("th",[t._v("回款金额（元）")]),a("th",[t._v("回款日期")]),a("th",[t._v("欠款金额（元）")])])])],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.flag2=!1}}},[t._v("关闭")])],1)]):t._e(),t.flag3?a("layer",{attrs:{title:"数据列表",width:"95%"}},[a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                客户名称:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form3.demandName,expression:"form3.demandName"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form3.demandName},on:{change:function(e){t.$refs.listThree.update(!0),t.getSaleData()},input:function(e){e.target.composing||t.$set(t.form3,"demandName",e.target.value)}}}),t._v("\n                订单号:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form3.orderNo,expression:"form3.orderNo"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form3.orderNo},on:{change:function(e){t.$refs.listThree.update(!0),t.getSaleData()},input:function(e){e.target.composing||t.$set(t.form3,"orderNo",e.target.value)}}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.$refs.listThree.update(!0),t.getSaleData()}}},[t._v("查询")])],1)]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("订货金额: "+t._s(t.form3Obj.saleAmount.toFixed(2))+"元")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("发货金额: "+t._s(t.form3Obj.deliveryAmount.toFixed(2))+"元")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("开票金额: "+t._s(t.form3Obj.invoiceAmount.toFixed(2))+"元")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("回款金额: "+t._s(t.form3Obj.collectAmount.toFixed(2))+"元")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("欠票金额: "+t._s(t.form3Obj.oweTicketAmount.toFixed(2))+"元")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("欠款金额: "+t._s(t.form3Obj.oweMoneyAmount.toFixed(2))+"元")])],1)]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"listThree",attrs:{"page-size":50,param:t.form3,url:"/haolifa/report-extend/report-sale-demand-list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.demandName))]),a("td",[t._v(t._s(s.orderNo))]),a("td",[t._v(t._s(s.saleAmount))]),a("td",[t._v(t._s(s.deliveryAmount))]),a("td",[t._v(t._s(s.invoiceAmount))]),a("td",[t._v(t._s(s.collectAmount))]),a("td",[t._v(t._s(s.oweTicketAmount))]),a("td",[t._v(t._s(s.oweMoneyAmount))])]}}],null,!1,909989643)},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("客户名称")]),a("th",[t._v("订单号")]),a("th",[t._v("订货金额（元）")]),a("th",[t._v("发货金额（元）")]),a("th",[t._v("开票金额（元）")]),a("th",[t._v("回款金额（元）")]),a("th",[t._v("欠票金额（元）")]),a("th",[t._v("欠款金额（元）")])])])],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.flag3=!1}}},[t._v("关闭")])],1)]):t._e(),t.flag4?a("layer",{attrs:{title:"数据列表",width:"95%"}},[a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[t._v("\n                客户名称:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form4.demandName,expression:"form4.demandName"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form4.demandName},on:{change:function(e){t.$refs.listFour.update(!0),t.getFourTj()},input:function(e){e.target.composing||t.$set(t.form4,"demandName",e.target.value)}}}),t._v("\n                订单号:\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form4.orderNo,expression:"form4.orderNo"}],staticClass:"flex-item",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:""},domProps:{value:t.form4.orderNo},on:{change:function(e){t.$refs.listFour.update(!0),t.getFourTj()},input:function(e){e.target.composing||t.$set(t.form4,"orderNo",e.target.value)}}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.$refs.listFour.update(!0),t.getFourTj()}}},[t._v("查询")]),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:t.exportExcel}},[t._v("导出")]),a("el-button",{staticStyle:{"margin-left":"20px","font-size":"20px"},attrs:{underline:!1,type:"text"}},[t._v("累计产值总额: "+t._s(t.form4Amount.toFixed(2))+"元")])],1)]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"listFour",attrs:{"page-size":50,param:t.form4,url:"/haolifa/report-extend/report-sale-output-list",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.createTime))]),a("td",[t._v(t._s(s.demandName))]),a("td",[t._v(t._s(s.orderNo))]),a("td",[t._v(t._s(t.orderStatusArr[s.orderStatus]))]),a("td",[t._v(t._s(s.productNo))]),a("td",[t._v(t._s(s.productName))]),a("td",[t._v(t._s(s.productSpecifications))]),a("td",[t._v(t._s(s.productModel))]),a("td",[t._v(t._s(s.quantity))]),a("td",[t._v(t._s(s.price))]),a("td",[t._v(t._s(s.totalPrice))])]}}],null,!1,2274285802)},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("接单日期")]),a("th",[t._v("客户名称")]),a("th",[t._v("订单号")]),a("th",[t._v("订单状态")]),a("th",[t._v("产品ID")]),a("th",[t._v("产品名称")]),a("th",[t._v("系列")]),a("th",[t._v("规格")]),a("th",[t._v("数量")]),a("th",[t._v("单价（元）")]),a("th",[t._v("金额（元）")])])])],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.flag4=!1}}},[t._v("关闭")])],1)]):t._e(),t.exportLayer?a("layer",{attrs:{title:"导出",width:"30%"}},[a("div",{staticClass:"flex ml-20 mr-20"},[a("date-picker",{staticClass:"flex-item",attrs:{hint:"必填",label:"开始时间"},model:{value:t.exportForm.startDate,callback:function(e){t.$set(t.exportForm,"startDate",e)},expression:"exportForm.startDate"}})],1),a("div",{staticClass:"flex ml-20 mr-20"},[a("date-picker",{staticClass:"flex-item",attrs:{hint:"必填",label:"结束时间"},model:{value:t.exportForm.endDate,callback:function(e){t.$set(t.exportForm,"endDate",e)},expression:"exportForm.endDate"}})],1),a("div",{staticClass:"flex ml-20 mr-20"},[a("input-box",{staticClass:"flex-item",attrs:{label:"订单号"},model:{value:t.exportForm.orderNo,callback:function(e){t.$set(t.exportForm,"orderNo",e)},expression:"exportForm.orderNo"}})],1),a("div",{staticClass:"flex ml-20 mr-20"},[a("select-box",{staticClass:"flex-item",attrs:{list:t.entryStatusList,label:"状态"},model:{value:t.exportForm.entryStatus,callback:function(e){t.$set(t.exportForm,"entryStatus",e)},expression:"exportForm.entryStatus"}})],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){t.exportLayer=!1}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.download()}}},[t._v("确定")])],1)]):t._e()],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("div",{staticStyle:{width:"100%",height:"500px","margin-top":"20px"},attrs:{id:"saleFive"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("div",{staticStyle:{width:"100%",height:"500px","margin-top":"20px"},attrs:{id:"sale2Five"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("div",{staticStyle:{width:"100%",height:"500px","margin-top":"20px"},attrs:{id:"saleSix"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("div",{staticStyle:{width:"100%",height:"500px","margin-top":"20px"},attrs:{id:"sale2Six"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("div",{staticStyle:{width:"100%",height:"500px","margin-top":"20px"},attrs:{id:"saleSeven"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("div",{staticStyle:{width:"100%",height:"500px"},attrs:{id:"saleOne"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"98%",margin:"20px auto",display:"flex","padding-left":"1%"}},[a("div",{staticStyle:{width:"100%",height:"500px"},attrs:{id:"saleTwo"}})])}],r=(a("32ea"),a("1bc78"),a("9b68")),n={name:"xsreport-form",components:{DataList:r["a"]},data:function(){return{chartOneList:[],yearDate:(new Date).getFullYear()+"",oneYearDate:(new Date).getFullYear()+"",cYearDate:(new Date).getFullYear()+"",fiveYearDate:(new Date).getFullYear()+"",sixYearDate:(new Date).getFullYear()+"",twoYear:(new Date).getFullYear()+"",sevenYearDate:(new Date).getFullYear()+"-01",sevenYearDate2:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),fiveYear2Date:(new Date).getFullYear()+"-01",fiveYear2Date2:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),sixYear2Date:(new Date).getFullYear()+"-01",sixYear2Date2:(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),totalNum:0,totalPrice:0,contractTotalNum:0,contractTotalPrice:0,saleFiveNum:0,saleFive2Num:0,salSixNum:0,salSix2Num:0,flag1:!1,flag2:!1,flag3:!1,flag4:!1,form1:{deliverStatus:"",demandName:"",endDate:"",orderNo:"",orderStatus:"",productName:"",startDate:"",year:""},form2:{deliverStatus:"",demandName:"",endDate:"",orderNo:"",orderStatus:"",productName:"",startDate:"",year:""},form2Obj:{totalSaleAmount:0,totalCollectAmount:0,totalOwedAmount:0},form3:{deliverStatus:"",demandName:"",endDate:"",orderNo:"",orderStatus:"",productName:"",startDate:"",year:""},form4:{deliverStatus:"",demandName:"",endDate:"",orderNo:"",orderStatus:"",productName:"",startDate:"",year:""},form4Amount:0,form3Obj:{saleAmount:0,deliveryAmount:0,invoiceAmount:0,collectAmount:0,oweMoneyAmount:0,oweTicketAmount:0},orderStatusList:[{value:0,text:"创建"},{value:1,text:"审批中"},{value:2,text:"核料中"},{value:3,text:"替换料审批中"},{value:4,text:"核料完成"},{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:8,text:"生产暂停"},{value:9,text:"生产完成"},{value:10,text:"质检中"},{value:11,text:"已入库"},{value:12,text:"申请发货"},{value:13,text:"发货完成"},{value:14,text:"审核不通过"}],orderStatusArr:["创建","审批中","核料中","替换料审批中","核料完成","待生产","待领料","生产中","生产暂停","生产完成","质检中","已入库","申请发货","发货完成","审核不通过"],deliverStatusList:[{value:0,text:"待发货"},{value:1,text:"部分发货"},{value:2,text:"发货完成"}],deliverStatusArr:["待发货","部分发货","发货完成"],exportLayer:!1,exportForm:{entryStatus:0,startDate:"",orderNo:"",endDate:""},totalAmountNum:0}},created:function(){this.getTotal(),this.getSaleFive(),this.getSale2Five(),this.getSaleSix(),this.getSale2Six(),this.getContractTotal(),this.getSaleTwo(this.twoYear),this.getSaleOne(this.yearDate),this.getBuyOne()},methods:{flush:function(){this.yearDate=(new Date).getFullYear()+"",this.oneYearDate=(new Date).getFullYear()+"",this.cYearDate=(new Date).getFullYear()+"",this.fiveYearDate=(new Date).getFullYear()+"",this.sixYearDate=(new Date).getFullYear()+"",this.twoYear=(new Date).getFullYear()+"",this.sevenYearDate=(new Date).getFullYear()+"-01",this.sevenYearDate2=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.fiveYear2Date=(new Date).getFullYear()+"-01",this.fiveYear2Date2=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.sixYear2Date=(new Date).getFullYear()+"-01",this.sixYear2Date2=(new Date).getFullYear()+"-"+this.addRezo((new Date).getMonth()+1),this.getTotal(),this.getSaleFive(),this.getSale2Five(),this.getSaleSix(),this.getSale2Six(),this.getContractTotal(),this.getSaleTwo(this.twoYear),this.getSaleOne(this.yearDate),this.getBuyOne()},getDataOne:function(t){this.form1.demandName="",this.form1.orderNo="",this.form1.orderStatus="",1==t?(this.form1.startDate=this.fiveYearDate+"-01",this.form1.endDate=this.fiveYearDate+"-12"):2==t&&(this.form1.startDate=this.fiveYear2Date,this.form1.endDate=this.fiveYear2Date2),this.flag1=!0,this.getDataOneNum(),this.$refs.listOne.update(!0)},getDataOneNum:function(){var t=this;this.totalAmountNum="",this.$http.post("/haolifa/report-extend/report-order-summary",this.form1).then((function(e){t.totalAmountNum=e})).catch((function(e){t.$toast(e.msg||e.message)}))},getBackDetail:function(t){this.form2.demandName="",this.form2.orderNo="",this.form2.orderStatus="",this.form2.deliverStatus="",1==t?(this.form2.startDate=this.sixYearDate+"-01",this.form2.endDate=this.sixYearDate+"-12"):2==t&&(this.form2.startDate=this.sixYear2Date,this.form2.endDate=this.sixYear2Date2),this.flag2=!0,this.$refs.listTwoTwo.update(!0),this.getDataBackNum()},getDataBackNum:function(){var t=this;this.form2Obj={totalSaleAmount:0,totalCollectAmount:0,totalOwedAmount:0},this.$http.post("/haolifa/report-extend/report-collect-order-summary",this.form2).then((function(e){t.form2Obj.totalSaleAmount=e.totalSaleAmount,t.form2Obj.totalCollectAmount=e.totalCollectAmount,t.form2Obj.totalOwedAmount=e.totalOwedAmount})).catch((function(e){t.$toast(e.msg||e.message)}))},getSaleDetail:function(t){this.form3.startDate=this.sevenYearDate,this.form3.endDate=this.sevenYearDate2,this.form3.demandName="",this.form3.orderNo="",this.flag3=!0,this.getSaleData(),this.$refs.listThree.update(!0)},getSaleData:function(){var t=this;this.form3Obj.saleAmount=0,this.form3Obj.deliveryAmount=0,this.form3Obj.invoiceAmount=0,this.form3Obj.collectAmount=0,this.form3Obj.oweTicketAmount=0,this.form3Obj.oweMoneyAmount=0,this.$http.post("/haolifa/report-extend/report-sale-demand-summary",this.form3).then((function(e){t.form3Obj.saleAmount=e.saleAmount,t.form3Obj.deliveryAmount=e.deliveryAmount,t.form3Obj.invoiceAmount=e.invoiceAmount,t.form3Obj.collectAmount=e.collectAmount,t.form3Obj.oweTicketAmount=e.oweTicketAmount,t.form3Obj.oweMoneyAmount=e.oweMoneyAmount})).catch((function(e){t.$toast(e.msg||e.message)}))},getFourDetail:function(){this.form4.demandName="",this.form4.orderNo="",this.form4.startDate=this.yearDate+"-01",this.form4.endDate=this.yearDate+"-12",this.flag4=!0,this.getFourTj(),this.$refs.listFour.update(!0)},getFourTj:function(){var t=this;this.form4Amount=0,this.$http.post("/haolifa/report-extend/report-sale-output-summary",this.form4).then((function(e){t.form4Amount=e})).catch((function(e){t.$toast(e.msg||e.message)}))},oneYearChange:function(){this.getTotal()},addRezo:function(t){return t>9?t:"0"+t},getTotal:function(){var t=this;this.$http.get("/haolifa/report/sale/getSaleAll?year=".concat(this.oneYearDate)).then((function(e){t.totalNum=e.outPutTotalNum,t.totalPrice=e.outPutTotalAmount,t.contractTotalNum=e.saleTotalNum,t.contractTotalPrice=e.saleTotalAmount}))},getSaleFive:function(){var t=this;this.saleFiveNum=0,this.$http.get("/haolifa/report/sale/selectContractByDemandName?year=".concat(this.fiveYearDate)).then((function(e){var a=[],s=[],i=[],r=e[0].value[0].year,n=e[0].value[1].year;e.map((function(e){a.push(e.companyName),s.push(e.value[0].amount),i.push(e.value[1].amount),t.saleFiveNum=t.saleFiveNum+ +e.value[0].amount}));var l=t.$echarts.init(document.getElementById("saleFive")),o={color:["#3398DB","#91CC75"],title:{text:"年度订货总额分类统计图",x:"left"},grid:{left:"3%",right:"4%",bottom:"2%",containLabel:!0},legend:{},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:a,axisLabel:{interval:0,rotate:30}},yAxis:{type:"value"},series:[{name:r,barWidth:"30%",data:s,type:"bar"},{name:n,barWidth:"30%",data:i,type:"bar"}]};l.setOption(o)})).catch((function(e){t.$toast(e.msg||e.message)}))},getSale2Five:function(){var t=this;this.saleFive2Num=0,this.$http.post("/haolifa/report/sale/selectContractByDemandNameByMonth",{endDate:this.fiveYear2Date2,month:"",startDate:this.fiveYear2Date,year:""}).then((function(e){var a=[],s=[];e.map((function(e){a.push(e.demandName),s.push({name:e.demandName,value:e.totalPrice}),t.saleFive2Num=t.saleFive2Num+ +e.totalPrice}));var i=t.$echarts.init(document.getElementById("sale2Five")),r={title:{text:"月份客户订货额统计图",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:a},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],label:{show:!1,position:"center"},data:s,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getSaleSix:function(){var t=this;this.salSixNum=0,this.$http.get("/haolifa/report/sale/selectshouhuiContractByDemandName?year=".concat(this.sixYearDate)).then((function(e){if(e&&0!=e.length){var a=[],s=[],i=[],r=e[0].value[0].year,n=e[0].value[1].year;e.map((function(e,r){a.push(e.companyName),s.push(e.value[0].amount),i.push(e.value[1].amount),t.salSixNum=t.salSixNum+ +e.value[0].amount}));var l=t.$echarts.init(document.getElementById("saleSix")),o={color:["#3398DB","#91CC75"],title:{text:"年度回款总额分类统计图",x:"left"},grid:{left:"3%",right:"4%",bottom:"2%",containLabel:!0},legend:{},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:a,axisLabel:{interval:0,rotate:30}},yAxis:{type:"value"},series:[{name:r,barWidth:"30%",data:s,type:"bar"},{name:n,barWidth:"30%",data:i,type:"bar"}]};l.setOption(o)}})).catch((function(e){t.$toast(e.msg||e.message)}))},getSale2Six:function(){var t=this;this.salSix2Num=0,this.$http.post("/haolifa/report/sale/selectshouhuiContractByDemandNameByMonth",{startDate:this.sixYear2Date,endDate:this.sixYear2Date2}).then((function(e){var a=[],s=[];e.map((function(e){a.push(e.demandName),s.push({name:e.demandName,value:e.totalPrice}),t.salSix2Num=t.salSix2Num+ +e.totalPrice}));var i=t.$echarts.init(document.getElementById("sale2Six")),r={title:{text:"月份回款额统计图",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:a},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:s,label:{show:!1,position:"center"},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getContractTotal:function(){var t=this;this.$http.get("/haolifa/report/sale/getSaleAllContract?year=".concat(this.oneYearDate)).then((function(e){t.contractTotalNum=e[0].totalNum,t.contractTotalPrice=e[0].totalPrice}))},getYearTotal:function(){this.getSaleOne(this.yearDate)},getCYearTotal:function(){this.getCSaleOne(this.cYearDate)},getSaleOne:function(t){var e=this;this.$http.get("/haolifa/report/sale/getSaleAllByMonth?year="+t).then((function(a){var s=[],i=[];Object.keys(a).forEach((function(t){s.push(t+"月"),i.push(a[t])}));var r=e.$echarts.init(document.getElementById("saleOne")),n={color:["#3398DB"],title:{text:t+"年每月产值总额统计",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}元"},xAxis:{type:"category",data:s},yAxis:{type:"value"},series:[{name:"产值额",barWidth:"30%",data:i,type:"bar"}]};r.setOption(n)}))},getCSaleOne:function(t){var e=this;this.$http.get("/haolifa/report/sale/getSaleAllByMonthContract?year="+t).then((function(a){var s=[],i=[];Object.keys(a).forEach((function(t){s.push(t+"月"),i.push(a[t][0].totalPrice)}));var r=e.$echarts.init(document.getElementById("saleThree")),n={color:["#3398DB"],title:{text:t+"年每月合同总额统计",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}元"},xAxis:{type:"category",data:s},yAxis:{type:"value"},series:[{name:"合同额",barWidth:"30%",data:i,type:"bar"}]};r.setOption(n)}))},getSaleTwo:function(t){var e=this;this.$http.get("/haolifa/report/sale/getSaleByModel?year=".concat(t)).then((function(t){var a=[],s=[];t.map((function(t){a.push(t.productModel),s.push(t.totalPrice)}));var i=e.$echarts.init(document.getElementById("saleTwo")),r={color:["#3398DB"],title:{text:"产品型号产值总额统计",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}元"},xAxis:{type:"category",data:a},yAxis:{type:"value"},series:[{name:"生产金额",barWidth:"30%",data:s,type:"bar"}]};i.setOption(r)}))},getSaleFour:function(){var t=this;this.$http.get("/haolifa/report/sale/getSaleByModelContract").then((function(e){var a=[],s=[];e.map((function(t){a.push(t.productModel),s.push(t.totalPrice)}));var i=t.$echarts.init(document.getElementById("saleFour")),r={color:["#3398DB"],title:{text:"产品型号合同金额统计",x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}元"},xAxis:{type:"category",data:a},yAxis:{type:"value"},series:[{name:"合同金额",barWidth:"30%",data:s,type:"bar"}]};i.setOption(r)}))},getBuyOne:function(){var t=this;this.$http.post("/haolifa/report/sale/selectAllAmountByDemandName",{startDate:this.sevenYearDate,endDate:this.sevenYearDate2,month:"",year:""}).then((function(e){var a=[],s=[],i=[],r=[],n=[];e.map((function(t){a.push(t.demandName),s.push(t.saleAmount),i.push(t.invoiceAmount),r.push(t.deliveryAmount),n.push(t.refundAmount)}));var l=t.$echarts.init(document.getElementById("saleSeven")),o={title:{text:"销售报表-按需方统计",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["订货总金额","开票总金额","发货总金额","回款总金额"]},grid:{left:"3%",right:"4%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",data:a,axisLabel:{interval:0,rotate:30}}],yAxis:[{type:"value"}],series:[{name:"订货总金额",type:"bar",barWidth:"10%",data:s},{name:"开票总金额",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"发货总金额",type:"bar",color:"#e6a23c",barWidth:"10%",data:r},{name:"回款总金额",type:"bar",color:"#67c23a",barWidth:"10%",data:n}]};l.setOption(o)}))},exportExcel:function(){this.exportLayer=!0,this.exportForm={entryStatus:0,startDate:"",orderNo:"",endDate:""}},download:function(){if(this.exportForm.startDate)if(this.exportForm.endDate){var t=document.createElement("a");t.setAttribute("download",""),t.setAttribute("href","/haolifa/export/product-entry?startDate=".concat(this.exportForm.startDate,"&endDate=").concat(this.exportForm.endDate,"&entryStatus=").concat(this.exportForm.entryStatus,"&orderNo=").concat(this.exportForm.orderNo)),t.click(),this.exportLayer=!1}else this.$toast("请选择结束时间");else this.$toast("请选择开始时间")}}},l=n,o=(a("54d4"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},aed2:function(t,e,a){"use strict";a("4404")},b3ad:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"abs scroll-y"},[a("div",{staticClass:"metalwork-info",staticStyle:{width:"100%",margin:"0 auto"}},[a("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[a("icon-btn",{staticClass:"mr-15",on:{click:function(e){return t.$router.back()}}},[t._v("arrow_back")]),a("div",{staticClass:"flex-item"},[t._v("审批进度")])],1),a("div",{staticStyle:{"min-width":"1200px"}},t._l(t.list,(function(e,s){return a("div",{key:s,staticClass:"approve"},[a("p",[t._v(t._s(e.roleName))]),a("p",{class:4==e.auditResult?"button ccc":"button"},[t._v(t._s(e.stepName))]),s<t.list.length-1?a("span",[t._v("-----\x3e")]):t._e(),a("p",[t._v(t._s(t.status[e.auditResult]))]),e.child.length>0?a("div",{staticClass:"approve",staticStyle:{position:"absolute",top:"123px"}},[a("div",{staticClass:"height-line"}),a("div",{staticClass:"bottom-arrows"}),a("p",[t._v(t._s(e.child[0].roleName))]),a("p",{class:4==e.child[0].auditResult?"button ccc":"button"},[t._v(t._s(e.child[0].stepName))]),a("p",[t._v(t._s(t.status[e.child[0].auditResult]))]),a("div",{staticClass:"right-height-line"}),a("div",{staticClass:"top-arrows"})]):t._e()])})),0)])])},i=[],r={name:"purchsemanage-entrustapproveProgress",data:function(){return{list:[],status:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},created:function(){this.getInfo(this.$route.query.formNo,this.$route.query.formId)},activated:function(){this.getInfo(this.$route.query.formNo,this.$route.query.formId)},methods:{getInfo:function(t,e){var a=this;this.$http.get("/haolifa/flowInstance/flow/progress?formNo=".concat(t,"&formId=").concat(e)).then((function(t){console.log(t),a.list=t})).catch((function(t){a.$toast(t.msg||t.message)}))}}},n=r,l=(a("4a2e"),a("cba8")),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},b542:function(t,e,a){"use strict";a("017e")},bc4a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-supplier-manage flex-col"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供应商名称"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}})]),a("div",{staticClass:"flex-item"})]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{method:"post",pageSize:15,param:t.filter,url:"/haolifa/supplier/list"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",[t._v(t._s(i))]),a("td",[a("router-link",{staticClass:"c-4",attrs:{to:"/supplier/"+s.id}},[t._v(t._s(s.suppilerName))])],1),a("td",[t._v(t._s(s.suppilerNo))]),a("td",[t._v(t._s(s.website))]),a("td",[t._v(t._s(t.natureList[s.nature]))]),a("td",[t._v(t._s(s.legalPerson))]),a("td",[t._v(t._s(s.phone))]),a("td",[t._v(t._s(t.isQualifiedStatusList[s.isQualified].text))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.infoDetail(s)}}},[t._v("详情")]),1==s.isQualified||2==s.isQualified?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.auditAccessoryInfo(s.suppilerNo)}}},[t._v("| 审批附件")]):t._e(),3==s.isQualified?a("a",{staticClass:"red",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approving(s.suppilerNo)}}},[t._v("| 审批进度")]):t._e()])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("企业名称")]),a("th",[t._v("编号")]),a("th",[t._v("网址")]),a("th",[t._v("企业性质")]),a("th",[t._v("法人")]),a("th",[t._v("电话")]),a("th",[t._v("是否合格")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1)])},i=[],r=a("9b68"),n={name:"page-supplier-manage",components:{DataList:r["a"]},data:function(){return{filter:{supplierName:"",supplierNo:""},natureList:["国有","三资","集体","联营","私营"],isQualifiedStatusList:[{value:0,text:"待评定"},{value:1,text:"合格"},{value:2,text:"不合格"},{value:3,text:"评定中"}]}},methods:{flush:function(){this.filter={supplierName:"",supplierNo:""},this.$refs.list.update(!0)},auditAccessoryInfo:function(t){console.log("accessory-info",t),this.$router.push("/supplier/accessory-info?formNo=".concat(t))},approving:function(t){this.$router.push("/supplier/approveProgress?formNo=".concat(t,"&formId=0"))},approveSupplier:function(t){var e=this;this.$http.post("/haolifa/supplier/approve/".concat(t)).then((function(t){e.$refs.list.update(!0),e.$toast("成功发起")})).catch((function(t){e.$toast(t.msg||t.message)}))},infoDetail:function(t){this.$router.push("/supplier/".concat(t.id))},edit:function(t){this.$router.push("/supplier/edit?id=".concat(t.id))},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除以下供应商吗？<br><b>".concat(t.suppilerName,"</b>"),color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/supplier/delete?id=".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})}}},l=n,o=(a("c8b8"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},bec9:function(t,e,a){"use strict";a("d7e9")},c4fe:function(t,e,a){},c7a3:function(t,e,a){},c86d:function(t,e,a){},c8b8:function(t,e,a){"use strict";a("cc5a3")},c8ea:function(t,e,a){"use strict";a("2a65")},c979:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-invoice-list"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.name,expression:"filter.name"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"费用明细"},domProps:{value:t.filter.name},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"name",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.code,expression:"filter.code"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"编码"},domProps:{value:t.filter.code},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"code",e.target.value)}}}),t._v("\n            费用类别：\n            "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.type,expression:"filter.type"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"type",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.subjectsList,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2)]),a("div",{staticClass:"flex-item"}),a("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"},on:{click:t.add}},[t._v("新增")])],1),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{"page-size":15,param:t.filter,url:"/haolifa/finance/subjects/getSubjectsList",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",{staticClass:"c-a"},[t._v(t._s(i))]),a("td",[t._v(t._s(s.name))]),a("td",[t._v(t._s(s.typeCN))]),a("td",[t._v(t._s(s.code))]),a("td",[t._v(t._s(s.remark))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.edit(s)}}},[t._v("编辑")]),a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(s)}}},[t._v("| 删除")])])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("费用明细")]),a("th",[t._v("费用类别")]),a("th",[t._v("编码")]),a("th",[t._v("科目描述")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?a("layer",{attrs:{title:t.form.id?"编辑":"新增",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"费用明细"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"编码"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),a("div",{staticClass:"flex"},[a("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.subjectsList,label:"费用类别"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"科目描述"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)]),a("div",{staticClass:"layer-btns"},[a("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.save}},[t._v("保存")]),a("el-button",{staticClass:"mr-20",attrs:{size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(a("a450"),a("9b68")),n={name:"khzb-list",components:{DataList:r["a"]},data:function(){return{filter:{code:"",id:"",level:"",name:"",parentId:"",percent:"",remark:"",type:""},subjectsList:[],form:{code:"",level:0,name:"",parentId:"",percent:"",remark:"",type:""},loading:!1,layer:!1}},mounted:function(){this.getDic()},methods:{flush:function(){this.filter={code:"",id:"",level:"",name:"",parentId:"",percent:"",remark:"",type:""},this.$refs.list.update(!0)},remove:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除吗？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/finance/subjects/delete/".concat(t.id)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},getDic:function(){var t=this;this.$http.get("/haolifa/sys-dict/getDictListByType/SUBJECTS_TYPE").then((function(e){t.subjectsList=[],e.map((function(e){t.subjectsList.push({text:e.desc,value:e.code})}))})).catch((function(e){t.$toast(e.msg||e.message)}))},add:function(){this.layer=!0},edit:function(t){this.form={code:t.code,level:t.level,id:t.id,name:t.name,parentId:t.parentId,percent:t.percent,remark:t.remark,type:t.type},this.layer=!0},save:function(){var t=this;this.loading=!0;var e=this.form.id?"/haolifa/finance/subjects/updateSubjects":"/haolifa/finance/subjects/save";this.$http.post(e,this.form).then((function(e){t.close(),t.$toast("保存成功"),t.loading=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},close:function(){this.form={code:"",level:0,name:"",parentId:"",percent:"",remark:"",type:""},this.layer=!1}}},l=n,o=(a("90d7"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},cc47:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-notification"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[t._v("质量报表统计图")]),a("div",{staticStyle:{width:"90%",margin:"20px auto",display:"flex","padding-left":"9%"}},[a("el-date-picker",{attrs:{clearable:!1,type:"year","value-format":"yyyy",placeholder:"选择年月"},on:{change:t.getBuyOne},model:{value:t.oneYearDate,callback:function(e){t.oneYearDate=e},expression:"oneYearDate"}})],1),t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px",width:"90%",margin:"20px auto"}},[a("div",{staticStyle:{width:"100%",height:"600px",margin:"0 auto"},attrs:{id:"buyOnee"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"90%",display:"flex",margin:"30px auto"}},[a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartOne"}}),a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartTwo"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"310px",width:"90%",display:"flex",margin:"30px auto"}},[a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartThree"}}),a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartNine"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"310px",width:"90%",display:"flex",margin:"30px auto"}},[a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartEight"}}),a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartFour"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"310px",width:"90%",display:"flex",margin:"30px auto"}},[a("div",{staticStyle:{width:"50%",height:"300px","margin-top":"20px"},attrs:{id:"chartSeven"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"700px",width:"90%",margin:"100px auto"}},[a("div",{staticStyle:{width:"80%",height:"700px",margin:"0 auto"},attrs:{id:"chartFive"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"700px",width:"90%",margin:"100px auto"}},[a("div",{staticStyle:{width:"80%",height:"700px",margin:"0 auto"},attrs:{id:"chartSix"}})])}],r=(a("a450"),{name:"report-form",data:function(){return{yearDate:(new Date).getFullYear()+"",oneYearDate:(new Date).getFullYear()+""}},mounted:function(){this.getChartOne(),this.getChartTwo(),this.getChartThree(),this.getChartFour(),this.getChartSeven(),this.getSupplier(),this.getChartSix(),this.getBuyOne(),this.getChartEight(),this.getChartNine()},methods:{flush:function(){this.yearDate=(new Date).getFullYear()+"",this.oneYearDate=(new Date).getFullYear()+"",this.getChartOne(),this.getChartTwo(),this.getChartThree(),this.getChartFour(),this.getChartSeven(),this.getSupplier(),this.getChartSix(),this.getBuyOne(),this.getChartEight(),this.getChartNine()},getChartOne:function(){var t=this;this.$http.get("/haolifa/report/quality/getAudit").then((function(e){var a=[],s=[];e.map((function(t){a.push(t.materialName),s.push({name:t.materialName,value:t.totalNum})}));var i=t.$echarts.init(document.getElementById("chartOne")),r=t.getOption("更换料质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartTwo:function(){var t=this;this.$http.get("/haolifa/report/quality/getInspect").then((function(e){var a=["合格数","不合格数"],s=[];s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber});var i=t.$echarts.init(document.getElementById("chartTwo")),r=t.getOption("采购质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartThree:function(){var t=this;this.$http.get("/haolifa/report/quality/getPressure").then((function(e){var a=["合格数","不合格数"],s=[];e?(s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber})):(s.push({name:"合格数",value:0}),s.push({name:"不合格数",value:0}));var i=t.$echarts.init(document.getElementById("chartThree")),r=t.getOption("压力质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartFour:function(){var t=this;this.$http.get("/haolifa/report/quality/getSpray").then((function(e){var a=["合格数","不合格数"],s=[];s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber});var i=t.$echarts.init(document.getElementById("chartFour")),r=t.getOption("喷涂质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartEight:function(){var t=this;this.$http.get("/haolifa/report/quality/getInspectByType?type=1").then((function(e){var a=["合格数","不合格数"],s=[];s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber});var i=t.$echarts.init(document.getElementById("chartEight")),r=t.getOption("机加工质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartNine:function(){var t=this;this.$http.get("/haolifa/report/quality/getProduct").then((function(e){var a=["合格数","不合格数"],s=[];s.push({name:"合格数",value:e.qualifiedNumber}),s.push({name:"不合格数",value:e.unqualifiedNumber});var i=t.$echarts.init(document.getElementById("chartNine")),r=t.getOption("成品检验质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getChartSeven:function(){var t=this;this.$http.get("/haolifa/report/quality/assemblingReason").then((function(e){var a=[],s=[];e.map((function(t){a.push(t.reason),s.push({name:t.reason,value:t.qty})}));var i=t.$echarts.init(document.getElementById("chartSeven")),r=t.getOption("阀门装配质量报表",a,s);i.setOption(r)})).catch((function(e){t.$toast(e.msg||e.message)}))},getOption:function(t,e,a){return{title:{text:t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:e},series:[{label:{show:!1,position:"center"},name:"",type:"pie",radius:"55%",center:["50%","60%"],data:a,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},getDepart:function(){var t=this,e=this;this.$http.get("/haolifa/report/expense/classifyByDepartmentAll").then((function(a){var s=[],i=[];a.map((function(t){s.push(t.department),i.push({name:t.department,value:t.totalAmount})}));var r=t.$echarts.init(document.getElementById("chartTwo")),n={title:{text:"部门费用分配",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.on("click",(function(t){e.getDepartDetail(t.data.name)})),r.setOption(n),e.getDepartDetail(s[0])})).catch((function(e){t.$toast(e.msg||e.message)}))},getDepartDetail:function(t){var e=this;this.$http.get("/haolifa/report/expense/getAllClassifyWithDepartment?department="+t).then((function(a){var s=[],i=[];a.map((function(t){s.push(t.expensesClassify),i.push({name:t.expensesClassify,value:t.totalAmount})}));var r=e.$echarts.init(document.getElementById("chartTwoDetail")),n={title:{text:"部门明细:"+t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.setOption(n)})).catch((function(t){e.$toast(t.msg||t.message)}))},getType:function(){var t=this,e=this;this.$http.get("/haolifa/report/expense/getAllClassify").then((function(a){var s=[],i=[];a.map((function(t){s.push(t.expensesClassify),i.push({name:t.expensesClassify,value:t.totalAmount})}));var r=t.$echarts.init(document.getElementById("chartThree")),n={title:{text:"费用分配",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.on("click",(function(t){e.getTypeDetail(t.data.name)})),r.setOption(n),t.getTypeDetail(s[0])})).catch((function(e){t.$toast(e.msg||e.message)}))},getTypeDetail:function(t){var e=this;this.$http.get("/haolifa/report/expense/getAllClassifyWithFirstClassify?classify="+t).then((function(a){var s=[],i=[];a.map((function(t){s.push(t.department),i.push({name:t.secondClassify,value:t.totalAmount})}));var r=e.$echarts.init(document.getElementById("chartThreeDetail")),n={title:{text:"费用明细:"+t,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:s},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.setOption(n)})).catch((function(t){e.$toast(t.msg||t.message)}))},getSupplier:function(){var t=this;this.$http.get("/haolifa/report/quality/getInspectBysupplierName").then((function(e){var a=0,s=[],i=[],r=[],n=[];e.map((function(t){s.push(t.supplierName),i.push(t.qualifiedNumber),n.push(t.unqualifiedNumber),a=a>t.totalNum?a:t.totalNum;var e=(t.qualifiedNumber/t.totalNum*100).toFixed(2);r.push(e)}));var l=t.$echarts.init(document.getElementById("chartFive")),o={color:["#3398DB","#FF6666","#66CCCC"],title:{text:"供应商产品质量统计图",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["合格数","不合格数","合格率"]},grid:{left:"18%",bottom:"30%"},xAxis:[{type:"category",data:s,axisPointer:{type:"shadow"},axisLabel:{rotate:60}}],yAxis:[{type:"value",name:"数量",min:0,max:a+2e3,axisLabel:{formatter:"{value} "}},{type:"value",name:"合格率",min:0,max:120,axisLabel:{formatter:"{value} %"}}],series:[{name:"合格数",type:"bar",data:i},{name:"不合格数",type:"bar",data:n},{name:"合格率",type:"line",yAxisIndex:1,data:r}]};l.setOption(o)}))},getChartSix:function(){var t=this;this.$http.get("/haolifa/report/quality/selectInspectByMaterialName").then((function(e){var a=0,s=[],i=[],r=[],n=[];e.map((function(t){s.push(t.materialGraphName),i.push(t.qualifiedNumber),n.push(t.unqualifiedNumber),a=a>t.totalNum?a:t.totalNum;var e=(t.qualifiedNumber/t.totalNum*100).toFixed(2);r.push(e)}));var l=t.$echarts.init(document.getElementById("chartSix")),o={color:["#3398DB","#FF6666","#66CCCC"],title:{text:"产品类型质量统计图",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["合格数","不合格数","合格率"]},grid:{left:"18%",bottom:"30%"},xAxis:[{type:"category",data:s,axisPointer:{type:"shadow"},axisLabel:{rotate:60}}],yAxis:[{type:"value",name:"数量",min:0,max:a+2e3,axisLabel:{formatter:"{value} "}},{type:"value",name:"合格率",min:0,max:120,axisLabel:{formatter:"{value} %"}}],series:[{name:"合格数",type:"bar",data:i},{name:"不合格数",type:"bar",data:n},{name:"合格率",type:"line",yAxisIndex:1,data:r}]};l.setOption(o)}))},getBuyOne:function(){var t=this;this.$http.get("/haolifa/report/quality/getAllQuality?year=".concat(this.oneYearDate)).then((function(e){var a=[],s=[],i=[],r=[],n=[];e.map((function(t){a.push(t.createTime),t.purchasePass?s.push(t.purchasePass.qualifiedNumber?Math.round(t.purchasePass.qualifiedNumber/t.purchasePass.totalNum*1e4)/100:0):s.push(0),t.inspectPass?i.push(t.inspectPass.qualifiedNumber?Math.round(t.inspectPass.qualifiedNumber/t.inspectPass.totalNum*1e4)/100:0):s.push(0),t.sprayPass?r.push(t.sprayPass.qualifiedNumber?Math.round(t.sprayPass.qualifiedNumber/t.sprayPass.totalNum*1e4)/100:0):s.push(0),t.proInspectPass?n.push(t.proInspectPass.qualifiedNumber?Math.round(t.proInspectPass.qualifiedNumber/t.proInspectPass.totalNum*1e4)/100:0):s.push(0)}));var l=t.$echarts.init(document.getElementById("buyOnee")),o={title:{text:"质量合格率统计总图（百分比）",x:"left"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["零件采购合格率","零件加工合格率","喷涂加工合格率","阀门装配合格率"]},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a}],yAxis:[{type:"value",min:30}],series:[{name:"零件采购合格率",type:"bar",barWidth:"10%",data:s},{name:"零件加工合格率",type:"bar",color:"#3398DB",barWidth:"10%",data:i},{name:"喷涂加工合格率",type:"bar",color:"#e6a23c",barWidth:"10%",data:r},{name:"阀门装配合格率",type:"bar",color:"#67c23a",barWidth:"10%",data:n}]};l.setOption(o)}))}}}),n=r,l=a("cba8"),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},cc5a3:function(t,e,a){},ce1b:function(t,e,a){},d651:function(t,e,a){"use strict";a("779b")},d6f6e:function(t,e,a){},d7e9:function(t,e,a){},dc62:function(t,e,a){"use strict";a("4ee2")},e966:function(t,e,a){"use strict";a("ce1b")},ef03:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchaseadd flex-col"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"采购合同号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供方单位"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:"0"}},[t._v("合同状态")]),t._l(t.statusList,(function(e){return a("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])}))],2),a("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),a("div",{staticClass:"flex-item"})]),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{method:"get","page-size":15,param:t.filter,url:"/haolifa/purchase-order/list/0"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",[t._v(t._s(i))]),a("td",[t._v(t._s(s.purchaseOrderNo))]),a("td",[t._v(t._s(s.supplierName))]),a("td",[t._v(t._s(s.deliveryTime))]),a("td",[t._v(t._s(s.totalCount))]),a("td",[a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.numClick(s.purchaseOrderNo)}}},[t._v(t._s(s.qualifiedNumber))])]),a("td",[t._v(t._s(t.statusList[s.status-1].name))]),a("td",[t._v(t._s(s.createUserId))]),a("td",[t._v(t._s(s.createTime))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("查看")]),2==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approveProgress(s)}}},[t._v("审批进度")]):t._e()])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("采购合同号")]),a("th",[t._v("供方单位")]),a("th",[t._v("采购完成日期")]),a("td",[t._v("采购总数量")]),a("td",[t._v("检验合格数量")]),a("th",[t._v("订单状态")]),a("th",[t._v("创建人")]),a("th",[t._v("创建日期")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?a("layer",{attrs:{title:"订单折损",width:"450px"}},[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损金额"},model:{value:t.wreck.wreckAmount,callback:function(e){t.$set(t.wreck,"wreckAmount",e)},expression:"wreck.wreckAmount"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损原因"},model:{value:t.wreck.wreckReason,callback:function(e){t.$set(t.wreck,"wreckReason",e)},expression:"wreck.wreckReason"}})],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14"},[a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("采购订单")]),a("td",{staticClass:"b",attrs:{colspan:"6"}},[a("a",{staticClass:"a",staticStyle:{color:"#008eff","margin-right":"10px"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),a("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),a("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),a("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),a("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),a("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(e,s){return a("tr",{key:e.id},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitPrice))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalAmount))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])})),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("总计")]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),a("td",{attrs:{colspan:"1"}})]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),a("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),a("td",{attrs:{colspan:"3"}},[t._v("批准：")]),a("td",{attrs:{colspan:"3"}},[t._v("审核：")]),a("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e(),t.numLayer?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14"},[a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"20%"}}),a("td",{staticStyle:{width:"20%"}}),a("td",{staticStyle:{width:"15%"}}),a("td",{staticStyle:{width:"15%"}}),a("td",{staticStyle:{width:"15%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("零件名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购总数")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("报检总数")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("合格总数")])]),t._l(t.numList,(function(e,s){return a("tr",{key:s},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s+1))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNumber))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.deliveryNumber))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.qualifiedNumber))])])})),0===t.numList.length?a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v("无数据")])]):t._e()],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.numLayer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"purchsemanage-purchase",components:{DataList:r["a"]},data:function(){return{natureList:["国有","三资","集体","联营","私营"],statusList:[{status:1,name:"待审批"},{status:2,name:"审批中"},{status:3,name:"采购中"},{status:4,name:"审批不通过"},{status:5,name:"采购完成"}],filter:{orderNo:"",supplierName:"",status:0,createUserId:0},wreck:{orderNo:"",wreckAmount:0,wreckReason:""},completeLayer:!1,confirmLayer:!1,loading:!1,info:{},itemList:[],orderUrl:"",layer:!1,numLayer:!1,numList:[]}},created:function(){this.filter.createUserId=0},methods:{flush:function(){this.filter={orderNo:"",status:0,supplierName:"",createUserId:0},this.$refs.list.update(!0)},getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/purchase-order/info/".concat(t)).then((function(t){e.info=t.order,e.itemList=t.items,e.orderUrl=t.order.fileUrl,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10),console.log("info",e.info),console.log("itemList",e.itemList)})).catch((function(t){e.$toast(t.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))},createInspect:function(t){var e=this;this.$http.get("/haolifa/purchase-order/createInspect/".concat(t)).then((function(t){console.log("报检单号",t),e.$confirm({title:"完善报检单",text:"现在去完善报检单？",color:"blue",btns:["稍后再说","现在完善"],yes:function(){e.$router.push("/applyBuy-material/edit?id=".concat(t))}})}))},approveProgress:function(t){this.$router.push({path:"/purchsemanage-purchase/approveProgress?",query:{formNo:t.purchaseOrderNo,formId:0}})},approve:function(t){var e=this;this.$confirm({title:"发起审批",text:"确定发起审批？",color:"blue",btns:["取消","确认"],yes:function(){e.$http.get("/haolifa/purchase-order/approve/".concat(t,"/0")).then((function(t){e.$toast("发起成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},updatePurchase:function(t){this.$router.push("/purchsemanage-purchase/add?formId=".concat(t))},completePurchase:function(t){this.completeLayer=!0,this.wreck.orderNo=t},complete:function(){var t=this;this.$http.post("/haolifa/purchase-order/complete",this.wreck).then((function(e){t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},deletePurchase:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除该订单么？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/purchase-order/delete/".concat(t)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg)}))}})},numClick:function(t){var e=this;this.numLayer=!0,this.numList=[],this.$http.get("/haolifa/material-inspect/purchase-all-qty?purchaseNo=".concat(t)).then((function(t){e.numList=t})).catch((function(t){e.$toast(t.msg)}))}}},l=n,o=(a("12b1"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},f2de:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchaseadd flex-col"},[a("i",{staticClass:"icon icon-abs",on:{click:t.flush}},[t._v("autorenew")]),a("div",{staticClass:"flex-v-center tool-bar"},[a("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[a("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"采购合同号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.supplierName,expression:"filter.supplierName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"供方单位"},domProps:{value:t.filter.supplierName},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"supplierName",e.target.value)}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return t.$refs.list.update(!0)}]}},[a("option",{attrs:{value:"0"}},[t._v("合同状态")]),t._l(t.statusList,(function(e){return a("option",{key:e.id,domProps:{value:e.status}},[t._v(t._s(e.name))])}))],2),a("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),a("div",{staticClass:"flex-item"}),a("router-link",{attrs:{to:"/purchsemanage-purchase/add"}},[a("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"}},[t._v("新增采购")])],1)],1),a("div",{staticClass:"flex-item scroll-y"},[a("data-list",{ref:"list",attrs:{method:"get","page-size":15,param:t.filter,url:"/haolifa/purchase-order/list/0"},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item,i=e.index;return[a("td",[t._v(t._s(i))]),a("td",[t._v(t._s(s.purchaseOrderNo))]),a("td",[t._v(t._s(s.supplierName))]),a("td",[t._v(t._s(s.deliveryTime))]),a("td",[t._v(t._s(s.totalCount))]),a("td",[a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.numClick(s.purchaseOrderNo)}}},[t._v(t._s(s.qualifiedNumber))])]),a("td",[t._v(t._s(t.statusList[s.status-1].name))]),a("td",[t._v(t._s(s.createUserId))]),a("td",[t._v(t._s(s.createTime))]),a("td",{staticClass:"t-right"},[a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.getInfo(s.id)}}},[t._v("查看")]),1==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approve(s.purchaseOrderNo)}}},[t._v("发起审批")]):t._e(),4==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approve(s.purchaseOrderNo)}}},[t._v("重新发起审批")]):t._e(),3==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.createInspect(s.id)}}},[t._v("生成报检单")]):t._e(),1==s.status||4==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.updatePurchase(s.id)}}},[t._v("编辑")]):t._e(),2==s.status?a("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.approveProgress(s)}}},[t._v("审批进度")]):t._e(),1==s.status||4==s.status?a("a",{staticClass:"blue",attrs:{href:"javascript:;"},on:{click:function(e){return t.deletePurchase(s.purchaseOrderNo)}}},[t._v("删除")]):t._e()])]}}])},[a("tr",{attrs:{slot:"header"},slot:"header"},[a("th",{staticStyle:{width:"60px"}},[t._v("序号")]),a("th",[t._v("采购合同号")]),a("th",[t._v("供方单位")]),a("th",[t._v("采购完成日期")]),a("th",[t._v("采购总数量")]),a("th",[t._v("检验合格数量")]),a("th",[t._v("订单状态")]),a("th",[t._v("创建人")]),a("th",[t._v("创建日期")]),a("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?a("layer",{attrs:{title:"订单折损",width:"450px"}},[a("div",{staticClass:"flex"},[a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损金额"},model:{value:t.wreck.wreckAmount,callback:function(e){t.$set(t.wreck,"wreckAmount",e)},expression:"wreck.wreckAmount"}}),a("input-box",{staticClass:"flex-item mr-20",attrs:{label:"折损原因"},model:{value:t.wreck.wreckReason,callback:function(e){t.$set(t.wreck,"wreckReason",e)},expression:"wreck.wreckReason"}})],1),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:""},on:{click:function(e){t.completeLayer=!1}}},[t._v("取消")]),a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.complete()}}},[t._v("保存")])],1)]):t._e(),t.layer?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14"},[a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("采购订单")]),a("td",{staticClass:"b",attrs:{colspan:"6"}},[a("a",{staticClass:"a",staticStyle:{color:"#008eff","margin-right":"10px"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),a("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),a("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),a("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),a("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),a("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])]),t._l(t.itemList,(function(e,s){return a("tr",{key:e.id},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitPrice))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalAmount))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])})),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("总计")]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),a("td",{attrs:{colspan:"1"}})]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v("\n                            "+t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v("\n                            "+t._s(t.info.payType)+"\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，\n                            "),a("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")])])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。\n                        ")])]),a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),a("td",{attrs:{colspan:"3"}},[t._v("批准：")]),a("td",{attrs:{colspan:"3"}},[t._v("审核：")]),a("td",{attrs:{colspan:"3"}},[t._v("经办：")])]),a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.layer=!1}}},[t._v("关闭")])],1)]):t._e(),t.numLayer?a("layer",{attrs:{title:"详情",width:"70%"}},[a("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticClass:"form-content metalwork-info"},[a("table",{staticClass:"f-14"},[a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"20%"}}),a("td",{staticStyle:{width:"20%"}}),a("td",{staticStyle:{width:"15%"}}),a("td",{staticStyle:{width:"15%"}}),a("td",{staticStyle:{width:"15%"}})]),a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("零件名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购总数")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("报检总数")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("合格总数")])]),t._l(t.numList,(function(e,s){return a("tr",{key:s},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s+1))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNumber))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.deliveryNumber))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.qualifiedNumber))])])})),0===t.numList.length?a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v("无数据")])]):t._e()],2)])]),a("div",{staticClass:"layer-btns"},[a("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){t.numLayer=!1}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=a("9b68"),n={name:"purchsemanage-purchase",components:{DataList:r["a"]},data:function(){return{natureList:["国有","三资","集体","联营","私营"],statusList:[{status:1,name:"待审批"},{status:2,name:"审批中"},{status:3,name:"采购中"},{status:4,name:"审批不通过"},{status:5,name:"采购完成"}],filter:{orderNo:"",status:0,supplierName:"",createUserId:0},wreck:{orderNo:"",wreckAmount:0,wreckReason:""},completeLayer:!1,confirmLayer:!1,loading:!1,info:{},itemList:[],orderUrl:"",layer:!1,numLayer:!1,numList:[]}},created:function(){this.filter.createUserId=0},methods:{flush:function(){this.filter={orderNo:"",status:0,supplierName:"",createUserId:0},this.$refs.list.update(!0)},getInfo:function(t){var e=this;this.layer=!0,this.info.id=t,this.$http.get("/haolifa/purchase-order/info/".concat(t)).then((function(t){e.info=t.order,e.itemList=t.items,e.orderUrl=t.order.fileUrl,e.info.operateTime=t.order.operateTime.substring(0,10),e.info.confirmTime=t.order.confirmTime.substring(0,10),e.info.createTime=t.order.createTime.substring(0,10),e.info.deliveryTime=t.order.deliveryTime.substring(0,10),e.info.updateTime=t.order.updateTime.substring(0,10),console.log("info",e.info),console.log("itemList",e.itemList)})).catch((function(t){e.$toast(t.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))},createInspect:function(t){var e=this;this.$http.get("/haolifa/purchase-order/createInspect/".concat(t)).then((function(t){console.log("报检单号",t),e.$confirm({title:"完善报检单",text:"现在去完善报检单？",color:"blue",btns:["稍后再说","现在完善"],yes:function(){e.$router.push("/applyBuy-material/edit?id=".concat(t))},no:function(){e.$http.get("/haolifa/material-inspect/delete/".concat(t)).then((function(t){}))}})}))},approveProgress:function(t){this.$router.push({path:"/purchsemanage-purchase/approveProgress?",query:{formNo:t.purchaseOrderNo,formId:0}})},approve:function(t){var e=this;this.$confirm({title:"发起审批",text:"确定发起审批？",color:"blue",btns:["取消","确认"],yes:function(){e.$http.get("/haolifa/purchase-order/approve/".concat(t,"/0")).then((function(t){e.$toast("发起成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg||t.message)}))}})},updatePurchase:function(t){this.$router.push("/purchsemanage-purchase/add?formId=".concat(t))},completePurchase:function(t){this.completeLayer=!0,this.wreck.orderNo=t},complete:function(){var t=this;this.$http.post("/haolifa/purchase-order/complete",this.wreck).then((function(e){t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.$toast(e.msg||e.message)}))},deletePurchase:function(t){var e=this;this.$confirm({title:"删除确认",text:"您确定要删除该订单么？",color:"red",btns:["取消","删除"],yes:function(){e.$http.get("/haolifa/purchase-order/delete/".concat(t)).then((function(t){e.$toast("删除成功"),e.$refs.list.update(!0)})).catch((function(t){e.$toast(t.msg)}))}})},numClick:function(t){var e=this;this.numLayer=!0,this.numList=[],this.$http.get("/haolifa/material-inspect/purchase-all-qty?purchaseNo=".concat(t)).then((function(t){e.numList=t})).catch((function(t){e.$toast(t.msg)}))}}},l=n,o=(a("d651"),a("cba8")),c=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},f48a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-supplier-info abs scroll-y"},[a("div",{staticClass:"form-content"},[a("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[a("icon-btn",{staticClass:"mr-15",on:{click:function(e){return t.$router.back()}}},[t._v("arrow_back")]),a("div",{staticClass:"flex-item"},[t._v("订单详情")]),a("div",{staticClass:"flex-item ml-20"},[a("a",{staticClass:"a",staticStyle:{color:"#008eff"},attrs:{flat:"",href:t.orderUrl}},[t._v("合同下载")])])],1),a("table",{staticClass:"f-14"},[t._m(0),t._m(1),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("订单号："+t._s(t.info.purchaseOrderNo))]),a("td",{attrs:{colspan:"6"}},[t._v("下单日期："+t._s(t.info.createTime))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方："+t._s(t.info.supplierName))]),a("td",{attrs:{colspan:"6"}},[t._v("需方："+t._s(t.info.demander))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.supplierLinkman))]),a("td",{attrs:{colspan:"6"}},[t._v("联系人："+t._s(t.info.demanderLinkman))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.suppilerPhone))]),a("td",{attrs:{colspan:"6"}},[t._v("联系电话："+t._s(t.info.demanderPhone))])]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("供方地址："+t._s(t.info.suppilerAddr))]),a("td",{attrs:{colspan:"6"}},[t._v("需方地址："+t._s(t.info.demanderAddr))])]),t._m(2),t._m(3),t._l(t.itemList,(function(e,s){return a("tr",{key:e.id},[a("td",{attrs:{colspan:"1"}},[t._v(t._s(s))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.material))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.number))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalWeight))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unitPrice))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalAmount))]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])})),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("总计")]),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.orderNumber))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalWeight))]),a("td",{attrs:{colspan:"1"}}),a("td",{attrs:{colspan:"1"}},[t._v(t._s(t.info.totalPrice))]),a("td",{attrs:{colspan:"1"}})]),a("tr",[a("th",{attrs:{colspan:"6"}},[t._v("人民币大写")]),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.info.totalPriceCN))])]),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("1、交货日期")]),t._v(t._s(t.info.deliveryTime)+"   供方须严格按交期交货，如需调整日期，须及时知会本公司并经本公司批准，否则延误交货须扣除该批货款10%。")])]),t._m(4),a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("3、付款方式")]),t._v(t._s(t.info.payType))])]),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11)],2)])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}}),a("td",{staticStyle:{width:"10%"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"b",attrs:{colspan:"12"}},[t._v("采购订单")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[t._v("兹向贵公司订购以下货品（如下表所列），请于24小时内签字回传！")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品名称")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("图号")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("数量")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总重")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("金额")]),a("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("2、品质")]),t._v("供方所供产品，应完全依照本公司提供的图纸及相关标准制造，本公司将依照同一标准抽样检查，拒收未经技术管理中心确认的任何来货；")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("4、付款条件")]),t._v("交货验收合格后，本公司于收到发票之日起60日内结清货款，每月25日以后交付货品拨归次月账项，"),a("br"),t._v("请于本月30日前将对账单快递至本公司采购部，逾期送单将延至次月对账；")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("5、")]),t._v("送货单须规范注明订单编号、产品名称、规格等，同时要注明欠货数量及补货日期；")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("6、送货时须附上相应的“机械性能报告”、“材质证明书”等相关证明；")]),t._v("2018-12-29")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("7、")]),t._v("如因来料品质不符或因交期延误，致使需方蒙受损失，责任全部由供方承担；")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"12"}},[a("span",{staticClass:"b"},[t._v("8、")]),t._v("以上计划价格仅供参考，如有疑义，则以合同金额为准。")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("供方确认:")]),a("td",{attrs:{colspan:"3"}},[t._v("批准：")]),a("td",{attrs:{colspan:"3"}},[t._v("审核：")]),a("td",{attrs:{colspan:"3"}},[t._v("经办：")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("年    月    日")])])}],r={name:"purchsemanage-purchaseinfo",data:function(){return{loading:!1,info:{},itemList:[],orderUrl:""}},created:function(){this.getInfo()},methods:{getInfo:function(){var t=this,e=this.$route.query.formId;console.log(e),this.info.id=e,this.$http.get("/haolifa/purchase-order/info/".concat(e)).then((function(e){t.info=e.order,t.itemList=e.items,t.orderUrl=e.order.fileUrl,t.info.operateTime=e.order.operateTime.substring(0,10),t.info.confirmTime=e.order.confirmTime.substring(0,10),t.info.createTime=e.order.createTime.substring(0,10),t.info.deliveryTime=e.order.deliveryTime.substring(0,10),t.info.updateTime=e.order.updateTime.substring(0,10),console.log("info",t.info),console.log("itemList",t.itemList)})).catch((function(e){t.$toast(e.msg)}))},downloadOrder:function(t){var e=this;this.$http.get("/haolifa/export/purchaseOrder/".concat(t)).then((function(t){})).catch((function(t){e.$toast(t.msg)}))}}},n=r,l=(a("9086"),a("cba8")),o=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=o.exports},f9df:function(t,e,a){"use strict";a("962f")},fa36:function(t,e,a){"use strict";a("7016")}}]);
//# sourceMappingURL=suppliermanage.08126e4b.js.map