(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["diliversyedit"],{"0d56":function(t,e,s){},"2b20":function(t,e,s){"use strict";s("d87a")},"34f5":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));var a=s("7aae"),i=s.n(a);function r(t,e,s){return e in t?i()(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}},"40ac":function(t,e,s){},"473d":function(t,e,s){},"6b05":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-room-add abs scroll-y"},[s("div",{staticClass:"form-content"},[s("div",{staticClass:"title b f-18"},[t._v("增加质检单")]),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item",attrs:{label:"订单号"},model:{value:t.form.orderNo,callback:function(e){t.$set(t.form,"orderNo",e)},expression:"form.orderNo"}}),s("input-box",{staticClass:"flex-item",attrs:{label:"检测数量"},model:{value:t.form.testingNumber,callback:function(e){t.$set(t.form,"testingNumber",e)},expression:"form.testingNumber"}}),s("input-box",{staticClass:"flex-item",attrs:{label:"合格数"},model:{value:t.form.qualifiedNumber,callback:function(e){t.$set(t.form,"qualifiedNumber",e)},expression:"form.qualifiedNumber"}}),s("input-box",{staticClass:"flex-item",attrs:{label:"不合格数"},model:{value:t.form.unqualifiedNumber,callback:function(e){t.$set(t.form,"unqualifiedNumber",e)},expression:"form.unqualifiedNumber"}})],1),s("div",{staticClass:"b",staticStyle:{margin:"20px 0 10px"}},[t._v("不合格详情")]),t._l(t.form.unqualifiedList,(function(e,a){return s("div",{key:a,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[s("div",{staticClass:"flex-item"},[s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"产品型号",hint:"必填"},model:{value:e.productModel,callback:function(s){t.$set(e,"productModel",s)},expression:"item.productModel"}}),s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格",hint:"必填"},model:{value:e.productSpecifications,callback:function(s){t.$set(e,"productSpecifications",s)},expression:"item.productSpecifications"}}),s("input-box",{staticClass:"mr-10",attrs:{label:"不合格数",hint:"必填"},model:{value:e.unqualifiedNumber,callback:function(s){t.$set(e,"unqualifiedNumber",s)},expression:"item.unqualifiedNumber"}})],1),s("div",{staticClass:"flex"},[s("select-box",{staticClass:"flex-item",attrs:{list:t.reasons,label:"不合格现象描述"},model:{value:e.reason,callback:function(s){t.$set(e,"reason",s)},expression:"item.reason"}})],1)]),t.form.unqualifiedList.length>1?s("div",[s("icon-btn",{attrs:{small:""},on:{click:function(e){return t.form.unqualifiedList.splice(a,1)}}},[t._v("close")])],1):t._e()])})),s("div",{staticClass:"card a flex-center",on:{click:function(e){return t.addItem()}}},[t._m(0)]),s("div",{staticClass:"flex"},[s("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:t.submit}},[t._v("提交")]),s("btn",{attrs:{big:"",flat:""},on:{click:function(e){return t.$router.back()}}},[t._v("取消")])],1)],2)])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-v-center"},[s("i",{staticClass:"icon mr-10"},[t._v("add")]),s("span",[t._v("添加检验记录")])])}],r=(s("566e"),s("8dee"),s("caaf"),{name:"inspect-product-add",data:function(){return{form:{orderNo:"",testingNumber:"",qualifiedNumber:"",unqualifiedNumber:"",unqualifiedList:[{productModel:"",productSpecifications:"",reason:"",unqualifiedNumber:""}]},reasons:[]}},mounted:function(){this.getReasons()},methods:{addItem:function(){this.form.unqualifiedList.push({productModel:"",productSpecifications:"",reason:"",unqualifiedNumber:""})},submit:function(){var t=this;this.$http.post("/haolifa/pro-inspect-res/save",this.form).then((function(e){t.loading=!1,t.$toast("提交成功"),t.$router.replace("/inspect-product/addList")})).catch((function(e){t.$toast(e.message||e.msg)}))},getReasons:function(){var t=this;this.$http.get("/haolifa/pro-inspect-res/reasonList").then((function(e){t.reasons=e.map((function(t){return{value:t,text:t}}))}))}}}),l=r,o=(s("787e"),s("5d22")),n=Object(o["a"])(l,a,i,!1,null,null,null);e["default"]=n.exports},"787e":function(t,e,s){"use strict";s("978f")},"7aae":function(t,e,s){t.exports=s("f263")},"7bc6":function(t,e,s){"use strict";s("40ac")},"8f46":function(t,e,s){"use strict";s("e6f6")},"904c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"abs scroll-y"},[s("div",{staticClass:"form-content page-supplier-info"},[s("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[s("icon-btn",{staticClass:"mr-15",on:{click:function(e){return t.$router.back()}}},[t._v("arrow_back")]),s("div",{staticClass:"flex-item"},[t._v("详情")])],1),s("table",{staticClass:"f-14"},[t._m(0),t._m(1),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("送检单号："+t._s(t.inspect.inspectNo))]),s("td",{attrs:{colspan:"6"}},[t._v("发起日期："+t._s(t.inspect.createTime))])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("采购合同号："+t._s(t.inspect.purchaseNo))]),s("td",{attrs:{colspan:"6"}},[t._v("批次号："+t._s(t.inspect.batchNumber))])]),s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("供应商："+t._s(t.inspect.supplierName))]),s("td",{attrs:{colspan:"6"}},[t._v("到货日期："+t._s(t.inspect.arrivalTime))])]),t._m(2),t._l(t.items,(function(e,a){return s("tr",{key:a},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(a+1))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.materialGraphNo))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specification))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.requirements))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unit))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.purchaseNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.deliveryNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.unqualifiedNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.remark))])])}))],2)]),t.inspectHistory.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[t._m(3),s("div",{staticClass:"flex-item scroll-y ml-20"},[s("table",{staticClass:"data-table"},[t._m(4),t._l(t.inspectHistory,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.inspectNo))]),s("td",[t._v(t._s(1==e.type?"采购零件":"机加工零件"))]),s("td",[t._v(t._s(e.materialGraphName))]),s("td",[t._v(t._s(e.materialGraphNo))]),s("td",[t._v(t._s(e.testNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",[t._v(t._s(e.handlingSuggestion))]),s("td",[t._v(t._s(e.remark))])])}))],2)])]):t._e()])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}}),s("td",{staticStyle:{width:"10%"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"b",attrs:{colspan:"11"}},[t._v("零件送检单")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("合同编号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料图号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质与标准要求")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购数")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("送货数")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("不合格数量")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item"},[t._v("质检记录")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",[t._v("质检单号")]),s("th",[t._v("类别")]),s("th",[t._v("物料名称")]),s("th",[t._v("物料图号")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("处理意见")]),s("th",[t._v("不合格现象描述")])])}],r={name:"purchsemanage-purchaseinfo",data:function(){return{loading:!1,inspect:{id:0,inspectNo:""},items:[],inspectHistory:[]}},created:function(){this.inspect.id=this.$route.query.id,this.inspect.inspectNo=this.$route.query.inspectNo,this.getInfo(),this.getInspectHistory()},methods:{getInfo:function(){var t=this;this.$http.get("/haolifa/material-inspect/info/".concat(this.inspect.id)).then((function(e){t.inspect=e.inspect,t.items=e.items,t.inspect.createTime=e.inspect.createTime.substring(0,10),t.inspect.arrivalTime=e.inspect.arrivalTime.substring(0,10),t.inspect.updateTime=e.inspect.updateTime.substring(0,10)})).catch((function(e){t.$toast(e.msg||e.message)}))},getInspectHistory:function(){var t=this;this.$http.get("/haolifa/material-inspect/history/list/".concat(this.inspect.inspectNo)).then((function(e){t.inspectHistory=e})).catch((function(e){t.$toast(e.msg||e.message)}))}}},l=r,o=(s("7bc6"),s("5d22")),n=Object(o["a"])(l,a,i,!1,null,null,null);e["default"]=n.exports},"978f":function(t,e,s){},a251:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"apply-buy-update"},[s("div",{staticClass:"content mt-20"},[s("div",{staticClass:"title b f-18 ml-10"},[t._v("编辑送检单")]),s("div",{staticClass:"flex ml-20 mr-20"},[s("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{hint:"必填",label:"到货时间"},model:{value:t.form.arrivalTime,callback:function(e){t.$set(t.form,"arrivalTime",e)},expression:"form.arrivalTime"}}),s("input-box",{staticClass:"flex-item ml-20 mr-20",attrs:{label:"供应商名称"},model:{value:t.form.supplierName,callback:function(e){t.$set(t.form,"supplierName",e)},expression:"form.supplierName"}})],1),s("div",{staticClass:"flex ml-20 mr-20"},[s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"批次号"},model:{value:t.form.batchNumber,callback:function(e){t.$set(t.form,"batchNumber",e)},expression:"form.batchNumber"}}),s("input-box",{staticClass:"flex-item ml-20 mr-20",attrs:{label:"合同号"},model:{value:t.form.purchaseNo,callback:function(e){t.$set(t.form,"purchaseNo",e)},expression:"form.purchaseNo"}}),s("input-box",{staticClass:"flex-item ml-20 mr-20",attrs:{type:"number",label:"费用"},model:{value:t.form.freight,callback:function(e){t.$set(t.form,"freight",e)},expression:"form.freight"}})],1),s("div",{staticClass:"flex"},[s("upload-box",{staticStyle:{width:"50%"},attrs:{btnText:"质量保证书",fileShow:!1,fileList:t.fileList,onchange:t.uploadFile,onremove:t.removeFile,multiple:t.multiple}})],1),t._l(t.resFileList,(function(e,a){return s("div",{key:a,staticStyle:{"margin-left":"20px","margin-top":"5px"}},[s("div",{staticClass:"flex"},[s("a",{staticStyle:{"text-decoration":"none","out-line":"none",color:"#ccc"},attrs:{href:e.fileUrl,target:"_blank"}},[t._v(t._s(e.fileName))]),s("icon-btn",{attrs:{small:""},on:{click:function(e){return t.resFileList.splice(a,1)}}},[t._v("close")])],1)])})),s("div",{staticClass:"b ml-20",staticStyle:{margin:"20px 10px 10px"}},[t._v("送检列表")]),t._l(t.form.items,(function(e,a){return s("div",{key:a,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[s("div",{staticClass:"flex-item"},[s("div",{staticClass:"flex ml-20 mr-20"},[s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"物料图号",hint:"必填"},model:{value:e.materialGraphNo,callback:function(s){t.$set(e,"materialGraphNo",s)},expression:"item.materialGraphNo"}}),s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"物料名称",hint:"必填"},model:{value:e.materialName,callback:function(s){t.$set(e,"materialName",s)},expression:"item.materialName"}}),s("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"送检数量",hint:"必填"},model:{value:e.deliveryNumber,callback:function(s){t.$set(e,"deliveryNumber",s)},expression:"item.deliveryNumber"}}),s("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"采购数量",hint:"必填"},model:{value:e.purchaseNumber,callback:function(s){t.$set(e,"purchaseNumber",s)},expression:"item.purchaseNumber"}})],1),s("div",{staticClass:"flex ml-20 mr-20"},[s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"材质要求",hint:"选填"},model:{value:e.requirements,callback:function(s){t.$set(e,"requirements",s)},expression:"item.requirements"}}),s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格",hint:"选填"},model:{value:e.specification,callback:function(s){t.$set(e,"specification",s)},expression:"item.specification"}}),s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单价"},model:{value:e.purchasePrice,callback:function(s){t.$set(e,"purchasePrice",s)},expression:"item.purchasePrice"}})],1),s("div",{staticClass:"flex ml-20 mr-20"},[s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单位",hint:"选填"},model:{value:e.unit,callback:function(s){t.$set(e,"unit",s)},expression:"item.unit"}}),s("input-box",{staticClass:"flex-item",attrs:{label:"备注"},model:{value:e.remark,callback:function(s){t.$set(e,"remark",s)},expression:"item.remark"}})],1)]),t.form.items.length>1?s("div",[s("icon-btn",{attrs:{small:""},on:{click:function(e){return t.form.items.splice(a,1)}}},[t._v("close")])],1):t._e()])})),s("div",{staticClass:"card a flex-center",on:{click:function(e){return t.addItem()}}},[t._m(0)]),s("div",{staticClass:"flex ml-20 mt-20"},[s("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(e){return t.submit(1)}}},[t._v("保存")]),s("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(e){return t.submit(2)}}},[t._v("保存并发起")]),s("btn",{attrs:{big:"",flat:""},on:{click:t.back}},[t._v("取消")])],1)],2)])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-v-center"},[s("i",{staticClass:"icon mr-10"},[t._v("add")]),s("span",[t._v("添加送检物料")])])}],r=(s("8dee"),s("34f5")),l=(s("566e"),s("a450"),s("153b")),o=s("caaf"),n=s.n(o),c={name:"apply-buy-update",data:function(){return{id:0,form:{arrivalTime:"",supplierName:"",batchNumber:"",status:1,purchaseNo:"",accessorys:[],freight:"",items:[{deliveryNumber:"",materialGraphNo:"",materialName:"",purchaseNo:"",purchaseNumber:"",purchasePrice:0,remark:"",specification:"",unit:""}]},fileList:[],multiple:!0,resFileList:[]}},created:function(){var t=this.$route.query.id;void 0!==t&&"material-edit"===this.$route.name&&this.getInfo(t)},methods:{getInfo:function(t){var e=this;this.id=t,this.$http.get("/haolifa/material-inspect/info/".concat(t)).then((function(t){t.inspect.arrivalTime=n()(t.inspect.arrivalTime).format("YYYY-MM-DD"),e.form.arrivalTime=t.inspect.arrivalTime,e.form.supplierName=t.inspect.supplierName,e.form.batchNumber=t.inspect.batchNumber,e.form.purchaseNo=t.inspect.purchaseNo,e.form.freight=t.inspect.freight,e.form.items=t.items.map((function(t){var e;return e={deliveryNumber:t.deliveryNumber,materialGraphNo:t.materialGraphNo,materialName:t.materialName,purchaseNo:t.purchaseNo,purchaseNumber:t.purchaseNumber,remark:t.remark,specification:t.specification,unit:t.unit,purchasePrice:t.purchasePrice},Object(r["a"])(e,"specification",t.specification),Object(r["a"])(e,"requirements",t.requirements),e})),""!=t.inspect.blueprints&&(e.resFileList=JSON.parse(t.inspect.blueprints),e.fileList=e.resFileList.map((function(t){return t.fileUrl})))})).catch((function(t){e.$toast(t.msg||t.message)}))},addItem:function(){this.form.items.push({deliveryNumber:"",materialGraphNo:"",materialName:"",purchaseNumber:"",remark:"",specification:"",unit:""})},uploadFile:function(t,e){var s=this;this.loading=!0,this.loadingMsg="正在上传",Object(l["a"])(t.source).then((function(e){s.$http.post("/haolifa/file/uploadFileBase64",{base64Source:e,fileName:t.name}).then((function(e){s.resFileList.push({fileName:t.name,fileUrl:e}),s.loading=!1})).catch((function(t){s.$toast(t.msg||t.message),s.loading=!1}))}))},removeFile:function(t,e){var s=this;return new Promise((function(t,a){s.resFileList.splice(e,1),t()}))},back:function(){var t=this;this.$http.get("/haolifa/material-inspect/delete/".concat(this.id)).then((function(e){t.$router.back()}))},submit:function(t){var e=this,s=this.form,a=(s.items,s.arrivalTime);a?(this.form.status=t,this.form.accessorys=this.resFileList,this.$http.post("/haolifa/material-inspect/update/".concat(this.id),this.form).then((function(t){e.loading=!1,e.$toast("提交成功"),e.$router.replace("/applyBuy-material")})).catch((function(t){e.$toast(t.message||t.msg)}))):this.$toast("请填写到货时间")}}},d=c,u=(s("2b20"),s("5d22")),p=Object(u["a"])(d,a,i,!1,null,null,null);e["default"]=p.exports},a5a3:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-orders-list"},[s("div",{staticClass:"flex-v-center tool-bar"},[s("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(e){return t.$refs.list.update(!0)},input:function(e){e.target.composing||t.$set(t.filter,"orderNo",e.target.value)}}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderStatus,expression:"filter.orderStatus"}],staticClass:"f-14",attrs:{disabled:""},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"orderStatus",e.target.multiple?s:s[0])},function(e){return t.$refs.list.update(!0)}]}},[s("option",{attrs:{value:"-1"}},[t._v("全部")]),t._l(t.orderStatusList,(function(e){return s("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2),s("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),s("div",{staticClass:"flex-item"})]),s("div",{staticClass:"flex-item scroll-y"},[s("data-list",{ref:"list",attrs:{param:t.filter,url:"/haolifa/order-product/pageInfo",method:"post"},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,i=e.index;return[s("td",{staticClass:"c-a"},[t._v(t._s(i))]),s("td",[t._v(t._s(a.orderNo))]),s("td",[s("a",{staticClass:"fixed-length",attrs:{href:a.orderContractUrl,title:a.orderContractUrl}},[t._v(t._s(a.orderContractUrl))])]),s("td",[t._v(t._s(a.deliveryDate))]),s("td",[t._v(t._s(a.totalCount))]),s("td",[t._v(t._s(a.qualifiedNumber))]),s("td",[t._v(t._s(t.orderStatusList[a.orderStatus-5].text))]),s("td",[t._v(t._s(a.createTime))]),s("td",{staticClass:"t-right"},[9!=a.orderStatus?s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.progress(a)}}},[t._v("添加质检记录|")]):t._e(),s("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(e){return t.infoShow(a)}}},[t._v("详情")])])]}}])},[s("tr",{attrs:{slot:"header"},slot:"header"},[s("th",{staticStyle:{width:"60px"}},[t._v("序号")]),s("th",[t._v("订单编号")]),s("th",[t._v("订单合同URL")]),s("th",[t._v("发货日期")]),s("th",[t._v("订单数量")]),s("th",[t._v("检验合格数量")]),s("th",[t._v("订单状态")]),s("th",[t._v("创建时间")]),s("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?s("layer",{attrs:{title:"添加质检记录",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"form-content metalwork-info"},[s("table",{staticClass:"f-14 order-info"},[s("tr",[s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"8%"}}),s("td",{staticStyle:{width:"8%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单编号 : "+t._s(t.info.orderNo))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("发货日期 : "+t._s(t.info.deliveryDate))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单状态 : "+t._s(t.orderStatusList[t.info.orderStatus-5].text))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("\n                            订单合同:\n                            "),s("a",{staticStyle:{"margin-right":"15px"},attrs:{href:t.info.orderContractUrl}},[t._v("下载")]),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?s("a",{attrs:{target:"_blank",href:t.info.orderContractUrl}},[t._v("预览")]):t._e(),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():s("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+t.info.orderContractUrl}},[t._v("预览")])])]),s("tr",[t.fileDetailList.length?s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:")]):s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:无")])]),t._l(t.fileDetailList,(function(e,a){return s("tr",{key:a},[s("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v(t._s(e.fileName))]),s("td",{staticClass:"b",attrs:{colspan:"12"}},[e.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v("预览")]):t._e(),e.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():s("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+e.fileUrl}},[t._v("预览")])])])})),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配车间: "+t._s(t.info.assemblyShop))]),s("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配小组: "+t._s(t.info.assemblyGroup))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("采购反馈时间: "+t._s(t.info.purchaseFeedbackTime))]),s("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("生产反馈时间: "+t._s(t.info.productionFeedbackTime))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("技术清单:")])]),s("tr",[s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("产品名称")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("型号")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("规格")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("数量")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("上法兰标准")]),s("td",{attrs:{colspan:"3",rowspan:"1"}},[t._v("上法兰尺寸")]),s("td",{attrs:{colspan:"4",rowspan:"1"}},[t._v("出轴尺寸")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("静扭矩")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("执行器型号")])]),s("tr",[s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("连接孔")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("角度")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("中心距")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴型式")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴长度")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("轴图号")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("过渡盘")])]),t._l(JSON.parse(t.info.technicalRequire),(function(e,a){return s("tr",{key:a},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.name))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.xinhao))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.guige))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.num))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.biaozhun))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.lianjiek))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.jiaodu))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.zhongxinju))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.xinshi))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.length))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.tuhao))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.guodupan))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.jinniuju))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.jishuxinhao))])])})),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单产品列表")])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品编号")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("标签属性")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("颜色")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品数量")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总计价格")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("材质说明")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品备注")])]),t._l(t.info.orderProductAssociates,(function(e,a){return s("tr",{key:"fo"+a},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.productNo))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.productName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.productModel))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.lable))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specifications))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.productColor))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.productNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalPrice))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.materialDescription))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.productRemark))])])})),t.accessoryList.length>0?s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批附件:")])]):t._e(),t.accessoryList.length>0?s("tr",[s("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件名称")]),s("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件地址")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("——")])]):t._e(),t._l(t.accessoryList,(function(e,a){return s("tr",{key:a},[s("td",{attrs:{colspan:"6"}},[t._v(t._s(e.fileName))]),s("td",{attrs:{colspan:"6"}},[t._v(t._s(e.fileUrl))]),s("td",{attrs:{colspan:"2"}},[e.fileUrl.match(".(doc|docx|xls|xlsx)$")?t._e():s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v("预览")]),e.fileUrl.match(".(doc|docx|xls|xlsx)$")?s("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+e.fileUrl}},[t._v("预览")]):t._e()])])}))],2)]),t.recordList.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("已添加质检记录")])]),s("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[s("table",{staticClass:"data-table"},[s("tr",{staticStyle:{display:"none"}},[s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"12%"}})]),s("tr",[s("th",[t._v("产品编号")]),s("th",[t._v("成品型号")]),s("th",[t._v("成品规格")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("不合格原因")]),s("th",[t._v("附件")]),s("th",[t._v("状态")]),s("th",[t._v("创建日期")])]),t._l(t.recordList,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.productNo))]),s("td",[t._v(t._s(e.productModel))]),s("td",[t._v(t._s(e.productSpecifications))]),s("td",[t._v(t._s(e.testingNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",[t._v(t._s(e.reasonArr.toString()))]),s("td",t._l(e.accessoryList,(function(e,a){return s("div",{key:a},[s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v(t._s(e.fileName))])])})),0),s("td",[t._v(t._s(1==e.storageStatus?"待入库":"已入库"))]),s("td",[t._v(t._s(e.createTime))])])}))],2)])]):t._e(),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"订单号"},model:{value:t.order.orderNo,callback:function(e){t.$set(t.order,"orderNo",e)},expression:"order.orderNo"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.productNoList,label:"产品编号"},model:{value:t.order.productNo,callback:function(e){t.$set(t.order,"productNo",e)},expression:"order.productNo"}})],1),s("div",{staticClass:"flex"},[s("select-box",{staticClass:"flex-item mr-20 ml-20",attrs:{list:t.productModelList,label:"成品型号"},model:{value:t.order.productModel,callback:function(e){t.$set(t.order,"productModel",e)},expression:"order.productModel"}}),s("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.productSpecificationsList,label:"成品规格"},model:{value:t.order.productSpecifications,callback:function(e){t.$set(t.order,"productSpecifications",e)},expression:"order.productSpecifications"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"检测数量"},model:{value:t.order.testingNumber,callback:function(e){t.$set(t.order,"testingNumber",e)},expression:"order.testingNumber"}}),s("input-box",{staticClass:"flex-item mr-20",attrs:{label:"合格数量"},model:{value:t.order.qualifiedNumber,callback:function(e){t.$set(t.order,"qualifiedNumber",e)},expression:"order.qualifiedNumber"}})],1),s("div",{staticClass:"flex"},[s("upload-box",{staticClass:"ml-20 mb-10",staticStyle:{width:"50%"},attrs:{btnText:"上传附件",fileList:t.fileList,onchange:t.uploadFile,multiple:!0,onremove:t.removeFile}})],1),t._l(t.order.unqualifiedList,(function(e,a){return s("div",{key:a,staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"不合格数量"},model:{value:e.number,callback:function(s){t.$set(e,"number",s)},expression:"item.number"}}),s("el-select",{staticClass:"flex-item mr-20 ml-20",staticStyle:{"border-top":"0"},attrs:{placeholder:"请选择不合格原因",multiple:!0},model:{value:e.reason,callback:function(s){t.$set(e,"reason",s)},expression:"item.reason"}},t._l(t.reasonList,(function(t){return s("el-option",{key:t.value,attrs:{label:t.text,value:t.value}})})),1),t.order.unqualifiedList.length>1?s("icon-btn",{attrs:{small:""},on:{click:function(e){return t.removeReason(a)}}},[t._v("close")]):t._e()],1)})),s("div",{staticStyle:{"padding-left":"100px"}},[s("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"更多不合格数量及因",expression:"'更多不合格数量及因'"}],attrs:{bg:"",small:""},on:{click:t.addReason}},[t._v("add")])],1),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:""},on:{click:t.closeLayer}},[t._v("取消")]),s("el-button",{attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.complete}},[t._v("保存")])],1)],2)]):t._e(),t.layer?s("layer",{attrs:{title:"详情",width:"70%"}},[s("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[s("div",{staticClass:"form-content metalwork-info"},[s("table",{staticClass:"f-14 order-info"},[s("tr",[s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"8%"}}),s("td",{staticStyle:{width:"8%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单编号 : "+t._s(t.info.orderNo))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("发货日期 : "+t._s(t.info.deliveryDate))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单状态 : "+t._s(t.orderStatusList[t.info.orderStatus-5].text))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("\n                            订单合同:\n                            "),s("a",{staticStyle:{"margin-right":"15px"},attrs:{href:t.info.orderContractUrl}},[t._v("下载")]),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?s("a",{attrs:{target:"_blank",href:t.info.orderContractUrl}},[t._v("预览")]):t._e(),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():s("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+t.info.orderContractUrl}},[t._v("预览")])])]),s("tr",[t.fileDetailList.length?s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:")]):s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:无")])]),t._l(t.fileDetailList,(function(e,a){return s("tr",{key:a},[s("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v(t._s(e.fileName))]),s("td",{staticClass:"b",attrs:{colspan:"12"}},[e.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v("预览")]):t._e(),e.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():s("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+e.fileUrl}},[t._v("预览")])])])})),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配车间: "+t._s(t.info.assemblyShop))]),s("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配小组: "+t._s(t.info.assemblyGroup))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("采购反馈时间: "+t._s(t.info.purchaseFeedbackTime))]),s("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("生产反馈时间: "+t._s(t.info.productionFeedbackTime))])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("技术清单:")])]),s("tr",[s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("产品名称")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("型号")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("规格")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("数量")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("上法兰标准")]),s("td",{attrs:{colspan:"3",rowspan:"1"}},[t._v("上法兰尺寸")]),s("td",{attrs:{colspan:"4",rowspan:"1"}},[t._v("出轴尺寸")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("静扭矩")]),s("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("执行器型号")])]),s("tr",[s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("连接孔")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("角度")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("中心距")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴型式")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴长度")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("轴图号")]),s("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("过渡盘")])]),t._l(JSON.parse(t.info.technicalRequire),(function(e,a){return s("tr",{key:a},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.name))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.xinhao))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.guige))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.num))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.biaozhun))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.lianjiek))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.jiaodu))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.zhongxinju))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.xinshi))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.length))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.tuhao))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.guodupan))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.jinniuju))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.jishuxinhao))])])})),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单产品列表")])]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品编号")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品名称")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("标签属性")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("颜色")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品数量")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总计价格")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("材质说明")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品备注")])]),t._l(t.info.orderProductAssociates,(function(e,a){return s("tr",{key:"fo"+a},[s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.productNo))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.productName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.productModel))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.lable))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.specifications))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.productColor))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.productNumber))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.totalPrice))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.materialDescription))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.productRemark))])])})),t.accessoryList.length>0?s("tr",[s("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批附件:")])]):t._e(),t.accessoryList.length>0?s("tr",[s("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件名称")]),s("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件地址")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("——")])]):t._e(),t._l(t.accessoryList,(function(e,a){return s("tr",{key:a},[s("td",{attrs:{colspan:"6"}},[t._v(t._s(e.fileName))]),s("td",{attrs:{colspan:"6"}},[t._v(t._s(e.fileUrl))]),s("td",{attrs:{colspan:"2"}},[e.fileUrl.match(".(doc|docx|xls|xlsx)$")?t._e():s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v("预览")]),e.fileUrl.match(".(doc|docx|xls|xlsx)$")?s("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+e.fileUrl}},[t._v("预览")]):t._e()])])}))],2)]),t.recordList.length?s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("质检记录")])]),s("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[s("table",{staticClass:"data-table"},[s("tr",{staticStyle:{display:"none"}},[s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"11%"}}),s("td",{staticStyle:{width:"12%"}})]),s("tr",[s("th",[t._v("产品编号")]),s("th",[t._v("成品型号")]),s("th",[t._v("成品规格")]),s("th",[t._v("检测数量")]),s("th",[t._v("合格数量")]),s("th",[t._v("不合格数量")]),s("th",[t._v("不合格原因")]),s("th",[t._v("附件")]),s("th",[t._v("状态")]),s("th",[t._v("创建日期")])]),t._l(t.recordList,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.productNo))]),s("td",[t._v(t._s(e.productModel))]),s("td",[t._v(t._s(e.productSpecifications))]),s("td",[t._v(t._s(e.testingNumber))]),s("td",[t._v(t._s(e.qualifiedNumber))]),s("td",[t._v(t._s(e.unqualifiedNumber))]),s("td",[t._v(t._s(e.reasonArr.toString()))]),s("td",t._l(e.accessoryList,(function(e,a){return s("div",{key:a},[s("a",{attrs:{target:"_blank",href:e.fileUrl}},[t._v(t._s(e.fileName))])])})),0),s("td",[t._v(t._s(1==e.storageStatus?"待入库":"已入库"))]),s("td",[t._v(t._s(e.createTime))])])}))],2)])]):t._e(),s("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[s("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("审核信息")])]),s("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[s("table",{staticClass:"data-table"},[s("tr",[s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"7%"}}),s("td",{staticStyle:{width:"8%"}}),s("td",{staticStyle:{width:"8%"}})]),s("tr",[s("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v("流程节点")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("角色")]),s("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("审核人")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核状态")]),s("td",{staticClass:"b",attrs:{colspan:"4"}},[t._v("审核意见")]),s("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核时间")])]),t._l(t.processList,(function(e){return s("tr",{key:e.stepName},[s("td",{attrs:{colspan:"3"}},[t._v(t._s(e.stepName))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.roleName))]),s("td",{attrs:{colspan:"1"}},[t._v(t._s(e.auditUserName))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(t.statusList[e.auditResult]))]),s("td",{attrs:{colspan:"4"}},[t._v(t._s(e.info))]),s("td",{attrs:{colspan:"2"}},[t._v(t._s(e.auditTime))])])}))],2)])])]),s("div",{staticClass:"layer-btns"},[s("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(e){return t.closeLayer()}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(s("1084"),s("159a"),s("ac67"),s("4890"),s("32ea"),s("01c8"),s("4057"),s("3f5b"),s("34f5")),l=(s("a450"),s("566e"),s("1bc78"),s("246f"),s("9b68")),o=s("153b");function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){Object(r["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d={name:"product-addList",components:{DataList:l["a"]},data:function(){return{completeLayer:!1,loading:!1,orderStatusList:[{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:8,text:"生产暂停"},{value:9,text:"生产完成"},{value:10,text:"质检中"},{value:11,text:"已入库"},{value:12,text:"申请发货"},{value:13,text:"发货完成"}],filter:{orderNo:"",orderStatus:7},layer:!1,info:{},accessoryList:[],productNoList:[],productModelList:[],productSpecificationsList:[],order:{id:"",orderNo:"",productModel:"",productNo:"",productSpecifications:"",qualifiedNumber:"",reason:"",testingNumber:"",unqualifiedNumber:"",accessoryList:[],unqualifiedList:[{number:"0",reason:""}]},reasonList:[],recordList:[],fileList:[],fileDetailList:[],processList:[],statusList:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},created:function(){this.getReasonList()},methods:{closeLayer:function(){this.layer=!1,this.completeLayer=!1,this.accessoryList=[]},getAccessory:function(t){var e=this;this.accessoryList=[],this.$http.get("/haolifa/flowInstance/flow/accessoryInfo?formNo=".concat(t,"&formId=0")).then((function(t){t.forEach((function(t){""!=t.fileUrl&&e.accessoryList.push(t)}))})).catch((function(t){e.$toast(t.msg||t.message)}))},getOrderStatusList:function(){var t=this;this.$http.get("/haolifa/order-product/order-status-list").then((function(e){t.orderStatusList=e.map((function(t){return{value:t.code,text:t.desc}}))}))},uploadFile:function(t,e){var s=this;this.loading=!0,this.loadingMsg="正在上传",Object(o["a"])(t.source).then((function(e){s.$http.post("/haolifa/file/uploadFileBase64",{base64Source:e,fileName:t.name}).then((function(e){s.order.accessoryList.push({fileName:t.name,fileUrl:e}),s.loading=!1})).catch((function(t){s.$toast(t.msg||t.message),s.loading=!1}))}))},removeFile:function(t,e){var s=this;return new Promise((function(t,e){s.order.accessoryList.splice(index,1),t()}))},getReasonList:function(){var t=this;this.$http.get("/haolifa/pro-inspect/reasonList").then((function(e){t.reasonList=e.map((function(t){return{text:t,value:t}}))})).catch((function(e){t.$toast(e.msg||e.message)}))},progress:function(t){var e=this;this.completeLayer=!0,this.fileList=[],this.reset(),this.order.orderNo=t.orderNo,this.$http.get("/haolifa/order-product/details?orderNo=".concat(t.orderNo)).then((function(t){e.productNoList=t.orderProductAssociates.map((function(t){return{text:t.productNo,value:t.productNo}})),e.productModelList=t.orderProductAssociates.map((function(t){return{text:t.productModel,value:t.productModel}})),e.productSpecificationsList=t.orderProductAssociates.map((function(t){return{text:t.specifications,value:t.specifications}}))})).catch((function(t){e.$toast(t.msg||t.message)})),this.getInfo(t.orderNo),this.getAccessory(t.orderNo)},infoShow:function(t){this.layer=!0,this.getInfo(t.orderNo),this.getAccessory(t.orderNo)},getInfo:function(t){var e=this;this.info={},this.$http.get("/haolifa/order-product/details?orderNo=".concat(t)).then((function(t){e.info=t})).catch((function(t){e.$toast(t.msg||t.message)}));var s={inspectNo:"",orderNo:t,pageNum:1,pageSize:100,storageStatus:0};this.$http.post("/haolifa/pro-inspect/pageInfo",s).then((function(t){e.recordList=t.list,e.recordList.map((function(t){return t.reasonArr=t.reasonList.map((function(t){if(t.number)return"数量:"+t.number+",原因:"+t.reason+";"}))}))})).catch((function(t){e.$toast(t.msg||t.message)})),this.$http.get("/haolifa/order-product/accessory?orderNo=".concat(t)).then((function(t){e.fileDetailList=t})).catch((function(t){e.$toast(t.msg||t.message)})),this.getProcess(t)},getProcess:function(t){var e=this;this.$http.get("/haolifa/flowInstance/flow/progress/?formNo=".concat(t)).then((function(t){e.processList=t})).catch((function(t){e.$toast(t.msg||t.message)}))},close:function(){this.layer=!1},complete:function(){var t=this,e=c({},this.order),s=e.unqualifiedList.map((function(t){return t.number}));e.unqualifiedList=e.unqualifiedList.map((function(t){return{number:t.number,reason:t.reason.toString()}})),e.unqualifiedNumber=s.reduce((function(t,e,s){return parseInt(t)+parseInt(e)})),this.loading=!0,this.$http.post("/haolifa/pro-inspect/save",e).then((function(e){t.$toast("添加成功"),t.loading=!1,t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(e){t.loading=!1,t.$toast(e.msg||e.message)}))},reset:function(){this.order={id:"",orderNo:"",productModel:"",productNo:"",productSpecifications:"",qualifiedNumber:"",reason:"",testingNumber:"",unqualifiedNumber:"",accessoryList:[],unqualifiedList:[{number:"0",reason:""}]}},addReason:function(){this.order.unqualifiedList.push({number:"0",reason:""})},removeReason:function(t){this.order.unqualifiedList.splice(t,1)}}},u=d,p=(s("c5b0"),s("5d22")),m=Object(p["a"])(u,a,i,!1,null,null,null);e["default"]=m.exports},a6b5:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"inspect-product-add"},[s("div",{staticClass:"content"},[s("div",{staticClass:"title b f-18"},[t._v("增加质检单")]),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item",attrs:{label:"订单号"},model:{value:t.form.orderNo,callback:function(e){t.$set(t.form,"orderNo",e)},expression:"form.orderNo"}}),s("input-box",{staticClass:"flex-item",attrs:{label:"检测数量"},model:{value:t.form.testingNumber,callback:function(e){t.$set(t.form,"testingNumber",e)},expression:"form.testingNumber"}}),s("input-box",{staticClass:"flex-item",attrs:{label:"合格数"},model:{value:t.form.qualifiedNumber,callback:function(e){t.$set(t.form,"qualifiedNumber",e)},expression:"form.qualifiedNumber"}}),s("input-box",{staticClass:"flex-item",attrs:{label:"不合格数"},model:{value:t.form.unqualifiedNumber,callback:function(e){t.$set(t.form,"unqualifiedNumber",e)},expression:"form.unqualifiedNumber"}})],1),s("div",{staticClass:"b",staticStyle:{margin:"20px 0 10px"}},[t._v("不合格详情")]),t._l(t.form.items,(function(e,a){return s("div",{key:a,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[s("div",{staticClass:"flex-item"},[s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"产品型号",hint:"必填"},model:{value:e.productModel,callback:function(s){t.$set(e,"productModel",s)},expression:"item.productModel"}}),s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格",hint:"必填"},model:{value:e.productSpecifications,callback:function(s){t.$set(e,"productSpecifications",s)},expression:"item.productSpecifications"}}),s("input-box",{staticClass:" mr-10",attrs:{label:"不合格数",hint:"必填"},model:{value:e.unqualifiedNumber,callback:function(s){t.$set(e,"unqualifiedNumber",s)},expression:"item.unqualifiedNumber"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item",attrs:{label:"不合格现象描述"},model:{value:e.reason,callback:function(s){t.$set(e,"reason",s)},expression:"item.reason"}})],1)]),t.form.items.length>1?s("div",[s("icon-btn",{attrs:{small:""},on:{click:function(e){return t.form.items.splice(a,1)}}},[t._v("close")])],1):t._e()])})),s("div",{staticClass:"card a flex-center",on:{click:function(e){return t.addItem()}}},[t._m(0)]),s("div",{staticClass:"flex"},[s("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:t.submit}},[t._v("提交")]),s("btn",{attrs:{big:"",flat:""},on:{click:function(e){return t.$router.back()}}},[t._v("取消")])],1)],2)])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-v-center"},[s("i",{staticClass:"icon mr-10"},[t._v("add")]),s("span",[t._v("添加不合格详情")])])}],r=(s("8dee"),s("a450"),s("caaf"),{name:"inspect-product-add",data:function(){return{form:{orderNo:"",testingNumber:"",qualifiedNumber:"",unqualifiedNumber:"",items:[{productModel:"",productSpecifications:"",reason:"",unqualifiedNumber:""}]}}},created:function(){var t=this.$route.query.id;void 0!==t&&"product-edit"===this.$route.name&&this.getInfo(t)},methods:{getInfo:function(t){var e=this;console.log("---"+t),this.$http.get("/haolifa/pro-inspect-res/info/".concat(t)).then((function(s){for(var a in console.log("---"+t),console.log(s),e.form)void 0!==e.form[a]&&(e.form[a]=s[a])})).catch((function(t){e.$toast(t.msg||t.message)}))},addItem:function(){this.form.items.push({productModel:"",productSpecifications:"",reason:"",unqualifiedNumber:""})},submit:function(){var t=this;this.$http.post("/haolifa/pro-inspect-res/save",this.form).then((function(e){t.loading=!1,t.$toast("提交成功"),t.$router.replace("/inspect-product")})).catch((function(e){t.$toast(e.message||e.msg)}))}}}),l=r,o=(s("8f46"),s("5d22")),n=Object(o["a"])(l,a,i,!1,null,null,null);e["default"]=n.exports},ba88:function(t,e,s){"use strict";s("0d56")},c5b0:function(t,e,s){"use strict";s("473d")},d87a:function(t,e,s){},e6f6:function(t,e,s){},e9aa0:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"apply-buy-add"},[s("div",{staticClass:"content"},[s("div",{staticClass:"title b f-18 mb-10"},[t._v(t._s(t.isAdd?"新增":"编辑")+"采购订单")]),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方"},model:{value:t.form.demander,callback:function(e){t.$set(t.form,"demander",e)},expression:"form.demander"}}),s("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方地址"},model:{value:t.form.demanderAddr,callback:function(e){t.$set(t.form,"demanderAddr",e)},expression:"form.demanderAddr"}}),s("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系人"},model:{value:t.form.demanderLinkman,callback:function(e){t.$set(t.form,"demanderLinkman",e)},expression:"form.demanderLinkman"}}),s("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系电话"},model:{value:t.form.demanderPhone,callback:function(e){t.$set(t.form,"demanderPhone",e)},expression:"form.demanderPhone"}})],1),s("div",{staticClass:"flex"},[s("select-box",{staticStyle:{"margin-right":"20px",width:"240px"},attrs:{list:t.supplierList,label:"供应商"},on:{change:function(e){return t.changeSupplier()}},model:{value:t.form.supplierNo,callback:function(e){t.$set(t.form,"supplierNo",e)},expression:"form.supplierNo"}}),s("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方地址"},model:{value:t.form.supplierAddr,callback:function(e){t.$set(t.form,"supplierAddr",e)},expression:"form.supplierAddr"}}),s("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系人"},model:{value:t.form.supplierLinkman,callback:function(e){t.$set(t.form,"supplierLinkman",e)},expression:"form.supplierLinkman"}}),s("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系电话"},model:{value:t.form.suppilerPhone,callback:function(e){t.$set(t.form,"suppilerPhone",e)},expression:"form.suppilerPhone"}}),s("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方确认人"},model:{value:t.form.supplierConfirmer,callback:function(e){t.$set(t.form,"supplierConfirmer",e)},expression:"form.supplierConfirmer"}})],1),s("div",{staticClass:"flex"},[s("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"确认时间"},model:{value:t.form.confirmTime,callback:function(e){t.$set(t.form,"confirmTime",e)},expression:"form.confirmTime"}}),s("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"交货时间"},model:{value:t.form.deliveryTime,callback:function(e){t.$set(t.form,"deliveryTime",e)},expression:"form.deliveryTime"}}),s("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办时间"},model:{value:t.form.operateTime,callback:function(e){t.$set(t.form,"operateTime",e)},expression:"form.operateTime"}}),s("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办人"},model:{value:t.form.operatorUserName,callback:function(e){t.$set(t.form,"operatorUserName",e)},expression:"form.operatorUserName"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item",attrs:{label:"采购合同编号"},model:{value:t.form.orderNo,callback:function(e){t.$set(t.form,"orderNo",e)},expression:"form.orderNo"}}),s("input-box",{staticClass:"flex-item",attrs:{label:"付款方式"},model:{value:t.form.payType,callback:function(e){t.$set(t.form,"payType",e)},expression:"form.payType"}})],1),s("div",{staticClass:"b",staticStyle:{margin:"20px 0 10px"}},[t._v("采购物料项")]),t._l(t.form.itemList,(function(e,a){return s("div",{key:a,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[s("div",{staticClass:"flex-item"},[s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"物料名称"},model:{value:e.materialName,callback:function(s){t.$set(e,"materialName",s)},expression:"item.materialName"}}),s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"物料图号"},model:{value:e.materialGraphNo,callback:function(s){t.$set(e,"materialGraphNo",s)},expression:"item.materialGraphNo"}}),s("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"数量"},model:{value:e.number,callback:function(s){t.$set(e,"number",s)},expression:"item.number"}}),s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单位"},model:{value:e.unit,callback:function(s){t.$set(e,"unit",s)},expression:"item.unit"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"材质"},model:{value:e.material,callback:function(s){t.$set(e,"material",s)},expression:"item.material"}}),s("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格"},model:{value:e.specification,callback:function(s){t.$set(e,"specification",s)},expression:"item.specification"}}),s("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单价"},model:{value:e.unitPrice,callback:function(s){t.$set(e,"unitPrice",s)},expression:"item.unitPrice"}}),s("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单重"},model:{value:e.unitWeight,callback:function(s){t.$set(e,"unitWeight",s)},expression:"item.unitWeight"}})],1),s("div",{staticClass:"flex"},[s("input-box",{staticClass:"flex-item",attrs:{label:"备注"},model:{value:e.remark,callback:function(s){t.$set(e,"remark",s)},expression:"item.remark"}})],1)])])})),s("div",{staticClass:"flex"},[s("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(e){return t.submit()}}},[t._v("提交")]),s("btn",{attrs:{big:"",flat:""},on:{click:function(e){return t.$router.back()}}},[t._v("取消")])],1)],2)])},i=[],r=(s("4057"),s("3f5b"),s("566e"),s("1bc78"),s("246f"),{name:"order-purchaseAdd",data:function(){return{supplierInfoList:[],supplierList:[],form:{id:null,confirmTime:"",deliveryTime:"",demander:"山西好利阀机械制造有限公司",demanderAddr:"山西省侯马经济开发区旺旺北支路东侧",demanderLinkman:"",demanderPhone:"",operateTime:"",operatorUserName:"",orderNo:"",suppilerPhone:"",supplierAddr:"",supplierConfirmer:"",supplierLinkman:"",supplierName:"",supplierNo:"",payType:"",itemList:[{id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}]},isAdd:!0,nameList:[],tuhaoList:[],ids:[]}},mounted:function(){var t=this;this.ids=this.$route.params.ids;for(var e=this.$route.params.list,s=1;s<e.length;s++)this.form.itemList.push({id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0});e.forEach((function(e,s){t.form.itemList[s].materialGraphNo=e.materialGraphNo,t.form.itemList[s].materialName=e.materialName,t.form.itemList[s].number=e.purchaseNumber}));var a=[];a=this.$route.params.supList,this.supplierList=a.map((function(t){return{value:t.suppilerNo,text:t.supplierName}})),this.supplierInfoList=a},methods:{changeSupplier:function(){var t=this;this.supplierInfoList.forEach((function(e,s){e.suppilerNo==t.form.supplierNo&&(t.form.suppilerPhone=e.phone,t.form.supplierAddr=e.address,t.form.supplierLinkman=e.responsiblePerson,t.form.supplierName=e.supplierName)}))},addItem:function(){this.form.itemList.push({id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}),this.$forceUpdate()},submit:function(){var t=this,e={materialName:"物料名称",materialGraphNo:"物料图号",number:"数量",material:"材质",specification:"规格",unit:"单位",unitPrice:"单价",unitWeight:"单重"};if(this.form.supplierNo){var s=!0;this.form.itemList.forEach((function(a,i){for(var r in a)e[r]&&!a[r]&&(t.$toast("请填写第 ".concat(i+1," 项 ").concat(e[r])),s=!1)})),s&&(this.form.applyBuyIds=this.ids,this.$http.post("/haolifa/purchase-order/save/0/"+this.ids.toString(),this.form).then((function(e){t.$toast("创建成功"),t.$router.push("/applyBuy-order")})).catch((function(e){t.$toast(e.message||e.msg)})))}else this.$toast("请选择供应商")}}}),l=r,o=(s("ba88"),s("5d22")),n=Object(o["a"])(l,a,i,!1,null,null,null);e["default"]=n.exports},ee68:function(t,e,s){var a=s("7c2b");a(a.S+a.F*!s("5e9e"),"Object",{defineProperty:s("597a").f})},f263:function(t,e,s){s("ee68");var a=s("ce99").Object;t.exports=function(t,e,s){return a.defineProperty(t,e,s)}}}]);
//# sourceMappingURL=diliversyedit.85a33fc5.js.map