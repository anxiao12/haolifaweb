(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderlist"],{"021d":function(t,a,e){},"0c24":function(t,a,e){"use strict";e("8730")},"14c3":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-orders-list"},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"100px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(a){t.$refs.list.update(!0),t.getOrderQty()},input:function(a){a.target.composing||t.$set(t.filter,"orderNo",a.target.value)}}}),t._v("\n            订单状态：\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderStatus,expression:"filter.orderStatus"}],staticClass:"f-14",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.filter,"orderStatus",a.target.multiple?e:e[0])},function(a){t.$refs.list.update(!0),t.getOrderQty()}]}},[e("option",{attrs:{value:"-1"}},[t._v("全部")]),t._l(t.newOrderStatusList,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(t._s(a.text))])}))],2),t._v("\n            发货状态：\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.deliverStatus,expression:"filter.deliverStatus"}],staticClass:"f-14",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.filter,"deliverStatus",a.target.multiple?e:e[0])},function(a){t.$refs.list.update(!0),t.getOrderQty()}]}},[e("option",{attrs:{value:"-1"}},[t._v("全部")]),e("option",{attrs:{value:"0"}},[t._v("待发货")]),e("option",{attrs:{value:"1"}},[t._v("部分发货")]),e("option",{attrs:{value:"2"}},[t._v("发货完成")])]),e("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")]),e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",editable:!1,placeholder:"选择年月日"},on:{change:function(a){t.$refs.list.update(!0),t.getOrderQty()}},model:{value:t.filter.startDate,callback:function(a){t.$set(t.filter,"startDate",a)},expression:"filter.startDate"}}),t._v("结束时间:\n            "),e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",editable:!1,placeholder:"选择年月日"},on:{change:function(a){t.$refs.list.update(!0),t.getOrderQty()}},model:{value:t.filter.endDate,callback:function(a){t.$set(t.filter,"endDate",a)},expression:"filter.endDate"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.demandName,expression:"filter.demandName"}],staticClass:"flex-item",staticStyle:{width:"100px"},attrs:{type:"text",placeholder:"需方"},domProps:{value:t.filter.demandName},on:{change:function(a){t.$refs.list.update(!0),t.getOrderQty()},input:function(a){a.target.composing||t.$set(t.filter,"demandName",a.target.value)}}})],1),e("div",{staticClass:"flex-item"}),e("router-link",{attrs:{to:"/order/add"}},[e("btn",{staticClass:"b",attrs:{flat:"",color:"#008eff"}},[t._v("新增订单")])],1)],1),e("div",{staticClass:"flex-v-center tool-bar"},[e("span",{staticClass:"f-16",staticStyle:{"margin-left":"10px",color:"#008eff"}},[t._v("订单产品总数量:"+t._s(t.orderQty))]),e("span",{staticClass:"f-16",staticStyle:{"margin-left":"10px",color:"#008eff"}},[t._v("订单产品已发货数量:"+t._s(t.deliveryOrderQty))])]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{param:t.filter,url:"/haolifa/order-product/pageInfo",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,r=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(r))]),e("td",[t._v(t._s(s.orderNo))]),e("td",[t._v(t._s(s.demandName))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(s.deliveryDate))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(s.totalCount))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(t.deliverStatusList[s.deliverStatus].text))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(t.orderStatusList[s.orderStatus].text))]),e("td",[t._v(t._s(s.createTime))]),e("td",{staticClass:"t-right"},[0==s.orderStatus?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.progress(s)}}},[t._v("发起流程|")]):t._e(),0!=s.orderStatus?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.approveProgress(s)}}},[t._v("审批进度|")]):t._e(),e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.fileUpload(s)}}},[t._v("附件上传|")]),e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.infoShow(s)}}},[t._v("详情")]),0==s.orderStatus||14==s.orderStatus?e("a",{staticClass:"red",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.remove(s)}}},[t._v("|删除")]):t._e()])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("订单编号")]),e("th",[t._v("需方")]),e("th",[t._v("发货日期")]),e("th",[t._v("订单数量")]),e("th",[t._v("发货状态")]),e("th",[t._v("订单状态")]),e("th",[t._v("创建时间")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.btnFlag?e("layer",{staticStyle:{"z-index":"101"},attrs:{title:"核料清单详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("核料清单")])]),e("tr",[e("th",[t._v("物料名称")]),e("th",{attrs:{colspan:"3"}},[t._v("物料图号")]),e("th",{attrs:{colspan:"2"}},[t._v("型号")]),e("th",[t._v("规格")]),e("th",[t._v("单位")]),e("th",[t._v("需要数量")]),e("th",[t._v("缺少数量")]),e("th",[t._v("核料状态")]),e("th",[t._v("是否替换")]),e("th",[t._v("替换零件")]),e("th",[t._v("备注")])]),t._l(t.preCheckMaterList,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.model))]),e("td",[t._v(t._s(a.specifications))]),e("td",[t._v(t._s(a.unit))]),e("td",[t._v(t._s(a.materialCount))]),e("td",[t._v(t._s(a.lackMaterialCount))]),e("td",[t._v(t._s(t.checkStatusList[a.checkStatus-1].text))]),e("td",[t._v(t._s(3==a.checkStatus?"是":"否"))]),e("td",[t._v(t._s(a.replaceMaterialGraphNo))]),e("td",[t._v(t._s(a.remark))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(a){t.btnFlag=!1}}},[t._v("关闭")])],1)]):t._e(),t.fileLayer?e("layer",{attrs:{title:"附件上传",width:"70%"}},[e("div",{staticClass:"flex",staticStyle:{"padding-left":"50px"}},[e("upload-box",{staticStyle:{width:"100%"},attrs:{btnText:"上传订单附件",multiple:t.multiple,fileList:t.fileList,onchange:t.uploadFile,onremove:t.removeFile}})],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:function(a){t.fileLayer=!1}}},[t._v("取消")]),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(a){return t.fileSave()}}},[t._v("保存")])],1)]):t._e(),t.layer?e("layer",{attrs:{title:"详情",width:"80%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单编号 : "+t._s(t.info.orderNo))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("发货日期 : "+t._s(t.info.deliveryDate))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单状态 : "+t._s(t.orderStatusList[t.info.orderStatus].text))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("\n                            订单合同:\n                            "),e("a",{staticStyle:{"margin-right":"15px"},attrs:{href:t.info.orderContractUrl}},[t._v("下载")]),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:t.info.orderContractUrl}},[t._v("预览")]):t._e(),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+t.info.orderContractUrl}},[t._v("预览")]),e("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.getPreCheckMater(t.info.orderNo)}}},[t._v("核料清单")])])]),e("tr",[t.fileDetailList.length?e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:")]):e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:无")])]),t._l(t.fileDetailList,(function(a,s){return e("tr",{key:s},[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v(t._s(a.fileName))]),e("td",{staticClass:"b",attrs:{colspan:"12"}},[a.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:a.fileUrl}},[t._v("预览")]):t._e(),a.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+a.fileUrl}},[t._v("预览")])])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配车间: "+t._s(t.info.assemblyShop))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配小组: "+t._s(t.info.assemblyGroup))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("采购反馈时间: "+t._s(t.info.purchaseFeedbackTime))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("生产反馈时间: "+t._s(t.info.productionFeedbackTime))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("技术清单:")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("产品名称")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("型号")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("规格")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("数量")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("上法兰标准")]),e("td",{attrs:{colspan:"3",rowspan:"1"}},[t._v("上法兰尺寸")]),e("td",{attrs:{colspan:"4",rowspan:"1"}},[t._v("出轴尺寸")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("静扭矩")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("执行器型号")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("连接孔")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("角度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("中心距")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴型式")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴长度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("轴图号")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("过渡盘")])]),t._l(JSON.parse(t.info.technicalRequire),(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.name))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.xinhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.guige))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.num))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.biaozhun))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.lianjiek))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jiaodu))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.zhongxinju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.xinshi))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.length))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.tuhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.guodupan))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jinniuju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jishuxinhao))])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单产品列表")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品编号")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("标签属性")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("颜色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总计价格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("材质说明")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品备注")])]),t._l(t.info.orderProductAssociates,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productNo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productModel))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.lable))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.specifications))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productColor))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalPrice))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.materialDescription))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productRemark))])])})),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批附件:")])]):t._e(),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件名称")]),e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件地址")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("——")])]):t._e(),t._l(t.accessoryList,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"6"}},[t._v(t._s(a.fileName))]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(a.fileUrl))]),e("td",{attrs:{colspan:"2"}},[a.fileUrl.match(".(doc|docx|xls|xlsx)$")?t._e():e("a",{attrs:{target:"_blank",href:a.fileUrl}},[t._v("预览")]),a.fileUrl.match(".(doc|docx|xls|xlsx)$")?e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+a.fileUrl}},[t._v("预览")]):t._e()])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审核信息")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v("流程节点")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("角色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("审核人")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核状态")]),e("td",{staticClass:"b",attrs:{colspan:"4"}},[t._v("审核意见")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核时间")])]),t._l(t.processList,(function(a){return e("tr",{key:a.stepName},[e("td",{attrs:{colspan:"3"}},[t._v(t._s(a.stepName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.roleName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.auditUserName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.statusList[a.auditResult]))]),e("td",{attrs:{colspan:"4"}},[t._v(t._s(a.auditInfo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.auditTime))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e(),t.loading?e("layer",[e("div",{staticClass:"abs t-center",staticStyle:{padding:"20px"}},[e("loading",{attrs:{size:"30"}}),e("div",{staticStyle:{"margin-top":"10px"}},[t._v("正在保存")])],1)]):t._e()],1)},r=[],i=(e("4890"),e("a450"),e("566e"),e("1bc78"),e("246f"),e("9b68")),o=e("153b"),l={name:"page-orders-addlist",components:{DataList:i["a"]},data:function(){return{loading:!1,multiple:!0,btnFlag:!1,fileLayer:!1,deliverStatusList:[{value:0,text:"待发货"},{value:1,text:"部分发货"},{value:2,text:"发货完成"}],orderStatusList:[{value:0,text:"创建"},{value:1,text:"审批中"},{value:2,text:"核料中"},{value:3,text:"替换料审批中"},{value:4,text:"核料完成"},{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:8,text:"生产暂停"},{value:9,text:"生产完成"},{value:10,text:"质检中"},{value:11,text:"已入库"},{value:12,text:"申请发货"},{value:13,text:"发货完成"},{value:14,text:"审核不通过"}],newOrderStatusList:[{value:0,text:"创建"},{value:1,text:"审批中"},{value:2,text:"核料中"},{value:3,text:"替换料审批中"},{value:4,text:"核料完成"},{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:9,text:"生产完成"},{value:14,text:"审核不通过"}],filter:{orderNo:"",orderStatus:-1,deliverStatus:-1,startDate:"",endDate:"",demandName:""},orderQty:"",deliveryOrderQty:"",layer:!1,info:{},arr:[{name:"",xinhao:"",guige:"",num:"",biaozhun:"",lianjiek:"",jiaodu:"",zhongxinju:"",xinshi:"",length:"",tuhao:"",jinniuju:"",jishuxinhao:""},{name:"",xinhao:"",guige:"",num:"",biaozhun:"",lianjiek:"",jiaodu:"",zhongxinju:"",xinshi:"",length:"",tuhao:"",jinniuju:"",jishuxinhao:""}],preCheckMaterList:[],accessoryList:[],checkStatusList:[{value:1,text:"成功"},{value:2,text:"待采购"},{value:3,text:"可替换"}],fileList:[],fileForm:{orderNo:"",orderUploadDTOs:[]},fileDetailList:[],processList:[],statusList:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},created:function(){this.getOrderQty()},methods:{getAccessory:function(t){var a=this;this.$http.get("/haolifa/flowInstance/flow/accessoryInfo?formNo=".concat(t,"&formId=0")).then((function(t){t.forEach((function(t){""!=t.fileUrl&&a.accessoryList.push(t)}))})).catch((function(t){a.$toast(t.msg||t.message)}))},getOrderStatusList:function(){var t=this;this.$http.get("/haolifa/order-product/order-status-list").then((function(a){t.orderStatusList=a.map((function(t){return{value:t.code,text:t.desc}}))}))},removeFile:function(t,a){var e=this;return new Promise((function(t,s){e.fileForm.orderUploadDTOs.splice(a,1),t()}))},fileUpload:function(t){var a=this;this.fileLayer=!0,this.fileForm.orderNo=t.orderNo,this.fileList=[],this.$http.get("/haolifa/order-product/accessory?orderNo=".concat(t.orderNo)).then((function(t){a.fileForm.orderUploadDTOs=t,t.forEach((function(t){var e={name:t.fileName,size:"",type:"",status:"ready",url:t.fileUrl,uid:(new Date).getTime(),source:""};a.fileList.push(e)}))})).catch((function(t){a.$toast(t.msg||t.message)}))},fileSave:function(){var t=this;this.loading=!0,this.$http.post("/haolifa/order-product/accessory-upload?orderNo=".concat(this.fileForm.orderNo),this.fileForm.orderUploadDTOs).then((function(a){t.loading=!1,t.fileLayer=!1,t.$toast("上传附件成功")})).catch((function(a){t.$toast(a.msg||a.message),t.loading=!1}))},uploadFile:function(t,a){var e=this;this.loading=!0,this.loadingMsg="正在上传",Object(o["a"])(t.source).then((function(a){e.$http.post("/haolifa/file/uploadFileBase64",{base64Source:a,fileName:t.name}).then((function(a){e.fileForm.orderUploadDTOs.push({fileUrl:a,fileName:t.name}),e.loading=!1})).catch((function(t){e.$toast(t.msg||t.message),e.loading=!1}))}))},getPreCheckMater:function(t){var a=this;this.btnFlag=!0,this.$http.get("/haolifa/order-product/order-material?orderNo=".concat(t)).then((function(t){a.preCheckMaterList=t})).catch((function(t){a.$toast(t.msg||t.message)}))},progress:function(t){var a=this,e="";this.$http.post("/haolifa/flowInstance/create",{flowId:0==t.isCheckMaterial?6:1,formId:t.id,formType:1,formNo:t.orderNo,summary:0==t.isCheckMaterial?"不核料订单审批":"生产订单审批"}).then((function(s){e=s.instanceId,a.$http.post("/haolifa/order-product/updateStatus",{orderNo:t.orderNo,status:1}).then((function(t){a.loading=!1,a.$toast("发起流程成功,流程ID: ".concat(e)),a.$refs.list.update()}))}))},approveProgress:function(t){this.$router.push("/order/approveProgress?formNo=".concat(t.orderNo))},infoShow:function(t){var a=this;this.layer=!0,this.getInfo(t.orderNo),this.getAccessory(t.orderNo),this.getProcess(t),this.$http.get("/haolifa/order-product/accessory?orderNo=".concat(t.orderNo)).then((function(t){a.fileDetailList=t})).catch((function(t){a.$toast(t.msg||t.message)}))},getProcess:function(t){var a=this;this.$http.get("/haolifa/flowInstance/flow/progress/?formNo=".concat(t.orderNo)).then((function(t){a.processList=t})).catch((function(t){a.$toast(t.msg||t.message)}))},getInfo:function(t){var a=this;this.$http.get("/haolifa/order-product/details?orderNo=".concat(t)).then((function(t){a.info=t})).catch((function(t){a.$toast(t.msg||t.message)}))},close:function(){this.layer=!1,this.accessoryList=[]},remove:function(t){var a=this;this.$confirm({title:"删除确认",text:"您确定要删除以下订单吗？<br>".concat(t.orderNo),color:"red",btns:["取消","删除"],yes:function(){a.$http.delete("/haolifa/order-product/delete/".concat(t.id)).then((function(t){a.$toast("删除成功"),a.$refs.list.update()})).catch((function(t){a.$toast(t.msg)}))}})},getOrderQty:function(){var t=this;this.$http.post("/haolifa/statistics/order-product",this.filter).then((function(a){t.orderQty=a.orderQty,t.deliveryOrderQty=a.deliveryOrderQty})).catch((function(a){t.$toast(a.msg)}))}}},n=l,c=(e("6ea9"),e("5d22")),d=Object(c["a"])(n,s,r,!1,null,null,null);a["default"]=d.exports},"153b":function(t,a,e){"use strict";a["a"]=function(t){return new Promise((function(a,e){var s=new FileReader;s.readAsDataURL(t),s.onload=function(){a(s.result)},s.onerror=function(t){e(t)}}))}},"19a8":function(t,a,e){"use strict";e("ad5e")},"1c71":function(t,a,e){},2485:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-orders-list"},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.busNo,expression:"filter.busNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"单号"},domProps:{value:t.filter.busNo},on:{change:function(a){return t.$refs.list.update(!0)},input:function(a){a.target.composing||t.$set(t.filter,"busNo",a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.batchNumber,expression:"filter.batchNumber"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"批次号"},domProps:{value:t.filter.batchNumber},on:{change:function(a){return t.$refs.list.update(!0)},input:function(a){a.target.composing||t.$set(t.filter,"batchNumber",a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.graphNo,expression:"filter.graphNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"图号"},domProps:{value:t.filter.graphNo},on:{change:function(a){return t.$refs.list.update(!0)},input:function(a){a.target.composing||t.$set(t.filter,"graphNo",a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.materialName,expression:"filter.materialName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"零件名称"},domProps:{value:t.filter.materialName},on:{change:function(a){return t.$refs.list.update(!0)},input:function(a){a.target.composing||t.$set(t.filter,"materialName",a.target.value)}}}),t._v("\n            类型：\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.type,expression:"filter.type"}],staticClass:"f-14",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.filter,"type",a.target.multiple?e:e[0])},function(a){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:""}},[t._v("全部")]),e("option",{attrs:{value:"1"}},[t._v("领料单出库")]),e("option",{attrs:{value:"2"}},[t._v("机加工委托")]),e("option",{attrs:{value:"3"}},[t._v("喷涂委托")])]),t._v("\n            出库状态：\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.outRoomStatus,expression:"filter.outRoomStatus"}],staticClass:"f-14",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.filter,"outRoomStatus",a.target.multiple?e:e[0])},function(a){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:""}},[t._v("全部")]),e("option",{attrs:{value:"1"}},[t._v("未出库")]),e("option",{attrs:{value:"2"}},[t._v("已出库")])]),e("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{param:t.filter,url:"/haolifa/store-room/pre-material-out/page",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,r=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(r))]),e("td",[t._v(t._s(s.busNo))]),e("td",[t._v(t._s(s.batchNumber))]),e("td",[t._v(t._s(s.graphNo))]),e("td",[t._v(t._s(s.materialName))]),e("td",[t._v(t._s(s.outQuantity))]),e("td",[t._v(t._s(s.deptName))]),e("td",[t._v(t._s(t.typeArrList[s.type]))]),e("td",[t._v(t._s(1==s.outRoomStatus?"未出库":"已出库"))]),e("td",{staticClass:"t-right"},[1==s.outRoomStatus?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.infoShow(s)}}},[t._v("出库")]):t._e()])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("单号")]),e("th",[t._v("批次号")]),e("th",[t._v("图号")]),e("th",[t._v("零件名称")]),e("th",[t._v("出库数量")]),e("th",[t._v("领料单位")]),e("th",[t._v("类型")]),e("th",[t._v("出库状态")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?e("layer",{attrs:{title:"出库",width:"70%"}},[e("div",{staticStyle:{padding:"0 30px"}},[e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"零件名称",disabled:"disabled"},model:{value:t.form.name,callback:function(a){t.$set(t.form,"name",a)},expression:"form.name"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"图号",disabled:"disabled"},model:{value:t.form.materialGraphNo,callback:function(a){t.$set(t.form,"materialGraphNo",a)},expression:"form.materialGraphNo"}})],1),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"mr-10",staticStyle:{width:"25%"},attrs:{label:"单号"},model:{value:t.form.orderNo,callback:function(a){t.$set(t.form,"orderNo",a)},expression:"form.orderNo"}}),e("input-box",{staticClass:"mr-10",staticStyle:{width:"25%"},attrs:{label:"零件购买单价"},model:{value:t.form.price,callback:function(a){t.$set(t.form,"price",a)},expression:"form.price"}}),e("input-box",{staticClass:"flex-item mr-10",staticStyle:{width:"25%"},attrs:{label:"领料部门"},model:{value:t.form.receiveDepartment,callback:function(a){t.$set(t.form,"receiveDepartment",a)},expression:"form.receiveDepartment"}})],1),e("div",{staticClass:"flex-v-center"},[e("el-select",{staticClass:"mr-10",staticStyle:{width:"75%"},attrs:{placeholder:"批次号",multiple:!0},model:{value:t.materialBatchNo,callback:function(a){t.materialBatchNo=a},expression:"materialBatchNo"}},t._l(t.materialBatchNoList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.text,value:t.value}})})),1),e("input-box",{staticClass:"mr-10",staticStyle:{width:"25%"},attrs:{label:"出库数量（负数）"},model:{value:t.form.quantity,callback:function(a){t.$set(t.form,"quantity",a)},expression:"form.quantity"}})],1)]),e("div",{staticClass:"flex-v-center",staticStyle:{margin:"50px auto 100px"}},[e("el-button",{staticClass:"mr-20",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.submit}},[t._v("提交")]),e("btn",{staticClass:"ml-20 mr-20",attrs:{big:"",flat:"",bg:""},on:{click:function(a){t.layer=!1}}},[t._v("取消")])],1)]):t._e()],1)},r=[],i=(e("fc02"),e("a450"),e("4890"),e("566e"),e("9b68")),o={name:"part-list",components:{DataList:i["a"]},data:function(){return{btnFlag:!1,layer:!1,loading:!1,filter:{busNo:"",graphNo:"",materialName:"",batchNumber:"",outRoomStatus:"",type:""},typeArrList:["","领料单出库","机加工委托","喷涂委托"],typeList:[{text:"原料库",value:1},{text:"成品库",value:2}],form:{materialGraphNo:"",orderNo:"",price:"",roomNo:"",receiveDepartment:"",rackNo:"",quantity:"",name:"",materialBatchNo:"",busNo:"",type:"",batchNoList:[],batchNoDTOList:[]},name:"",roomList:[],rackList:[],rackListnew:[],materialBatchNoList:[],materialBatchNo:[]}},created:function(){this.getRoomList()},methods:{infoShow:function(t){var a=this;this.layer=!0,this.materialBatchNo=[],this.resetForm();var e={graphNo:t.graphNo,model:"",specifications:"",classifyId:0,pageNum:1,pageSize:20};this.$http.post("/haolifa/material/pageInfo",e).then((function(e){a.form.materialGraphNo=t.graphNo,a.form.orderNo=t.busNo,a.form.name=t.materialName,a.form.type=t.type,a.form.receiveDepartment=t.deptName,a.form.busId=t.busId,a.form.busNo=t.busNo,a.form.quantity=0-t.outQuantity,a.form.price=0,e.list.length&&(a.form.price=e.list[0].price),t.batchNumber?a.$http.post("/haolifa/store-room/batch-no-list",{batchNo:t.batchNumber,graphNo:t.graphNo}).then((function(t){a.materialBatchNoList=t.map((function(t){return{value:t.materialBatchNo+"+"+t.quantity+"+"+t.roomNo+"+"+t.rackNo,text:t.materialBatchNo+"("+t.quantity+")"}}))})).catch((function(t){a.loading=!1,a.$toast(t.msg||t.message)})):a.$http.post("/haolifa/store-room/batch-no-list",{qty:t.outQuantity,graphNo:t.graphNo}).then((function(t){a.materialBatchNoList=t.map((function(t){return{value:t.materialBatchNo+"+"+t.quantity+"+"+t.roomNo+"+"+t.rackNo,text:t.materialBatchNo+"("+t.quantity+")"}}))})).catch((function(t){a.loading=!1,a.$toast(t.msg||t.message)}))})).catch((function(t){a.loading=!1,a.$toast(t.msg||t.message)}))},getRackId:function(t){var a=this;if(this.form.roomNo&&t&&this.form.materialGraphNo){var e=encodeURI(this.form.materialGraphNo);this.$http.get("/haolifa/store-room/material-batch-nos?roomNo=".concat(this.form.roomNo,"&rackNo=").concat(t,"&graphNo=").concat(e)).then((function(t){a.materialBatchNoList=t.map((function(t){return{value:t.materialBatchNo+"+"+t.quantity+"+"+t.roomNo+"+"+t.rackNo,text:t.materialBatchNo+"("+t.quantity+")"}}))})).catch((function(t){a.loading=!1,a.$toast(t.msg||t.message)}))}},getRoomId:function(t){var a=this;t&&this.$http.get("/haolifa/store-room/rack/list/".concat(t)).then((function(t){if(0===t.length)return a.rackList=[],void a.$toast("无对应库位");a.rackList=t.map((function(t){return{value:t.rackNo,text:t.rackName}}))})).catch((function(t){a.loading=!1,a.$toast(t.msg||t.message)}))},getRoomList:function(){var t=this;this.$http.get("/haolifa/store-room/listInfo?type=0").then((function(a){t.roomList=a.filter((function(t){return!t.isDelete})).map((function(t){return{value:t.roomNo,text:t.name}}))})).catch((function(a){t.loading=!1,t.$toast(a.msg||a.message)}))},getRoomRackList:function(){var t=this;this.$http.get("/haolifa/store-room/rack/pageInfo").then((function(a){t.rackList=a.list.filter((function(t){return!t.isDelete})).map((function(t){return{value:t.rackNo,text:t.rackName,roomId:t.storeRoomNo,id:t.id}}))})).catch((function(a){t.loading=!1,t.$toast(a.msg||a.message)}))},submit:function(){var t=this;if(this.form.receiveDepartment)if(this.materialBatchNo.length){var a=this.form;this.loading=!0,delete a.name,a.batchNoDTOList=[];for(var e=0;e<this.materialBatchNo.length;e++){var s=this.materialBatchNo[e].split("+");a.batchNoDTOList.push({materialBatchNo:s[0],quantity:s[1],rackNo:s[3],roomNo:s[2]})}var r="put";this.$http[r]("/haolifa/store-room/entryOut/outMaterial",a).then((function(a){t.loading=!1,t.layer=!1,t.$refs.list.update(!0)})).catch((function(a){t.loading=!1,t.$toast(a.msg||a.message)}))}else this.$toast("请选择批次号");else this.$toast("请填入领料部门")},resetForm:function(){this.form={materialGraphNo:"",orderNo:"",price:"",roomNo:"",receiveDepartment:"",rackNo:"",quantity:"",name:"",materialBatchNo:"",busNo:"",type:""}}}},l=o,n=(e("c036"),e("5d22")),c=Object(n["a"])(l,s,r,!1,null,null,null);a["default"]=c.exports},"2a1b":function(t,a,e){},"2b8c":function(t,a,e){},"33de":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"apply-buy-add"},[e("div",{staticClass:"content"},[e("div",{staticClass:"title b f-18 mb-10"},[t._v("生成订单")]),e("div",{staticClass:"flex-v-center"},[e("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"签订日期"},model:{value:t.form.contractSignDate,callback:function(a){t.$set(t.form,"contractSignDate",a)},expression:"form.contractSignDate"}}),e("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"发货日期"},model:{value:t.form.deliveryDate,callback:function(a){t.$set(t.form,"deliveryDate",a)},expression:"form.deliveryDate"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"平台编码"},model:{value:t.form.orderContractNo,callback:function(a){t.$set(t.form,"orderContractNo",a)},expression:"form.orderContractNo"}})],1),e("div",{staticClass:"flex-v-center"},[e("select-box",{staticClass:"flex-item mr-10",attrs:{list:t.demandNameList,label:"需求方"},on:{change:t.nameChange},model:{value:t.form.demandName,callback:function(a){t.$set(t.form,"demandName",a)},expression:"form.demandName"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"需求方代理人"},model:{value:t.form.demandAgentName,callback:function(a){t.$set(t.form,"demandAgentName",a)},expression:"form.demandAgentName"}}),e("select-box",{staticClass:"flex-item mr-10",attrs:{list:t.demandPhoneList,label:"需求方电话"},model:{value:t.form.demandPhone,callback:function(a){t.$set(t.form,"demandPhone",a)},expression:"form.demandPhone"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"需求方传真"},model:{value:t.form.demandFax,callback:function(a){t.$set(t.form,"demandFax",a)},expression:"form.demandFax"}})],1),e("div",{staticClass:"flex-v-center"},[e("select-box",{staticClass:"flex-item mr-10",attrs:{list:t.demandAddressList,label:"需求方地址"},model:{value:t.form.demandAddress,callback:function(a){t.$set(t.form,"demandAddress",a)},expression:"form.demandAddress"}})],1),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"供应方"},model:{value:t.form.supplyName,callback:function(a){t.$set(t.form,"supplyName",a)},expression:"form.supplyName"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"供应方代理人"},model:{value:t.form.supplyAgentName,callback:function(a){t.$set(t.form,"supplyAgentName",a)},expression:"form.supplyAgentName"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"供应方电话"},model:{value:t.form.supplyPhone,callback:function(a){t.$set(t.form,"supplyPhone",a)},expression:"form.supplyPhone"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"供应方传真"},model:{value:t.form.supplyFax,callback:function(a){t.$set(t.form,"supplyFax",a)},expression:"form.supplyFax"}})],1),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"供应方地址"},model:{value:t.form.supplyAddress,callback:function(a){t.$set(t.form,"supplyAddress",a)},expression:"form.supplyAddress"}})],1),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{"multi-line":"",label:"特殊要求"},model:{value:t.form.specialRequire,callback:function(a){t.$set(t.form,"specialRequire",a)},expression:"form.specialRequire"}})],1),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"随货资料"},model:{value:t.form.cargoInformation,callback:function(a){t.$set(t.form,"cargoInformation",a)},expression:"form.cargoInformation"}})],1),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"标牌"},model:{value:t.form.signBoard,callback:function(a){t.$set(t.form,"signBoard",a)},expression:"form.signBoard"}})],1),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"验收标准"},model:{value:t.form.acceptanceCriteria,callback:function(a){t.$set(t.form,"acceptanceCriteria",a)},expression:"form.acceptanceCriteria"}})],1),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{"multi-line":"",label:"质量保证"},model:{value:t.form.warrantyPeriod,callback:function(a){t.$set(t.form,"warrantyPeriod",a)},expression:"form.warrantyPeriod"}})],1),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"包装规范"},model:{value:t.form.packagingSpecification,callback:function(a){t.$set(t.form,"packagingSpecification",a)},expression:"form.packagingSpecification"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"运输方式"},model:{value:t.form.transportMode,callback:function(a){t.$set(t.form,"transportMode",a)},expression:"form.transportMode"}})],1),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"付款方式"},model:{value:t.form.paymentMethod,callback:function(a){t.$set(t.form,"paymentMethod",a)},expression:"form.paymentMethod"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"运费承担"},model:{value:t.form.freightCharges,callback:function(a){t.$set(t.form,"freightCharges",a)},expression:"form.freightCharges"}})],1),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{"multi-line":"",label:"收货信息"},model:{value:t.form.receivingInformation,callback:function(a){t.$set(t.form,"receivingInformation",a)},expression:"form.receivingInformation"}})],1),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{"multi-line":"",label:"违约责任"},model:{value:t.form.liabilityForBreach,callback:function(a){t.$set(t.form,"liabilityForBreach",a)},expression:"form.liabilityForBreach"}})],1),e("div",{staticClass:"title b f-18 mb-10"},[t._v("供货产品列表")]),t._l(t.form.orderProductAssociates,(function(a,s){return e("div",{key:s,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[e("div",{staticClass:"flex-item"},[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"产品ID"},model:{value:a.productNo,callback:function(e){t.$set(a,"productNo",e)},expression:"item.productNo"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"名称"},model:{value:a.productName,callback:function(e){t.$set(a,"productName",e)},expression:"item.productName"}}),e("input-box",{staticClass:"mr-10",attrs:{label:"标签属性"},model:{value:a.lable,callback:function(e){t.$set(a,"lable",e)},expression:"item.lable"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格"},model:{value:a.productModel,callback:function(e){t.$set(a,"productModel",e)},expression:"item.productModel"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"颜色"},model:{value:a.productColor,callback:function(e){t.$set(a,"productColor",e)},expression:"item.productColor"}}),e("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"数量"},model:{value:a.productNumber,callback:function(e){t.$set(a,"productNumber",t._n(e))},expression:"item.productNumber"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单价"},model:{value:a.price,callback:function(e){t.$set(a,"price",t._n(e))},expression:"item.price"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"合计"},model:{value:a.totalPrice,callback:function(e){t.$set(a,"totalPrice",t._n(e))},expression:"item.totalPrice"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"材质说明"},model:{value:a.materialDescription,callback:function(e){t.$set(a,"materialDescription",e)},expression:"item.materialDescription"}}),e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"特殊要求"},model:{value:a.specifications,callback:function(e){t.$set(a,"specifications",e)},expression:"item.specifications"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",attrs:{label:"备注"},model:{value:a.productRemark,callback:function(e){t.$set(a,"productRemark",e)},expression:"item.productRemark"}})],1)]),t.form.orderProductAssociates.length>1?e("div",[e("icon-btn",{attrs:{small:""},on:{click:function(a){return t.form.orderProductAssociates.splice(s,1)}}},[t._v("close")])],1):t._e()])})),e("div",{staticClass:"card a flex-center",on:{click:function(a){return t.addItem()}}},[t._m(0)]),e("div",{staticClass:"flex-v-center"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{type:"number",label:"总计数量"},model:{value:t.form.totalCount,callback:function(a){t.$set(t.form,"totalCount",t._n(a))},expression:"form.totalCount"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{type:"number",label:"总价"},model:{value:t.form.totalPrice,callback:function(a){t.$set(t.form,"totalPrice",t._n(a))},expression:"form.totalPrice"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{type:"number",label:"优惠后总价"},model:{value:t.form.discountTotalPrice,callback:function(a){t.$set(t.form,"discountTotalPrice",t._n(a))},expression:"form.discountTotalPrice"}})],1),e("p",{staticStyle:{color:"#ccc"}},[t._v("* 提交后会自动下载该填写订单表格")]),e("div",{staticClass:"flex"},[e("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(a){return t.submit()}}},[t._v("提交")]),e("btn",{attrs:{big:"",flat:""},on:{click:t.reset}},[t._v("重置")])],1)],2),t.loading?e("layer",[e("div",{staticClass:"abs t-center",staticStyle:{padding:"20px"}},[e("loading",{attrs:{size:"30"}}),e("div",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.loadingMsg))])],1)]):t._e()],1)},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"flex-v-center"},[e("i",{staticClass:"icon mr-10"},[t._v("add")]),e("span",[t._v("添加供货产品列表")])])}],i={name:"order-create",data:function(){return{loading:!1,demandNameList:[{text:"北京好利阀业集团有限公司",value:"北京好利阀业集团有限公司"},{text:"北京好利时代科技发展有限公司",value:"北京好利时代科技发展有限公司"},{text:"北京艾森哈特技术服务有限公司",value:"北京艾森哈特技术服务有限公司"},{text:"上海好利阀门技术有限公司 ",value:"上海好利阀门技术有限公司 "},{text:"北京大宇公司",value:"北京大宇公司"}],demandPhoneList:[{text:"010-89229051",value:"010-89229051"},{text:"010-67180119",value:"010-67180119"},{text:"1350102569",value:"1350102569"},{text:"021-24206461",value:"021-24206461"},{text:"010-67110192",value:"010-67110192"}],demandAddressList:[{text:"北京市大兴区榆垡镇榆顺路6号",value:"北京市大兴区榆垡镇榆顺路6号"},{text:"北京市大兴区榆垡镇榆顺路6号",value:"北京市大兴区榆垡镇榆顺路6号"},{text:"北京市大兴区泰禾中央广场E座503",value:"北京市大兴区泰禾中央广场E座503"},{text:"上海市闵行区兴梅路375号",value:"上海市闵行区兴梅路375号"},{text:"北京市东城区广渠门内大街90号新裕商务大厦506",value:"北京市东城区广渠门内大街90号新裕商务大厦506"}],form:{totalCount:0,totalPrice:0,discountTotalPrice:0,orderProductAssociates:[{productNo:"",productName:"",lable:"",productModel:"",productColor:"",productNumber:"",price:0,totalPrice:0,materialDescription:"",specifications:"",productRemark:""}]}}},mounted:function(){},methods:{addItem:function(){this.form.orderProductAssociates.push({productNo:"",productName:"",lable:"",productModel:"",productColor:"",productNumber:"",price:0,totalPrice:0,materialDescription:"",specifications:"",productRemark:""}),this.form.orderProductAssociates.push({}),this.$forceUpdate()},nameChange:function(){"北京好利阀业集团有限公司"==this.form.demandName?(this.form.demandAddress="北京市大兴区榆垡镇榆顺路6号",this.form.demandPhone="010-89229051"):"北京好利时代科技发展有限公司"==this.form.demandName?(this.form.demandAddress="北京市大兴区榆垡镇榆顺路6号",this.form.demandPhone="010-67180119"):"北京艾森哈特技术服务有限公司"==this.form.demandName?(this.form.demandAddress="北京市大兴区泰禾中央广场E座503",this.form.demandPhone="1350102569"):"上海好利阀门技术有限公司"==this.form.demandName?(this.form.demandAddress="上海市闵行区兴梅路375号",this.form.demandPhone="021-24206461"):"北京大宇公司"==this.form.demandName&&(this.form.demandAddress="北京市东城区广渠门内大街90号新裕商务大厦506",this.form.demandPhone="010-67110192")},submit:function(){var t=this;this.$http.post("/haolifa/order-product/generateOrder",this.form).then((function(a){location.href=a,t.$toast("创建成功并下载"),t.reset()})).catch((function(a){t.$toast(a.message||a.msg)}))},reset:function(){this.form={totalCount:0,totalPrice:0,discountTotalPrice:0,orderProductAssociates:[{productNo:"",productName:"",lable:"",productModel:"",productColor:"",productNumber:"",price:0,totalPrice:0,materialDescription:"",specifications:"",productRemark:""}]}}}},o=i,l=(e("e1d1"),e("5d22")),n=Object(l["a"])(o,s,r,!1,null,null,null);a["default"]=n.exports},"34f5":function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var s=e("7aae"),r=e.n(s);function i(t,a,e){return a in t?r()(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}},3646:function(t,a,e){},6647:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-orders-list"},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(a){t.$refs.list.update(!0),t.getOrderQty()},input:function(a){a.target.composing||t.$set(t.filter,"orderNo",a.target.value)}}}),t._v("\n            订单状态：\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderStatus,expression:"filter.orderStatus"}],staticClass:"f-14",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.filter,"orderStatus",a.target.multiple?e:e[0])},function(a){t.$refs.list.update(!0),t.getOrderQty()}]}},[e("option",{attrs:{value:"-1"}},[t._v("全部")]),t._l(t.newOrderStatusList,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(t._s(a.text))])}))],2),t._v("\n            发货状态：\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.deliverStatus,expression:"filter.deliverStatus"}],staticClass:"f-14",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.filter,"deliverStatus",a.target.multiple?e:e[0])},function(a){t.$refs.list.update(!0),t.getOrderQty()}]}},[e("option",{attrs:{value:"-1"}},[t._v("全部")]),e("option",{attrs:{value:"0"}},[t._v("待发货")]),e("option",{attrs:{value:"1"}},[t._v("部分发货")]),e("option",{attrs:{value:"2"}},[t._v("发货完成")])]),e("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")]),t._v("\n            开始时间:\n            "),e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",editable:!1,placeholder:"选择年月日"},on:{change:function(a){t.$refs.list.update(!0),t.getOrderQty()}},model:{value:t.filter.startDate,callback:function(a){t.$set(t.filter,"startDate",a)},expression:"filter.startDate"}}),t._v("结束时间:\n            "),e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",editable:!1,placeholder:"选择年月日"},on:{change:function(a){t.$refs.list.update(!0),t.getOrderQty()}},model:{value:t.filter.endDate,callback:function(a){t.$set(t.filter,"endDate",a)},expression:"filter.endDate"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.demandName,expression:"filter.demandName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"需方"},domProps:{value:t.filter.demandName},on:{change:function(a){t.$refs.list.update(!0),t.getOrderQty()},input:function(a){a.target.composing||t.$set(t.filter,"demandName",a.target.value)}}})],1),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-v-center tool-bar"},[e("span",{staticClass:"f-16",staticStyle:{"margin-left":"10px",color:"#008eff"}},[t._v("订单产品总数量:"+t._s(t.orderQty))]),e("span",{staticClass:"f-16",staticStyle:{"margin-left":"10px",color:"#008eff"}},[t._v("订单产品已发货数量:"+t._s(t.deliveryOrderQty))])]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{param:t.filter,url:"/haolifa/order-product/pageInfo",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,r=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(r))]),e("td",[t._v(t._s(s.orderNo))]),e("td",[t._v(t._s(s.demandName))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(s.deliveryDate))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(s.totalCount))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(t.deliverStatusList[s.deliverStatus].text))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(t.orderStatusList[s.orderStatus].text))]),e("td",[t._v(t._s(s.createTime))]),e("td",{staticClass:"t-right"},[0!=s.orderStatus?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.approveProgress(s)}}},[t._v("审批进度|")]):t._e(),e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.infoShow(s)}}},[t._v("详情")])])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("订单编号")]),e("th",[t._v("需方")]),e("th",[t._v("发货日期")]),e("th",[t._v("订单数量")]),e("th",[t._v("发货状态")]),e("th",[t._v("订单状态")]),e("th",[t._v("创建时间")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?e("layer",{attrs:{title:"详情",width:"80%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单编号 : "+t._s(t.info.orderNo))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("发货日期 : "+t._s(t.info.deliveryDate))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单状态 : "+t._s(t.orderStatusList[t.info.orderStatus].text))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("\n                            订单合同:\n                            "),e("a",{staticStyle:{"margin-right":"15px"},attrs:{href:t.info.orderContractUrl}},[t._v("下载")]),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:t.info.orderContractUrl}},[t._v("预览")]):t._e(),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+t.info.orderContractUrl}},[t._v("预览")]),e("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.getPreCheckMater(t.info.orderNo)}}},[t._v("核料清单")])])]),e("tr",[t.fileDetailList.length?e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:")]):e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:无")])]),t._l(t.fileDetailList,(function(a,s){return e("tr",{key:s},[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v(t._s(a.fileName))]),e("td",{staticClass:"b",attrs:{colspan:"12"}},[a.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:a.fileUrl}},[t._v("预览")]):t._e(),a.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+a.fileUrl}},[t._v("预览")])])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配车间: "+t._s(t.info.assemblyShop))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配小组: "+t._s(t.info.assemblyGroup))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("采购反馈时间: "+t._s(t.info.purchaseFeedbackTime))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("生产反馈时间: "+t._s(t.info.productionFeedbackTime))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("技术清单:")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("产品名称")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("型号")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("规格")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("数量")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("上法兰标准")]),e("td",{attrs:{colspan:"3",rowspan:"1"}},[t._v("上法兰尺寸")]),e("td",{attrs:{colspan:"4",rowspan:"1"}},[t._v("出轴尺寸")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("静扭矩")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("执行器型号")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("连接孔")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("角度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("中心距")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴型式")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴长度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("轴图号")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("过渡盘")])]),t._l(JSON.parse(t.info.technicalRequire),(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.name))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.xinhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.guige))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.num))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.biaozhun))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.lianjiek))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jiaodu))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.zhongxinju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.xinshi))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.length))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.tuhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.guodupan))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jinniuju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jishuxinhao))])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单产品列表")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品编号")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("标签属性")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("颜色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总计价格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("材质说明")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品备注")])]),t._l(t.info.orderProductAssociates,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productNo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productModel))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.lable))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.specifications))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productColor))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalPrice))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.materialDescription))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productRemark))])])})),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批附件:")])]):t._e(),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件名称")]),e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件地址")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("——")])]):t._e(),t._l(t.accessoryList,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"6"}},[t._v(t._s(a.fileName))]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(a.fileUrl))]),e("td",{attrs:{colspan:"2"}},[a.fileUrl.match(".(doc|docx|xls|xlsx)$")?t._e():e("a",{attrs:{target:"_blank",href:a.fileUrl}},[t._v("预览")]),a.fileUrl.match(".(doc|docx|xls|xlsx)$")?e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+a.fileUrl}},[t._v("预览")]):t._e()])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审核信息")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v("流程节点")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("角色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("审核人")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核状态")]),e("td",{staticClass:"b",attrs:{colspan:"4"}},[t._v("审核意见")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核时间")])]),t._l(t.processList,(function(a){return e("tr",{key:a.stepName},[e("td",{attrs:{colspan:"3"}},[t._v(t._s(a.stepName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.roleName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.auditUserName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.statusList[a.auditResult]))]),e("td",{attrs:{colspan:"4"}},[t._v(t._s(a.auditInfo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.auditTime))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e(),t.btnFlag?e("layer",{staticStyle:{"z-index":"101"},attrs:{title:"核料清单详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("核料清单")])]),e("tr",[e("th",[t._v("物料名称")]),e("th",{attrs:{colspan:"3"}},[t._v("物料图号")]),e("th",{attrs:{colspan:"2"}},[t._v("型号")]),e("th",[t._v("规格")]),e("th",[t._v("单位")]),e("th",[t._v("需要数量")]),e("th",[t._v("缺少数量")]),e("th",[t._v("核料状态")]),e("th",[t._v("是否替换")]),e("th",[t._v("替换零件")]),e("th",[t._v("备注")])]),t._l(t.preCheckMaterList,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.model))]),e("td",[t._v(t._s(a.specifications))]),e("td",[t._v(t._s(a.unit))]),e("td",[t._v(t._s(a.materialCount))]),e("td",[t._v(t._s(a.lackMaterialCount))]),e("td",[t._v(t._s(t.checkStatusList[a.checkStatus-1].text))]),e("td",[t._v(t._s(3==a.checkStatus?"是":"否"))]),e("td",[t._v(t._s(a.replaceMaterialGraphNo))]),e("td",[t._v(t._s(a.remark))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(a){t.btnFlag=!1}}},[t._v("关闭")])],1)]):t._e()],1)},r=[],i=(e("4890"),e("566e"),e("1bc78"),e("246f"),e("9b68")),o={name:"page-orders-list",components:{DataList:i["a"]},data:function(){return{btnFlag:!1,layer:!1,loading:!1,deliverStatusList:[{value:0,text:"待发货"},{value:1,text:"部分发货"},{value:2,text:"发货完成"}],orderQty:"",deliveryOrderQty:"",orderStatusList:[{value:0,text:"创建"},{value:1,text:"审批中"},{value:2,text:"核料中"},{value:3,text:"替换料审批中"},{value:4,text:"核料完成"},{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:8,text:"生产暂停"},{value:9,text:"生产完成"},{value:10,text:"质检中"},{value:11,text:"已入库"},{value:12,text:"申请发货"},{value:13,text:"发货完成"},{value:14,text:"审核不通过"}],newOrderStatusList:[{value:0,text:"创建"},{value:1,text:"审批中"},{value:2,text:"核料中"},{value:3,text:"替换料审批中"},{value:4,text:"核料完成"},{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:9,text:"生产完成"},{value:14,text:"审核不通过"}],filter:{orderNo:"",orderStatus:-1,deliverStatus:-1,startDate:"",endDate:"",demandName:""},info:{},arr:[{name:"",xinhao:"",guige:"",num:"",biaozhun:"",lianjiek:"",jiaodu:"",zhongxinju:"",xinshi:"",length:"",tuhao:"",jinniuju:"",guodupan:"",jishuxinhao:""}],preCheckMaterList:[],accessoryList:[],checkStatusList:[{value:1,text:"成功"},{value:2,text:"待采购"},{value:3,text:"可替换"}],fileDetailList:[],processList:[],statusList:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},created:function(){this.getOrderQty()},methods:{getAccessory:function(t){var a=this;this.$http.get("/haolifa/flowInstance/flow/accessoryInfo?formNo=".concat(t,"&formId=0")).then((function(t){t.forEach((function(t){""!=t.fileUrl&&a.accessoryList.push(t)}))})).catch((function(t){a.$toast(t.msg||t.message)}))},getOrderStatusList:function(){var t=this;this.$http.get("/haolifa/order-product/order-status-list").then((function(a){t.orderStatusList=a.map((function(t){return{value:t.code,text:t.desc}}))}))},getPreCheckMater:function(t){var a=this;this.btnFlag=!0,this.$http.get("/haolifa/order-product/order-material?orderNo=".concat(t)).then((function(t){a.preCheckMaterList=t})).catch((function(t){a.$toast(t.msg||t.message)}))},progress:function(t){var a=this,e="";this.$http.post("/haolifa/flowInstance/create",{flowId:1,formId:t.id,formType:1,formNo:t.orderNo,summary:"生产订单审批"}).then((function(s){e=s.instanceId,a.$http.post("/haolifa/order-product/updateStatus",{orderNo:t.orderNo,status:1}).then((function(t){a.loading=!1,a.$toast("发起流程成功,流程ID: ".concat(e))}))}))},approveProgress:function(t){this.$router.push("/order/approveProgress?formNo=".concat(t.orderNo,"&formId=0"))},infoShow:function(t){var a=this;this.layer=!0,this.getInfo(t.orderNo),this.getAccessory(t.orderNo),this.getProcess(t),this.$http.get("/haolifa/order-product/accessory?orderNo=".concat(t.orderNo)).then((function(t){a.fileDetailList=t})).catch((function(t){a.$toast(t.msg||t.message)}))},getProcess:function(t){var a=this;this.$http.get("/haolifa/flowInstance/flow/progress/?formNo=".concat(t.orderNo)).then((function(t){a.processList=t})).catch((function(t){a.$toast(t.msg||t.message)}))},getInfo:function(t){var a=this;this.$http.get("/haolifa/order-product/details?orderNo=".concat(t)).then((function(t){a.info=t})).catch((function(t){a.$toast(t.msg||t.message)}))},close:function(){this.layer=!1,this.accessoryList=[]},remove:function(t){var a=this;this.$confirm({title:"删除确认",text:"您确定要删除以下发货通知单吗？<br>".concat(t.deliveryNo),color:"red",btns:["取消","删除"],yes:function(){a.$http.delete("/haolifa/order-product/delete/".concat(t.id)).then((function(t){a.$toast("删除成功"),a.$refs.list.update()})).catch((function(t){a.$toast(t.msg)}))}})},getOrderQty:function(){var t=this;this.$http.post("/haolifa/statistics/order-product",this.filter).then((function(a){t.orderQty=a.orderQty,t.deliveryOrderQty=a.deliveryOrderQty})).catch((function(a){t.$toast(a.msg)}))}}},l=o,n=(e("e715"),e("5d22")),c=Object(n["a"])(l,s,r,!1,null,null,null);a["default"]=c.exports},"6ea9":function(t,a,e){"use strict";e("b961")},"74ee":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-orders-list"},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(a){t.$refs.list.update(!0),t.getOrderQty()},input:function(a){a.target.composing||t.$set(t.filter,"orderNo",a.target.value)}}}),t._v("\n            订单状态：\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderStatus,expression:"filter.orderStatus"}],staticClass:"f-14",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.filter,"orderStatus",a.target.multiple?e:e[0])},function(a){t.$refs.list.update(!0),t.getOrderQty()}]}},[e("option",{attrs:{value:"-1"}},[t._v("全部")]),t._l(t.newOrderStatusList,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(t._s(a.text))])}))],2),t._v("\n            发货状态：\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.deliverStatus,expression:"filter.deliverStatus"}],staticClass:"f-14",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.filter,"deliverStatus",a.target.multiple?e:e[0])},function(a){t.$refs.list.update(!0),t.getOrderQty()}]}},[e("option",{attrs:{value:"-1"}},[t._v("全部")]),e("option",{attrs:{value:"0"}},[t._v("待发货")]),e("option",{attrs:{value:"1"}},[t._v("部分发货")]),e("option",{attrs:{value:"2"}},[t._v("发货完成")])]),e("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")]),t._v("\n            开始时间:\n            "),e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",editable:!1,placeholder:"选择年月日"},on:{change:function(a){t.$refs.list.update(!0),t.getOrderQty()}},model:{value:t.filter.startDate,callback:function(a){t.$set(t.filter,"startDate",a)},expression:"filter.startDate"}}),t._v("结束时间:\n            "),e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",editable:!1,placeholder:"选择年月日"},on:{change:function(a){t.$refs.list.update(!0),t.getOrderQty()}},model:{value:t.filter.endDate,callback:function(a){t.$set(t.filter,"endDate",a)},expression:"filter.endDate"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.demandName,expression:"filter.demandName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"需方"},domProps:{value:t.filter.demandName},on:{change:function(a){t.$refs.list.update(!0),t.getOrderQty()},input:function(a){a.target.composing||t.$set(t.filter,"demandName",a.target.value)}}})],1),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-v-center tool-bar"},[e("span",{staticClass:"f-16",staticStyle:{"margin-left":"10px",color:"#008eff"}},[t._v("订单产品总数量:"+t._s(t.orderQty))]),e("span",{staticClass:"f-16",staticStyle:{"margin-left":"10px",color:"#008eff"}},[t._v("订单产品已发货数量:"+t._s(t.deliveryOrderQty))])]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{param:t.filter,url:"/haolifa/order-product/pageInfo",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,r=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(r))]),e("td",[t._v(t._s(s.orderNo))]),e("td",[t._v(t._s(s.demandName))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(s.deliveryDate))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(s.totalCount))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(t.deliverStatusList[s.deliverStatus].text))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(t.orderStatusList[s.orderStatus].text))]),e("td",[t._v(t._s(s.createTime))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.uploadShow(s)}}},[t._v("重新上传")]),e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.editShow(s)}}},[t._v("编辑")]),e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.infoShow(s)}}},[t._v("详情")])])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("订单编号")]),e("th",[t._v("需方")]),e("th",[t._v("发货日期")]),e("th",[t._v("订单数量")]),e("th",[t._v("发货状态")]),e("th",[t._v("订单状态")]),e("th",[t._v("创建时间")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?e("layer",{attrs:{title:"详情",width:"80%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单编号 : "+t._s(t.info.orderNo))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("发货日期 : "+t._s(t.info.deliveryDate))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单状态 : "+t._s(t.orderStatusList[t.info.orderStatus].text))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("\n                            订单合同:\n                            "),e("a",{staticStyle:{"margin-right":"15px"},attrs:{href:t.info.orderContractUrl}},[t._v("下载")]),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:t.info.orderContractUrl}},[t._v("预览")]):t._e(),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+t.info.orderContractUrl}},[t._v("预览")]),e("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.getPreCheckMater(t.info.orderNo)}}},[t._v("核料清单")])])]),e("tr",[t.fileDetailList.length?e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:")]):e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:无")])]),t._l(t.fileDetailList,(function(a,s){return e("tr",{key:s},[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v(t._s(a.fileName))]),e("td",{staticClass:"b",attrs:{colspan:"12"}},[a.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:a.fileUrl}},[t._v("预览")]):t._e(),a.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+a.fileUrl}},[t._v("预览")])])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配车间: "+t._s(t.info.assemblyShop))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配小组: "+t._s(t.info.assemblyGroup))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("采购反馈时间: "+t._s(t.info.purchaseFeedbackTime))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("生产反馈时间: "+t._s(t.info.productionFeedbackTime))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("技术清单:")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("产品名称")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("型号")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("规格")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("数量")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("上法兰标准")]),e("td",{attrs:{colspan:"3",rowspan:"1"}},[t._v("上法兰尺寸")]),e("td",{attrs:{colspan:"4",rowspan:"1"}},[t._v("出轴尺寸")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("静扭矩")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("执行器型号")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("连接孔")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("角度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("中心距")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴型式")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴长度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("轴图号")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("过渡盘")])]),t._l(JSON.parse(t.info.technicalRequire),(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.name))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.xinhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.guige))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.num))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.biaozhun))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.lianjiek))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jiaodu))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.zhongxinju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.xinshi))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.length))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.tuhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.guodupan))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jinniuju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jishuxinhao))])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单产品列表")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品编号")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("标签属性")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("颜色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总计价格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("材质说明")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品备注")])]),t._l(t.info.orderProductAssociates,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productNo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productModel))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.lable))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.specifications))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productColor))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalPrice))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.materialDescription))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productRemark))])])})),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批附件:")])]):t._e(),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件名称")]),e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件地址")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("——")])]):t._e(),t._l(t.accessoryList,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"6"}},[t._v(t._s(a.fileName))]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(a.fileUrl))]),e("td",{attrs:{colspan:"2"}},[a.fileUrl.match(".(doc|docx|xls|xlsx)$")?t._e():e("a",{attrs:{target:"_blank",href:a.fileUrl}},[t._v("预览")]),a.fileUrl.match(".(doc|docx|xls|xlsx)$")?e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+a.fileUrl}},[t._v("预览")]):t._e()])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审核信息")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v("流程节点")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("角色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("审核人")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核状态")]),e("td",{staticClass:"b",attrs:{colspan:"4"}},[t._v("审核意见")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核时间")])]),t._l(t.processList,(function(a){return e("tr",{key:a.stepName},[e("td",{attrs:{colspan:"3"}},[t._v(t._s(a.stepName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.roleName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.auditUserName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.statusList[a.auditResult]))]),e("td",{attrs:{colspan:"4"}},[t._v(t._s(a.auditInfo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.auditTime))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.close}},[t._v("关闭")])],1)]):t._e(),t.btnFlag?e("layer",{staticStyle:{"z-index":"101"},attrs:{title:"核料清单详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("核料清单")])]),e("tr",[e("th",[t._v("物料名称")]),e("th",{attrs:{colspan:"3"}},[t._v("物料图号")]),e("th",{attrs:{colspan:"2"}},[t._v("型号")]),e("th",[t._v("规格")]),e("th",[t._v("单位")]),e("th",[t._v("需要数量")]),e("th",[t._v("缺少数量")]),e("th",[t._v("核料状态")]),e("th",[t._v("是否替换")]),e("th",[t._v("替换零件")]),e("th",[t._v("备注")])]),t._l(t.preCheckMaterList,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.model))]),e("td",[t._v(t._s(a.specifications))]),e("td",[t._v(t._s(a.unit))]),e("td",[t._v(t._s(a.materialCount))]),e("td",[t._v(t._s(a.lackMaterialCount))]),e("td",[t._v(t._s(t.checkStatusList[a.checkStatus-1].text))]),e("td",[t._v(t._s(3==a.checkStatus?"是":"否"))]),e("td",[t._v(t._s(a.replaceMaterialGraphNo))]),e("td",[t._v(t._s(a.remark))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(a){t.btnFlag=!1}}},[t._v("关闭")])],1)]):t._e(),t.editFlag?e("layer",{attrs:{title:"订单编辑",width:"70%"}},[e("div",{staticClass:"layer-text"},t._l(t.productList,(function(a,s){return e("div",{key:s,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[e("div",{staticClass:"flex-item mr-20 ml-20"},[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{disabled:!0,label:"产品ID"},model:{value:a.productNo,callback:function(e){t.$set(a,"productNo",e)},expression:"item.productNo"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{disabled:!0,label:"名称"},model:{value:a.productName,callback:function(e){t.$set(a,"productName",e)},expression:"item.productName"}}),e("input-box",{staticClass:"mr-10",attrs:{disabled:!0,label:"标签属性"},model:{value:a.lable,callback:function(e){t.$set(a,"lable",e)},expression:"item.lable"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{disabled:!0,label:"规格"},model:{value:a.productModel,callback:function(e){t.$set(a,"productModel",e)},expression:"item.productModel"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{disabled:!0,label:"颜色"},model:{value:a.productColor,callback:function(e){t.$set(a,"productColor",e)},expression:"item.productColor"}}),e("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"数量"},model:{value:a.productNumber,callback:function(e){t.$set(a,"productNumber",t._n(e))},expression:"item.productNumber"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单价"},model:{value:a.price,callback:function(e){t.$set(a,"price",t._n(e))},expression:"item.price"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{disabled:!0,label:"合计"},model:{value:a.totalPrice,callback:function(e){t.$set(a,"totalPrice",t._n(e))},expression:"item.totalPrice"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"材质说明"},model:{value:a.materialDescription,callback:function(e){t.$set(a,"materialDescription",e)},expression:"item.materialDescription"}}),e("input-box",{staticClass:"flex-item mr-20",attrs:{disabled:!0,label:"特殊要求"},model:{value:a.specifications,callback:function(e){t.$set(a,"specifications",e)},expression:"item.specifications"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",attrs:{label:"备注"},model:{value:a.productRemark,callback:function(e){t.$set(a,"productRemark",e)},expression:"item.productRemark"}})],1)])])})),0),e("div",{staticClass:"flex-v-center"},[e("div",{staticStyle:{margin:"20px auto"}},[e("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(a){return t.submit()}}},[t._v("提交")]),e("btn",{attrs:{big:"",flat:""},on:{click:function(a){t.editFlag=!1}}},[t._v("取消")])],1)])]):t._e(),t.uploadFlag?e("layer",{attrs:{title:"订单上传",width:"30%"}},[e("div",{staticClass:"layer-text"},[e("div",{staticClass:"flex",staticStyle:{margin:"50px 0"}},[e("el-radio",{attrs:{label:"1"},model:{value:t.type,callback:function(a){t.type=a},expression:"type"}},[t._v("带价格")]),e("el-radio",{attrs:{label:"0"},model:{value:t.type,callback:function(a){t.type=a},expression:"type"}},[t._v("不带价格")])],1),e("div",{staticClass:"flex",staticStyle:{margin:"50px 0"}},[e("upload-box",{staticStyle:{width:"100%"},attrs:{btnText:"上传订单合同",fileList:t.fileList,onchange:t.uploadFile,onremove:t.removeFile}})],1)]),e("div",{staticClass:"flex-v-center"},[e("div",{staticStyle:{margin:"20px auto"}},[e("el-button",{staticClass:"mr-20",attrs:{type:"primary",size:"mini",loading:t.loading},on:{click:function(a){return t.uploadSubmit()}}},[t._v("提交")]),e("btn",{attrs:{big:"",flat:""},on:{click:function(a){t.uploadFlag=!1,t.fileList=[]}}},[t._v("取消")])],1)])]):t._e()],1)},r=[],i=(e("4890"),e("a450"),e("566e"),e("1bc78"),e("246f"),e("9b68")),o=e("153b"),l={name:"page-orders-list",components:{DataList:i["a"]},data:function(){return{btnFlag:!1,layer:!1,loading:!1,uploadFlag:!1,loadingMsg:"",fileList:[],deliverStatusList:[{value:0,text:"待发货"},{value:1,text:"部分发货"},{value:2,text:"发货完成"}],type:"1",orderQty:"",deliveryOrderQty:"",orderStatusList:[{value:0,text:"创建"},{value:1,text:"审批中"},{value:2,text:"核料中"},{value:3,text:"替换料审批中"},{value:4,text:"核料完成"},{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:8,text:"生产暂停"},{value:9,text:"生产完成"},{value:10,text:"质检中"},{value:11,text:"已入库"},{value:12,text:"申请发货"},{value:13,text:"发货完成"},{value:14,text:"审核不通过"}],newOrderStatusList:[{value:0,text:"创建"},{value:1,text:"审批中"},{value:2,text:"核料中"},{value:3,text:"替换料审批中"},{value:4,text:"核料完成"},{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:9,text:"生产完成"},{value:14,text:"审核不通过"}],filter:{orderNo:"",orderStatus:-1,deliverStatus:-1,startDate:"",endDate:"",demandName:""},info:{},arr:[{name:"",xinhao:"",guige:"",num:"",biaozhun:"",lianjiek:"",jiaodu:"",zhongxinju:"",xinshi:"",length:"",tuhao:"",jinniuju:"",guodupan:"",jishuxinhao:""}],preCheckMaterList:[],accessoryList:[],checkStatusList:[{value:1,text:"成功"},{value:2,text:"待采购"},{value:3,text:"可替换"}],fileDetailList:[],processList:[],statusList:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"},editFlag:!1,productList:[],submitPro:[],infoFileUrl:"",infoOrderNo:""}},created:function(){this.getOrderQty()},methods:{getAccessory:function(t){var a=this;this.$http.get("/haolifa/flowInstance/flow/accessoryInfo?formNo=".concat(t,"&formId=0")).then((function(t){t.forEach((function(t){""!=t.fileUrl&&a.accessoryList.push(t)}))})).catch((function(t){a.$toast(t.msg||t.message)}))},getOrderStatusList:function(){var t=this;this.$http.get("/haolifa/order-product/order-status-list").then((function(a){t.orderStatusList=a.map((function(t){return{value:t.code,text:t.desc}}))}))},uploadShow:function(t){this.uploadFlag=!0,this.infoOrderNo=t.orderNo},uploadFile:function(t,a){var e=this;this.loading=!0,this.loadingMsg="正在上传",Object(o["a"])(t.source).then((function(a){e.$http.post("/haolifa/file/uploadFileBase64",{base64Source:a,fileName:t.name}).then((function(t){e.infoFileUrl=t,e.loading=!1})).catch((function(t){e.$toast(t.msg||t.message),e.loading=!1}))}))},removeFile:function(){var t=this;return new Promise((function(a,e){t.infoFileUrl="",a()}))},uploadSubmit:function(){var t=this;this.infoFileUrl?this.$http.post("/haolifa/order-product/cover-order-excel",{orderNo:this.infoOrderNo,orderContractUrl:this.infoFileUrl,type:this.type}).then((function(a){t.uploadFlag=!1,t.$toast("上传成功"),t.infoFileUrl="",t.fileList=[],t.$refs.list.update(!0)})).catch((function(a){t.$toast(a.msg||a.message)})):this.$toast("请先选择上传订单合同")},getPreCheckMater:function(t){var a=this;this.btnFlag=!0,this.$http.get("/haolifa/order-product/order-material?orderNo=".concat(t)).then((function(t){a.preCheckMaterList=t})).catch((function(t){a.$toast(t.msg||t.message)}))},progress:function(t){var a=this,e="";this.$http.post("/haolifa/flowInstance/create",{flowId:1,formId:t.id,formType:1,formNo:t.orderNo,summary:"生产订单审批"}).then((function(s){e=s.instanceId,a.$http.post("/haolifa/order-product/updateStatus",{orderNo:t.orderNo,status:1}).then((function(t){a.loading=!1,a.$toast("发起流程成功,流程ID: ".concat(e))}))}))},approveProgress:function(t){this.$router.push("/order/approveProgress?formNo=".concat(t.orderNo,"&formId=0"))},infoShow:function(t){var a=this;this.layer=!0,this.getInfo(t.orderNo),this.getAccessory(t.orderNo),this.getProcess(t),this.$http.get("/haolifa/order-product/accessory?orderNo=".concat(t.orderNo)).then((function(t){a.fileDetailList=t})).catch((function(t){a.$toast(t.msg||t.message)}))},editShow:function(t){var a=this;this.editFlag=!0,this.$http.get("/haolifa/order-product/product-list?orderNo=".concat(t.orderNo)).then((function(t){a.productList=t})).catch((function(t){a.$toast(t.msg||t.message)}))},submit:function(){var t=this;this.submitPro=[],this.productList.map((function(a,e){var s={};s.id=a.id,s.orderNo=a.orderNo,s.price=a.price,s.productNumber=a.productNumber,s.totalPrice=a.totalPrice,t.submitPro.push(s)})),this.$http.post("/haolifa/order-product/update-associate-info",this.submitPro).then((function(a){t.$toast("修改成功"),t.$refs.list.update(!0),t.editFlag=!1})).catch((function(a){t.$toast(a.msg||a.message)}))},getProcess:function(t){var a=this;this.$http.get("/haolifa/flowInstance/flow/progress/?formNo=".concat(t.orderNo)).then((function(t){a.processList=t})).catch((function(t){a.$toast(t.msg||t.message)}))},getInfo:function(t){var a=this;this.$http.get("/haolifa/order-product/details?orderNo=".concat(t)).then((function(t){a.info=t})).catch((function(t){a.$toast(t.msg||t.message)}))},close:function(){this.layer=!1,this.accessoryList=[]},remove:function(t){var a=this;this.$confirm({title:"删除确认",text:"您确定要删除以下发货通知单吗？<br>".concat(t.deliveryNo),color:"red",btns:["取消","删除"],yes:function(){a.$http.delete("/haolifa/order-product/delete/".concat(t.id)).then((function(t){a.$toast("删除成功"),a.$refs.list.update()})).catch((function(t){a.$toast(t.msg)}))}})},getOrderQty:function(){var t=this;this.$http.post("/haolifa/statistics/order-product",this.filter).then((function(a){t.orderQty=a.orderQty,t.deliveryOrderQty=a.deliveryOrderQty})).catch((function(a){t.$toast(a.msg)}))}}},n=l,c=(e("8ec6"),e("5d22")),d=Object(c["a"])(n,s,r,!1,null,null,null);a["default"]=d.exports},"7aae":function(t,a,e){t.exports=e("f263")},8730:function(t,a,e){},"893f":function(t,a,e){},"8ec6":function(t,a,e){"use strict";e("3646")},"92be":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-orders-list"},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(a){return t.$refs.list.update(!0)},input:function(a){a.target.composing||t.$set(t.filter,"orderNo",a.target.value)}}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderStatus,expression:"filter.orderStatus"}],staticClass:"f-14",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.filter,"orderStatus",a.target.multiple?e:e[0])},function(a){return t.$refs.list.update(!0)}]}},t._l(t.orderStatusList,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(t._s(a.text))])})),0),e("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{param:t.filter,url:"/haolifa/order-product/pageInfo",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,r=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(r))]),e("td",[t._v(t._s(s.orderNo))]),e("td",[e("a",{staticClass:"fixed-length",attrs:{href:s.orderContractExtendUrl,title:s.orderContractExtendUrl}},[t._v(t._s(s.orderContractExtendUrl))])]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(s.deliveryDate))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(s.totalCount))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(s.qualifiedNumber))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(t.deliverStatusList[s.deliverStatus].text))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(t.orderStatusList[s.orderStatus-5].text))]),e("td",[t._v(t._s(s.createTime))]),e("td",{staticClass:"t-right"},[7==s.orderStatus||8==s.orderStatus||9==s.orderStatus?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.inspectHistorys(s)}}},[t._v("质检记录|")]):t._e(),e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.getInfo(s.orderNo)}}},[t._v("详情")])])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("订单编号")]),e("th",{staticStyle:{width:"50px"}},[t._v("订单合同URL")]),e("th",[t._v("发货日期")]),e("th",[t._v("订单数量")]),e("th",[t._v("检验合格数量")]),e("th",[t._v("发货状态")]),e("th",[t._v("订单状态")]),e("th",[t._v("创建时间")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?e("layer",{attrs:{title:"详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单编号 : "+t._s(t.info.orderNo))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("发货日期 : "+t._s(t.info.deliveryDate))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单状态 : "+t._s(t.orderStatusList[t.info.orderStatus-5].text))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("\n                            订单合同:\n                            "),e("a",{staticStyle:{"margin-right":"15px"},attrs:{href:t.info.orderContractUrl}},[t._v("下载")]),e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+t.info.orderContractUrl}},[t._v("预览")]),e("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.getPreCheckMater(t.info.orderNo)}}},[t._v("核料清单")])])]),e("tr",[t.fileDetailList.length?e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:")]):e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:无")])]),t._l(t.fileDetailList,(function(a,s){return e("tr",{key:s},[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v(t._s(a.fileName))]),e("td",{staticClass:"b",attrs:{colspan:"12"}},[a.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:a.fileUrl}},[t._v("预览")]):t._e(),a.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+a.fileUrl}},[t._v("预览")])])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配车间: "+t._s(t.info.assemblyShop))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配小组: "+t._s(t.info.assemblyGroup))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("采购反馈时间: "+t._s(t.info.purchaseFeedbackTime))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("生产反馈时间: "+t._s(t.info.productionFeedbackTime))])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("产品名称")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("型号")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("规格")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("数量")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("上法兰标准")]),e("td",{attrs:{colspan:"3",rowspan:"1"}},[t._v("上法兰尺寸")]),e("td",{attrs:{colspan:"4",rowspan:"1"}},[t._v("出轴尺寸")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("静扭矩")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("执行器型号")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("连接孔")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("角度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("中心距")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴型式")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴长度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("轴图号")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("过渡盘")])]),t._l(JSON.parse(t.info.technicalRequire),(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.name))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.xinhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.guige))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.num))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.biaozhun))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.lianjiek))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jiaodu))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.zhongxinju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.xinshi))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.length))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.tuhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.guodupan))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jinniuju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jishuxinhao))])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单产品列表")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品编号")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("标签属性")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("颜色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总计价格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("材质说明")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品备注")])]),t._l(t.info.orderProductAssociates,(function(a,s){return e("tr",{key:"qq"+s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productNo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productModel))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.lable))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.specifications))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productColor))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.price))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalPrice))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.materialDescription))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productRemark))])])})),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批附件:")])]):t._e(),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件名称")]),e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件地址")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("——")])]):t._e(),t._l(t.accessoryList,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"6"}},[t._v(t._s(a.fileName))]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(a.fileUrl))]),e("td",{attrs:{colspan:"2"}},[a.fileUrl.match(".(doc|docx|xls|xlsx)$")?t._e():e("a",{attrs:{target:"_blank",href:a.fileUrl}},[t._v("预览")]),a.fileUrl.match(".(doc|docx|xls|xlsx)$")?e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+a.fileUrl}},[t._v("预览")]):t._e()])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批信息")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v("流程节点")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("角色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("审核人")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核状态")]),e("td",{staticClass:"b",attrs:{colspan:"4"}},[t._v("审核意见")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核时间")])]),t._l(t.processList,(function(a){return e("tr",{key:a.stepName},[e("td",{attrs:{colspan:"3"}},[t._v(t._s(a.stepName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.roleName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.auditUserName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.statusList[a.auditResult]))]),e("td",{attrs:{colspan:"4"}},[t._v(t._s(a.info))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.auditTime))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.closeLayer}},[t._v("关闭")])],1)]):t._e(),t.btnFlag?e("layer",{staticStyle:{"z-index":"101"},attrs:{title:"核料清单详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("核料清单")])]),e("tr",[e("th",[t._v("物料名称")]),e("th",{attrs:{colspan:"2"}},[t._v("物料图号")]),e("th",{attrs:{colspan:"2"}},[t._v("型号")]),e("th",[t._v("规格")]),e("th",[t._v("单价")]),e("th",[t._v("单位")]),e("th",[t._v("需要数量")]),e("th",[t._v("缺少数量")]),e("th",[t._v("核料状态")]),e("th",[t._v("是否替换")]),e("th",[t._v("替换零件")]),e("th",[t._v("备注")])]),t._l(t.preCheckMaterList,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.model))]),e("td",[t._v(t._s(a.specifications))]),e("td",[t._v(t._s(a.price))]),e("td",[t._v(t._s(a.unit))]),e("td",[t._v(t._s(a.materialCount))]),e("td",[t._v(t._s(a.lackMaterialCount))]),e("td",[t._v(t._s(t.checkStatusList[a.checkStatus-1].text))]),e("td",[t._v(t._s(3==a.checkStatus?"是":"否"))]),e("td",[t._v(t._s(a.replaceMaterialGraphNo))]),e("td",[t._v(t._s(a.remark))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(a){t.btnFlag=!1}}},[t._v("关闭")])],1)]):t._e()],1)},r=[],i=(e("1bc78"),e("246f"),e("9b68")),o={name:"cjzr-scddlb",components:{DataList:i["a"]},data:function(){return{loading:!1,deliverStatusList:[{value:0,text:"待发货"},{value:1,text:"部分发货"},{value:2,text:"发货完成"}],orderStatusList:[{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:8,text:"生产暂停"},{value:9,text:"生产完成"}],checkStatusList:[{value:1,text:"成功"},{value:2,text:"待采购"},{value:3,text:"可替换"}],filter:{orderNo:"",orderStatus:7},preCheckMaterList:[],accessoryList:[],fileDetailList:[],btnFlag:!1,layer:!1,info:{},arr:[{name:"",xinhao:"",guige:"",num:"",biaozhun:"",lianjiek:"",jiaodu:"",zhongxinju:"",xinshi:"",length:"",tuhao:"",jinniuju:"",jishuxinhao:""}],processList:[],statusList:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},methods:{closeLayer:function(){this.layer=!1,this.accessoryList=[]},getAccessory:function(t){var a=this;this.$http.get("/haolifa/flowInstance/flow/accessoryInfo?formNo=".concat(t,"&formId=0")).then((function(t){t.forEach((function(t){""!=t.fileUrl&&a.accessoryList.push(t)}))})).catch((function(t){a.$toast(t.msg||t.message)}))},inspectHistorys:function(t){this.$router.push("/cjzr-scddlb/checked?orderNo=".concat(t.orderNo))},getInfo:function(t){var a=this;this.layer=!0,this.$http.get("/haolifa/order-product/details?orderNo=".concat(t)).then((function(t){a.info=t})).catch((function(t){a.$toast(t.msg||t.message)})),this.getAccessory(t),this.$http.get("/haolifa/order-product/accessory?orderNo=".concat(t)).then((function(t){a.fileDetailList=t})).catch((function(t){a.$toast(t.msg||t.message)})),this.getProcess(t)},getProcess:function(t){var a=this;this.$http.get("/haolifa/flowInstance/flow/progress/?formNo=".concat(t)).then((function(t){a.processList=t})).catch((function(t){a.$toast(t.msg||t.message)}))},getOrderStatusList:function(){var t=this;this.$http.get("/haolifa/order-product/order-status-list").then((function(a){for(var e in a)t.orderStatusList[a[e].code]=a[e].desc}))},getPreCheckMater:function(t){var a=this;this.btnFlag=!0,this.$http.get("/haolifa/order-product/order-material?orderNo=".concat(t)).then((function(t){a.preCheckMaterList=t})).catch((function(t){a.$toast(t.msg||t.message)}))}}},l=o,n=(e("19a8"),e("5d22")),c=Object(n["a"])(l,s,r,!1,null,null,null);a["default"]=c.exports},"9b68":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"data-list relative f-12"},[e("transition",{attrs:{name:"slide-y"}},[t.list.length?e("table",{staticClass:"data-table"},[t._t("header",[e("tr",[e("th",[t._v("表头1")]),e("th",[t._v("表头2")])])]),t._l(t.list,(function(a,s){return e("tr",{key:a.id},[t._t("item",[e("td",[t._v("数据1")]),e("td",[t._v("数据2")])],{i:s,item:a,index:(t.pageNum-1)*t.pageSize+s+1})],2)}))],2):t._e()]),e("div",{staticClass:"flex-v-center",staticStyle:{"margin-top":"10px"}},[t.list.length?e("pagination",{staticClass:"mr-20",attrs:{page:t.pageNum,size:t.pageSize,total:t.total},on:{change:t.getList}}):t._e(),t.total?e("span",{staticClass:"f-12 c-6"},[t._v("共 "+t._s(t.total)+" 条数据")]):t._e()],1),t.list.length||t.loading?t._e():e("div",{staticStyle:{"margin-top":"100px"}},[e("no-data")],1)],1)},r=[];e("e680"),e("1bc78"),e("32ea"),e("566e");function i(t){return"?"+Object.keys(t).map((function(a){return encodeURIComponent(a)+"="+encodeURIComponent(t[a])})).join("&")}var o={name:"data-list",props:{method:{type:String,default:"get"},url:{type:String,default:""},pageSize:{type:Number,default:20},param:{type:Object,default:function(){}},pageNumStr:{type:String,default:"pageNum"}},data:function(){return{pageNum:1,total:0,loading:!1,list:[]}},watch:{url:function(){this.update()},mehtod:function(){this.update()},pageSize:function(){this.update()},param:function(){this.update()}},created:function(){this.pageNum=this.$route.query.page||1,this.getList(this.pageNum)},methods:{getList:function(t){var a=this,e=this.method,s=this.url,r=this.pageSize,o=this.param;if(s){this.loading=!0;var l={pageSize:r};l[this.pageNumStr]=t;var n=Object.assign(l,o),c="get"===e?s+i(n):s;this.$http[e](c,n).then((function(t){a.list=t.list||[],a.pageNum=t.pageNum;var e=a.$route.query;e.page=t.pageNum,a.$router.push({path:a.$route.path,query:e}),a.total=t.total,a.loading=!1})).catch((function(t){a.loading=!1,a.$toast(t.message||t.msg||t)}))}},update:function(t){this.getList(t?1:this.pageNum)}}},l=o,n=(e("c8ea"),e("5d22")),c=Object(n["a"])(l,s,r,!1,null,null,null);a["a"]=c.exports},ad5e:function(t,a,e){},b0db:function(t,a,e){"use strict";e("2a1b")},b961:function(t,a,e){},bc92:function(t,a,e){},c036:function(t,a,e){"use strict";e("021d")},c8ea:function(t,a,e){"use strict";e("893f")},cbc0:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-orders-list"},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(a){return t.$refs.list.update(!0)},input:function(a){a.target.composing||t.$set(t.filter,"orderNo",a.target.value)}}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderStatus,expression:"filter.orderStatus"}],staticClass:"f-14",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.filter,"orderStatus",a.target.multiple?e:e[0])},function(a){return t.$refs.list.update(!0)}]}},t._l(t.orderStatusList,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(t._s(a.text))])})),0),e("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{param:t.filter,url:"/haolifa/order-product/pageInfo",method:"post"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,r=a.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(r))]),e("td",[t._v(t._s(s.orderNo))]),e("td",[e("a",{staticClass:"fixed-length",attrs:{href:s.orderContractExtendUrl,title:s.orderContractExtendUrl}},[t._v(t._s(s.orderContractExtendUrl))])]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(s.deliveryDate))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(s.totalCount))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(t.deliverStatusList[s.deliverStatus].text))]),e("td",{class:new Date(s.deliveryDate).getTime()<(new Date).getTime()?"cell-color":""},[t._v(t._s(t.orderStatusList[s.orderStatus-5].text))]),e("td",[t._v(t._s(s.createTime))]),e("td",{staticClass:"t-right"},[7==s.orderStatus||8==s.orderStatus||9==s.orderStatus?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.inspectHistorys(s)}}},[t._v("质检记录|")]):t._e(),e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.getInfo(s.orderNo)}}},[t._v("详情")])])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("订单编号")]),e("th",{staticStyle:{width:"50px"}},[t._v("订单合同URL")]),e("th",[t._v("发货日期")]),e("th",[t._v("订单数量")]),e("th",[t._v("发货状态")]),e("th",[t._v("订单状态")]),e("th",[t._v("创建时间")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.layer?e("layer",{attrs:{title:"详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单编号 : "+t._s(t.info.orderNo))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("发货日期 : "+t._s(t.info.deliveryDate))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单状态 : "+t._s(t.orderStatusList[t.info.orderStatus-5].text))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("\n                            订单合同:\n                            "),e("a",{staticStyle:{"margin-right":"15px"},attrs:{href:t.info.orderContractUrl}},[t._v("下载")]),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:t.info.orderContractUrl}},[t._v("预览")]):t._e(),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+t.info.orderContractUrl}},[t._v("预览")]),e("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.getPreCheckMater(t.info.orderNo)}}},[t._v("核料清单")])])]),e("tr",[t.fileDetailList.length?e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:")]):e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:无")])]),t._l(t.fileDetailList,(function(a,s){return e("tr",{key:s},[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v(t._s(a.fileName))]),e("td",{staticClass:"b",attrs:{colspan:"12"}},[a.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:a.fileUrl}},[t._v("预览")]):t._e(),a.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+a.fileUrl}},[t._v("预览")])])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配车间: "+t._s(t.info.assemblyShop))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配小组: "+t._s(t.info.assemblyGroup))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("采购反馈时间: "+t._s(t.info.purchaseFeedbackTime))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("生产反馈时间: "+t._s(t.info.productionFeedbackTime))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("技术清单:")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("产品名称")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("型号")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("规格")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("数量")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("上法兰标准")]),e("td",{attrs:{colspan:"3",rowspan:"1"}},[t._v("上法兰尺寸")]),e("td",{attrs:{colspan:"4",rowspan:"1"}},[t._v("出轴尺寸")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("静扭矩")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("执行器型号")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("连接孔")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("角度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("中心距")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴型式")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴长度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("轴图号")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("过渡盘")])]),t._l(JSON.parse(t.info.technicalRequire),(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.name))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.xinhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.guige))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.num))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.biaozhun))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.lianjiek))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jiaodu))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.zhongxinju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.xinshi))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.length))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.tuhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.guodupan))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jinniuju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.jishuxinhao))])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单产品列表")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品编号")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("标签属性")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("颜色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单价")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总计价格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("材质说明")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品备注")])]),t._l(t.info.orderProductAssociates,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productNo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productModel))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.lable))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.specifications))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productColor))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.productNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.price))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.totalPrice))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.materialDescription))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.productRemark))])])})),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批附件:")])]):t._e(),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件名称")]),e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件地址")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("——")])]):t._e(),t._l(t.accessoryList,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{colspan:"6"}},[t._v(t._s(a.fileName))]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(a.fileUrl))]),e("td",{attrs:{colspan:"2"}},[a.fileUrl.match(".(doc|docx|xls|xlsx)$")?t._e():e("a",{attrs:{target:"_blank",href:a.fileUrl}},[t._v("预览")]),a.fileUrl.match(".(doc|docx|xls|xlsx)$")?e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+a.fileUrl}},[t._v("预览")]):t._e()])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批信息")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v("流程节点")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("角色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("审核人")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核状态")]),e("td",{staticClass:"b",attrs:{colspan:"4"}},[t._v("审核意见")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核时间")])]),t._l(t.processList,(function(a){return e("tr",{key:a.stepName},[e("td",{attrs:{colspan:"3"}},[t._v(t._s(a.stepName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.roleName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(a.auditUserName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.statusList[a.auditResult]))]),e("td",{attrs:{colspan:"4"}},[t._v(t._s(a.info))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.auditTime))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:t.closeLayer}},[t._v("关闭")])],1)]):t._e(),t.btnFlag?e("layer",{staticStyle:{"z-index":"101"},attrs:{title:"核料清单详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("核料清单")])]),e("tr",[e("th",[t._v("物料名称")]),e("th",{attrs:{colspan:"2"}},[t._v("物料图号")]),e("th",{attrs:{colspan:"2"}},[t._v("型号")]),e("th",[t._v("规格")]),e("th",[t._v("单价")]),e("th",[t._v("单位")]),e("th",[t._v("需要数量")]),e("th",[t._v("缺少数量")]),e("th",[t._v("核料状态")]),e("th",[t._v("是否替换")]),e("th",[t._v("替换零件")]),e("th",[t._v("备注")])]),t._l(t.preCheckMaterList,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.materialName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.materialGraphNo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.model))]),e("td",[t._v(t._s(a.specifications))]),e("td",[t._v(t._s(a.price))]),e("td",[t._v(t._s(a.unit))]),e("td",[t._v(t._s(a.materialCount))]),e("td",[t._v(t._s(a.lackMaterialCount))]),e("td",[t._v(t._s(t.checkStatusList[a.checkStatus-1].text))]),e("td",[t._v(t._s(3==a.checkStatus?"是":"否"))]),e("td",[t._v(t._s(a.replaceMaterialGraphNo))]),e("td",[t._v(t._s(a.remark))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(a){t.btnFlag=!1}}},[t._v("关闭")])],1)]):t._e()],1)},r=[],i=(e("1bc78"),e("246f"),e("9b68")),o={name:"cjzr-scddlb",components:{DataList:i["a"]},data:function(){return{loading:!1,deliverStatusList:[{value:0,text:"待发货"},{value:1,text:"部分发货"},{value:2,text:"发货完成"}],orderStatusList:[{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:8,text:"生产暂停"},{value:9,text:"生产完成"}],checkStatusList:[{value:1,text:"成功"},{value:2,text:"待采购"},{value:3,text:"可替换"}],filter:{orderNo:"",orderStatus:5},preCheckMaterList:[],accessoryList:[],fileDetailList:[],btnFlag:!1,layer:!1,info:{},arr:[{name:"",xinhao:"",guige:"",num:"",biaozhun:"",lianjiek:"",jiaodu:"",zhongxinju:"",xinshi:"",length:"",tuhao:"",jinniuju:"",jishuxinhao:""},{name:"",xinhao:"",guige:"",num:"",biaozhun:"",lianjiek:"",jiaodu:"",zhongxinju:"",xinshi:"",length:"",tuhao:"",jinniuju:"",jishuxinhao:""}],processList:[],statusList:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},methods:{closeLayer:function(){this.layer=!1,this.accessoryList=[]},getAccessory:function(t){var a=this;this.$http.get("/haolifa/flowInstance/flow/accessoryInfo?formNo=".concat(t,"&formId=0")).then((function(t){t.forEach((function(t){""!=t.fileUrl&&a.accessoryList.push(t)}))})).catch((function(t){a.$toast(t.msg||t.message)}))},inspectHistorys:function(t){this.$router.push("/jhgl-scddlb/inspect?orderNo=".concat(t.orderNo))},getInfo:function(t){var a=this;this.layer=!0,this.$http.get("/haolifa/order-product/details?orderNo=".concat(t)).then((function(t){a.info=t})).catch((function(t){a.$toast(t.msg||t.message)})),this.getAccessory(t),this.$http.get("/haolifa/order-product/accessory?orderNo=".concat(t)).then((function(t){a.fileDetailList=t})).catch((function(t){a.$toast(t.msg||t.message)})),this.getProcess(t)},getProcess:function(t){var a=this;this.$http.get("/haolifa/flowInstance/flow/progress/?formNo=".concat(t)).then((function(t){a.processList=t})).catch((function(t){a.$toast(t.msg||t.message)}))},getOrderStatusList:function(){var t=this;this.$http.get("/haolifa/order-product/order-status-list").then((function(a){for(var e in a)t.orderStatusList[a[e].code]=a[e].desc}))},getPreCheckMater:function(t){var a=this;this.btnFlag=!0,this.$http.get("/haolifa/order-product/order-material?orderNo=".concat(t)).then((function(t){a.preCheckMaterList=t})).catch((function(t){a.$toast(t.msg||t.message)}))}}},l=o,n=(e("b0db"),e("5d22")),c=Object(n["a"])(l,s,r,!1,null,null,null);a["default"]=c.exports},ded8:function(t,a,e){"use strict";e("2b8c")},e1d1:function(t,a,e){"use strict";e("1c71")},e42c:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-material-list"},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.materialName,expression:"filter.materialName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"名称"},domProps:{value:t.filter.materialName},on:{change:function(a){return t.$refs.list.update(!0)},input:function(a){a.target.composing||t.$set(t.filter,"materialName",a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.materialGraphNo,expression:"filter.materialGraphNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"图号"},domProps:{value:t.filter.materialGraphNo},on:{change:function(a){return t.$refs.list.update(!0)},input:function(a){a.target.composing||t.$set(t.filter,"materialGraphNo",a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(a){return t.$refs.list.update(!0)},input:function(a){a.target.composing||t.$set(t.filter,"orderNo",a.target.value)}}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"f-14",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.filter,"status",a.target.multiple?e:e[0])},function(a){return t.$refs.list.update(!0)}]}},t._l(t.allStatus,(function(a){return e("option",{key:a.id,domProps:{value:a.value}},[t._v(t._s(a.text))])})),0)])]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{"page-size":20,param:t.filter,url:"/haolifa/applyBuy/list",method:"get"},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,r=a.index;a.i;return[e("td",{staticClass:"c-a"},[t._v(t._s(r))]),e("td",[t._v(t._s(s.productOrderNo))]),e("td",[t._v(t._s(s.materialName))]),e("td",[t._v(t._s(s.materialGraphNo))]),e("td",[t._v(t._s(s.purchaseNumber))]),e("td",[t._v(t._s(s.createTime))]),e("td",[t._v(t._s(s.arrivalTime))]),e("td",[t._v(t._s(t.allStatus[s.status].text))])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("订单号")]),e("th",[t._v("物料名称")]),e("th",[t._v("物料图号")]),e("th",[t._v("数量")]),e("th",[t._v("发起时间")]),e("th",[t._v("到货时间")]),e("th",[t._v("状态")])])])],1)])},r=[],i=(e("aa18"),e("566e"),e("9b68")),o={name:"page-order-list",components:{DataList:i["a"]},data:function(){return{filter:{type:0,status:-1,materialName:"",orderNo:"",materialGraphNo:""},allStatus:[{value:0,text:"未处理"},{value:1,text:"待审批"},{value:2,text:"待采购"},{value:3,text:"已处理"},{value:4,text:"审批不通过"},{value:-1,text:"全部"}],all:!1}},methods:{dealApplyBuy:function(t){var a=this;this.$http.post("/haolifa/applyBuy/updateStatus/".concat(t)).then((function(t){a.$toast("处理成功"),a.$refs.list.update()})).catch((function(t){a.$toast("处理失败")}))},selectAll:function(){var t=document.getElementsByName("boxId");if(this.all)for(var a in t)t[a].checked=!0;else for(var e in t)t[e].checked=!1},listHasName:function(t,a){var e=!1;return 0===t.length||t.map((function(t){if(a==t.materialGraphNo)return e=!0,e})),e},mergeData:function(){var t=this,a=this.$refs.list.list,e=document.getElementsByName("boxId"),s=[],r=[],i=[],o=function(o){e[o].checked&&(i.includes(a[e[o].value].materialGraphNo)||i.push(a[e[o].value].materialGraphNo),t.listHasName(s,a[e[o].value].materialGraphNo)?s.map((function(t){t.materialGraphNo==a[e[o].value].materialGraphNo&&(t.purchaseNumber=t.purchaseNumber+a[e[o].value].purchaseNumber)})):s.push(a[e[o].value]),r.push(a[e[o].value].id))};for(var l in e)o(l);0!=i.length?this.$http.post("/haolifa/supplier/supplier-list",{graphNos:i}).then((function(a){0!==a.length?t.$router.push({name:"order-purchaseAdd",params:{list:s,supList:a,ids:r}}):t.$toast("未找到供应商")})).catch((function(a){t.$toast("处理失败")})):this.$toast("请至少选中一条数据!")}}},l=o,n=(e("0c24"),e("5d22")),c=Object(n["a"])(l,s,r,!1,null,null,null);a["default"]=c.exports},e715:function(t,a,e){"use strict";e("bc92")},e83e:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-notification"},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.userName,expression:"filter.userName"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"发件人"},domProps:{value:t.filter.userName},on:{change:function(a){return t.$refs.list.update(!0)},input:function(a){a.target.composing||t.$set(t.filter,"userName",a.target.value)}}})]),e("div",{staticClass:"flex-item"})]),e("data-list",{ref:"list",attrs:{param:t.filter,url:t.url},scopedSlots:t._u([{key:"item",fn:function(a){var s=a.item,r=a.index;return[e("td",[t._v(t._s(r))]),e("td",[t._v(t._s(s.sendUser))]),e("td",[t._v(t._s(s.title))]),e("td",[e("a",{staticStyle:{color:"#555"},attrs:{href:"javascript:;"},on:{click:function(a){return t.infoDetail(s)}}},[t._v("工作日志")])]),e("td",[t._v(t._s(s.createTime))]),e("td",{staticClass:"t-right"},[e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.reserve(s)}}},[t._v("回执 |")]),e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.detail(s)}}},[t._v("回执记录")])])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("发件人")]),e("th",[t._v("标题")]),e("th",[t._v("内容")]),e("th",[t._v("创建时间")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])]),t.layer?e("layer",{attrs:{title:"详情",width:"50%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14"},[e("tr",[e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}})]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("回执人")]),e("th",{attrs:{colspan:"6"}},[t._v("回内容")]),e("th",{attrs:{colspan:"2"}},[t._v("回执时间")])]),t._l(t.info,(function(a){return e("tr",{key:a.id},[e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.userName))]),e("td",{attrs:{colspan:"6"},domProps:{innerHTML:t._s(a.content)}},[t._v(t._s(a.content))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(a.createTime))])])}))],2)])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(a){t.layer=!1}}},[t._v("关闭")])],1)]):t._e(),t.relayer?e("layer",{attrs:{title:"回执",width:"50%"}},[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{"multi-line":"",label:"内容"},model:{value:t.reform.content,callback:function(a){t.$set(t.reform,"content",a)},expression:"reform.content"}})],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:function(a){t.relayer=!1}}},[t._v("取消")]),e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(a){return t.submit()}}},[t._v("保存")])],1)]):t._e(),t.detailFlag?e("layer",{attrs:{title:"详情",width:"50%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14"},[e("tr",[e("td",{staticStyle:{width:"15%"}}),e("td",{staticStyle:{width:"85%"}})]),e("tr",[e("th",{staticStyle:{"word-break":"break-all","white-space":"inherit"}},[t._v("收件人")]),e("td",[t._v(t._s(t.infoDet.users))])]),e("tr",[e("th",{staticStyle:{"word-break":"break-all","white-space":"inherit"}},[t._v("标题")]),e("td",[t._v(t._s(t.infoDet.title))])]),e("tr",[e("th",[t._v("内容")]),e("td",{staticStyle:{"word-break":"break-all","white-space":"inherit"},domProps:{innerHTML:t._s(t.infoDet.content)}},[t._v(t._s(t.infoDet.content))])])])])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:function(a){t.detailFlag=!1}}},[t._v("关闭")])],1)]):t._e()],1)},r=[],i=(e("4890"),e("34f5")),o=e("9b68"),l={name:"page-notification",components:{DataList:o["a"]},data:function(){var t;return t={layer:!1,relayer:!1,filter:{userId:"",userName:""},form:{id:"",title:"",content:""},url:"",account:"",info:[],reform:{content:"",mailId:"",userId:"",userName:""}},Object(i["a"])(t,"url",""),Object(i["a"])(t,"reserveFlag",!1),Object(i["a"])(t,"detailFlag",!1),Object(i["a"])(t,"infoDet",{}),t},created:function(){this.account=this.$store.state.account,console.log(this.account),this.account.roles&&("ROLE_ADMIN"==this.account.roles[0].role||"SXHL001"==this.account.username||"HLJG-01"==this.account.username)?(this.url="/haolifa/hlmail/getMails",this.reserveFlag=!0):(this.url="/haolifa/hlmail/getMailsByUserId",this.filter.userId=this.account.userId)},mounted:function(){console.log(this.account)},methods:{submit:function(){var t=this;this.reform.content?this.$http.post("/haolifa/hlmail/sendMailReve",this.reform).then((function(a){t.$toast("回执成功"),t.relayer=!1})).catch((function(a){t.$toast(a.msg||a.message)})):this.$toast("内容不能为空")},detail:function(t){var a=this;this.layer=!0;t.id;console.log(t.id),this.$http.get("/haolifa/hlmail/getHlMailRevesByMailId?mailId=".concat(t.id)).then((function(t){a.info=t,console.log(a.info)})).catch((function(t){a.$toast(t.msg||t.message)}))},reserve:function(t){this.relayer=!0,this.reform.mailId=t.id,this.reform.userId=this.account.userId,this.reform.userName=this.account.username,this.reform.content=""},infoDetail:function(t){this.infoDet=t,this.detailFlag=!0}}},n=l,c=(e("ded8"),e("5d22")),d=Object(c["a"])(n,s,r,!1,null,null,null);a["default"]=d.exports},ee68:function(t,a,e){var s=e("7c2b");s(s.S+s.F*!e("5e9e"),"Object",{defineProperty:e("597a").f})},f263:function(t,a,e){e("ee68");var s=e("ce99").Object;t.exports=function(t,a,e){return s.defineProperty(t,a,e)}}}]);
//# sourceMappingURL=orderlist.f45c0ff6.js.map