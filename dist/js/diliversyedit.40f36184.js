(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["diliversyedit"],{2381:function(t,s,e){},"2b20":function(t,s,e){"use strict";var a=e("c652"),i=e.n(a);i.a},"43aa":function(t,s,e){},5555:function(t,s,e){},"6b05":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page-room-add abs scroll-y"},[e("div",{staticClass:"form-content"},[e("div",{staticClass:"title b f-18"},[t._v("增加质检单")]),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",attrs:{label:"订单号"},model:{value:t.form.orderNo,callback:function(s){t.$set(t.form,"orderNo",s)},expression:"form.orderNo"}}),e("input-box",{staticClass:"flex-item",attrs:{label:"检测数量"},model:{value:t.form.testingNumber,callback:function(s){t.$set(t.form,"testingNumber",s)},expression:"form.testingNumber"}}),e("input-box",{staticClass:"flex-item",attrs:{label:"合格数"},model:{value:t.form.qualifiedNumber,callback:function(s){t.$set(t.form,"qualifiedNumber",s)},expression:"form.qualifiedNumber"}}),e("input-box",{staticClass:"flex-item",attrs:{label:"不合格数"},model:{value:t.form.unqualifiedNumber,callback:function(s){t.$set(t.form,"unqualifiedNumber",s)},expression:"form.unqualifiedNumber"}})],1),e("div",{staticClass:"b",staticStyle:{margin:"20px 0 10px"}},[t._v("不合格详情")]),t._l(t.form.unqualifiedList,(function(s,a){return e("div",{key:a,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[e("div",{staticClass:"flex-item"},[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"产品型号",hint:"必填"},model:{value:s.productModel,callback:function(e){t.$set(s,"productModel",e)},expression:"item.productModel"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格",hint:"必填"},model:{value:s.productSpecifications,callback:function(e){t.$set(s,"productSpecifications",e)},expression:"item.productSpecifications"}}),e("input-box",{staticClass:"mr-10",attrs:{label:"不合格数",hint:"必填"},model:{value:s.unqualifiedNumber,callback:function(e){t.$set(s,"unqualifiedNumber",e)},expression:"item.unqualifiedNumber"}})],1),e("div",{staticClass:"flex"},[e("select-box",{staticClass:"flex-item",attrs:{list:t.reasons,label:"不合格现象描述"},model:{value:s.reason,callback:function(e){t.$set(s,"reason",e)},expression:"item.reason"}})],1)]),t.form.unqualifiedList.length>1?e("div",[e("icon-btn",{attrs:{small:""},on:{click:function(s){return t.form.unqualifiedList.splice(a,1)}}},[t._v("close")])],1):t._e()])})),e("div",{staticClass:"card a flex-center",on:{click:function(s){return t.addItem()}}},[t._m(0)]),e("div",{staticClass:"flex"},[e("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:t.submit}},[t._v("提交")]),e("btn",{attrs:{big:"",flat:""},on:{click:function(s){return t.$router.back()}}},[t._v("取消")])],1)],2)])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"flex-v-center"},[e("i",{staticClass:"icon mr-10"},[t._v("add")]),e("span",[t._v("添加检验记录")])])}],r=(e("c041"),e("6bf2"),{name:"inspect-product-add",data:function(){return{form:{orderNo:"",testingNumber:"",qualifiedNumber:"",unqualifiedNumber:"",unqualifiedList:[{productModel:"",productSpecifications:"",reason:"",unqualifiedNumber:""}]},reasons:[]}},mounted:function(){this.getReasons()},methods:{addItem:function(){this.form.unqualifiedList.push({productModel:"",productSpecifications:"",reason:"",unqualifiedNumber:""})},submit:function(){var t=this;this.$http.post("/haolifa/pro-inspect-res/save",this.form).then((function(s){t.loading=!1,t.$toast("提交成功"),t.$router.replace("/inspect-product/addList")})).catch((function(s){t.$toast(s.message||s.msg)}))},getReasons:function(){var t=this;this.$http.get("/haolifa/pro-inspect-res/reasonList").then((function(s){t.reasons=s.map((function(t){return{value:t,text:t}}))}))}}}),l=r,o=(e("787e"),e("6691")),n=Object(o["a"])(l,a,i,!1,null,null,null);s["default"]=n.exports},"787e":function(t,s,e){"use strict";var a=e("43aa"),i=e.n(a);i.a},"7bc6":function(t,s,e){"use strict";var a=e("2381"),i=e.n(a);i.a},"8f46":function(t,s,e){"use strict";var a=e("d67d"),i=e.n(a);i.a},"904c":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"abs scroll-y"},[e("div",{staticClass:"form-content page-supplier-info"},[e("div",{staticClass:"b f-18 flex-v-center",staticStyle:{"margin-bottom":"20px"}},[e("icon-btn",{staticClass:"mr-15",on:{click:function(s){return t.$router.back()}}},[t._v("arrow_back")]),e("div",{staticClass:"flex-item"},[t._v("详情")])],1),e("table",{staticClass:"f-14"},[t._m(0),t._m(1),e("tr",[e("th",{attrs:{colspan:"5"}},[t._v("送检单号："+t._s(t.inspect.inspectNo))]),e("td",{attrs:{colspan:"6"}},[t._v("发起日期："+t._s(t.inspect.createTime))])]),e("tr",[e("th",{attrs:{colspan:"5"}},[t._v("采购合同号："+t._s(t.inspect.purchaseNo))]),e("td",{attrs:{colspan:"6"}},[t._v("批次号："+t._s(t.inspect.batchNumber))])]),e("tr",[e("th",{attrs:{colspan:"5"}},[t._v("供应商："+t._s(t.inspect.supplierName))]),e("td",{attrs:{colspan:"6"}},[t._v("到货日期："+t._s(t.inspect.arrivalTime))])]),t._m(2),t._l(t.items,(function(s,a){return e("tr",{key:a},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(a+1))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.purchaseNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.materialName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.materialGraphNo))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.specification))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.requirements))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.unit))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.purchaseNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.deliveryNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.unqualifiedNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.remark))])])}))],2)]),t.inspectHistory.length?e("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[t._m(3),e("div",{staticClass:"flex-item scroll-y ml-20"},[e("table",{staticClass:"data-table"},[t._m(4),t._l(t.inspectHistory,(function(s,a){return e("tr",{key:a},[e("td",[t._v(t._s(s.inspectNo))]),e("td",[t._v(t._s(1==s.type?"采购零件":"机加工零件"))]),e("td",[t._v(t._s(s.materialGraphName))]),e("td",[t._v(t._s(s.materialGraphNo))]),e("td",[t._v(t._s(s.testNumber))]),e("td",[t._v(t._s(s.qualifiedNumber))]),e("td",[t._v(t._s(s.unqualifiedNumber))]),e("td",[t._v(t._s(s.handlingSuggestion))]),e("td",[t._v(t._s(s.remark))])])}))],2)])]):t._e()])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("tr",[e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}}),e("td",{staticStyle:{width:"10%"}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("tr",[e("td",{staticClass:"b",attrs:{colspan:"11"}},[t._v("零件送检单")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("序号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("合同编号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("物料图号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("材质与标准要求")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("单位")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("采购数")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("送货数")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("不合格数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("备注")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[e("div",{staticClass:"flex-item"},[t._v("质检记录")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("tr",[e("th",[t._v("质检单号")]),e("th",[t._v("类别")]),e("th",[t._v("物料名称")]),e("th",[t._v("物料图号")]),e("th",[t._v("检测数量")]),e("th",[t._v("合格数量")]),e("th",[t._v("不合格数量")]),e("th",[t._v("处理意见")]),e("th",[t._v("不合格现象描述")])])}],r={name:"purchsemanage-purchaseinfo",data:function(){return{loading:!1,inspect:{id:0,inspectNo:""},items:[],inspectHistory:[]}},created:function(){this.inspect.id=this.$route.query.id,this.inspect.inspectNo=this.$route.query.inspectNo,this.getInfo(),this.getInspectHistory()},methods:{getInfo:function(){var t=this;this.$http.get("/haolifa/material-inspect/info/".concat(this.inspect.id)).then((function(s){t.inspect=s.inspect,t.items=s.items,t.inspect.createTime=s.inspect.createTime.substring(0,10),t.inspect.arrivalTime=s.inspect.arrivalTime.substring(0,10),t.inspect.updateTime=s.inspect.updateTime.substring(0,10)})).catch((function(s){t.$toast(s.msg||s.message)}))},getInspectHistory:function(){var t=this;this.$http.get("/haolifa/material-inspect/history/list/".concat(this.inspect.inspectNo)).then((function(s){t.inspectHistory=s})).catch((function(s){t.$toast(s.msg||s.message)}))}}},l=r,o=(e("7bc6"),e("6691")),n=Object(o["a"])(l,a,i,!1,null,null,null);s["default"]=n.exports},"97a34":function(t,s,e){"use strict";function a(t,s,e){return s in t?Object.defineProperty(t,s,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[s]=e,t}e.d(s,"a",(function(){return a}))},a251:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"apply-buy-update"},[e("div",{staticClass:"content mt-20"},[e("div",{staticClass:"title b f-18 ml-10"},[t._v("编辑送检单")]),e("div",{staticClass:"flex ml-20 mr-20"},[e("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{hint:"必填",label:"到货时间"},model:{value:t.form.arrivalTime,callback:function(s){t.$set(t.form,"arrivalTime",s)},expression:"form.arrivalTime"}}),e("input-box",{staticClass:"flex-item ml-20 mr-20",attrs:{label:"供应商名称"},model:{value:t.form.supplierName,callback:function(s){t.$set(t.form,"supplierName",s)},expression:"form.supplierName"}})],1),e("div",{staticClass:"flex ml-20 mr-20"},[e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"批次号"},model:{value:t.form.batchNumber,callback:function(s){t.$set(t.form,"batchNumber",s)},expression:"form.batchNumber"}}),e("input-box",{staticClass:"flex-item ml-20 mr-20",attrs:{label:"合同号"},model:{value:t.form.purchaseNo,callback:function(s){t.$set(t.form,"purchaseNo",s)},expression:"form.purchaseNo"}}),e("input-box",{staticClass:"flex-item ml-20 mr-20",attrs:{type:"number",label:"费用"},model:{value:t.form.freight,callback:function(s){t.$set(t.form,"freight",s)},expression:"form.freight"}})],1),e("div",{staticClass:"flex"},[e("upload-box",{staticStyle:{width:"50%"},attrs:{btnText:"质量保证书",fileShow:!1,fileList:t.fileList,onchange:t.uploadFile,onremove:t.removeFile,multiple:t.multiple}})],1),t._l(t.resFileList,(function(s,a){return e("div",{key:a,staticStyle:{"margin-left":"20px","margin-top":"5px"}},[e("div",{staticClass:"flex"},[e("a",{staticStyle:{"text-decoration":"none","out-line":"none",color:"#ccc"},attrs:{href:s.fileUrl,target:"_blank"}},[t._v(t._s(s.fileName))]),e("icon-btn",{attrs:{small:""},on:{click:function(s){return t.resFileList.splice(a,1)}}},[t._v("close")])],1)])})),e("div",{staticClass:"b ml-20",staticStyle:{margin:"20px 10px 10px"}},[t._v("送检列表")]),t._l(t.form.items,(function(s,a){return e("div",{key:a,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[e("div",{staticClass:"flex-item"},[e("div",{staticClass:"flex ml-20 mr-20"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"物料图号",hint:"必填"},model:{value:s.materialGraphNo,callback:function(e){t.$set(s,"materialGraphNo",e)},expression:"item.materialGraphNo"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"物料名称",hint:"必填"},model:{value:s.materialName,callback:function(e){t.$set(s,"materialName",e)},expression:"item.materialName"}}),e("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"送检数量",hint:"必填"},model:{value:s.deliveryNumber,callback:function(e){t.$set(s,"deliveryNumber",e)},expression:"item.deliveryNumber"}}),e("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"采购数量",hint:"必填"},model:{value:s.purchaseNumber,callback:function(e){t.$set(s,"purchaseNumber",e)},expression:"item.purchaseNumber"}})],1),e("div",{staticClass:"flex ml-20 mr-20"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"材质要求",hint:"选填"},model:{value:s.requirements,callback:function(e){t.$set(s,"requirements",e)},expression:"item.requirements"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格",hint:"选填"},model:{value:s.specification,callback:function(e){t.$set(s,"specification",e)},expression:"item.specification"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单价"},model:{value:s.purchasePrice,callback:function(e){t.$set(s,"purchasePrice",e)},expression:"item.purchasePrice"}})],1),e("div",{staticClass:"flex ml-20 mr-20"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单位",hint:"选填"},model:{value:s.unit,callback:function(e){t.$set(s,"unit",e)},expression:"item.unit"}}),e("input-box",{staticClass:"flex-item",attrs:{label:"备注"},model:{value:s.remark,callback:function(e){t.$set(s,"remark",e)},expression:"item.remark"}})],1)]),t.form.items.length>1?e("div",[e("icon-btn",{attrs:{small:""},on:{click:function(s){return t.form.items.splice(a,1)}}},[t._v("close")])],1):t._e()])})),e("div",{staticClass:"card a flex-center",on:{click:function(s){return t.addItem()}}},[t._m(0)]),e("div",{staticClass:"flex ml-20 mt-20"},[e("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(s){return t.submit(1)}}},[t._v("保存")]),e("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(s){return t.submit(2)}}},[t._v("保存并发起")]),e("btn",{attrs:{big:"",flat:""},on:{click:t.back}},[t._v("取消")])],1)],2)])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"flex-v-center"},[e("i",{staticClass:"icon mr-10"},[t._v("add")]),e("span",[t._v("添加送检物料")])])}],r=(e("c041"),e("97a34")),l=(e("7cfd"),e("153b")),o=e("6bf2"),n=e.n(o),c={name:"apply-buy-update",data:function(){return{id:0,form:{arrivalTime:"",supplierName:"",batchNumber:"",status:1,purchaseNo:"",accessorys:[],freight:"",items:[{deliveryNumber:"",materialGraphNo:"",materialName:"",purchaseNo:"",purchaseNumber:"",purchasePrice:0,remark:"",specification:"",unit:""}]},fileList:[],multiple:!0,resFileList:[]}},created:function(){var t=this.$route.query.id;void 0!==t&&"material-edit"===this.$route.name&&this.getInfo(t)},methods:{getInfo:function(t){var s=this;this.id=t,this.$http.get("/haolifa/material-inspect/info/".concat(t)).then((function(t){t.inspect.arrivalTime=n()(t.inspect.arrivalTime).format("YYYY-MM-DD"),s.form.arrivalTime=t.inspect.arrivalTime,s.form.supplierName=t.inspect.supplierName,s.form.batchNumber=t.inspect.batchNumber,s.form.purchaseNo=t.inspect.purchaseNo,s.form.freight=t.inspect.freight,s.form.items=t.items.map((function(t){var s;return s={deliveryNumber:t.deliveryNumber,materialGraphNo:t.materialGraphNo,materialName:t.materialName,purchaseNo:t.purchaseNo,purchaseNumber:t.purchaseNumber,remark:t.remark,specification:t.specification,unit:t.unit,purchasePrice:t.purchasePrice},Object(r["a"])(s,"specification",t.specification),Object(r["a"])(s,"requirements",t.requirements),s})),""!=t.inspect.blueprints&&(s.resFileList=JSON.parse(t.inspect.blueprints),s.fileList=s.resFileList.map((function(t){return t.fileUrl})))})).catch((function(t){s.$toast(t.msg||t.message)}))},addItem:function(){this.form.items.push({deliveryNumber:"",materialGraphNo:"",materialName:"",purchaseNumber:"",remark:"",specification:"",unit:""})},uploadFile:function(t,s){var e=this;this.loading=!0,this.loadingMsg="正在上传",Object(l["a"])(t.source).then((function(s){e.$http.post("/haolifa/file/uploadFileBase64",{base64Source:s,fileName:t.name}).then((function(s){e.resFileList.push({fileName:t.name,fileUrl:s}),e.loading=!1})).catch((function(t){e.$toast(t.msg||t.message),e.loading=!1}))}))},removeFile:function(t,s){var e=this;return new Promise((function(t,a){e.resFileList.splice(s,1),t()}))},back:function(){var t=this;this.$http.get("/haolifa/material-inspect/delete/".concat(this.id)).then((function(s){t.$router.back()}))},submit:function(t){var s=this,e=this.form,a=(e.items,e.arrivalTime);a?(this.form.status=t,this.form.accessorys=this.resFileList,this.$http.post("/haolifa/material-inspect/update/".concat(this.id),this.form).then((function(t){s.loading=!1,s.$toast("提交成功"),s.$router.replace("/applyBuy-material")})).catch((function(t){s.$toast(t.message||t.msg)}))):this.$toast("请填写到货时间")}}},d=c,u=(e("2b20"),e("6691")),p=Object(u["a"])(d,a,i,!1,null,null,null);s["default"]=p.exports},a5a3:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page-orders-list"},[e("div",{staticClass:"flex-v-center tool-bar"},[e("div",{staticClass:"flex-v-center search-bar",staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"icon f-20 c-8"},[t._v("search")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderNo,expression:"filter.orderNo"}],staticClass:"flex-item",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"订单号"},domProps:{value:t.filter.orderNo},on:{change:function(s){return t.$refs.list.update(!0)},input:function(s){s.target.composing||t.$set(t.filter,"orderNo",s.target.value)}}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.orderStatus,expression:"filter.orderStatus"}],staticClass:"f-14",attrs:{disabled:""},on:{change:[function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.$set(t.filter,"orderStatus",s.target.multiple?e:e[0])},function(s){return t.$refs.list.update(!0)}]}},[e("option",{attrs:{value:"-1"}},[t._v("全部")]),t._l(t.orderStatusList,(function(s){return e("option",{key:s.value,domProps:{value:s.value}},[t._v(t._s(s.text))])}))],2),e("i",{staticClass:"icon",staticStyle:{"margin-left":"-20px","pointer-events":"none"}},[t._v("arrow_drop_down")])]),e("div",{staticClass:"flex-item"})]),e("div",{staticClass:"flex-item scroll-y"},[e("data-list",{ref:"list",attrs:{param:t.filter,url:"/haolifa/order-product/pageInfo",method:"post"},scopedSlots:t._u([{key:"item",fn:function(s){var a=s.item,i=s.index;return[e("td",{staticClass:"c-a"},[t._v(t._s(i))]),e("td",[t._v(t._s(a.orderNo))]),e("td",[e("a",{staticClass:"fixed-length",attrs:{href:a.orderContractUrl,title:a.orderContractUrl}},[t._v(t._s(a.orderContractUrl))])]),e("td",[t._v(t._s(a.deliveryDate))]),e("td",[t._v(t._s(a.totalCount))]),e("td",[t._v(t._s(a.qualifiedNumber))]),e("td",[t._v(t._s(t.orderStatusList[a.orderStatus-5].text))]),e("td",[t._v(t._s(a.createTime))]),e("td",{staticClass:"t-right"},[9!=a.orderStatus?e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(s){return t.progress(a)}}},[t._v("添加质检记录|")]):t._e(),e("a",{staticClass:"blue",staticStyle:{"margin-right":"3px"},attrs:{href:"javascript:;"},on:{click:function(s){return t.infoShow(a)}}},[t._v("详情")])])]}}])},[e("tr",{attrs:{slot:"header"},slot:"header"},[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",[t._v("订单编号")]),e("th",[t._v("订单合同URL")]),e("th",[t._v("发货日期")]),e("th",[t._v("订单数量")]),e("th",[t._v("检验合格数量")]),e("th",[t._v("订单状态")]),e("th",[t._v("创建时间")]),e("th",{staticClass:"t-right",staticStyle:{width:"80px"}},[t._v("操作")])])])],1),t.completeLayer?e("layer",{attrs:{title:"添加质检记录",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单编号 : "+t._s(t.info.orderNo))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("发货日期 : "+t._s(t.info.deliveryDate))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单状态 : "+t._s(t.orderStatusList[t.info.orderStatus-5].text))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("\n                            订单合同:\n                            "),e("a",{staticStyle:{"margin-right":"15px"},attrs:{href:t.info.orderContractUrl}},[t._v("下载")]),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:t.info.orderContractUrl}},[t._v("预览")]):t._e(),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+t.info.orderContractUrl}},[t._v("预览")])])]),e("tr",[t.fileDetailList.length?e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:")]):e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:无")])]),t._l(t.fileDetailList,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v(t._s(s.fileName))]),e("td",{staticClass:"b",attrs:{colspan:"12"}},[s.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:s.fileUrl}},[t._v("预览")]):t._e(),s.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+s.fileUrl}},[t._v("预览")])])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配车间: "+t._s(t.info.assemblyShop))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配小组: "+t._s(t.info.assemblyGroup))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("采购反馈时间: "+t._s(t.info.purchaseFeedbackTime))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("生产反馈时间: "+t._s(t.info.productionFeedbackTime))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("技术清单:")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("产品名称")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("型号")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("规格")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("数量")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("上法兰标准")]),e("td",{attrs:{colspan:"3",rowspan:"1"}},[t._v("上法兰尺寸")]),e("td",{attrs:{colspan:"4",rowspan:"1"}},[t._v("出轴尺寸")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("静扭矩")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("执行器型号")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("连接孔")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("角度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("中心距")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴型式")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴长度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("轴图号")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("过渡盘")])]),t._l(JSON.parse(t.info.technicalRequire),(function(s,a){return e("tr",{key:a},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.name))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.xinhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.guige))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.num))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.biaozhun))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.lianjiek))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.jiaodu))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.zhongxinju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.xinshi))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.length))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.tuhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.guodupan))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.jinniuju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.jishuxinhao))])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单产品列表")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品编号")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("标签属性")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("颜色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总计价格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("材质说明")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品备注")])]),t._l(t.info.orderProductAssociates,(function(s,a){return e("tr",{key:"fo"+a},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.productNo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(s.productName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.productModel))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.lable))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.specifications))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(s.productColor))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.productNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.totalPrice))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(s.materialDescription))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(s.productRemark))])])})),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批附件:")])]):t._e(),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件名称")]),e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件地址")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("——")])]):t._e(),t._l(t.accessoryList,(function(s,a){return e("tr",{key:a},[e("td",{attrs:{colspan:"6"}},[t._v(t._s(s.fileName))]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(s.fileUrl))]),e("td",{attrs:{colspan:"2"}},[s.fileUrl.match(".(doc|docx|xls|xlsx)$")?t._e():e("a",{attrs:{target:"_blank",href:s.fileUrl}},[t._v("预览")]),s.fileUrl.match(".(doc|docx|xls|xlsx)$")?e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+s.fileUrl}},[t._v("预览")]):t._e()])])}))],2)]),t.recordList.length?e("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[e("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[e("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("已添加质检记录")])]),e("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[e("table",{staticClass:"data-table"},[e("tr",{staticStyle:{display:"none"}},[e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"12%"}})]),e("tr",[e("th",[t._v("产品编号")]),e("th",[t._v("成品型号")]),e("th",[t._v("成品规格")]),e("th",[t._v("检测数量")]),e("th",[t._v("合格数量")]),e("th",[t._v("不合格数量")]),e("th",[t._v("不合格原因")]),e("th",[t._v("附件")]),e("th",[t._v("状态")]),e("th",[t._v("创建日期")])]),t._l(t.recordList,(function(s,a){return e("tr",{key:a},[e("td",[t._v(t._s(s.productNo))]),e("td",[t._v(t._s(s.productModel))]),e("td",[t._v(t._s(s.productSpecifications))]),e("td",[t._v(t._s(s.testingNumber))]),e("td",[t._v(t._s(s.qualifiedNumber))]),e("td",[t._v(t._s(s.unqualifiedNumber))]),e("td",[t._v(t._s(s.reasonArr.toString()))]),e("td",t._l(s.accessoryList,(function(s,a){return e("div",{key:a},[e("a",{attrs:{target:"_blank",href:s.fileUrl}},[t._v(t._s(s.fileName))])])})),0),e("td",[t._v(t._s(1==s.storageStatus?"待入库":"已入库"))]),e("td",[t._v(t._s(s.createTime))])])}))],2)])]):t._e(),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"订单号"},model:{value:t.order.orderNo,callback:function(s){t.$set(t.order,"orderNo",s)},expression:"order.orderNo"}}),e("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.productNoList,label:"产品编号"},model:{value:t.order.productNo,callback:function(s){t.$set(t.order,"productNo",s)},expression:"order.productNo"}})],1),e("div",{staticClass:"flex"},[e("select-box",{staticClass:"flex-item mr-20 ml-20",attrs:{list:t.productModelList,label:"成品型号"},model:{value:t.order.productModel,callback:function(s){t.$set(t.order,"productModel",s)},expression:"order.productModel"}}),e("select-box",{staticClass:"flex-item mr-20",attrs:{list:t.productSpecificationsList,label:"成品规格"},model:{value:t.order.productSpecifications,callback:function(s){t.$set(t.order,"productSpecifications",s)},expression:"order.productSpecifications"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"检测数量"},model:{value:t.order.testingNumber,callback:function(s){t.$set(t.order,"testingNumber",s)},expression:"order.testingNumber"}}),e("input-box",{staticClass:"flex-item mr-20",attrs:{label:"合格数量"},model:{value:t.order.qualifiedNumber,callback:function(s){t.$set(t.order,"qualifiedNumber",s)},expression:"order.qualifiedNumber"}})],1),e("div",{staticClass:"flex"},[e("upload-box",{staticClass:"ml-20 mb-10",staticStyle:{width:"50%"},attrs:{btnText:"上传附件",fileList:t.fileList,onchange:t.uploadFile,multiple:!0,onremove:t.removeFile}})],1),t._l(t.order.unqualifiedList,(function(s,a){return e("div",{key:a,staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-20 ml-20",attrs:{label:"不合格数量"},model:{value:s.number,callback:function(e){t.$set(s,"number",e)},expression:"item.number"}}),e("el-select",{staticClass:"flex-item mr-20 ml-20",staticStyle:{"border-top":"0"},attrs:{placeholder:"请选择不合格原因",multiple:!0},model:{value:s.reason,callback:function(e){t.$set(s,"reason",e)},expression:"item.reason"}},t._l(t.reasonList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.text,value:t.value}})})),1),t.order.unqualifiedList.length>1?e("icon-btn",{attrs:{small:""},on:{click:function(s){return t.removeReason(a)}}},[t._v("close")]):t._e()],1)})),e("div",{staticStyle:{"padding-left":"100px"}},[e("icon-btn",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"更多不合格数量及因",expression:"'更多不合格数量及因'"}],attrs:{bg:"",small:""},on:{click:t.addReason}},[t._v("add")])],1),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:""},on:{click:t.closeLayer}},[t._v("取消")]),e("el-button",{attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:t.complete}},[t._v("保存")])],1)],2)]):t._e(),t.layer?e("layer",{attrs:{title:"详情",width:"70%"}},[e("div",{staticClass:"layer-text",staticStyle:{"padding-bottom":"50px"}},[e("div",{staticClass:"form-content metalwork-info"},[e("table",{staticClass:"f-14 order-info"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单编号 : "+t._s(t.info.orderNo))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("发货日期 : "+t._s(t.info.deliveryDate))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单状态 : "+t._s(t.orderStatusList[t.info.orderStatus-5].text))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("\n                            订单合同:\n                            "),e("a",{staticStyle:{"margin-right":"15px"},attrs:{href:t.info.orderContractUrl}},[t._v("下载")]),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:t.info.orderContractUrl}},[t._v("预览")]):t._e(),t.info.orderContractUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+t.info.orderContractUrl}},[t._v("预览")])])]),e("tr",[t.fileDetailList.length?e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:")]):e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单附件:无")])]),t._l(t.fileDetailList,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v(t._s(s.fileName))]),e("td",{staticClass:"b",attrs:{colspan:"12"}},[s.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?e("a",{attrs:{target:"_blank",href:s.fileUrl}},[t._v("预览")]):t._e(),s.fileUrl.match(".(pdf|jpe?g|png|bmp)$")?t._e():e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+s.fileUrl}},[t._v("预览")])])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配车间: "+t._s(t.info.assemblyShop))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("装配小组: "+t._s(t.info.assemblyGroup))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("采购反馈时间: "+t._s(t.info.purchaseFeedbackTime))]),e("td",{staticClass:"b",attrs:{colspan:"7"}},[t._v("生产反馈时间: "+t._s(t.info.productionFeedbackTime))])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("技术清单:")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("产品名称")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("型号")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("规格")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("数量")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("上法兰标准")]),e("td",{attrs:{colspan:"3",rowspan:"1"}},[t._v("上法兰尺寸")]),e("td",{attrs:{colspan:"4",rowspan:"1"}},[t._v("出轴尺寸")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("静扭矩")]),e("td",{attrs:{colspan:"1",rowspan:"2"}},[t._v("执行器型号")])]),e("tr",[e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("连接孔")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("角度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("中心距")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴型式")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("出轴长度")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("轴图号")]),e("td",{attrs:{colspan:"1",rowspan:"1"}},[t._v("过渡盘")])]),t._l(JSON.parse(t.info.technicalRequire),(function(s,a){return e("tr",{key:a},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.name))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.xinhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.guige))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.num))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.biaozhun))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.lianjiek))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.jiaodu))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.zhongxinju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.xinshi))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.length))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.tuhao))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.guodupan))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.jinniuju))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.jishuxinhao))])])})),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("订单产品列表")])]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品编号")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品名称")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("型号")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("标签属性")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("规格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("颜色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("产品数量")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("总计价格")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("材质说明")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("产品备注")])]),t._l(t.info.orderProductAssociates,(function(s,a){return e("tr",{key:"fo"+a},[e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.productNo))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(s.productName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.productModel))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.lable))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.specifications))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(s.productColor))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.productNumber))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.totalPrice))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(s.materialDescription))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(s.productRemark))])])})),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"14"}},[t._v("审批附件:")])]):t._e(),t.accessoryList.length>0?e("tr",[e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件名称")]),e("td",{staticClass:"b",attrs:{colspan:"6"}},[t._v("文件地址")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("——")])]):t._e(),t._l(t.accessoryList,(function(s,a){return e("tr",{key:a},[e("td",{attrs:{colspan:"6"}},[t._v(t._s(s.fileName))]),e("td",{attrs:{colspan:"6"}},[t._v(t._s(s.fileUrl))]),e("td",{attrs:{colspan:"2"}},[s.fileUrl.match(".(doc|docx|xls|xlsx)$")?t._e():e("a",{attrs:{target:"_blank",href:s.fileUrl}},[t._v("预览")]),s.fileUrl.match(".(doc|docx|xls|xlsx)$")?e("a",{attrs:{target:"_blank",href:"http://view.officeapps.live.com/op/view.aspx?src="+s.fileUrl}},[t._v("预览")]):t._e()])])}))],2)]),t.recordList.length?e("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[e("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[e("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("质检记录")])]),e("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[e("table",{staticClass:"data-table"},[e("tr",{staticStyle:{display:"none"}},[e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"11%"}}),e("td",{staticStyle:{width:"12%"}})]),e("tr",[e("th",[t._v("产品编号")]),e("th",[t._v("成品型号")]),e("th",[t._v("成品规格")]),e("th",[t._v("检测数量")]),e("th",[t._v("合格数量")]),e("th",[t._v("不合格数量")]),e("th",[t._v("不合格原因")]),e("th",[t._v("附件")]),e("th",[t._v("状态")]),e("th",[t._v("创建日期")])]),t._l(t.recordList,(function(s,a){return e("tr",{key:a},[e("td",[t._v(t._s(s.productNo))]),e("td",[t._v(t._s(s.productModel))]),e("td",[t._v(t._s(s.productSpecifications))]),e("td",[t._v(t._s(s.testingNumber))]),e("td",[t._v(t._s(s.qualifiedNumber))]),e("td",[t._v(t._s(s.unqualifiedNumber))]),e("td",[t._v(t._s(s.reasonArr.toString()))]),e("td",t._l(s.accessoryList,(function(s,a){return e("div",{key:a},[e("a",{attrs:{target:"_blank",href:s.fileUrl}},[t._v(t._s(s.fileName))])])})),0),e("td",[t._v(t._s(1==s.storageStatus?"待入库":"已入库"))]),e("td",[t._v(t._s(s.createTime))])])}))],2)])]):t._e(),e("div",{staticClass:"mt-15 ml-20 mr-20",staticStyle:{"overflow-x":"auto"}},[e("div",{staticClass:"b f-18 flex-v-center ml-20",staticStyle:{"margin-bottom":"20px"}},[e("div",{staticClass:"flex-item",staticStyle:{"text-align":"center","line-height":"24px"}},[t._v("审核信息")])]),e("div",{staticClass:"flex-item scroll-y page-supplier-info",staticStyle:{"overflow-x":"auto"}},[e("table",{staticClass:"data-table"},[e("tr",[e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"7%"}}),e("td",{staticStyle:{width:"8%"}}),e("td",{staticStyle:{width:"8%"}})]),e("tr",[e("td",{staticClass:"b",attrs:{colspan:"3"}},[t._v("流程节点")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("角色")]),e("td",{staticClass:"b",attrs:{colspan:"1"}},[t._v("审核人")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核状态")]),e("td",{staticClass:"b",attrs:{colspan:"4"}},[t._v("审核意见")]),e("td",{staticClass:"b",attrs:{colspan:"2"}},[t._v("审核时间")])]),t._l(t.processList,(function(s){return e("tr",{key:s.stepName},[e("td",{attrs:{colspan:"3"}},[t._v(t._s(s.stepName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(s.roleName))]),e("td",{attrs:{colspan:"1"}},[t._v(t._s(s.auditUserName))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.statusList[s.auditResult]))]),e("td",{attrs:{colspan:"4"}},[t._v(t._s(s.info))]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(s.auditTime))])])}))],2)])])]),e("div",{staticClass:"layer-btns"},[e("btn",{attrs:{flat:"",color:"#008eff"},on:{click:function(s){return t.closeLayer()}}},[t._v("关闭")])],1)]):t._e()],1)},i=[],r=(e("efce"),e("ed8b"),e("cc1d"),e("97a34")),l=(e("7cfd"),e("4634"),e("9b68")),o=e("153b");function n(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter((function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),e.push.apply(e,a)}return e}function c(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?n(e,!0).forEach((function(s){Object(r["a"])(t,s,e[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):n(e).forEach((function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))}))}return t}var d={name:"product-addList",components:{DataList:l["a"]},data:function(){return{completeLayer:!1,loading:!1,orderStatusList:[{value:5,text:"待生产"},{value:6,text:"待领料"},{value:7,text:"生产中"},{value:8,text:"生产暂停"},{value:9,text:"生产完成"},{value:10,text:"质检中"},{value:11,text:"已入库"},{value:12,text:"申请发货"},{value:13,text:"发货完成"}],filter:{orderNo:"",orderStatus:7},layer:!1,info:{},accessoryList:[],productNoList:[],productModelList:[],productSpecificationsList:[],order:{id:"",orderNo:"",productModel:"",productNo:"",productSpecifications:"",qualifiedNumber:"",reason:"",testingNumber:"",unqualifiedNumber:"",accessoryList:[],unqualifiedList:[{number:"0",reason:""}]},reasonList:[],recordList:[],fileList:[],fileDetailList:[],processList:[],statusList:{0:"审核不通过",1:"审核通过",3:"流程初始化",4:"未审核"}}},created:function(){this.getReasonList()},methods:{closeLayer:function(){this.layer=!1,this.completeLayer=!1,this.accessoryList=[]},getAccessory:function(t){var s=this;this.accessoryList=[],this.$http.get("/haolifa/flowInstance/flow/accessoryInfo?formNo=".concat(t,"&formId=0")).then((function(t){t.forEach((function(t){""!=t.fileUrl&&s.accessoryList.push(t)}))})).catch((function(t){s.$toast(t.msg||t.message)}))},getOrderStatusList:function(){var t=this;this.$http.get("/haolifa/order-product/order-status-list").then((function(s){t.orderStatusList=s.map((function(t){return{value:t.code,text:t.desc}}))}))},uploadFile:function(t,s){var e=this;this.loading=!0,this.loadingMsg="正在上传",Object(o["a"])(t.source).then((function(s){e.$http.post("/haolifa/file/uploadFileBase64",{base64Source:s,fileName:t.name}).then((function(s){e.order.accessoryList.push({fileName:t.name,fileUrl:s}),e.loading=!1})).catch((function(t){e.$toast(t.msg||t.message),e.loading=!1}))}))},removeFile:function(t,s){var e=this;return new Promise((function(t,s){e.order.accessoryList.splice(index,1),t()}))},getReasonList:function(){var t=this;this.$http.get("/haolifa/pro-inspect/reasonList").then((function(s){t.reasonList=s.map((function(t){return{text:t,value:t}}))})).catch((function(s){t.$toast(s.msg||s.message)}))},progress:function(t){var s=this;this.completeLayer=!0,this.fileList=[],this.reset(),this.order.orderNo=t.orderNo,this.$http.get("/haolifa/order-product/details?orderNo=".concat(t.orderNo)).then((function(t){s.productNoList=t.orderProductAssociates.map((function(t){return{text:t.productNo,value:t.productNo}})),s.productModelList=t.orderProductAssociates.map((function(t){return{text:t.productModel,value:t.productModel}})),s.productSpecificationsList=t.orderProductAssociates.map((function(t){return{text:t.specifications,value:t.specifications}}))})).catch((function(t){s.$toast(t.msg||t.message)})),this.getInfo(t.orderNo),this.getAccessory(t.orderNo)},infoShow:function(t){this.layer=!0,this.getInfo(t.orderNo),this.getAccessory(t.orderNo)},getInfo:function(t){var s=this;this.info={},this.$http.get("/haolifa/order-product/details?orderNo=".concat(t)).then((function(t){s.info=t})).catch((function(t){s.$toast(t.msg||t.message)}));var e={inspectNo:"",orderNo:t,pageNum:1,pageSize:100,storageStatus:0};this.$http.post("/haolifa/pro-inspect/pageInfo",e).then((function(t){s.recordList=t.list,s.recordList.map((function(t){return t.reasonArr=t.reasonList.map((function(t){if(t.number)return"数量:"+t.number+",原因:"+t.reason+";"}))}))})).catch((function(t){s.$toast(t.msg||t.message)})),this.$http.get("/haolifa/order-product/accessory?orderNo=".concat(t)).then((function(t){s.fileDetailList=t})).catch((function(t){s.$toast(t.msg||t.message)})),this.getProcess(t)},getProcess:function(t){var s=this;this.$http.get("/haolifa/flowInstance/flow/progress/?formNo=".concat(t)).then((function(t){s.processList=t})).catch((function(t){s.$toast(t.msg||t.message)}))},close:function(){this.layer=!1},complete:function(){var t=this,s=c({},this.order),e=s.unqualifiedList.map((function(t){return t.number}));s.unqualifiedList=s.unqualifiedList.map((function(t){return{number:t.number,reason:t.reason.toString()}})),s.unqualifiedNumber=e.reduce((function(t,s,e){return parseInt(t)+parseInt(s)})),this.loading=!0,this.$http.post("/haolifa/pro-inspect/save",s).then((function(s){t.$toast("添加成功"),t.loading=!1,t.completeLayer=!1,t.$refs.list.update(!0)})).catch((function(s){t.loading=!1,t.$toast(s.msg||s.message)}))},reset:function(){this.order={id:"",orderNo:"",productModel:"",productNo:"",productSpecifications:"",qualifiedNumber:"",reason:"",testingNumber:"",unqualifiedNumber:"",accessoryList:[],unqualifiedList:[{number:"0",reason:""}]}},addReason:function(){this.order.unqualifiedList.push({number:"0",reason:""})},removeReason:function(t){this.order.unqualifiedList.splice(t,1)}}},u=d,p=(e("c5b0"),e("6691")),m=Object(p["a"])(u,a,i,!1,null,null,null);s["default"]=m.exports},a6b5:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"inspect-product-add"},[e("div",{staticClass:"content"},[e("div",{staticClass:"title b f-18"},[t._v("增加质检单")]),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",attrs:{label:"订单号"},model:{value:t.form.orderNo,callback:function(s){t.$set(t.form,"orderNo",s)},expression:"form.orderNo"}}),e("input-box",{staticClass:"flex-item",attrs:{label:"检测数量"},model:{value:t.form.testingNumber,callback:function(s){t.$set(t.form,"testingNumber",s)},expression:"form.testingNumber"}}),e("input-box",{staticClass:"flex-item",attrs:{label:"合格数"},model:{value:t.form.qualifiedNumber,callback:function(s){t.$set(t.form,"qualifiedNumber",s)},expression:"form.qualifiedNumber"}}),e("input-box",{staticClass:"flex-item",attrs:{label:"不合格数"},model:{value:t.form.unqualifiedNumber,callback:function(s){t.$set(t.form,"unqualifiedNumber",s)},expression:"form.unqualifiedNumber"}})],1),e("div",{staticClass:"b",staticStyle:{margin:"20px 0 10px"}},[t._v("不合格详情")]),t._l(t.form.items,(function(s,a){return e("div",{key:a,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[e("div",{staticClass:"flex-item"},[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"产品型号",hint:"必填"},model:{value:s.productModel,callback:function(e){t.$set(s,"productModel",e)},expression:"item.productModel"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格",hint:"必填"},model:{value:s.productSpecifications,callback:function(e){t.$set(s,"productSpecifications",e)},expression:"item.productSpecifications"}}),e("input-box",{staticClass:" mr-10",attrs:{label:"不合格数",hint:"必填"},model:{value:s.unqualifiedNumber,callback:function(e){t.$set(s,"unqualifiedNumber",e)},expression:"item.unqualifiedNumber"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",attrs:{label:"不合格现象描述"},model:{value:s.reason,callback:function(e){t.$set(s,"reason",e)},expression:"item.reason"}})],1)]),t.form.items.length>1?e("div",[e("icon-btn",{attrs:{small:""},on:{click:function(s){return t.form.items.splice(a,1)}}},[t._v("close")])],1):t._e()])})),e("div",{staticClass:"card a flex-center",on:{click:function(s){return t.addItem()}}},[t._m(0)]),e("div",{staticClass:"flex"},[e("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:t.submit}},[t._v("提交")]),e("btn",{attrs:{big:"",flat:""},on:{click:function(s){return t.$router.back()}}},[t._v("取消")])],1)],2)])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"flex-v-center"},[e("i",{staticClass:"icon mr-10"},[t._v("add")]),e("span",[t._v("添加不合格详情")])])}],r=(e("c041"),e("7cfd"),e("6bf2"),{name:"inspect-product-add",data:function(){return{form:{orderNo:"",testingNumber:"",qualifiedNumber:"",unqualifiedNumber:"",items:[{productModel:"",productSpecifications:"",reason:"",unqualifiedNumber:""}]}}},created:function(){var t=this.$route.query.id;void 0!==t&&"product-edit"===this.$route.name&&this.getInfo(t)},methods:{getInfo:function(t){var s=this;console.log("---"+t),this.$http.get("/haolifa/pro-inspect-res/info/".concat(t)).then((function(e){for(var a in console.log("---"+t),console.log(e),s.form)void 0!==s.form[a]&&(s.form[a]=e[a])})).catch((function(t){s.$toast(t.msg||t.message)}))},addItem:function(){this.form.items.push({productModel:"",productSpecifications:"",reason:"",unqualifiedNumber:""})},submit:function(){var t=this;this.$http.post("/haolifa/pro-inspect-res/save",this.form).then((function(s){t.loading=!1,t.$toast("提交成功"),t.$router.replace("/inspect-product")})).catch((function(s){t.$toast(s.message||s.msg)}))}}}),l=r,o=(e("8f46"),e("6691")),n=Object(o["a"])(l,a,i,!1,null,null,null);s["default"]=n.exports},ba88:function(t,s,e){"use strict";var a=e("fdd9"),i=e.n(a);i.a},c5b0:function(t,s,e){"use strict";var a=e("5555"),i=e.n(a);i.a},c652:function(t,s,e){},d67d:function(t,s,e){},e9aa:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"apply-buy-add"},[e("div",{staticClass:"content"},[e("div",{staticClass:"title b f-18 mb-10"},[t._v(t._s(t.isAdd?"新增":"编辑")+"采购订单")]),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方"},model:{value:t.form.demander,callback:function(s){t.$set(t.form,"demander",s)},expression:"form.demander"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方地址"},model:{value:t.form.demanderAddr,callback:function(s){t.$set(t.form,"demanderAddr",s)},expression:"form.demanderAddr"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系人"},model:{value:t.form.demanderLinkman,callback:function(s){t.$set(t.form,"demanderLinkman",s)},expression:"form.demanderLinkman"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"需方联系电话"},model:{value:t.form.demanderPhone,callback:function(s){t.$set(t.form,"demanderPhone",s)},expression:"form.demanderPhone"}})],1),e("div",{staticClass:"flex"},[e("select-box",{staticStyle:{"margin-right":"20px",width:"240px"},attrs:{list:t.supplierList,label:"供应商"},on:{change:function(s){return t.changeSupplier()}},model:{value:t.form.supplierNo,callback:function(s){t.$set(t.form,"supplierNo",s)},expression:"form.supplierNo"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方地址"},model:{value:t.form.supplierAddr,callback:function(s){t.$set(t.form,"supplierAddr",s)},expression:"form.supplierAddr"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系人"},model:{value:t.form.supplierLinkman,callback:function(s){t.$set(t.form,"supplierLinkman",s)},expression:"form.supplierLinkman"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方联系电话"},model:{value:t.form.suppilerPhone,callback:function(s){t.$set(t.form,"suppilerPhone",s)},expression:"form.suppilerPhone"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"供方确认人"},model:{value:t.form.supplierConfirmer,callback:function(s){t.$set(t.form,"supplierConfirmer",s)},expression:"form.supplierConfirmer"}})],1),e("div",{staticClass:"flex"},[e("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"确认时间"},model:{value:t.form.confirmTime,callback:function(s){t.$set(t.form,"confirmTime",s)},expression:"form.confirmTime"}}),e("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"交货时间"},model:{value:t.form.deliveryTime,callback:function(s){t.$set(t.form,"deliveryTime",s)},expression:"form.deliveryTime"}}),e("date-picker",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办时间"},model:{value:t.form.operateTime,callback:function(s){t.$set(t.form,"operateTime",s)},expression:"form.operateTime"}}),e("input-box",{staticClass:"flex-item",staticStyle:{"margin-right":"20px"},attrs:{label:"经办人"},model:{value:t.form.operatorUserName,callback:function(s){t.$set(t.form,"operatorUserName",s)},expression:"form.operatorUserName"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",attrs:{label:"采购合同编号"},model:{value:t.form.orderNo,callback:function(s){t.$set(t.form,"orderNo",s)},expression:"form.orderNo"}}),e("input-box",{staticClass:"flex-item",attrs:{label:"付款方式"},model:{value:t.form.payType,callback:function(s){t.$set(t.form,"payType",s)},expression:"form.payType"}})],1),e("div",{staticClass:"b",staticStyle:{margin:"20px 0 10px"}},[t._v("采购物料项")]),t._l(t.form.itemList,(function(s,a){return e("div",{key:a,staticClass:"card flex",staticStyle:{"margin-top":"0"}},[e("div",{staticClass:"flex-item"},[e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"物料名称"},model:{value:s.materialName,callback:function(e){t.$set(s,"materialName",e)},expression:"item.materialName"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"物料图号"},model:{value:s.materialGraphNo,callback:function(e){t.$set(s,"materialGraphNo",e)},expression:"item.materialGraphNo"}}),e("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"数量"},model:{value:s.number,callback:function(e){t.$set(s,"number",e)},expression:"item.number"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"单位"},model:{value:s.unit,callback:function(e){t.$set(s,"unit",e)},expression:"item.unit"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"材质"},model:{value:s.material,callback:function(e){t.$set(s,"material",e)},expression:"item.material"}}),e("input-box",{staticClass:"flex-item mr-10",attrs:{label:"规格"},model:{value:s.specification,callback:function(e){t.$set(s,"specification",e)},expression:"item.specification"}}),e("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单价"},model:{value:s.unitPrice,callback:function(e){t.$set(s,"unitPrice",e)},expression:"item.unitPrice"}}),e("input-box",{staticClass:"mr-10",attrs:{type:"number",label:"单重"},model:{value:s.unitWeight,callback:function(e){t.$set(s,"unitWeight",e)},expression:"item.unitWeight"}})],1),e("div",{staticClass:"flex"},[e("input-box",{staticClass:"flex-item",attrs:{label:"备注"},model:{value:s.remark,callback:function(e){t.$set(s,"remark",e)},expression:"item.remark"}})],1)])])})),e("div",{staticClass:"flex"},[e("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(s){return t.submit()}}},[t._v("提交")]),e("btn",{attrs:{big:"",flat:""},on:{click:function(s){return t.$router.back()}}},[t._v("取消")])],1)],2)])},i=[],r=(e("cc1d"),e("4634"),{name:"order-purchaseAdd",data:function(){return{supplierInfoList:[],supplierList:[],form:{id:null,confirmTime:"",deliveryTime:"",demander:"山西好利阀机械制造有限公司",demanderAddr:"山西省侯马经济开发区旺旺北支路东侧",demanderLinkman:"",demanderPhone:"",operateTime:"",operatorUserName:"",orderNo:"",suppilerPhone:"",supplierAddr:"",supplierConfirmer:"",supplierLinkman:"",supplierName:"",supplierNo:"",payType:"",itemList:[{id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}]},isAdd:!0,nameList:[],tuhaoList:[],ids:[]}},mounted:function(){var t=this;this.ids=this.$route.params.ids;for(var s=this.$route.params.list,e=1;e<s.length;e++)this.form.itemList.push({id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0});s.forEach((function(s,e){t.form.itemList[e].materialGraphNo=s.materialGraphNo,t.form.itemList[e].materialName=s.materialName,t.form.itemList[e].number=s.purchaseNumber}));var a=[];a=this.$route.params.supList,this.supplierList=a.map((function(t){return{value:t.suppilerNo,text:t.supplierName}})),this.supplierInfoList=a},methods:{changeSupplier:function(){var t=this;this.supplierInfoList.forEach((function(s,e){s.suppilerNo==t.form.supplierNo&&(t.form.suppilerPhone=s.phone,t.form.supplierAddr=s.address,t.form.supplierLinkman=s.responsiblePerson,t.form.supplierName=s.supplierName)}))},addItem:function(){this.form.itemList.push({id:"",material:"",materialGraphNo:"",materialName:"",number:0,remark:"",specification:"",unit:"",unitPrice:0,unitWeight:0}),this.$forceUpdate()},submit:function(){var t=this,s={materialName:"物料名称",materialGraphNo:"物料图号",number:"数量",material:"材质",specification:"规格",unit:"单位",unitPrice:"单价",unitWeight:"单重"};if(this.form.supplierNo){var e=!0;this.form.itemList.forEach((function(a,i){for(var r in a)s[r]&&!a[r]&&(t.$toast("请填写第 ".concat(i+1," 项 ").concat(s[r])),e=!1)})),e&&(this.form.applyBuyIds=this.ids,this.$http.post("/haolifa/purchase-order/save/0/"+this.ids.toString(),this.form).then((function(s){t.$toast("创建成功"),t.$router.push("/applyBuy-order")})).catch((function(s){t.$toast(s.message||s.msg)})))}else this.$toast("请选择供应商")}}}),l=r,o=(e("ba88"),e("6691")),n=Object(o["a"])(l,a,i,!1,null,null,null);s["default"]=n.exports},fdd9:function(t,s,e){}}]);
//# sourceMappingURL=diliversyedit.40f36184.js.map